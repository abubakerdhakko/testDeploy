{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/manage-asset-category/AssetCategory.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/manage-asset-category/AssetCategory.vue","mtime":1661968702440},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/babel.config.js","mtime":1661968702388},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":1662622637719},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1662622639723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1leGNlcHRpb24uc3RhY2suanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5hdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC50eXBlZC1hcnJheS5maW5kLWxhc3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQudHlwZWQtYXJyYXkuZmluZC1sYXN0LWluZGV4LmpzIjsKaW1wb3J0IEVuZHBvaW50cyBmcm9tICIuLi8uLi9zZXJ2aWNlcy9FbmRQb2ludHMiOwppbXBvcnQgYXNzZXRQZXJzb25uZWxTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL0Fzc2V0UGVyc29ubmVsU2VydmljZSI7CmltcG9ydCB7IEFzc2V0TWFuYWdlbWVudFNlcnZpY2UgfSBmcm9tICIuLi8uLi9zZXJ2aWNlcy9Bc3NldE1hbmFnZW1lbnRTZXJ2aWNlIjsKaW1wb3J0IERlbGV0ZURpYWxvZyBmcm9tICIuLi8uLi9jb21wb25lbnRzL0RlbGV0ZURpYWxvZyI7CmltcG9ydCBBcmNoaXZlRGlhbG9nIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvQXJjaGl2ZURpYWxvZyI7CmltcG9ydCBBcmNoaXZlZEFzc2V0Q2F0ZSBmcm9tICIuL2NvbXBvbmVudHMvQXJjaGl2ZWRBc3NldHNDYXRlLnZ1ZSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IGxvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvTG9hZGVyLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXNzZXRzIiwKICBjb21wb25lbnRzOiB7CiAgICBEZWxldGVEaWFsb2csCiAgICBBcmNoaXZlRGlhbG9nLAogICAgbG9hZGVyLAogICAgQXJjaGl2ZWRBc3NldENhdGUKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdG9hc3RGbGFnOiAwLAogICAgICB0b2FzdE1lc3NhZ2U6ICIiLAogICAgICB0b2FzdFR5cGU6ICIiLAogICAgICBsb2FkZXJGbGFnOiBmYWxzZSwKICAgICAgZGVsZXRlSW5zcGVjdGlvbkRpYWxvZzogZmFsc2UsCiAgICAgIGFyY2hpdmVJbnNwZWN0aW9uRGlhbG9nOiBmYWxzZSwKICAgICAgbmV3SXNzdWU6IGZhbHNlLAogICAgICBhZGRTZXJ2aWNlRGlhbG9nOiBmYWxzZSwKICAgICAgYXNzZXRVVUlEOiAiIiwKICAgICAgcmVzZXRUYWJsZTogMCwKICAgICAgYXNzZXRPYmo6ICIiLAogICAgICAvLyAtLS0tLS0tLS0tLS0tIEFzc2V0cyBTRFQgRGF0YSBTVEFSVCAtLS0tLS0tLS0tLS0tLS0tCiAgICAgIHNkdF90b2tlbjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpLmFjY2Vzc190b2tlbiwKICAgICAgdXNlcjogIiIsCiAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgaXNMb2FkaW5nUGFnZTogZmFsc2UsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIHByb21wdDogZmFsc2UsCiAgICAgIHByb21wdFZpZXdOYW1lOiAiIiwKICAgICAgc2VydmVyRGF0YTogIiIsCiAgICAgIGZpbHRlckZpZWxkTGlzdDogW10sCiAgICAgIGV2ZW50RGF0YTogIiIsCiAgICAgIGluZGV4S2V5OiAwLAogICAgICBwYXJlbnRTeXN0ZW1TZXR0aW5nczogewogICAgICAgIHNlcnZpY2VVUkw6IEVuZHBvaW50cy5wcmVmZXJlbmNlU2VydmljZS5wcmVmZXJlbmNlLAogICAgICAgIC8vIHNlcnZpY2VVUkw6ICJodHRwOi8vbG9jYWxob3N0OjgwOTkvcHJlZmVyZW5jZXMiLAogICAgICAgIGJ1dHRvbnM6IFtdLAogICAgICAgIHNlYXJjaFZhbHVlOiAiIiwKICAgICAgICBoZWlnaHQ6ICI5NTBweCIsCiAgICAgICAgc2VsZWN0aW9uQ29sdW1uOiB0cnVlLAogICAgICAgIHNlbGVjdFR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgbW9yZU9wdGlvbnM6IFtdLAogICAgICAgIGFjdGlvbnNPcHRpb25zOiBbIlZpZXciLCAiRWRpdCIsICJBcmNoaXZlIiwgIkFkZCBBc3NldCIgLy8gIkRlbGV0ZSIsCiAgICAgICAgXSwKICAgICAgICBjb2x1bW5JY29uczogW10sCiAgICAgICAgcGlsbENvbmZpZzogW3sKICAgICAgICAgIGNvbHVtbjogIiIsCiAgICAgICAgICBzdGF0ZTogInN1Y2Nlc3MiLAogICAgICAgICAgZGF0YTogIiIKICAgICAgICB9LCB7CiAgICAgICAgICBjb2x1bW46ICIiLAogICAgICAgICAgc3RhdGU6ICJlcnJvciIsCiAgICAgICAgICBkYXRhOiAiIgogICAgICAgIH0sIHsKICAgICAgICAgIGNvbHVtbjogIiIsCiAgICAgICAgICBzdGF0ZTogIm5vcm1hbCIsCiAgICAgICAgICBkYXRhOiAiIgogICAgICAgIH1dLAogICAgICAgIHN0YXRpY0NvbHVtbnM6IFtdLAogICAgICAgIHVzZXI6ICIiLAogICAgICAgIHVwcGVyY2FzZUNvbHVtbnM6IFtdLAogICAgICAgIC8vIHBhc3MgY29sdW1uIG5hbWUgd2hvc2UgZGF0YSBzaG91bGQgYmUgc2hvd24gaW4gY2FwcwogICAgICAgIGRhdGVGb3JtYXQ6ICJERC9NTS95eXl5IGhoOm1tIGEiIC8vcGFzcyBhbnkgbW9tZW50IGRhdGUgZm9ybWF0IGhlcmUKCiAgICAgIH0sCiAgICAgIHBhcmVudERlZmF1bHRTeXN0ZW1WaWV3OiB7CiAgICAgICAgdmlld05hbWVzOiBbewogICAgICAgICAgbmFtZTogIkRlZmF1bHQgVmlldyIsCiAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAxLAogICAgICAgICAgcHJpdmFjeTogInByaXZhdGUiCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIkFkZCBBIFZpZXcgVGlsZSIsCiAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAwLAogICAgICAgICAgcHJpdmFjeTogInByaXZhdGUiCiAgICAgICAgfV0sCiAgICAgICAgZGVmYXVsdFRhYmxlOiB7CiAgICAgICAgICBpZDogbnVsbCwKICAgICAgICAgIHZpZXdOYW1lOiAiRGVmYXVsdCBWaWV3IiwKICAgICAgICAgIGRlbnNpdHk6ICJzbSIsCiAgICAgICAgICBwYWdlU2l6ZTogIjUwIiwKICAgICAgICAgIHBhZ2VOYW1lOiAiYXNzZXRzIiwKICAgICAgICAgIHVzZXI6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKS5wcm9maWxlLnVzZXJuYW1lLAogICAgICAgICAgZGVmYXVsdFZpZXdGbGFnOiB0cnVlLAogICAgICAgICAgc29ydEZpZWxkOiAiIiwKICAgICAgICAgIHNvcnREaXJlY3Rpb246ICIiLAogICAgICAgICAgdGlsZUZsYWc6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbjogMSwKICAgICAgICAgIC8vIGFsd2F5cyBwYXNzIDEKICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIGNvbHVtbnM6IFtdCiAgICAgICAgfQogICAgICB9LAogICAgICBwYXJlbnREYXRhOiBbXSwKICAgICAgZmlsdGVyQ291bnQ6ICIiLAogICAgICAvLyAtLS0tLS0tLS0tLS0tIEFzc2V0cyBTRFQgRGF0YSBFTkQgLS0tLS0tLS0tLS0tLS0tLQogICAgICBpbnNwZWN0aW9uczogW10sCiAgICAgIG9yZ0NvbmZpZ3NSZXNwb25zZTogbnVsbCwKICAgICAgYXNzZXRUeXBlOiAiYXNzZXQiLAogICAgICBhc3NldE9wdGlvbnM6IFt7CiAgICAgICAgbGFiZWw6ICJDYXRlZ29yaWVzIiwKICAgICAgICB2YWx1ZTogImFzc2V0IgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICJBcmNoaXZlZCIsCiAgICAgICAgdmFsdWU6ICJhcmNoaXZlZEFzc2V0cyIKICAgICAgfV0sCiAgICAgIGFzc2V0T3B0aW9uOiAiYXNzZXQiLAogICAgICBjdXJyZW50VXNlckRldGFpbHM6ICIiLAogICAgICBhc3NldENhdGVnb3J5T3B0aW9uczogW10sCiAgICAgIHZpZXdBc3NldEdyb3VwRGlhbG9nOiBmYWxzZSwKICAgICAgYXNzZXRHcm91cENvbmZpZ3M6ICIiLAogICAgICBhcmNoaXZlZEFzc2V0c0NvbmZpZ3M6ICIiLAogICAgICB0YWJsZUNvbmZpZzI6IG51bGwsCiAgICAgIGN1cnJlbmN5OiAiIiwKICAgICAgc2R0RGF0YTogIiIsCiAgICAgIG9wZW5BZGRQb3BVcDogZmFsc2UsCiAgICAgIGV4cG9ydEZsYWc6IGZhbHNlLAogICAgICBvcHQ6IFtdLAogICAgICBvcGVuVXBkYXRlUG9wVXA6IGZhbHNlLAogICAgICBpbXBvcnRUeXBlOiAiQWRkIiwKICAgICAgZmllbGROYW1lczogW10sCiAgICAgIGNvbHVtbnM6IFtdCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZUFzc2V0Q2F0ZVRlbXBsYXRlKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogImNyZWF0ZS1hc3NldC1jYXRlZ29yeSIKICAgICAgfSk7CiAgICB9LAoKICAgIG9wZW5DcmVhdGVDYXRlZ29yeSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJjcmVhdGUtYXNzZXQtY2F0ZWdvcnkiCiAgICAgIH0pOwogICAgfSwKCiAgICBpbXBvcnRPcHRpb24odmFsKSB7CiAgICAgIGlmICh2YWwgPT09ICJhZGQiKSB7CiAgICAgICAgdGhpcy5vcGVuQWRkUG9wVXAgPSB0cnVlOwogICAgICAgIHRoaXMuaW1wb3J0VHlwZSA9ICJBZGQiOwogICAgICB9IGVsc2UgaWYgKHZhbCA9PT0gInVwZGF0ZSIpIHsKICAgICAgICB0aGlzLm9wZW5BZGRQb3BVcCA9IHRydWU7CiAgICAgICAgdGhpcy5pbXBvcnRUeXBlID0gIlVwZGF0ZSI7CiAgICAgIH0gZWxzZSBpZiAodmFsID09PSAiZXhpc3RpbmciKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogImV4aXN0aW5nLXRlbXBsYXRlcyIKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh2YWwgPT09ICJoaXN0b3J5IikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJsYXN0LWltcG9ydC1yZWNvcmRzIgogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIGNsb3NlQWRkUG9wdXAoKSB7CiAgICAgIHRoaXMub3BlbkFkZFBvcFVwID0gZmFsc2U7CiAgICB9LAoKICAgIHJlZnJlc2hUYWJsZSgpIHsKICAgICAgdGhpcy5vcGVuQWRkUG9wVXAgPSBmYWxzZTsKICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgIH0sCgogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuZGVsZXRlSW5zcGVjdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmFyY2hpdmVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuZXhwb3J0RmxhZyA9IGZhbHNlOwogICAgfSwKCiAgICBkaXNwbGF5TWVzc2FnZSgpIHsKICAgICAgdGhpcy5zaG93VG9hc3QoIklzc3VlIENyZWF0ZWQgU3VjY2Vzc2Z1bGx5LiIsICJzdWNjZXNzIik7CiAgICB9LAoKICAgIGRlbGV0ZURpYWxvZygpIHsKICAgICAgdGhpcy5kZWxldGVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMubG9hZGVyID0gdHJ1ZTsKICAgICAgQXNzZXRNYW5hZ2VtZW50U2VydmljZS5EZWxldGVBc3NldENhdGUodGhpcy5hc3NldFVVSUQsICJkZWxldGUiKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHRoaXMubG9hZFRhYmxlKHRoaXMuc2R0RGF0YSk7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiVGVtcGxhdGUgQXNzZXQgRGVsZXRlZCBTdWNjZXNzZnVsbHkiLCAic3VjY2VzcyIpOwogICAgICAgICAgdGhpcy5kZWxldGVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmxvYWRlciA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLCAiZXJyb3IiKTsKICAgICAgfSk7CiAgICB9LAoKICAgIGFyY2hpdmVEaWFsb2coKSB7CiAgICAgIHRoaXMubG9hZGVyID0gZmFsc2U7CiAgICAgIHRoaXMuZGVsZXRlSW5zcGVjdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmFyY2hpdmVPckRlbGV0ZUFzc2V0Q2F0ZSh0aGlzLmFzc2V0VVVJRCwgImFyY2hpdmVkIikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkNhdGVnb3J5IEFyY2hpdmVkIFN1Y2Nlc3NmdWxseSIsICJzdWNjZXNzIik7CiAgICAgICAgICB0aGlzLmFyY2hpdmVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmxvYWRlciA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLCAiZXJyb3IiKTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIC0tLS0tLS0tLS0tLSBBc3NldHMgU0RUIEZ1bmN0aW9ucyBTVEFSVCAtLS0tLS0tLS0tLS0tLQogICAgZ2V0QWN0aW9uc09wdGlvbih2YWwpIHsKICAgICAgaWYgKHZhbC52YWx1ZSA9PSAiVmlldyIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiZGV0YWlsLWFzc2V0LWNhdGVnb3J5IiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICB2aWV3RmxhZzogdHJ1ZSwKICAgICAgICAgICAgYXNzZXRDYXRlSUQ6IHZhbC5yb3cudXVpZAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PSAiRWRpdCIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiZWRpdC1hc3NldC1jYXRlZ29yeSIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgZWRpdEZsYWc6IHRydWUsCiAgICAgICAgICAgIGFzc2V0Q2F0ZUlEOiB2YWwucm93LnV1aWQKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh2YWwudmFsdWUgPT0gIkFkZCBBc3NldCIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiY3JlYXRlLWFzc2V0LWJ5LWNhdGVnb3J5IiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBBZGRCeUNhdGVGbGFnOiB0cnVlLAogICAgICAgICAgICBhc3NldENhdGVJRDogdmFsLnJvdy51dWlkLAogICAgICAgICAgICBzbHVnOiAnQWRkLUFzc2V0QnktQ2F0ZScKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh2YWwudmFsdWUgPT0gIkFyY2hpdmUiKSB7CiAgICAgICAgdGhpcy5hc3NldFVVSUQgPSB2YWwucm93LnV1aWQ7CiAgICAgICAgdGhpcy5hcmNoaXZlSW5zcGVjdGlvbkRpYWxvZyA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09ICJEZWxldGUiKSB7CiAgICAgICAgdGhpcy5hc3NldFVVSUQgPSB2YWwucm93LnV1aWQ7CiAgICAgICAgdGhpcy5kZWxldGVJbnNwZWN0aW9uRGlhbG9nID0gdHJ1ZTsKICAgICAgfQogICAgfSwKCiAgICBjb252ZXJ0VG9DU1Yob2JqQXJyYXkpIHsKICAgICAgdmFyIGFycmF5ID0gdHlwZW9mIG9iakFycmF5ICE9ICJvYmplY3QiID8gSlNPTi5wYXJzZShvYmpBcnJheSkgOiBvYmpBcnJheTsKICAgICAgdmFyIHN0ciA9ICIiOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBsaW5lID0gIiI7CgogICAgICAgIGZvciAodmFyIGluZGV4IGluIGFycmF5W2ldKSB7CiAgICAgICAgICBpZiAobGluZSAhPSAiIikgbGluZSArPSAiLCI7CiAgICAgICAgICBsaW5lICs9IGFycmF5W2ldW2luZGV4XTsKICAgICAgICB9CgogICAgICAgIHN0ciArPSBsaW5lICsgIlxyXG4iOwogICAgICB9CgogICAgICByZXR1cm4gc3RyOwogICAgfSwKCiAgICBnZXREb3dubG9hZEFzT3B0aW9uKG9wdCkgewogICAgICBpZiAob3B0LnJvd3MgPT0gIiIpIHsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiUGxlYXNlIFNlbGVjdCBSZWNvcmQocykiLCAid2FybmluZyIpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChvcHQub3B0aW9uID09ICJwZGYiKSB7CiAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOyAvLyBhZGRpbmcgY3VzdG9tZXIgZGV0YWlscwoKICAgICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICAgIHJvd3M6IG9wdC5yb3dzLAogICAgICAgICAgICBvcHRpb246IG9wdC5vcHRpb24sCiAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgICAgICAgICBvcmdhbml6YXRpb25OYW1lOiAiRXJvaGFsIiwKICAgICAgICAgICAgY29sdW1uczogdGhpcy5jb2x1bW5zCiAgICAgICAgICB9OwogICAgICAgICAgbGV0IG9iamVjdCA9IG9iai5yb3dzOwogICAgICAgICAgb2JqLnJvd3MgPSBvYmplY3Q7CiAgICAgICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmRvd25sb2FkU2VsZWN0ZWRQREYob2JqKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgICBsZXQgZmlsZUNvbnRlbnRzID0gbnVsbDsKICAgICAgICAgICAgbGV0IHBvcHVwV2luID0gbnVsbDsKICAgICAgICAgICAgcG9wdXBXaW4gPSB3aW5kb3cub3BlbigiIiwgIl9ibGFuayIsICJ0b3A9MCxsZWZ0PTAsaGVpZ2h0PTcwMCx3aWR0aD0xMDAwOyIpOwogICAgICAgICAgICBsZXQgZG9jdW1lbnQgPSB7CiAgICAgICAgICAgICAgZG9jdW1lbnROYW1lOiAiQXNzZXRzIgogICAgICAgICAgICB9OwogICAgICAgICAgICBmaWxlQ29udGVudHMgPSByZXMuZGF0YS50eXBlICsgcmVzLmRhdGEuY29udGVudDsKICAgICAgICAgICAgcG9wdXBXaW4uZG9jdW1lbnQud3JpdGUoYAogICAgICAgICAgICA8aHRtbD4KICAgICAgICAgICAgICAgIDxoZWFkPgogICAgICAgICAgICAgICAgIDwhLS10aXRsZT5QcmludCB0YWI8L3RpdGxlLS0+CiAgICAgICAgICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgICAgICAgICAjYnV0dG9uc3tkaXNwbGF5Om5vbmU7fQogICAgICAgICAgICAgICAgICAgICAgICAgYm9keSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogIk9wZW4gU2FucyIsIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgIlNlZ29lIFVJIiwgRXVjbGlkIENpcmN1bGFyIEIsICJIZWx2ZXRpY2EgTmV1ZSIsIEFyaWFsLCBzYW5zLXNlcmlmLCAiQXBwbGUgQ29sb3IgRW1vamkiLCAiU2Vnb2UgVUkgRW1vamkiLCAiU2Vnb2UgVUkgU3ltYm9sIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMyMTI1Mjk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBidXR0b24sIG1ldGVyLCBwcm9ncmVzcyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXdyaXRpbmctbW9kZTogaG9yaXpvbnRhbC10YiAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0LCBidXR0b24gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1yZW5kZXJpbmc6IGF1dG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogaW5pdGlhbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiBub3JtYWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkLXNwYWNpbmc6IG5vcm1hbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1pbmRlbnQ6IDBweDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogc3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDBlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IDQwMCAxMy4zMzMzcHggQXJpYWw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRbdHlwZT0iYnV0dG9uIiBpXSwgaW5wdXRbdHlwZT0ic3VibWl0IiBpXSwgaW5wdXRbdHlwZT0icmVzZXQiIGldLCBpbnB1dFt0eXBlPSJmaWxlIiBpXTo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b24sIGJ1dHRvbiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogZGVmYXVsdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBidXR0b250ZXh0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogYnV0dG9uZmFjZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4IDNweDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci13aWR0aDogMnB4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXN0eWxlOiBvdXRzZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IGJ1dHRvbmZhY2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItaW1hZ2U6IGluaXRpYWw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsIGJ1dHRvbiwgc2VsZWN0LCBvcHRncm91cCwgdGV4dGFyZWEgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IGluaGVyaXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogaW5oZXJpdDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBidXR0b24sIHNlbGVjdCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAuYnRuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuMzc1cmVtIDAuNzVyZW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJvcmRlci1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm94LXNoYWRvdyAwLjE1cyBlYXNlLWluLW91dDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAuYnRuLW91dGxpbmUtcHJpbWFyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwN2JmZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzAwN2JmZjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAuYnRuLW91dGxpbmUtcHJpbWFyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogI2QwMzIzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkMDMyMzI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlPi5mYSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiBub3JtYWwgbm9ybWFsIG5vcm1hbCAxNHB4LzEgRm9udEF3ZXNvbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IGluaGVyaXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LXJlbmRlcmluZzogYXV0bzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTsKICAgICAgICAgICAgICAgICAgICAgICAgfTwvc3R5bGU+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZT4qLCAqOjpiZWZvcmUsICo6OmFmdGVyIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgU3R5bGUgQXR0cmlidXRlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAuYnRuLCAuZm9ybS1jb250cm9sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuMjVyZW0gMC41cmVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjNyZW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDE1cHg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIzcHg7CiAgICAgICAgICAgICAgICAgICAgICAgIH08L3N0eWxlPgogICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgICAgICA8L2hlYWQ+CiAgICAgICAgICAgICAgICA8Ym9keSBvbmxvYWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiID4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iJHtmaWxlQ29udGVudHN9IiBkb3dubG9hZD0iJHtkb2N1bWVudC5kb2N1bWVudE5hbWV9Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXByaW1hcnkiPkRvd25sb2FkPC9idXR0b24+PC9hPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIHNyYz0nJHtmaWxlQ29udGVudHN9JyAgc3R5bGU9Im1pbi13aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7IiA+PC9pZnJhbWU+CiAgICAgICAgICAgICAgICA8L2JvZHk+CiAgICAgICAgICAgIDwvaHRtbD5gKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAob3B0Lm9wdGlvbiA9PSAiY3N2IikgewogICAgICAgICAgaWYgKHRoaXMub3B0Lmxlbmd0aCA8PSAwKSB7CiAgICAgICAgICAgIHRoaXMudG9hc3RNZXNzYWdlID0gIktpbmRseSBTZWxlY3QgQXNzZXRzIHRvIEV4cG9ydC4iOwogICAgICAgICAgICB0aGlzLnRvYXN0VHlwZSA9ICJ3YXJuaW5nIjsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMudG9hc3RGbGFnKys7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmV4cG9ydEZsYWcgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NCkgewogICAgICB2YXIgYmluYXJ5U3RyaW5nID0gd2luZG93LmF0b2IoYmFzZTY0KTsKICAgICAgdmFyIGJpbmFyeUxlbiA9IGJpbmFyeVN0cmluZy5sZW5ndGg7CiAgICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJpbmFyeUxlbik7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJpbmFyeUxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGFzY2lpID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgYnl0ZXNbaV0gPSBhc2NpaTsKICAgICAgfQoKICAgICAgcmV0dXJuIGJ5dGVzOwogICAgfSwKCiAgICBleHBvcnREYXRhKHZhbCkgewogICAgICBpZiAodmFsID09PSAidGFibGUiKSB7CiAgICAgICAgdGhpcy5zaW1wbGVFeHBvcnQodGhpcy5vcHQpOwogICAgICAgIHRoaXMuZXhwb3J0RmxhZyA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZG93bkxvYWREZXRhaWxlZENzdih0aGlzLm9wdCk7CiAgICAgICAgdGhpcy5leHBvcnRGbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgZG93bkxvYWREZXRhaWxlZENzdihvcHQpIHsKICAgICAgbGV0IGFzc2V0VVVJRFMgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYXNzZXQgPSBvcHRbaV07CiAgICAgICAgYXNzZXRVVUlEUy5wdXNoKGFzc2V0LnV1aWQpOwogICAgICB9CgogICAgICBsZXQgcmVxdWVzdCA9IHsKICAgICAgICBhc3NldFVVSURTOiBhc3NldFVVSURTLAogICAgICAgIHRlbmFudFVVSUQ6IHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQKICAgICAgfTsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgQXNzZXRNYW5hZ2VtZW50U2VydmljZS5leHBvcnRBc3NldHNJbkJ1bGsocmVxdWVzdCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDAgJiYgcmVzLmRhdGEucmVzcG9uc2VJZGVudGlmaWVyID09PSAiU3VjY2VzcyIpIHsKICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgdmFyIHNhbXBsZUFycmF5ID0gdGhpcy5iYXNlNjRUb0FycmF5QnVmZmVyKHJlcy5kYXRhLmNvbnRlbnQpOwogICAgICAgICAgbGV0IGZpbGVVcmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbc2FtcGxlQXJyYXldLCB7CiAgICAgICAgICAgIHR5cGU6ICJ0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04OyIKICAgICAgICAgIH0pKTsKICAgICAgICAgIHZhciBmaWxlTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgIGZpbGVMaW5rLmhyZWYgPSBmaWxlVXJsOwogICAgICAgICAgZmlsZUxpbmsuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsIHJlcy5kYXRhLmZpbGVOYW1lKTsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZmlsZUxpbmspOwogICAgICAgICAgZmlsZUxpbmsuY2xpY2soKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiQW4gVW5leHBlY3RlZCBFcnJvciBvY2N1cnJlZCB3aGlsZSBkb3dubG9hZGluZyBpbXBvcnQgdGVtcGxhdGVzLiIsICJlcnJvciIpOwogICAgICB9KTsKICAgIH0sCgogICAgc2ltcGxlRXhwb3J0KG9wdCkgewogICAgICBsZXQgZmlsZVRpdGxlID0gIkFzc2V0cyI7CiAgICAgIGxldCBoZWFkZXJzID0gewogICAgICAgIC8vIGNyZWF0ZWREYXRlOiAnUmVxdWVzdGVkIE9uJy5yZXBsYWNlKC8sL2csICcnKSwgLy8gcmVtb3ZlIGNvbW1hcyB0byBhdm9pZCBlcnJvcnMKICAgICAgICBhc3NldE51bWJlcjogIkFzc2V0IE51bWJlciIsCiAgICAgICAgbmFtZTogIk5hbWUiLAogICAgICAgIGNhdGVnb3J5OiAiQ2F0ZWdvcnkiLAogICAgICAgIGFzc2lnbmVlczogIkFzc2lnbmVkIFRvIiwKICAgICAgICBzdGF0dXM6ICJTdGF0dXMiLAogICAgICAgIGNvc3Q6ICJNYWludGFpbmVuY2UgQ29zdCIgKyAiICgiICsgdGhpcy5jdXJyZW5jeSArICIpIiwKICAgICAgICBvcGVuSXNzdWVzOiAiT3BlbiBJc3N1ZXMiLAogICAgICAgIGFzc2lnbmVkSXNzdWVzOiAiQXNzaWduZWQgSXNzdWVzIiwKICAgICAgICByZXBhaXJzOiAiUmVwYWlycyIsCiAgICAgICAgd29ya09yZGVyczogIldvcmsgT3JkZXJzIgogICAgICB9OwogICAgICBsZXQgZGF0YU9iaiA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHQubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBhc3NldCA9IG9wdFtpXTsKICAgICAgICBkYXRhT2JqLnB1c2goewogICAgICAgICAgYXNzZXROdW1iZXI6IGFzc2V0LmFzc2V0TnVtYmVyICE9PSBudWxsICYmIGFzc2V0LmFzc2V0TnVtYmVyICE9PSAiIiA/IGFzc2V0LmFzc2V0TnVtYmVyIDogIiIsCiAgICAgICAgICBuYW1lOiBhc3NldC5uYW1lICE9PSBudWxsICYmIGFzc2V0Lm5hbWUgIT09ICIiID8gYXNzZXQubmFtZSA6ICIiLAogICAgICAgICAgY2F0ZWdvcnk6IGFzc2V0LmNhdGVnb3J5TmFtZSAhPT0gbnVsbCAmJiBhc3NldC5jYXRlZ29yeU5hbWUgIT09ICIiID8gYXNzZXQuY2F0ZWdvcnlOYW1lIDogIiIsCiAgICAgICAgICBhc3NpZ25lZXM6IGFzc2V0LmFzc2lnbmVkVG8gIT09IG51bGwgJiYgYXNzZXQuYXNzaWduZWRUbyAhPT0gIiIgPyBhc3NldC5hc3NpZ25lZFRvLnJlcGxhY2UoLywvZywgIiAiKSA6ICIiLAogICAgICAgICAgc3RhdHVzOiBhc3NldC5zdGF0dXMgIT09IG51bGwgJiYgYXNzZXQuc3RhdHVzICE9PSAiIiA/IGFzc2V0LnN0YXR1cyA6ICIiLAogICAgICAgICAgY29zdDogYXNzZXQubWFpbnRlbmFuY2VDb3N0ICE9PSBudWxsICYmIGFzc2V0Lm1haW50ZW5hbmNlQ29zdCAhPT0gIiIgPyBhc3NldC5tYWludGVuYW5jZUNvc3QgOiAwLAogICAgICAgICAgb3Blbklzc3VlczogYXNzZXQub3Blbklzc3VlcyAhPT0gbnVsbCAmJiBhc3NldC5vcGVuSXNzdWVzICE9PSAiIiA/IGFzc2V0Lm9wZW5Jc3N1ZXMgOiAwLAogICAgICAgICAgYXNzaWduZWRJc3N1ZXM6IGFzc2V0LmFzc2lnbmVkSXNzdWVzICE9PSBudWxsICYmIGFzc2V0LmFzc2lnbmVkSXNzdWVzICE9PSAiIiA/IGFzc2V0LmFzc2lnbmVkSXNzdWVzIDogMCwKICAgICAgICAgIHJlcGFpcnM6IGFzc2V0LnJlcGFpcnMgIT09IG51bGwgJiYgYXNzZXQucmVwYWlycyAhPT0gIiIgPyBhc3NldC5yZXBhaXJzIDogMCwKICAgICAgICAgIHdvcmtPcmRlcnM6IGFzc2V0LndvcmtvcmRlcnMgIT09IG51bGwgJiYgYXNzZXQud29ya29yZGVycyAhPT0gIiIgPyBhc3NldC53b3Jrb3JkZXJzIDogMAogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmV4cG9ydENTVkZpbGUoaGVhZGVycywgZGF0YU9iaiwgZmlsZVRpdGxlKTsKICAgIH0sCgogICAgZXhwb3J0Q1NWRmlsZShoZWFkZXJzLCBhc3NldERhdGEsIGZpbGVUaXRsZSkgewogICAgICBpZiAoaGVhZGVycykgewogICAgICAgIGFzc2V0RGF0YS51bnNoaWZ0KGhlYWRlcnMpOwogICAgICB9IC8vIENvbnZlcnQgT2JqZWN0IHRvIEpTT04KCgogICAgICB2YXIganNvbk9iamVjdCA9IEpTT04uc3RyaW5naWZ5KGFzc2V0RGF0YSk7CiAgICAgIHZhciBjc3YgPSB0aGlzLmNvbnZlcnRUb0NTVihqc29uT2JqZWN0KTsKICAgICAgdmFyIGV4cG9ydGVkRmlsZW5tYWUgPSBmaWxlVGl0bGUgKyAiLmNzdiIgfHwgImV4cG9ydC5jc3YiOwogICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3ZdLCB7CiAgICAgICAgdHlwZTogInRleHQvY3N2O2NoYXJzZXQ9dXRmLTg7IgogICAgICB9KTsKCiAgICAgIGlmIChuYXZpZ2F0b3IubXNTYXZlQmxvYikgewogICAgICAgIC8vIElFIDEwKwogICAgICAgIG5hdmlnYXRvci5tc1NhdmVCbG9iKGJsb2IsIGV4cG9ydGVkRmlsZW5tYWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwoKICAgICAgICBpZiAobGluay5kb3dubG9hZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvLyBmZWF0dXJlIGRldGVjdGlvbgogICAgICAgICAgLy8gQnJvd3NlcnMgdGhhdCBzdXBwb3J0IEhUTUw1IGRvd25sb2FkIGF0dHJpYnV0ZQogICAgICAgICAgdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHVybCk7CiAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBleHBvcnRlZEZpbGVubWFlKTsKICAgICAgICAgIGxpbmsuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIHNldFRhYmxlQ29uZmlncygpIHsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuZGVuc2l0eSA9IHRoaXMudGFibGVDb25maWcuZGVuc2l0eTsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUucGFnZVNpemUgPSB0aGlzLnRhYmxlQ29uZmlnLnBhZ2VTaXplOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5wYWdlTmFtZSA9IHRoaXMudGFibGVDb25maWcucGFnZU5hbWU7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnNvcnRGaWVsZCA9IHRoaXMudGFibGVDb25maWcuc29ydEZpZWxkOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5zb3J0RGlyZWN0aW9uID0gdGhpcy50YWJsZUNvbmZpZy5zb3J0RGlyZWN0aW9uOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5jb2x1bW5zID0gdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zOwogICAgfSwKCiAgICBleHRyYWN0RmllbGROYW1lc0ZvclNlYXJjaFF1ZXJ5KGNvbmZpZykgewogICAgICBmb3IgKGxldCBjb2x1bW4gb2YgY29uZmlnLmNvbHVtbnMpIHsKICAgICAgICB0aGlzLmZpZWxkTmFtZXMucHVzaChjb2x1bW4uZmllbGROYW1lKTsKICAgICAgICB0aGlzLmNvbHVtbnMucHVzaChjb2x1bW4ubGFiZWxOYW1lKTsKICAgICAgfQogICAgfSwKCiAgICBjYXRjaERlcGFydHVyZTogZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgdGhpcy5zZHREYXRhID0gZGF0YTsKCiAgICAgIGlmIChkYXRhLnN0YXR1cyA9PSAxIHx8IGRhdGEuc3RhdHVzID09IDMpIHsKICAgICAgICB0aGlzLmxvYWRUYWJsZShkYXRhKTsKICAgICAgfSBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PSA0KSB7CiAgICAgICAgdGhpcy5sb2FkVGFibGUoZGF0YSk7CiAgICAgIH0KICAgIH0sCgogICAgbG9hZFRhYmxlKHNkdERhdGEpIHsKICAgICAgbGV0IGZpbHRlcnMgPSBbXTsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKCiAgICAgIGZvciAobGV0IHNkdF9kYXRhIG9mIHNkdERhdGEubWVzc2FnZSkgewogICAgICAgIGlmIChzZHRfZGF0YS5maWVsZE5hbWUgIT09ICJhY3Rpb25zIikgewogICAgICAgICAgbGV0IG5ld0RhdGUgPSAiIjsKCiAgICAgICAgICBpZiAoc2R0X2RhdGEuZmllbGRUeXBlID09PSAiZGF0ZSIgJiYgc2R0X2RhdGEuZmlsdGVyVmFsdWUgIT09ICIiKSB7CiAgICAgICAgICAgIGxldCBkYXRlID0gc2R0X2RhdGEuZmlsdGVyVmFsdWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgZGF0ZSA9IGRhdGUuc3BsaXQoIi8iKTsKICAgICAgICAgICAgbmV3RGF0ZSA9IG5ldyBEYXRlKGAke2RhdGVbMV19LyR7ZGF0ZVswXX0vJHtkYXRlWzJdfWApOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChzZHRfZGF0YS5maWx0ZXJWYWx1ZSA9PT0gbnVsbCkgewogICAgICAgICAgICBzZHRfZGF0YS5maWx0ZXJWYWx1ZSA9ICIiOwogICAgICAgICAgfQoKICAgICAgICAgIGZpbHRlcnMucHVzaCh7CiAgICAgICAgICAgIGZpZWxkTmFtZTogc2R0X2RhdGEuZmllbGROYW1lLAogICAgICAgICAgICBmaWVsZFR5cGU6IHNkdF9kYXRhLmZpZWxkVHlwZSwKICAgICAgICAgICAgZmlsdGVyVmFsdWU6IG5ld0RhdGUgPT09IG51bGwgfHwgbmV3RGF0ZSA9PT0gIiIgPyBzZHRfZGF0YS5maWx0ZXJWYWx1ZSA6IG5ld0RhdGUuZ2V0VGltZSgpLAogICAgICAgICAgICBzZWNvbmRWYWx1ZTogc2R0X2RhdGEuc2Vjb25kVmFsdWUsCiAgICAgICAgICAgIGNvbXBhcmlzb25UeXBlOiBzZHRfZGF0YS5jb21wYXJpc29uVHlwZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmdldFBhZ2luYXRlZEFzc2V0cyhmaWx0ZXJzLCBzZHREYXRhLmRhdGEuc29ydEZpZWxkLCBzZHREYXRhLmRhdGEuc29ydERpcmVjdGlvbiwgc2R0RGF0YS5kYXRhLm9mZnNldCwgc2R0RGF0YS5kYXRhLmxpbWl0LCBzZHREYXRhLmRhdGEuc2VhcmNoUXVlcnkpOwogICAgfSwKCiAgICBsb2FkU0RUKHJlc3BvbnNlLCBkYXRhKSB7CiAgICAgIHRoaXMucGFyZW50RGF0YSA9IGRhdGE7CiAgICAgIGxldCBldmVudERhdGEgPSB7CiAgICAgICAgZGF0YTogdGhpcy5wYXJlbnREYXRhLAogICAgICAgIHRvdGFsRWxlbWVudHM6IHJlc3BvbnNlLmRhdGEuc2R0RGF0YS50b3RhbEVsZW1lbnRzLAogICAgICAgIHRvdGFsUGFnZXM6IHJlc3BvbnNlLmRhdGEuc2R0RGF0YS50b3RhbFBhZ2VzLAogICAgICAgIHBhZ2VOdW1iZXI6IHJlc3BvbnNlLmRhdGEub2Zmc2V0CiAgICAgIH07CiAgICAgIHRoaXMuJHJlZnMudGVzdC5kYXRhTG9hZEV2ZW50KGV2ZW50RGF0YSk7CiAgICB9LAoKICAgIGdldFBhZ2luYXRlZEFzc2V0cyhmaWx0ZXJzLCBzb3J0RmllbGQsIHNvcnREaXJlY3Rpb24sIG9mZnNldCwgbGltaXQsIHNlYXJjaFF1ZXJ5KSB7CiAgICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKSk7CiAgICAgIGxldCByZXF1ZXN0T2JqID0gewogICAgICAgIGZpbHRlcnM6IGZpbHRlcnMsCiAgICAgICAgc29ydEZpZWxkOiBzb3J0RmllbGQsCiAgICAgICAgc29ydERpcmVjdGlvbjogc29ydERpcmVjdGlvbiwKICAgICAgICBvZmZzZXQ6IG9mZnNldCwKICAgICAgICBsaW1pdDogbGltaXQsCiAgICAgICAgdGVuYW50VVVJRDogY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQsCiAgICAgICAgc2VhcmNoUXVlcnk6IHNlYXJjaFF1ZXJ5LAogICAgICAgIGZpZWxkTmFtZXM6IHRoaXMuZmllbGROYW1lcywKICAgICAgICBhcmNoaXZlZDogZmFsc2UKICAgICAgfTsgLy8gbGV0IHJlcSA9IHsKICAgICAgLy8gICBzZWFyY2hRdWVyeTogbnVsbCwKICAgICAgLy8gICBmaWx0ZXJzOiBbXSwKICAgICAgLy8gICBzb3J0RmllbGQ6ICJpZCIsCiAgICAgIC8vICAgc29ydERpcmVjdGlvbjogImRlc2MiLAogICAgICAvLyAgIG9mZnNldDogMCwKICAgICAgLy8gICBsaW1pdDogMTAsCiAgICAgIC8vICAgdGVuYW50VVVJRDogIlRFU1QtT1JHIiwKICAgICAgLy8gICBhcmNoaXZlZDogZmFsc2UsCiAgICAgIC8vIH07CgogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldFBhZ2luYXRlZEFzc2V0Q2F0ZShyZXF1ZXN0T2JqKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHJlc3BvbnNlLmRhdGEuc2R0RGF0YS5jb250ZW50Lm1hcChpdGVtID0+IHsKICAgICAgICAgICAgaXRlbS5jcmVhdGVkQXQgPSBtb21lbnQudXRjKGl0ZW0uY3JlYXRlZEF0KS5sb2NhbCgpLmZvcm1hdCgnREQvTU0vWVlZWSBoaDptbSBhJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJlc3BvbnNlLmRhdGEub2Zmc2V0ID0gb2Zmc2V0ICsgMTsKICAgICAgICAgIHRoaXMubG9hZFNEVChyZXNwb25zZSwgcmVzcG9uc2UuZGF0YS5zZHREYXRhLmNvbnRlbnQpOwogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJFcnJvciB3aGlsZSBnZXR0aW5nIGFzc2V0cy4gUGxlYXNlIHRyeSBhZ2FpbiIsICJlcnJvciIpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNikgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXNjcmlwdGlvbiwgImVycm9yIik7CiAgICAgICAgfSBlbHNlIHsvLyB0aGlzLnNob3dUb2FzdCgiT29wcyBpdHMgbG9vayBsaWtlIG91ciBzZXJ2ZXIgaXMgb2ZmbGluZSIpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAhPT0gdW5kZWZpbmVkICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA2KSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5yZXNwb25zZS5kYXRhLmRlc2NyaXB0aW9uLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBzZXRTdGF0aWNDb2x1bW4oKSB7CiAgICAgIGxldCBzdGF0aWNDb2wgPSB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnMuZmlsdGVyKGNvbCA9PiBjb2wubGFiZWxOYW1lID09ICJOYW1lIilbMF07CiAgICAgIHRoaXMucGFyZW50U3lzdGVtU2V0dGluZ3Muc3RhdGljQ29sdW1ucy5wdXNoKHN0YXRpY0NvbCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnNbaV0ubGFiZWxOYW1lID09IHN0YXRpY0NvbC5sYWJlbE5hbWUpIHsKICAgICAgICAgIHRoaXMudGFibGVDb25maWcuY29sdW1ucy5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIC0tLS0tLS0tLS0tLUFzc2V0cyBTRFQgRnVuY3Rpb25zIEVORCAtLS0tLS0tLS0tLS0tLQogICAgYXNzZXREaWFsb2coKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiY3JlYXRlLWFzc2V0IgogICAgICB9KTsKICAgIH0sCgogICAgYXNzZXRHcm91cERpYWxvZygpIHsKICAgICAgdGhpcy52aWV3QXNzZXRHcm91cERpYWxvZyA9IHRydWU7CiAgICB9LAoKICAgIHNlbGVjdEFzc2V0VHlwZShvYmopIHsKICAgICAgdGhpcy5hc3NldE9wdGlvbiA9IG9iai52YWx1ZTsKICAgIH0sCgogICAgY2xvc2VBc3NldEdyb3VwRGlhbG9nKCkgewogICAgICB0aGlzLnZpZXdBc3NldEdyb3VwRGlhbG9nID0gZmFsc2U7CiAgICB9LAoKICAgIHNhdmVTZXJ2aWNlUmVxdWVzdERpYWxvZygpIHsKICAgICAgdGhpcy5hZGRTZXJ2aWNlRGlhbG9nID0gZmFsc2U7CiAgICB9LAoKICAgIGNsb3NlU2VydmljZURpYWxvZygpIHsKICAgICAgdGhpcy5hZGRTZXJ2aWNlRGlhbG9nID0gZmFsc2U7CiAgICB9LAoKICAgIGNsb3NlSXNzdWVEaWFsb2coKSB7CiAgICAgIHRoaXMubmV3SXNzdWUgPSBmYWxzZTsKICAgIH0sCgogICAgc2hvd1RvYXN0KG1lc3NhZ2UsIHR5cGUpIHsKICAgICAgdGhpcy50b2FzdE1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICB0aGlzLnRvYXN0VHlwZSA9IHR5cGU7CiAgICAgIHRoaXMudG9hc3RGbGFnKys7CiAgICAgIHRoaXMuY2xvc2VJc3N1ZURpYWxvZygpOwogICAgfQoKICB9LAogIHdhdGNoOiB7CiAgICBhc3NldE9wdGlvbjogZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChuZXdWYWwgPT09ICJhc3NldC1ncm91cCIpIHsKICAgICAgICAvLyBsZXQgYWxsQ29uZmlncyA9IEpTT04ucGFyc2UodGhpcy5vcmdDb25maWdzUmVzcG9uc2UuZGF0YS50YWJsZUNvbmZpZ3MpOwogICAgICAgIC8vIGFsbENvbmZpZ3MgPSBhbGxDb25maWdzLmZpbHRlcigKICAgICAgICAvLyAgIChkYXRhKSA9PiBkYXRhLnBhZ2VOYW1lID09PSAiYXNzZXRncm91cHMiCiAgICAgICAgLy8gKVswXTsKICAgICAgICAvLyB0aGlzLmFzc2V0R3JvdXBDb25maWdzID0gYWxsQ29uZmlnczsKICAgICAgICBjb25zb2xlLmxvZygiYXNzZXQtZ3JvdXAiKTsKICAgICAgfSBlbHNlIGlmIChuZXdWYWwgPT09ICJhcmNoaXZlZEFzc2V0cyIpIHsKICAgICAgICBsZXQgYWxsQ29uZmlncyA9IEpTT04ucGFyc2UodGhpcy5vcmdDb25maWdzUmVzcG9uc2UuZGF0YS50YWJsZUNvbmZpZ3MpOwogICAgICAgIGFsbENvbmZpZ3MgPSBhbGxDb25maWdzLmZpbHRlcihkYXRhID0+IGRhdGEucGFnZU5hbWUgPT09ICJhc3NldENhdGVnb3J5VGVtcGxhdGVzIilbMF07CiAgICAgICAgdGhpcy5hcmNoaXZlZEFzc2V0c0NvbmZpZ3MgPSBhbGxDb25maWdzOwogICAgICB9CiAgICB9CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMudG9hc3RGbGFnID09PSB0cnVlKSB7CiAgICAgIHRoaXMuc2hvd1RvYXN0KHRoaXMuJHJvdXRlLnBhcmFtcy50b2Fzc3RNZXNzYWdlLCB0aGlzLiRyb3V0ZS5wYXJhbXMudG9hc3RUeXBlKTsKICAgIH0KCiAgICBkb2N1bWVudC50aXRsZSA9IHRoaXMuJHJvdXRlLm1ldGEudGl0bGU7CiAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKTsgLy8gc2VuZGluZyBvbmx5IGZpcnN0IGFuZCBsYXN0IG5hbWUgZm9yIFNEVAoKICAgIGxldCBuYW1lID0gdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS51c2VybmFtZTsKCiAgICBpZiAobmFtZS5pbmNsdWRlcygiQCIpKSB7CiAgICAgIG5hbWUgPSBuYW1lLnNwbGl0KCJAIik7CiAgICAgIG5hbWUgPSBuYW1lWzBdOwogICAgfQoKICAgIHRoaXMucGFyZW50U3lzdGVtU2V0dGluZ3MudXNlciA9IG5hbWU7CiAgICBsZXQgdXVpZCA9IHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQ7CiAgICBhc3NldFBlcnNvbm5lbFNlcnZpY2UuZ2V0Q29tcGFueUN1cnJlbmN5KHV1aWQpLnRoZW4oY3VycmVuY3lSZXNwb25zZSA9PiB7CiAgICAgIHRoaXMuY3VycmVuY3kgPSBjdXJyZW5jeVJlc3BvbnNlLmRhdGEuY3VycmVuY3k7CiAgICAgIGFzc2V0UGVyc29ubmVsU2VydmljZS5nZXRPcmdDb25maWdzKHV1aWQsICJ0YWJsZUNvbmZpZ3MiKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLm9yZ0NvbmZpZ3NSZXNwb25zZSA9IHJlc3BvbnNlOwogICAgICAgIGxldCBhbGxDb25maWdzID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhLnRhYmxlQ29uZmlncyk7CiAgICAgICAgYWxsQ29uZmlncyA9IGFsbENvbmZpZ3MuZmlsdGVyKGRhdGEgPT4gZGF0YS5wYWdlTmFtZSA9PT0gImFzc2V0Q2F0ZWdvcnlUZW1wbGF0ZXMiKVswXTsKICAgICAgICB0aGlzLnRhYmxlQ29uZmlnID0gYWxsQ29uZmlnczsKICAgICAgICB0aGlzLmV4dHJhY3RGaWVsZE5hbWVzRm9yU2VhcmNoUXVlcnkodGhpcy50YWJsZUNvbmZpZyk7CiAgICAgICAgdGhpcy5zZXRTdGF0aWNDb2x1bW4oKTsKICAgICAgICB0aGlzLnNldFRhYmxlQ29uZmlncygpOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIGZldGNoaW5nIGNvbmZpZ3MiLCAiZXJyb3IiKTsKICAgICAgfSk7CiAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIHRoaXMuc2hvd1RvYXN0KCJFcnJvciBmZXRjaGluZyBjb21wYW55IGN1cnJlbmN5IiwgImVycm9yIik7CiAgICB9KTsKICB9LAoKICB2YWxpZGF0aW9uczogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgY29tcHV0ZWQ6IHt9Cn07"},null]}