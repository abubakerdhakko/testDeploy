{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/eslint-loader/index.js??ref--14-0!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/services/InspectionService.js","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/services/InspectionService.js","mtime":1661968702408},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/babel.config.js","mtime":1661968702388},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IEVuZFBvaW50cyBmcm9tICcuL0VuZFBvaW50cyc7CmV4cG9ydCBjb25zdCBJbnNwZWN0aW9uU2VydmljZSA9IHsKICBhc3luYyBnZXRQYWdpbmF0ZWRJbnNwZWN0aW9uUmVwb3J0cyhvZmZzZXQsIGxpbWl0LCB0ZW5hbnR1dWlkKSB7CiAgICAvLyBkZWJ1Z2dlcjsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pbnNwZWN0aW9ucmVwb3J0P29mZnNldD0nICsgb2Zmc2V0ICsgJyZsaW1pdD0nICsgbGltaXQgKyAnJnRlbmFudHV1aWQ9JyArIHRlbmFudHV1aWQ7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICBpZiAocmVzcG9uc2VKc29uLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgLy8gc3VibWl0dGVkCiAgYXN5bmMgZ2V0UGFnaW5hdGVkQWRkaXRvbmFsSW5zcGVjdGlvbnMob2Zmc2V0LCBsaW1pdCwgdGVuYW50dXVpZCwgcGFyZW50SW5zcGVjdGlvblVVSUQpIHsKICAgIC8vIGRlYnVnZ2VyOwogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2luc3BlY3Rpb25yZXBvcnQ/b2Zmc2V0PScgKyBvZmZzZXQgKyAnJmxpbWl0PScgKyBsaW1pdCArICcmdGVuYW50dXVpZD0nICsgdGVuYW50dXVpZCArICcmcGFyZW50SW5zcGVjdGlvblVVSUQ9JyArIHBhcmVudEluc3BlY3Rpb25VVUlEOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5nZXQodXJsKS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlSnNvbi5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGdldFBhZ2luYXRlZEluc3BlY3Rpb25SZXBvcnRzRm9yU2VydmljZVJlcXVlc3Qob2Zmc2V0LCBsaW1pdCwgdGVuYW50dXVpZCwgc2VydmljZVJlcXVlc3RVVUlEKSB7CiAgICAvLyBkZWJ1Z2dlcjsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pbnNwZWN0aW9ucmVwb3J0P29mZnNldD0nICsgb2Zmc2V0ICsgJyZsaW1pdD0nICsgbGltaXQgKyAnJnRlbmFudHV1aWQ9JyArIHRlbmFudHV1aWQgKyAnJnNlcnZpY2VSZXF1ZXN0VVVJRD0nICsgc2VydmljZVJlcXVlc3RVVUlEOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5nZXQodXJsKS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlSnNvbi5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGdldFBhZ2luYXRlZEluc3BlY3Rpb25UZW1wbGF0ZXNGb3JTZXJ2aWNlUmVxdWVzdChvZmZzZXQsIGxpbWl0LCB0ZW5hbnR1dWlkLCBzZXJ2aWNlUmVxdWVzdFVVSUQpIHsKICAgIC8vIGRlYnVnZ2VyOwogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2luc3BlY3Rpb250ZW1wbGF0ZT9vZmZzZXQ9JyArIG9mZnNldCArICcmbGltaXQ9JyArIGxpbWl0ICsgJyZ0ZW5hbnRVVUlEPScgKyB0ZW5hbnR1dWlkICsgJyZzZXJ2aWNlUmVxdWVzdFVVSUQ9JyArIHNlcnZpY2VSZXF1ZXN0VVVJRCArICcmbmV3QWRkaXRpb25hbD10cnVlJzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KHVybCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIGlmIChyZXNwb25zZUpzb24uc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICAvL3BlbmRpbmcuLi4KICBhc3luYyBnZXRQYWdpbmF0ZWRJbnNwZWN0aW9uVGVtcGxhdGVzRm9ySW5zcGVjdGlvbihvZmZzZXQsIGxpbWl0LCB0ZW5hbnR1dWlkLCBwYXJlbnRJbnNwZWN0aW9uVVVJRCkgewogICAgLy8gZGVidWdnZXI7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW5zcGVjdGlvbnRlbXBsYXRlP29mZnNldD0nICsgb2Zmc2V0ICsgJyZsaW1pdD0nICsgbGltaXQgKyAnJnRlbmFudFVVSUQ9JyArIHRlbmFudHV1aWQgKyAnJnBhcmVudEluc3BlY3Rpb25VVUlEPScgKyBwYXJlbnRJbnNwZWN0aW9uVVVJRCArICcmbmV3QWRkaXRpb25hbD10cnVlJzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KHVybCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIGlmIChyZXNwb25zZUpzb24uc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRQYWdpbmF0ZWRJc3N1ZXMocmVxdWVzdEJvZHkpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pc3N1ZXMvc2R0JzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MucG9zdCh1cmwsIHJlcXVlc3RCb2R5KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRQYWdpbmF0ZWRJc3N1ZXNSZXBvcnQocmVxdWVzdEJvZHkpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pc3N1ZVJlcG9ydC9zZHQnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgcmVxdWVzdEJvZHkpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGdldFBhZ2luYXRlZFNlcnZpY2VSZXF1ZXN0UmVwb3J0KHJlcXVlc3RCb2R5KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvc2VydmljZVJlcXVlc3RSZXBvcnQvc2R0JzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MucG9zdCh1cmwsIHJlcXVlc3RCb2R5KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRQYWdpbmF0ZWRJbnNwZWN0aW9uUmVwb3J0KHJlcXVlc3RCb2R5KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW5zcGVjdGlvblJlcG9ydC9zZHQnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgcmVxdWVzdEJvZHkpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGdldFBhZ2luYXRlZFNlcnZpY2VSZXF1ZXN0cyhyZXF1ZXN0T2JqZWN0KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvc2VydmljZS1yZXF1ZXN0cy9zZHQnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgcmVxdWVzdE9iamVjdCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0UGFnaW5hdGVkSW5zcGVjdGlvblRlbXBsYXRlc0ZvclNEVChyZXF1ZXN0T2JqZWN0KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW5zcGVjdGlvblRlbXBsYXRlL3NkdCc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QodXJsLCByZXF1ZXN0T2JqZWN0KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRQYWdpbmF0ZWRBcmNoaXZlZFRlbXBsYXRlc0ZvclNEVChyZXF1ZXN0T2JqZWN0KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvYXJjaGl2ZS9pbnNwZWN0aW9uLXRlbXBsYXRlcy9zZHQnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgcmVxdWVzdE9iamVjdCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0UGFnaW5hdGVkQXJjaGl2ZWRJc3N1ZXNGb3JTRFQocmVxdWVzdE9iamVjdCkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2FyY2hpdmVkL2lzc3Vlcy9zZHQnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgcmVxdWVzdE9iamVjdCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0UGFnaW5hdGVkQXJjaGl2ZWRJbnNwZWN0aW9uc0ZvclNEVChyZXF1ZXN0T2JqZWN0KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvYXJjaGl2ZS9pbnNwZWN0aW9uLXJlcG9ydC9zZHQnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgcmVxdWVzdE9iamVjdCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0UGFnaW5hdGVkUGVuZGluZ0luc3BlY3Rpb25SZXBvcnRzRm9yU0RUKHJlcXVlc3RPYmplY3QpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9wZW5kaW5nL2luc3BlY3Rpb24tcmVwb3J0L3NkdCc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QodXJsLCByZXF1ZXN0T2JqZWN0KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRQYWdpbmF0ZWRJbnNwZWN0aW9uUmVwb3J0c0ZvclNEVChyZXF1ZXN0T2JqZWN0KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW5zcGVjdGlvbi1yZXBvcnQvc2R0JzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MucG9zdCh1cmwsIHJlcXVlc3RPYmplY3QpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGdldEZpbGUoZmlsZVVybCkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2ZpbGVzP3VybD0nICsgZmlsZVVybDsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KHVybCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIGlmIChyZXNwb25zZUpzb24uc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRJc3N1ZXNEZXRhaWxCeUlzc3Vlc1VVSUQoaXNzdWVVVUlEcykgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2lzc3VlZGV0YWlscyc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QodXJsLCBpc3N1ZVVVSURzKS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0SW1hZ2VWb2ljZXNCeUlzc3VlVVVJRFNPckZpZWxkVVVJRFModXVpZHMpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pbWFnZXZvaWNlcyc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QodXJsLCB7CiAgICAgICAgdXVpZHM6IHV1aWRzCiAgICAgIH0pLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICBpZiAocmVzcG9uc2VKc29uLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0SXNzdWVzUmVwb3J0cyhyZXF1ZXN0KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaXNzdWVzL3JlcG9ydCc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QodXJsLCByZXF1ZXN0KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRJbnNwZWN0aW9uUmVwb3J0cyhyZXF1ZXN0KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaXNzdWVzL2luc3BlY3Rpb25yZXBvcnQnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgcmVxdWVzdCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0U2VydmljZVJlcXVlc3RSZXBvcnRzKHJlcXVlc3QpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pc3N1ZXMvc2VydmljZXJlcG9ydCc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QodXJsLCByZXF1ZXN0KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRJbWFnZVZvaWNlc0J5SXNzdWVVVUlET3JGaWVsZFVVSUQodXVpZCkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2ltYWdldm9pY2VzJzsKICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgdXVpZDogdXVpZAogICAgfTsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KHVybCwgewogICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgIH0pLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGdldE9wZW5JbnNwZWN0aW9uUmVwb3J0c0J5QXNzZXRVVUlEKGFzc2V0dXVpZCkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2luc3BlY3Rpb25yZXBvcnQ/YXNzZXR1dWlkPScgKyBhc3NldHV1aWQ7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICBpZiAocmVzcG9uc2VKc29uLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0UGFnaW5hdGVkSW5zcGVjdGlvblRlbXBsYXRlcyhvZmZzZXQsIGxpbWl0KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW5zcGVjdGlvbnRlbXBsYXRlP29mZnNldD0nICsgb2Zmc2V0ICsgJyZsaW1pdD0nICsgbGltaXQ7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICBpZiAocmVzcG9uc2VKc29uLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgYWRkSW5zcGVjdGlvblRlbXBsYXRlT2ZNdWx0aXBsZUFzc2V0cyhyZXF1ZXN0Qm9keSkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2luc3BlY3Rpb250ZW1wbGF0ZS9idWxrJzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MucG9zdCh1cmwsIHJlcXVlc3RCb2R5KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlSnNvbi5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGFkZEluc3BlY3Rpb25UZW1wbGF0ZU9mU2VydmljZVJlcXVlc3QocmVxdWVzdEJvZHkpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pbnNwZWN0aW9udGVtcGxhdGUnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgcmVxdWVzdEJvZHkpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICBpZiAocmVzcG9uc2VKc29uLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgYXNzaWduU2NoZWR1bGVJbnNwZWN0aW9uVGVtcGxhdGUocmVxdWVzdEJvZHkpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pbnNwZWN0aW9uLXRlbXBsYXRlL2Fzc2lnbic7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QodXJsLCByZXF1ZXN0Qm9keSkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIGlmIChyZXNwb25zZUpzb24uc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyB1cGRhdGVBc3NpZ25TY2hlZHVsZUluc3BlY3Rpb25UZW1wbGF0ZShyZXF1ZXN0Qm9keSkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2luc3BlY3Rpb24tdGVtcGxhdGUvYXNzaWduJzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MucHV0KHVybCwgcmVxdWVzdEJvZHkpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICBpZiAocmVzcG9uc2VKc29uLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgdXBsb2FkRmlsZShNdWx0aXBhcnRGaWxlcykgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2ZpbGVzJzsKICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgTXVsdGlwYXJ0RmlsZXMpOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgZm9ybURhdGEpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICBpZiAocmVzcG9uc2VKc29uLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgYWRkSW5zcGVjdGlvblRlbXBsYXRlT2ZJbnNwZWN0aW9uUmVxdWVzdChyZXF1ZXN0Qm9keSkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2luc3BlY3Rpb250ZW1wbGF0ZSc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QodXJsLCByZXF1ZXN0Qm9keSkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIGlmIChyZXNwb25zZUpzb24uc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyB1cGRhdGVJbnNwZWN0aW9uVGVtcGxhdGVPZk11bHRpcGxlQXNzZXRzKHJlcXVlc3RCb2R5KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW5zcGVjdGlvbnRlbXBsYXRlL2J1bGsnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wdXQodXJsLCByZXF1ZXN0Qm9keSkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIGlmIChyZXNwb25zZUpzb24uc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyB1cGRhdGVJc3N1ZShyZXF1ZXN0Qm9keSkgewogICAgLy8gY29uc29sZS5sb2cocmVxdWVzdEJvZHkpOwogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2lzc3Vlcyc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnB1dCh1cmwsIHJlcXVlc3RCb2R5KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyB1cGRhdGVTZXJ2aWNlUmVxdWVzdChyZXF1ZXN0Qm9keSkgewogICAgLy8gY29uc29sZS5sb2cocmVxdWVzdEJvZHkpOwogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL3NlcnZpY2UtcmVxdWVzdCc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnB1dCh1cmwsIHJlcXVlc3RCb2R5KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBzZXJ2aWNlcmVxdWVzdFJlbGF0ZWRJc3N1ZXModXVpZCwgbGltaXQsIG9mZnNldCkgewogICAgLy8gY29uc29sZS5sb2cocmVxdWVzdEJvZHkpOwogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL3NlcnZpY2UtcmVxdWVzdC9pc3N1ZXM/dXVpZD0nICsgdXVpZCArICcmbGltaXQ9JyArIGxpbWl0ICsgJyZvZmZzZXQ9JyArIG9mZnNldDsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KHVybCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgYWRkSXNzdWUocmVxdWVzdEJvZHkpIHsKICAgIC8vIGNvbnNvbGUubG9nKHJlcXVlc3RCb2R5KTsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pc3N1ZXMnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgcmVxdWVzdEJvZHkpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGZpbHRlcklzc3Vlc0J5QXNzZXRVVUlEKGFzc2V0dXVpZCwgc3RhdHVzID0gImFueSIpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pc3N1ZXMvZmlsdGVyP2Fzc2V0dXVpZD0nICsgYXNzZXR1dWlkICsgJyZzdGF0dXM9JyArIHN0YXR1czsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KHVybCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0UGFnaW5hdGVkSXNzdWVzQnlBc3NldChhc3NldHV1aWQsIHN0YXR1cyA9ICJhbnkiLCBvZmZzZXQsIGxpbWl0KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaXNzdWVzL2Fzc2V0P2Fzc2V0dXVpZD0nICsgYXNzZXR1dWlkICsgJyZzdGF0dXM9JyArIHN0YXR1cyArICcmb2Zmc2V0PScgKyBvZmZzZXQgKyAnJmxpbWl0PScgKyBsaW1pdDsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KHVybCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgbGlua0lzc3VlcyhyZXF1ZXN0KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaXNzdWVzL2xpbmsnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wdXQodXJsLCByZXF1ZXN0KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goKHsKICAgICAgICByZXNwb25zZQogICAgICB9KSA9PiB7CiAgICAgICAgdGhyb3cgcmVzcG9uc2U7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGdldExpbmtlZElzc3Vlcyhpc3N1ZVVVSUQpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pc3N1ZXMvbGluaz9pc3N1ZXV1aWQ9JyArIGlzc3VlVVVJRDsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KHVybCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZGVsZXRlSXNzdWVJbWFnZShpc3N1ZVVVSUQpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pbWFnZS8/dXVpZD0nICsgaXNzdWVVVUlEOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5kZWxldGUodXJsKS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRJc3N1ZUNvdW50KHV1aWRzKSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvYXNzZXRzL2lzc3Vlcyc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QodXJsLCB1dWlkcykudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0SW5zcGVjdGlvblRlbXBhbHRlc0J5QXNzZXQoYXNzZXR1dWlkKSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvYXNzZXRzL2luc3BlY3Rpb250ZW1wbGF0ZXMvYWxsP2Fzc2V0dXVpZD0nICsgYXNzZXR1dWlkOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5nZXQodXJsKS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRTZXJ2aWNlUmVxdWVzdEJ5VVVJRCh1dWlkKSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvc2VydmljZXJlcXVlc3RzP3V1aWQ9JyArIHV1aWQ7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGdldEluc3BlY3Rpb25UZW1wbGF0ZU5hbWVBbmRVVUlEKGFzc2V0VVVJRCwgdGVuYW50VVVJRCkgewogICAgbGV0IHBhcmFtcyA9IHsKICAgICAgdGVuYW50dXVpZDogdGVuYW50VVVJRCwKICAgICAgYXNzZXR1dWlkOiBhc3NldFVVSUQKICAgIH07CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW5zcGVjdGlvbnRlbXBsYXRlL2FsbCc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwsIHsKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRJbnNwZWN0aW9uVGVtcGxhdGVOYW1lQW5kVVVJREJ5Q2F0ZWdvcnlVVUlEKGNhdGVnb3J5VVVJRCkgewogICAgbGV0IHBhcmFtcyA9IHsKICAgICAgY2F0ZWdvcnl1dWlkOiBjYXRlZ29yeVVVSUQKICAgIH07CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW5zcGVjdGlvbnRlbXBsYXRlL2FsbCc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwsIHsKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRJbnNwZWN0aW9uVGVtcGxhdGVCeVVVSUQodGVtcGxhdGVVVUlELCB0ZW5hbnRVVUlEKSB7CiAgICBsZXQgcGFyYW1zID0gewogICAgICB1dWlkOiB0ZW1wbGF0ZVVVSUQsCiAgICAgIHRlbmFudFVVSUQ6IHRlbmFudFVVSUQKICAgIH07CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW5zcGVjdGlvbnRlbXBsYXRlJzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KHVybCwgewogICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgIH0pLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGlnbm9yZUluc3BlY3Rpb25JdGVtcyhyZXF1ZXN0Qm9keSkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2lzc3Vlcy9pZ25vcmVJbnNwZWN0aW9uSXRlbXMnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wdXQodXJsLCByZXF1ZXN0Qm9keSkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0SW1hZ2VWb2ljZXNCeUluc3BlY3Rpb25JdGVtVVVJRCh1dWlkKSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW1hZ2Vzdm9pY2VzL2luc3BlY3Rpb24taXRlbT91dWlkPScgKyB1dWlkOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5nZXQodXJsKS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBkZWxldGVJbnNwZWN0aW9uVGVtcGxhdGVCeVVVSUQodGVtcGxhdGVVVUlELCB0eXBlKSB7CiAgICBsZXQgcGFyYW1zID0gewogICAgICBpZDogdGVtcGxhdGVVVUlELAogICAgICB0eXBlOiB0eXBlCiAgICB9OwogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2luc3BlY3Rpb250ZW1wbGF0ZSc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmRlbGV0ZSh1cmwsIHsKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyByZXN0b3JlSW5zcGVjdGlvblRlbXBsYXRlKHV1aWQpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9yZXN0b3JlL2luc3BlY3Rpb24tdGVtcGxhdGU/dXVpZD0nICsgdXVpZDsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MucHV0KHVybCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgcmVzdG9yZUluc3BlY3Rpb24odXVpZCkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL3Jlc3RvcmUvaW5zcGVjdGlvbi1yZXBvcnQ/dXVpZD0nICsgdXVpZDsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MucHV0KHVybCkudGhlbihyZXNwb25zZUpzb24gPT4gewogICAgICAgIHJldHVybiByZXNwb25zZUpzb247CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgcmVzdG9yZUlzc3VlKHV1aWQpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9yZXN0b3JlL2lzc3Vlcz91dWlkPScgKyB1dWlkOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wdXQodXJsKS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBkZWxldGVJbnNwZWN0aW9uQnlVVUlEKHRlbXBsYXRlVVVJRCwgdHlwZSkgewogICAgbGV0IHBhcmFtcyA9IHsKICAgICAgaWQ6IHRlbXBsYXRlVVVJRCwKICAgICAgdHlwZTogdHlwZQogICAgfTsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pbnNwZWN0aW9ucmVwb3J0JzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZGVsZXRlKHVybCwgewogICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgIH0pLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGRlbGV0ZUlzc3Vlcyh1dWlkLCB0eXBlKSB7CiAgICBsZXQgcGFyYW1zID0gewogICAgICB1dWlkOiB1dWlkLAogICAgICB0eXBlOiB0eXBlCiAgICB9OwogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2lzc3Vlcyc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmRlbGV0ZSh1cmwsIHsKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRJbnNwZWN0aW9uV2FsbEJ5SW5zcGVjdGlvblJlcG9ydFVVSUQoaW5zcGVjdGlvblJlcG9ydFVVSUQpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pbnNwZWN0aW9ucmVwb3J0L3dhbGwnOwogICAgY29uc3QgcGFyYW1zID0gewogICAgICBpbnNwZWN0aW9ucmVwb3J0dXVpZDogaW5zcGVjdGlvblJlcG9ydFVVSUQKICAgIH07CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwsIHsKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0SW5zcGVjdGlvblJlcG9ydEJ5VVVJRCh1dWlkKSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW5zcGVjdGlvbnJlcG9ydCc7CiAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgIGlkOiB1dWlkCiAgICB9OwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5nZXQodXJsLCB7CiAgICAgICAgcGFyYW1zOiBwYXJhbXMKICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGFkZFJlcGx5VG9NZXNzYWdlKGJvZHkpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pbnNwZWN0aW9ucmVwb3J0L3dhbGwvcmVwbHknOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgSlNPTi5zdHJpbmdpZnkoYm9keSkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBhZGROZXdNZXNzYWdlKGJvZHkpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pbnNwZWN0aW9ucmVwb3J0L3dhbGwvbWVzc2FnZXMnOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgSlNPTi5zdHJpbmdpZnkoYm9keSkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRJc3N1ZUJ5VVVJRChpc3N1ZVVVSUQpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pc3N1ZXMnOwogICAgbGV0IHBhcmFtcyA9IHsKICAgICAgaWQ6IGlzc3VlVVVJRAogICAgfTsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KHVybCwgewogICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9LAoKICBhc3luYyBnZXRJbnNwZWN0aW9uYnlJc3N1ZVVVSUQoaXNzdWV1dWlkKSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaXNzdWVzL2luc3BlY3Rpb24nOwogICAgbGV0IHBhcmFtcyA9IHsKICAgICAgaXNzdWV1dWlkOiBpc3N1ZXV1aWQKICAgIH07CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwsIHsKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0SXNzdWVXYWxsQnlJc3N1ZVVVSUQodXVpZCkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2lzc3Vlcy93YWxsJzsKICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgaXNzdWV1dWlkOiB1dWlkCiAgICB9OwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5nZXQodXJsLCB7CiAgICAgICAgcGFyYW1zOiBwYXJhbXMKICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGFkZFJlcGx5VG9Jc3N1ZU1lc3NhZ2UoYm9keSkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2lzc3Vlcy93YWxsL3JlcGx5JzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MucG9zdCh1cmwsIEpTT04uc3RyaW5naWZ5KGJvZHkpKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgYWRkTmV3SXNzdWVNZXNzYWdlKGJvZHkpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pc3N1ZXMvd2FsbC9tZXNzYWdlcyc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QodXJsLCBKU09OLnN0cmluZ2lmeShib2R5KSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGdldEluc3BlY3Rpb25SZXBvcnRCeURhdGUoYm9keSkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2luc3BlY3Rpb25yZXBvcnQvY2FsZW5kZXIvZXZlbnRzJzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MucG9zdCh1cmwsIEpTT04uc3RyaW5naWZ5KGJvZHkpKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0SW5zcGVjdGlvbkRhdGVzKHRlbmFudFVVSUQpIHsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9pbnNwZWN0aW9ucy9jYWxlbmRlci9kYXRlcyc7CiAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgIHRlbmFudFVVSUQ6IHRlbmFudFVVSUQKICAgIH07CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwsIHsKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0SW5zcGVjdGlvblRlbXBsYXRlc1BlbmRpbmdhbmRTdWJtaXR0ZWQoR2V0UGFnaW5hdGVkQWRkaXRpb25hbEluc3BlY3Rpb25SZXF1ZXN0KSB7CiAgICAvLyBkZWJ1Z2dlcjsKICAgIGNvbnN0IHVybCA9IEVuZFBvaW50cy5pbnNwZWN0aW9uU2VydmljZS5pbnNwZWN0aW9uICsgJy9hZGRpdGlvbmFsL2luc3BlY3Rpb24nOwoKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHVybCwgR2V0UGFnaW5hdGVkQWRkaXRpb25hbEluc3BlY3Rpb25SZXF1ZXN0KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlSnNvbi5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGdldFBhZ2luYXRlZEFzc2V0UmVsYXRlZElzc3VlcyhyZXF1ZXN0KSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaXNzdWVzL2Fzc2V0JzsKCiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgYXhpb3MucG9zdCh1cmwsIHJlcXVlc3QpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICBpZiAocmVzcG9uc2VKc29uLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0UGFnaW5hdGVkSXNzdWVDYXRlZ29yeVJlbGF0ZWRJc3N1ZXMocmVxdWVzdCkgewogICAgY29uc3QgdXJsID0gRW5kUG9pbnRzLmluc3BlY3Rpb25TZXJ2aWNlLmluc3BlY3Rpb24gKyAnL2lzc3Vlcy9pc3N1ZS1jYXRlZ29yeSc7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QodXJsLCByZXF1ZXN0KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlSnNvbi5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBlOwogICAgfQogIH0sCgogIGFzeW5jIGRlbGV0ZU9yQXJjaGl2ZVNlcnZpY2VSZXF1ZXN0KHV1aWQsIHByb2Nlc3NUeXBlKSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvc2VydmljZS1yZXF1ZXN0cz91dWlkPScgKyB1dWlkICsgJyZwcm9jZXNzVHlwZT0nICsgcHJvY2Vzc1R5cGU7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmRlbGV0ZSh1cmwpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICBpZiAocmVzcG9uc2VKc29uLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IGU7CiAgICB9CiAgfSwKCiAgYXN5bmMgZ2V0QWxsSW5zcGVjdGlvblRlbXBsYXRlcyh0ZW5lbnRVVUlEKSB7CiAgICBjb25zdCB1cmwgPSBFbmRQb2ludHMuaW5zcGVjdGlvblNlcnZpY2UuaW5zcGVjdGlvbiArICcvaW5zcGVjdGlvblRlbXBsYXRlL2FsbCc7CiAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgIHRlbmFudFVVSUQ6IHRlbmVudFVVSUQKICAgIH07CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwsIHsKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9KS50aGVuKHJlc3BvbnNlSnNvbiA9PiB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9Cgp9OwpleHBvcnQgZGVmYXVsdCBJbnNwZWN0aW9uU2VydmljZTs="},null]}