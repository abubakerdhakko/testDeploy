{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/service-requests/ServiceRequests.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/service-requests/ServiceRequests.vue","mtime":1661968702444},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/babel.config.js","mtime":1661968702388},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGFzc2V0UGVyc29ubmVsU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlcy9Bc3NldFBlcnNvbm5lbFNlcnZpY2UiOwppbXBvcnQgaW5zcGVjdGlvblNlcnZpY2UsIHsgSW5zcGVjdGlvblNlcnZpY2UgfSBmcm9tICIuLi8uLi9zZXJ2aWNlcy9JbnNwZWN0aW9uU2VydmljZSI7CmltcG9ydCBFbmRwb2ludHMgZnJvbSAiLi4vLi4vc2VydmljZXMvRW5kUG9pbnRzIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgQXJjaGl2ZWRTZXJ2aWNlUmVxdWVzdCBmcm9tICIuL0FyY2hpdmVkU2VydmljZVJlcXVlc3QudnVlIjsKaW1wb3J0IEFkZFNlcnZpY2VSZXF1ZXN0IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvQWRkU2VydmljZVJlcXVlc3QiOwppbXBvcnQgRGVsZXRlRGlhbG9nIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvRGVsZXRlRGlhbG9nIjsKaW1wb3J0IEFyY2hpdmVEaWFsb2cgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9BcmNoaXZlRGlhbG9nIjsKaW1wb3J0IElnbm9yZVJlcXVlc3QgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9JZ25vcmVSZXF1ZXN0IjsKaW1wb3J0IENyZWF0ZUlzc3VlIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvQ3JlYXRlSXNzdWUiOwppbXBvcnQgbG9hZGVyIGZyb20gIkAvY29tcG9uZW50cy9Mb2FkZXIudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTZXJ2aWNlUmVxdWVzdHMiLAogIGNvbXBvbmVudHM6IHsKICAgIEFkZFNlcnZpY2VSZXF1ZXN0LAogICAgRGVsZXRlRGlhbG9nLAogICAgQXJjaGl2ZURpYWxvZywKICAgIElnbm9yZVJlcXVlc3QsCiAgICBDcmVhdGVJc3N1ZSwKICAgIGxvYWRlciwKICAgIEFyY2hpdmVkU2VydmljZVJlcXVlc3QKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXJjaGl2ZWRDb25maWdzOiBudWxsLAogICAgICBzZXJ2aWNlUmVxdWVzdFR5cGU6ICJzZXJ2aWNlLXJlcXVlc3QiLAogICAgICBzZXJ2aWNlUmVxdWVzdE9wdGlvbnM6IFt7CiAgICAgICAgbGFiZWw6ICJTZXJ2aWNlIFJlcXVlc3QiLAogICAgICAgIHZhbHVlOiAic2VydmljZS1yZXF1ZXN0IgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICJBcmNoaXZlZCIsCiAgICAgICAgdmFsdWU6ICJhcmNoaXZlZCIKICAgICAgfV0sCiAgICAgIHNlbGVjdFNlcnZpY2VSZXF1ZXN0OiAic2VydmljZS1yZXF1ZXN0IiwKICAgICAgbG9hZGVyRmxhZzogZmFsc2UsCiAgICAgIHRvYXN0RmxhZzogMCwKICAgICAgdG9hc3RNZXNzYWdlOiAiIiwKICAgICAgdG9hc3RUeXBlOiAiIiwKICAgICAgY3VycmVudFVzZXJEZXRhaWxzOiAiIiwKICAgICAgYWRkU2VydmljZURpYWxvZzogZmFsc2UsCiAgICAgIGRlbGV0ZUluc3BlY3Rpb25EaWFsb2c6IGZhbHNlLAogICAgICBhcmNoaXZlSW5zcGVjdGlvbkRpYWxvZzogZmFsc2UsCiAgICAgIHByb2Nlc3NUeXBlOiAiIiwKICAgICAgdXVpZDogIiIsCiAgICAgIElnbm9yZUlzc3VlVmFsdWU6IGZhbHNlLAogICAgICBtb2RlbEluc3RydWN0aW9uOiAiSWdub3JlIFNlcnZpY2UgUmVxdWVzdCIsCiAgICAgIHNlcnZpY2VSZXF1ZXN0OiAiIiwKICAgICAgc2R0RGF0YTogIiIsCiAgICAgIHN1Ym1pdE5ld0lzc3VlOiBmYWxzZSwKICAgICAgdXBkYXRlU0RUOiBmYWxzZSwKICAgICAgLy8gLS0tLS0tLS0tLS0tLSBTRFQgRGF0YSBTVEFSVCAtLS0tLS0tLS0tLS0tLS0tCiAgICAgIHNkdF90b2tlbjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpLmFjY2Vzc190b2tlbiwKICAgICAgdXNlcjogIiIsCiAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgaXNMb2FkaW5nUGFnZTogZmFsc2UsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIHByb21wdDogZmFsc2UsCiAgICAgIHByb21wdFZpZXdOYW1lOiAiIiwKICAgICAgc2VydmVyRGF0YTogIiIsCiAgICAgIGZpbHRlckZpZWxkTGlzdDogW10sCiAgICAgIGV2ZW50RGF0YTogIiIsCiAgICAgIHBhcmVudFN5c3RlbVNldHRpbmdzOiB7CiAgICAgICAgc2VydmljZVVSTDogRW5kcG9pbnRzLnByZWZlcmVuY2VTZXJ2aWNlLnByZWZlcmVuY2UsCiAgICAgICAgLy8gc2VydmljZVVSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA5OS9wcmVmZXJlbmNlcycsCiAgICAgICAgYnV0dG9uczogW10sCiAgICAgICAgc2VhcmNoVmFsdWU6ICIiLAogICAgICAgIGhlaWdodDogIjk1MHB4IiwKICAgICAgICBzZWxlY3Rpb25Db2x1bW46IGZhbHNlLAogICAgICAgIHNlbGVjdFR5cGU6ICJub25lIiwKICAgICAgICBtb3JlT3B0aW9uczogW10sCiAgICAgICAgYWN0aW9uc09wdGlvbnM6IFsiVmlldyIsICJFZGl0IiwgIkFyY2hpdmUiLCAiRGVsZXRlIiwgIkNyZWF0ZSBJc3N1ZSIsICJJZ25vcmUgUmVxdWVzdCIgLy8gIkFjdGl2ZSIsCiAgICAgICAgXSwKICAgICAgICBjb2x1bW5JY29uczogW10sCiAgICAgICAgcGlsbENvbmZpZzogW3sKICAgICAgICAgIGNvbHVtbjogIiIsCiAgICAgICAgICBzdGF0ZTogInN1Y2Nlc3MiLAogICAgICAgICAgZGF0YTogIiIKICAgICAgICB9LCB7CiAgICAgICAgICBjb2x1bW46ICIiLAogICAgICAgICAgc3RhdGU6ICJlcnJvciIsCiAgICAgICAgICBkYXRhOiAiIgogICAgICAgIH0sIHsKICAgICAgICAgIGNvbHVtbjogIiIsCiAgICAgICAgICBzdGF0ZTogIm5vcm1hbCIsCiAgICAgICAgICBkYXRhOiAiIgogICAgICAgIH1dLAogICAgICAgIHN0YXRpY0NvbHVtbnM6IFtdLAogICAgICAgIHVzZXI6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKS5wcm9maWxlLnVzZXJuYW1lLAogICAgICAgIHVwcGVyY2FzZUNvbHVtbnM6IFtdLAogICAgICAgIC8vIHBhc3MgY29sdW1uIG5hbWUgd2hvc2UgZGF0YSBzaG91bGQgYmUgc2hvd24gaW4gY2FwcwogICAgICAgIGRhdGVGb3JtYXQ6ICJERC9NTS95eXl5IGhoOm1tIGEiIC8vcGFzcyBhbnkgbW9tZW50IGRhdGUgZm9ybWF0IGhlcmUKCiAgICAgIH0sCiAgICAgIHBhcmVudERlZmF1bHRTeXN0ZW1WaWV3OiB7CiAgICAgICAgdmlld05hbWVzOiBbewogICAgICAgICAgbmFtZTogIkRlZmF1bHQgVmlldyIsCiAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAxLAogICAgICAgICAgcHJpdmFjeTogInByaXZhdGUiCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIkFkZCBBIFZpZXcgVGlsZSIsCiAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAwLAogICAgICAgICAgcHJpdmFjeTogInByaXZhdGUiCiAgICAgICAgfV0sCiAgICAgICAgZGVmYXVsdFRhYmxlOiB7CiAgICAgICAgICBpZDogbnVsbCwKICAgICAgICAgIHZpZXdOYW1lOiAiRGVmYXVsdCBWaWV3IiwKICAgICAgICAgIGRlbnNpdHk6ICIiLAogICAgICAgICAgcGFnZVNpemU6ICIiLAogICAgICAgICAgcGFnZU5hbWU6ICIiLAogICAgICAgICAgdXNlcjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpLnByb2ZpbGUudXNlcm5hbWUsCiAgICAgICAgICBkZWZhdWx0Vmlld0ZsYWc6IHRydWUsCiAgICAgICAgICBzb3J0RmllbGQ6ICIiLAogICAgICAgICAgc29ydERpcmVjdGlvbjogIiIsCiAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgIGNvbHVtbnM6IFtdLAogICAgICAgICAgcG9zaXRpb246IDEsCiAgICAgICAgICAvLyBhbHdheXMgcGFzcyAxCiAgICAgICAgICBwcml2YWN5OiAicHJpdmF0ZSIKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHBhcmVudERhdGE6IFtdLAogICAgICBmaWx0ZXJDb3VudDogIiIsCiAgICAgIGZpZWxkTmFtZXM6IFtdLAogICAgICBvcmdDb25maWdzUmVzcG9uc2U6IG51bGwgLy8gLS0tLS0tLS0tLS0tLSBTRFQgRGF0YSBFTkQgLS0tLS0tLS0tLS0tLS0tLQoKICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgc2VsZWN0U2VydmljZVJlcXVlc3RUeXBlKG9iaikgewogICAgICB0aGlzLnNlbGVjdFNlcnZpY2VSZXF1ZXN0ID0gb2JqLnZhbHVlOwogICAgfSwKCiAgICBpc3N1ZUNyZWF0ZWQoKSB7CiAgICAgIHRoaXMuc3VibWl0TmV3SXNzdWUgPSBmYWxzZTsKICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgIH0sCgogICAgZGlzcGxheU1lc3NhZ2UoKSB7CiAgICAgIHRoaXMuc2hvd1RvYXN0KCJTZXJ2aWNlIHJlcXVlc3QgY3JlYXRlZCBzdWNjZXNzZnVsbHkiLCAic3VjY2VzcyIpOwogICAgfSwKCiAgICBkaXNwbGF5TWVzc2FnZUlzc3VlKCkgewogICAgICB0aGlzLnNob3dUb2FzdCgiSXNzdWUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkiLCAic3VjY2VzcyIpOwogICAgfSwKCiAgICB1cGRhdGVTRFRGdW5jdGlvbigpIHsKICAgICAgdGhpcy51cGRhdGVTRFQgPSB0cnVlOwogICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgfSwKCiAgICBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy5kZWxldGVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuYXJjaGl2ZUluc3BlY3Rpb25EaWFsb2cgPSBmYWxzZTsKICAgIH0sCgogICAgc2F2ZVNlcnZpY2VSZXF1ZXN0RGlhbG9nKCkgewogICAgICB0aGlzLmFkZFNlcnZpY2VEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd1RvYXN0KCJTZXJ2aWNlIFJlcXVlc3QgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuIiwgInN1Y2Nlc3MiKTsKICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgIH0sCgogICAgY2xvc2VOZXdJc3N1ZSgpIHsKICAgICAgdGhpcy5zdWJtaXROZXdJc3N1ZSA9IGZhbHNlOwogICAgfSwKCiAgICBvcGVuU2VydmljZURpYWxvZygpIHsKICAgICAgdGhpcy5hZGRTZXJ2aWNlRGlhbG9nID0gdHJ1ZTsKICAgIH0sCgogICAgY2xvc2VTZXJ2aWNlRGlhbG9nKCkgewogICAgICB0aGlzLmFkZFNlcnZpY2VEaWFsb2cgPSBmYWxzZTsKICAgIH0sCgogICAgaWdub3JlUmVxdWVzdCh2YWx1ZSkgewogICAgICBsZXQgaWdub3JlQ29tbWVudHNGaWVsZCA9IHZhbHVlOwoKICAgICAgaWYgKCFpZ25vcmVDb21tZW50c0ZpZWxkLnZhbHVlKSB7CiAgICAgICAgaWdub3JlQ29tbWVudHNGaWVsZC52YWxpZCA9IGZhbHNlOwogICAgICAgIGlnbm9yZUNvbW1lbnRzRmllbGQudmFsaWRNZXNzYWdlID0gIlJlcXVpcmVkISI7CiAgICAgICAgdGhpcy5pZ25vcmVDb21tZW50c0ZpZWxkID0gaWdub3JlQ29tbWVudHNGaWVsZDsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIGxldCB1cGRhdGVJc3N1ZVJlcXVlc3QgPSB7fTsKICAgICAgbGV0IHNlcnZpY2VSZXF1ZXN0ID0gdGhpcy5zZXJ2aWNlUmVxdWVzdDsKICAgICAgc2VydmljZVJlcXVlc3Quc3RhdHVzID0gImlnbm9yZWQiOwogICAgICBzZXJ2aWNlUmVxdWVzdC5yZXBvcnRlZEF0ID0gbW9tZW50KHNlcnZpY2VSZXF1ZXN0LnJlcG9ydGVkQXQsICJERC9NTS95eXl5IGhoOm1tIGEiKS50b0lTT1N0cmluZygpOwogICAgICBzZXJ2aWNlUmVxdWVzdC5pZ25vcmVDb21tZW50cyA9IGlnbm9yZUNvbW1lbnRzRmllbGQudmFsdWU7CiAgICAgIHNlcnZpY2VSZXF1ZXN0Lmlnbm9yZWRCeSA9IHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUuZmlyc3ROYW1lICsgIiAiICsgdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5sYXN0TmFtZTsKICAgICAgdXBkYXRlSXNzdWVSZXF1ZXN0Lmlzc3VlUmVwb3J0aW5nID0gc2VydmljZVJlcXVlc3Q7CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLnVwZGF0ZUlzc3VlKHVwZGF0ZUlzc3VlUmVxdWVzdCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIlNlcnZpY2UgcmVxdWVzdCBpZ25vcmVkIHN1Y2Nlc3NmdWxseSEiLCAic3VjY2VzcyIpOwogICAgICAgICAgICB0aGlzLmNsb3NlSWdub3JlSXNzdWUoKTsKICAgICAgICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJFcnJvciB3aGlsZSBpZ25vcmluZyBzZXJ2aWNlIHJlcXVlc3QuIFBsZWFzZSB0cnkgYWdhaW4iLCAiZXJyb3IiKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiRXJyb3Igd2hpbGUgaWdub3Jpbmcgc2VydmljZSByZXF1ZXN0LiBQbGVhc2UgdHJ5IGFnYWluIiwgImVycm9yIik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIkFuIHVuZXhwZWN0ZWQgRXJyb3IgT2NjdXJyZWQuIiwgImVycm9yIik7CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHRoaXMuc2VydmljZVJlcXVlc3QgPSBzZXJ2aWNlUmVxdWVzdDsKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIC0tLS0tLS0tLS0tLSBTRFQgRnVuY3Rpb25zIFNUQVJUIC0tLS0tLS0tLS0tLS0tCiAgICBnZXRBY3Rpb25zT3B0aW9uKHZhbCkgewogICAgICBpZiAodmFsLnZhbHVlID09ICJWaWV3IikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJzZXJ2aWNlLXJlcXVlc3RzLWRldGFpbHMiLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIHNlcnZpY2VSZXF1ZXN0VVVJRDogdmFsLnJvdy51dWlkLAogICAgICAgICAgICBzZXJ2aWNlUmVxdWVzdENoaWxkOiBmYWxzZSwKICAgICAgICAgICAgaXNzdWV1dWlkOiB2YWwucm93LnV1aWQsCiAgICAgICAgICAgIGFzc2V0VVVJRDogdmFsLnJvdy5hc3NldFVVSUQsCiAgICAgICAgICAgIGlzc3VlbnVtYmVyOiB2YWwucm93Lmlzc3VlTnVtYmVyLAogICAgICAgICAgICB0ZW1wbGF0ZVR5cGU6ICJ2aWV3SXNzdWUiLAogICAgICAgICAgICBmbGFnOiB0cnVlLAogICAgICAgICAgICB3b3JrT3JkZXJUeXBlOiB2YWwucm93LndvcmtPcmRlck51bWJlcgogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAodmFsLnZhbHVlID09ICJFZGl0IikgewogICAgICAgIGlmICh2YWwucm93LnN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAiTmV3Ii50b0xvd2VyQ2FzZSgpIHx8IHZhbC5yb3cuc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICJyZXBvcnRlZCIudG9Mb3dlckNhc2UoKSB8fCB2YWwucm93LnN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAiUmVzb2x2ZWQiLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogInNlcnZpY2UtcmVxdWVzdHMtZWRpdCIsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIHNlcnZpY2VSZXF1ZXN0VVVJRDogdmFsLnJvdy51dWlkLAogICAgICAgICAgICAgIHNlcnZpY2VSZXF1ZXN0Q2hpbGQ6IGZhbHNlLAogICAgICAgICAgICAgIGlzc3VldXVpZDogdmFsLnJvdy51dWlkLAogICAgICAgICAgICAgIGFzc2V0VVVJRDogdmFsLnJvdy5hc3NldFVVSUQsCiAgICAgICAgICAgICAgZmxhZzogZmFsc2UsCiAgICAgICAgICAgICAgc3RhdHVzOiB2YWwucm93LnN0YXR1cwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKHZhbC5yb3cuc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICJJZ25vcmVkIi50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICJzZXJ2aWNlLXJlcXVlc3RzLWVkaXQiLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBzZXJ2aWNlUmVxdWVzdFVVSUQ6IHZhbC5yb3cudXVpZCwKICAgICAgICAgICAgICBzZXJ2aWNlUmVxdWVzdENoaWxkVVVJRDogZmFsc2UsCiAgICAgICAgICAgICAgcGFyZW50VVVJRDogIiIsCiAgICAgICAgICAgICAgaXNzdWV1dWlkOiB2YWwucm93LnV1aWQsCiAgICAgICAgICAgICAgYXNzZXRVVUlEOiB2YWwucm93LmFzc2V0VVVJRCwKICAgICAgICAgICAgICBmbGFnOiB0cnVlLAogICAgICAgICAgICAgIHN0YXR1czogdmFsLnJvdy5zdGF0dXMKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJZb3UgY2FuIG9ubHkgZWRpdCByZXBvcnRlZCBhbmQgbmV3IHNlcnZpY2UgcmVxdWVzdCIsICJlcnJvciIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHZhbC52YWx1ZSA9PSAiSWdub3JlIFJlcXVlc3QiKSB7CiAgICAgICAgdGhpcy5zZXJ2aWNlUmVxdWVzdCA9IHZhbC5yb3c7CgogICAgICAgIGlmICh2YWwucm93LnN0YXR1cy50b0xvd2VyQ2FzZSgpID09ICJOZXciLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgIHRoaXMuSWdub3JlSXNzdWVWYWx1ZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJZb3UgY2FuIG9ubHkgaWdub3JlIG5ldyBzZXJ2aWNlIHJlcXVlc3QiLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh2YWwudmFsdWUgPT0gIkNyZWF0ZSBJc3N1ZSIpIHsKICAgICAgICB0aGlzLnNlcnZpY2VSZXF1ZXN0ID0gdmFsLnJvdzsKCiAgICAgICAgaWYgKHZhbC5yb3cuc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT0gIk5ldyIudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgdGhpcy5zdWJtaXROZXdJc3N1ZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJZb3UgY2FuIG9ubHkgY3JlYXRlIGlzc3VlIHdpdGggbmV3IHNlcnZpY2UgcmVxdWVzdCIsICJlcnJvciIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHZhbC52YWx1ZSA9PT0gIkFyY2hpdmUiKSB7CiAgICAgICAgaWYgKHZhbC5yb3cuc3RhdHVzID09PSAiSW4gUHJvZ3Jlc3MiKSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiSW4gcHJvZ3Jlc3MgU2VydmljZSBSZXF1ZXN0IGNhbm5vdCBiZSBBcmNoaXZlLiIsICJlcnJvciIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5hcmNoaXZlSW5zcGVjdGlvbkRpYWxvZyA9IHRydWU7CiAgICAgICAgdGhpcy51dWlkID0gdmFsLnJvdy51dWlkOwogICAgICAgIHRoaXMucHJvY2Vzc1R5cGUgPSAiYXJjaGl2ZSI7IC8vCXRoaXMuZGVsZXRlT3JBcmNoaXZlU2VydmljZVJlcXVlc3RzKHZhbC5yb3cudXVpZCwiYXJjaGl2ZSIpCiAgICAgIH0KCiAgICAgIGlmICh2YWwudmFsdWUgPT09ICJEZWxldGUiKSB7CiAgICAgICAgaWYgKHZhbC5yb3cuc3RhdHVzID09PSAiSW4gUHJvZ3Jlc3MiKSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiSW4gcHJvZ3Jlc3MgU2VydmljZSBSZXF1ZXN0IGNhbm5vdCBiZSBEZWxldGUuIiwgImVycm9yIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0aGlzLmRlbGV0ZUluc3BlY3Rpb25EaWFsb2cgPSB0cnVlOwogICAgICAgIHRoaXMudXVpZCA9IHZhbC5yb3cudXVpZDsKICAgICAgICB0aGlzLnByb2Nlc3NUeXBlID0gImRlbGV0ZSI7IC8vCXRoaXMuZGVsZXRlT3JBcmNoaXZlU2VydmljZVJlcXVlc3RzKHZhbC5yb3cudXVpZCwiZGVsZXRlIikKICAgICAgfQogICAgfSwKCiAgICBjbG9zZUlnbm9yZUlzc3VlKCkgewogICAgICB0aGlzLklnbm9yZUlzc3VlVmFsdWUgPSBmYWxzZTsKICAgIH0sCgogICAgY29udmVydFRvQ1NWKG9iakFycmF5KSB7CiAgICAgIHZhciBhcnJheSA9IHR5cGVvZiBvYmpBcnJheSAhPSAib2JqZWN0IiA/IEpTT04ucGFyc2Uob2JqQXJyYXkpIDogb2JqQXJyYXk7CiAgICAgIHZhciBzdHIgPSAiIjsKCiAgICAgIGZvciAodmFyIGVsZW1lbnQgb2YgYXJyYXkpIHsKICAgICAgICB2YXIgbGluZSA9ICIiOwoKICAgICAgICBmb3IgKHZhciBpbmRleCBpbiBlbGVtZW50KSB7CiAgICAgICAgICBpZiAobGluZSAhPSAiIikgbGluZSArPSAiLCI7CiAgICAgICAgICBsaW5lICs9IGVsZW1lbnRbaW5kZXhdOwogICAgICAgIH0KCiAgICAgICAgc3RyICs9IGxpbmUgKyAiXHJcbiI7CiAgICAgIH0KCiAgICAgIHJldHVybiBzdHI7CiAgICB9LAoKICAgIGdldERvd25sb2FkQXNPcHRpb24ob3B0KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdkb3dubG9hZCBhcyBvcHRpb24nLG9wdCk7CiAgICAgIGlmIChvcHQub3B0aW9uID09ICJwZGYiKSB7Ly8gbm90aWZpY2F0aW9uQW5kQ29tbXVuaWNhdGlvblNlcnZpY2UuZG93bmxvYWRTZWxlY3RlZFBERihvYmopCiAgICAgICAgLy8gLnRoZW4oKHJlcykgPT4gewogICAgICAgIC8vIC8vIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAvLyBsZXQgZmlsZUNvbnRlbnRzID0gbnVsbDsKICAgICAgICAvLyAgICAgbGV0IHBvcHVwV2luPW51bGw7CiAgICAgICAgLy8gICAgIHBvcHVwV2luID0gd2luZG93Lm9wZW4oJycsICdfYmxhbmsnLCAndG9wPTAsbGVmdD0wLGhlaWdodD03MDAsd2lkdGg9MTAwMDsnKTsKICAgICAgICAvLyAgICAgbGV0IGRvY3VtZW50ID0gewogICAgICAgIC8vICAgICAgICAgJ2RvY3VtZW50TmFtZSc6ICdCaWxsaW5nJwogICAgICAgIC8vICAgICB9OwogICAgICAgIC8vIGZpbGVDb250ZW50cyA9IHJlcy5kYXRhLnR5cGUgKyByZXMuZGF0YS5jb250ZW50OwogICAgICAgIC8vICAgcG9wdXBXaW4uZG9jdW1lbnQud3JpdGUoYAogICAgICAgIC8vICAgICA8aHRtbD4KICAgICAgICAvLyAgICAgICAgIDxoZWFkPgogICAgICAgIC8vICAgICAgICAgIDwhLS10aXRsZT5QcmludCB0YWI8L3RpdGxlLS0+CiAgICAgICAgLy8gICAgICAgICAgICAgPHN0eWxlPgogICAgICAgIC8vICAgICAgICAgICAgICAgICAjYnV0dG9uc3tkaXNwbGF5Om5vbmU7fQogICAgICAgIC8vICAgICAgICAgICAgICAgICAgYm9keSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogIk9wZW4gU2FucyIsIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgIlNlZ29lIFVJIiwgRXVjbGlkIENpcmN1bGFyIEIsICJIZWx2ZXRpY2EgTmV1ZSIsIEFyaWFsLCBzYW5zLXNlcmlmLCAiQXBwbGUgQ29sb3IgRW1vamkiLCAiU2Vnb2UgVUkgRW1vamkiLCAiU2Vnb2UgVUkgU3ltYm9sIjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMyMTI1Mjk7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICBidXR0b24sIG1ldGVyLCBwcm9ncmVzcyB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXdyaXRpbmctbW9kZTogaG9yaXpvbnRhbC10YiAhaW1wb3J0YW50OwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0LCBidXR0b24gewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1yZW5kZXJpbmc6IGF1dG87CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb2xvcjogaW5pdGlhbDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiBub3JtYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB3b3JkLXNwYWNpbmc6IG5vcm1hbDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1pbmRlbnQ6IDBweDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogc3RhcnQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDBlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IDQwMCAxMy4zMzMzcHggQXJpYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgaW5wdXRbdHlwZT0iYnV0dG9uIiBpXSwgaW5wdXRbdHlwZT0ic3VibWl0IiBpXSwgaW5wdXRbdHlwZT0icmVzZXQiIGldLCBpbnB1dFt0eXBlPSJmaWxlIiBpXTo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b24sIGJ1dHRvbiB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogZGVmYXVsdDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBidXR0b250ZXh0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogYnV0dG9uZmFjZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4IDNweDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci13aWR0aDogMnB4OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXN0eWxlOiBvdXRzZXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IGJ1dHRvbmZhY2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItaW1hZ2U6IGluaXRpYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgaW5wdXQsIGJ1dHRvbiwgc2VsZWN0LCBvcHRncm91cCwgdGV4dGFyZWEgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IGluaGVyaXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogaW5oZXJpdDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICBidXR0b24sIHNlbGVjdCB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICAuYnRuIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuMzc1cmVtIDAuNzVyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJvcmRlci1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm94LXNoYWRvdyAwLjE1cyBlYXNlLWluLW91dDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICAuYnRuLW91dGxpbmUtcHJpbWFyeSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwN2JmZjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzAwN2JmZjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICAuYnRuLW91dGxpbmUtcHJpbWFyeSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogI2QwMzIzMjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkMDMyMzI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgPHN0eWxlPi5mYSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250OiBub3JtYWwgbm9ybWFsIG5vcm1hbCAxNHB4LzEgRm9udEF3ZXNvbWU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IGluaGVyaXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LXJlbmRlcmluZzogYXV0bzsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfTwvc3R5bGU+CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzdHlsZT4qLCAqOjpiZWZvcmUsICo6OmFmdGVyIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgU3R5bGUgQXR0cmlidXRlIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICAuYnRuLCAuZm9ybS1jb250cm9sIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuMjVyZW0gMC41cmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjNyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDE1cHg7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIzcHg7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH08L3N0eWxlPgogICAgICAgIC8vICAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgLy8gICAgICAgICA8L2hlYWQ+CiAgICAgICAgLy8gICAgICAgICA8Ym9keSBvbmxvYWQ9IiI+CiAgICAgICAgLy8gICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiID4KICAgICAgICAvLyAgICAgICAgICAgICAgICAgPGEgaHJlZj0iJHtmaWxlQ29udGVudHN9IiBkb3dubG9hZD0iJHtkb2N1bWVudC5kb2N1bWVudE5hbWV9Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXByaW1hcnkiPkRvd25sb2FkPC9idXR0b24+PC9hPgogICAgICAgIC8vICAgICAgICAgICAgIDwvZGl2PgogICAgICAgIC8vICAgICAgICAgICAgIDxicj4KICAgICAgICAvLyAgICAgICAgICAgICA8aWZyYW1lIHNyYz0nJHtmaWxlQ29udGVudHN9JyAgc3R5bGU9Im1pbi13aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7IiA+PC9pZnJhbWU+CiAgICAgICAgLy8gICAgICAgICA8L2JvZHk+CiAgICAgICAgLy8gICAgIDwvaHRtbD5gCiAgICAgICAgLy8gKTsKICAgICAgICAvLyB9KQogICAgICAgIC8vIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTsKICAgICAgfSBlbHNlIGlmIChvcHQub3B0aW9uID09ICJjc3YiKSB7Ly8gCWxldCBmaWxlVGl0bGUgPSAnQmlsbGluZ3MnOwogICAgICAgIC8vIAlsZXQgaGVhZGVycyA9IHsKICAgICAgICAvLyAgICAgICBjcmVhdGVkRGF0ZTogJ1JlcXVlc3RlZCBPbicucmVwbGFjZSgvLC9nLCAnJyksIC8vIHJlbW92ZSBjb21tYXMgdG8gYXZvaWQgZXJyb3JzCiAgICAgICAgLy8gICAgICAgZHVlRGF0ZTogIkR1ZSBEYXRlIiwKICAgICAgICAvLyAgICAgICBzaGlwbWVudE51bWJlcjogIlNoaXBtZW50ICMiLAogICAgICAgIC8vIAkJICBwb3J0T2ZMb2FkaW5nOiAiUG9ydCBvZiBMb2FkIiwKICAgICAgICAvLyAJCSAgcG9ydE9mRGlzY2hhcmdlOiAiUG9ydCBPZiBEaXNjaGFyZ2UiLAogICAgICAgIC8vIAkJICBhbW91bnQ6ICJBbW91bnQiLAogICAgICAgIC8vIAkJICBiYWxhbmNlOiAiQmFsYW5jZSIsCiAgICAgICAgLy8gCQkgIG5ldHN1aXRlU3RhdHVzOiAiU3RhdHVzIgogICAgICAgIC8vIAl9OwogICAgICAgIC8vIAlsZXQgZGF0YU9iaiA9IFtdOwogICAgICAgIC8vIAlmb3IgKGxldCBpID0gMDsgaSA8IG9wdC5yb3dzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgLy8gCQljb25zdCBiaWxsID0gb3B0LnJvd3NbaV07CiAgICAgICAgLy8gCQlkYXRhT2JqLnB1c2goewogICAgICAgIC8vIAkJCWNyZWF0ZWREYXRlOiBiaWxsLmNyZWF0ZWREYXRlLAogICAgICAgIC8vIAkJCWR1ZURhdGU6IGJpbGwuZHVlRGF0ZSwKICAgICAgICAvLyAJCQlzaGlwbWVudE51bWJlcjogYmlsbC5zaGlwbWVudE51bWJlciwKICAgICAgICAvLyAJCQlwb3J0T2ZMb2FkaW5nOiBiaWxsLnBvcnRPZkxvYWRpbmcsCiAgICAgICAgLy8gCQkJcG9ydE9mRGlzY2hhcmdlOiBiaWxsLnBvcnRPZkRpc2NoYXJnZSwKICAgICAgICAvLyAJCQlhbW91bnQ6IGJpbGwuYW1vdW50LAogICAgICAgIC8vIAkJCWJhbGFuY2U6IGJpbGwuYmFsYW5jZSwKICAgICAgICAvLyAJCQluZXRzdWl0ZVN0YXR1czogYmlsbC5uZXRzdWl0ZVN0YXR1cwogICAgICAgIC8vIAkJfSk7CiAgICAgICAgLy8gCX0KICAgICAgICAvLyAJdGhpcy5leHBvcnRDU1ZGaWxlKGhlYWRlcnMsIGRhdGFPYmosIGZpbGVUaXRsZSk7CiAgICAgIH0KICAgIH0sCgogICAgLy8gZXhwb3J0Q1NWRmlsZShoZWFkZXJzLCBiaWxsaW5nRGF0YSwgZmlsZVRpdGxlKSB7CiAgICAvLyAgICAgLy8gaWYgKGhlYWRlcnMpIHsKICAgIC8vICAgICAvLyAgICAgYmlsbGluZ0RhdGEudW5zaGlmdChoZWFkZXJzKTsKICAgIC8vICAgICAvLyB9CiAgICAvLyAgICAgLy8gLy8gQ29udmVydCBPYmplY3QgdG8gSlNPTgogICAgLy8gICAgIC8vIHZhciBqc29uT2JqZWN0ID0gSlNPTi5zdHJpbmdpZnkoYmlsbGluZ0RhdGEpOwogICAgLy8gICAgIC8vIHZhciBjc3YgPSB0aGlzLmNvbnZlcnRUb0NTVihqc29uT2JqZWN0KTsKICAgIC8vICAgICAvLyB2YXIgZXhwb3J0ZWRGaWxlbm1hZSA9IGZpbGVUaXRsZSArICcuY3N2JyB8fCAnZXhwb3J0LmNzdic7CiAgICAvLyAgICAgLy8gdmFyIGJsb2IgPSBuZXcgQmxvYihbY3N2XSwgeyB0eXBlOiAndGV4dC9jc3Y7Y2hhcnNldD11dGYtODsnIH0pOwogICAgLy8gICAgIC8vIGlmIChuYXZpZ2F0b3IubXNTYXZlQmxvYikgeyAvLyBJRSAxMCsKICAgIC8vICAgICAvLyAgICAgbmF2aWdhdG9yLm1zU2F2ZUJsb2IoYmxvYiwgZXhwb3J0ZWRGaWxlbm1hZSk7CiAgICAvLyAgICAgLy8gfSBlbHNlIHsKICAgIC8vICAgICAvLyAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAvLyAgICAgLy8gICAgIGlmIChsaW5rLmRvd25sb2FkICE9PSB1bmRlZmluZWQpIHsgLy8gZmVhdHVyZSBkZXRlY3Rpb24KICAgIC8vICAgICAvLyAgICAgICAgIC8vIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCBIVE1MNSBkb3dubG9hZCBhdHRyaWJ1dGUKICAgIC8vICAgICAvLyAgICAgICAgIHZhciB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgLy8gICAgIC8vICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoImhyZWYiLCB1cmwpOwogICAgLy8gICAgIC8vICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoImRvd25sb2FkIiwgZXhwb3J0ZWRGaWxlbm1hZSk7CiAgICAvLyAgICAgLy8gICAgICAgICBsaW5rLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgIC8vICAgICAvLyAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAvLyAgICAgLy8gICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAvLyAgICAgLy8gICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgLy8gICAgIC8vICAgICB9CiAgICAvLyAgICAgLy8gfQogICAgLy8gfSwKICAgIHNldFRhYmxlQ29uZmlncygpIHsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuZGVuc2l0eSA9IHRoaXMudGFibGVDb25maWcuZGVuc2l0eTsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUucGFnZVNpemUgPSB0aGlzLnRhYmxlQ29uZmlnLnBhZ2VTaXplOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5wYWdlTmFtZSA9IHRoaXMudGFibGVDb25maWcucGFnZU5hbWU7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnNvcnRGaWVsZCA9IHRoaXMudGFibGVDb25maWcuc29ydEZpZWxkOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5zb3J0RGlyZWN0aW9uID0gdGhpcy50YWJsZUNvbmZpZy5zb3J0RGlyZWN0aW9uOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5jb2x1bW5zID0gdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zOwogICAgfSwKCiAgICBleHRyYWN0RmllbGROYW1lc0ZvclNlYXJjaFF1ZXJ5KGNvbmZpZykgewogICAgICBjb25maWcuY29sdW1ucy5tYXAoZWxlbWVudCA9PiB7CiAgICAgICAgdGhpcy5maWVsZE5hbWVzLnB1c2goZWxlbWVudC5maWVsZE5hbWUpOwogICAgICB9KTsKICAgIH0sCgogICAgY2F0Y2hEZXBhcnR1cmU6IGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHRoaXMuc2R0RGF0YSA9IGRhdGE7CiAgICAgIHRoaXMubG9hZFRhYmxlKHRoaXMuc2R0RGF0YSk7CiAgICB9LAoKICAgIGxvYWRUYWJsZShzZHREYXRhKSB7CiAgICAgIGxldCBmaWx0ZXJzID0gW107CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CgogICAgICBmb3IgKGxldCBzZHRfZGF0YSBvZiBzZHREYXRhLm1lc3NhZ2UpIHsKICAgICAgICBpZiAoc2R0X2RhdGEuZmllbGROYW1lICE9PSAiYWN0aW9ucyIpIHsKICAgICAgICAgIGxldCBuZXdEYXRlID0gIiI7CgogICAgICAgICAgaWYgKHNkdF9kYXRhLmZpZWxkVHlwZSA9PT0gImRhdGUiICYmIHNkdF9kYXRhLmZpbHRlclZhbHVlICE9PSAiIikgewogICAgICAgICAgICBsZXQgZGF0ZSA9IHNkdF9kYXRhLmZpbHRlclZhbHVlLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGRhdGUgPSBkYXRlLnNwbGl0KCIvIik7CiAgICAgICAgICAgIG5ld0RhdGUgPSBuZXcgRGF0ZShgJHtkYXRlWzFdfS8ke2RhdGVbMF19LyR7ZGF0ZVsyXX1gKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2R0X2RhdGEuZmlsdGVyVmFsdWUgPT09IG51bGwpIHsKICAgICAgICAgICAgc2R0X2RhdGEuZmlsdGVyVmFsdWUgPSAiIjsKICAgICAgICAgIH0KCiAgICAgICAgICBmaWx0ZXJzLnB1c2goewogICAgICAgICAgICBmaWVsZE5hbWU6IHNkdF9kYXRhLmZpZWxkTmFtZSwKICAgICAgICAgICAgZmllbGRUeXBlOiBzZHRfZGF0YS5maWVsZFR5cGUsCiAgICAgICAgICAgIGZpbHRlclZhbHVlOiBuZXdEYXRlID09PSBudWxsIHx8IG5ld0RhdGUgPT09ICIiID8gc2R0X2RhdGEuZmlsdGVyVmFsdWUgOiBuZXdEYXRlLmdldFRpbWUoKSwKICAgICAgICAgICAgc2Vjb25kVmFsdWU6IHNkdF9kYXRhLnNlY29uZFZhbHVlLAogICAgICAgICAgICBjb21wYXJpc29uVHlwZTogc2R0X2RhdGEuY29tcGFyaXNvblR5cGUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5nZXRQYWdpbmF0ZWRTZXJ2aWNlUmVxdWVzdHMoZmlsdGVycywgc2R0RGF0YS5kYXRhLnNvcnRGaWVsZCwgc2R0RGF0YS5kYXRhLnNvcnREaXJlY3Rpb24sIHNkdERhdGEuZGF0YS5vZmZzZXQsIHNkdERhdGEuZGF0YS5saW1pdCwgc2R0RGF0YS5kYXRhLnNlYXJjaFF1ZXJ5KTsKICAgIH0sCgogICAgbG9hZFNEVChyZXNwb25zZSwgZGF0YSkgewogICAgICB0aGlzLnBhcmVudERhdGEgPSBkYXRhOwogICAgICBsZXQgZXZlbnREYXRhID0gewogICAgICAgIGRhdGE6IHRoaXMucGFyZW50RGF0YSwKICAgICAgICB0b3RhbEVsZW1lbnRzOiByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy50b3RhbEVsZW1lbnRzLAogICAgICAgIHRvdGFsUGFnZXM6IHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmdzLnRvdGFsUGFnZXMsCiAgICAgICAgcGFnZU51bWJlcjogcmVzcG9uc2UuZGF0YS5pc3N1ZVJlcG9ydGluZ3Mub2Zmc2V0CiAgICAgIH07CiAgICAgIHRoaXMuJHJlZnMudGVzdC5kYXRhTG9hZEV2ZW50KGV2ZW50RGF0YSk7CiAgICB9LAoKICAgIGdldFBhZ2luYXRlZFNlcnZpY2VSZXF1ZXN0cyhmaWx0ZXJzLCBzb3J0RmllbGQsIHNvcnREaXJlY3Rpb24sIG9mZnNldCwgbGltaXQsIHNlYXJjaFF1ZXJ5KSB7CiAgICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKSk7CiAgICAgIGxldCByZXF1ZXN0T2JqID0gewogICAgICAgIHNlYXJjaFF1ZXJ5OiBzZWFyY2hRdWVyeSwKICAgICAgICAvLyBzZWFyY2hDb2x1bW5zOiBzZWFyY2hDb2x1bW5zLAogICAgICAgIGZpbHRlcnM6IGZpbHRlcnMsCiAgICAgICAgc29ydEZpZWxkOiBzb3J0RmllbGQsCiAgICAgICAgc29ydERpcmVjdGlvbjogc29ydERpcmVjdGlvbiwKICAgICAgICBvZmZzZXQ6IG9mZnNldCwKICAgICAgICBsaW1pdDogbGltaXQsCiAgICAgICAgdGVuYW50VVVJRDogY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQsCiAgICAgICAgZmllbGROYW1lczogdGhpcy5maWVsZE5hbWVzLAogICAgICAgIGFyY2hpdmVkOiBmYWxzZQogICAgICB9OwogICAgICBpbnNwZWN0aW9uU2VydmljZS5nZXRQYWdpbmF0ZWRTZXJ2aWNlUmVxdWVzdHMocmVxdWVzdE9iaikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy5vZmZzZXQgPSBvZmZzZXQ7CiAgICAgICAgICBsZXQgc2VydmljZVJlcXVlc3RzID0gcmVzcG9uc2UuZGF0YS5pc3N1ZVJlcG9ydGluZ3MuY29udGVudDsKCiAgICAgICAgICBpZiAoc2VydmljZVJlcXVlc3RzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5sb2FkU0RUKHJlc3BvbnNlLCBzZXJ2aWNlUmVxdWVzdHMpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgZm9yIChsZXQgc2VydmljZV9yZXF1ZXN0IG9mIHNlcnZpY2VSZXF1ZXN0cykgewogICAgICAgICAgICBzZXJ2aWNlX3JlcXVlc3QucmVwb3J0ZWRBdCA9IG1vbWVudC51dGMoc2VydmljZV9yZXF1ZXN0LnJlcG9ydGVkQXQpLmxvY2FsKCkuZm9ybWF0KCdERC9NTS9ZWVlZIGhoOm1tIGEnKTsKICAgICAgICAgICAgc2VydmljZV9yZXF1ZXN0LnRpdGxlID0gc2VydmljZV9yZXF1ZXN0LnRpdGxlID8gc2VydmljZV9yZXF1ZXN0LnRpdGxlIDogc2VydmljZV9yZXF1ZXN0Lmlzc3VlTmFtZTsKCiAgICAgICAgICAgIGlmICghc2VydmljZV9yZXF1ZXN0LnRpdGxlKSB7CiAgICAgICAgICAgICAgc2VydmljZV9yZXF1ZXN0LnRpdGxlID0gc2VydmljZV9yZXF1ZXN0Lmlzc3VlRGVzY3JpcHRpb247CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy5vZmZzZXQgPSBvZmZzZXQgKyAxOwogICAgICAgICAgdGhpcy5sb2FkU0RUKHJlc3BvbnNlLCBzZXJ2aWNlUmVxdWVzdHMpOwogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kcS5ub3RpZnkoewogICAgICAgICAgICBtZXNzYWdlOiAiT3BwcyBpdHMgbG9vayBsaWtlIG91ciBzZXJ2ZXIgaXMgb2ZmbGluZSIsCiAgICAgICAgICAgIGNvbG9yOiAibmVnYXRpdmUiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgIT09IHVuZGVmaW5lZCAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNikgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXNjcmlwdGlvbiwgImVycm9yIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJPb3BzIGl0IGxvb2tzIGxpa2Ugb3VyIHNlcnZlciBpcyBvZmZsaW5lIiwgImVycm9yIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgc2V0U3RhdGljQ29sdW1uKCkgewogICAgICAvLyBsZXQgc3RhdGljQ29sID0gdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zLmZpbHRlcigKICAgICAgLy8gICAoY29sKSA9PiBjb2wubGFiZWxOYW1lID09ICJBc3NldCBOYW1lIgogICAgICAvLyApWzBdOwogICAgICAvLyB0aGlzLnBhcmVudFN5c3RlbVNldHRpbmdzLnN0YXRpY0NvbHVtbnMucHVzaChzdGF0aWNDb2wpOwogICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAvLyAgIGlmICh0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnNbaV0ubGFiZWxOYW1lID09IHN0YXRpY0NvbC5sYWJlbE5hbWUpIHsKICAgICAgLy8gICAgIHRoaXMudGFibGVDb25maWcuY29sdW1ucy5zcGxpY2UoaSwgMSk7CiAgICAgIC8vICAgfQogICAgICAvLyB9CiAgICAgIGxldCBzdGF0aWNDb2wgPSB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnMuZmlsdGVyKGNvbCA9PiBjb2wubGFiZWxOYW1lID09ICJTUiBOdW1iZXIiKVswXTsKICAgICAgdGhpcy5wYXJlbnRTeXN0ZW1TZXR0aW5ncy5zdGF0aWNDb2x1bW5zLnB1c2goc3RhdGljQ29sKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMudGFibGVDb25maWcuY29sdW1uc1tpXS5sYWJlbE5hbWUgPT0gc3RhdGljQ29sLmxhYmVsTmFtZSkgewogICAgICAgICAgdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zLnNwbGljZShpLCAxKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgLy8gLS0tLS0tLS0tLS0tIFNEVCBGdW5jdGlvbnMgRU5EIC0tLS0tLS0tLS0tLS0tLAogICAgZGVsZXRlT3JBcmNoaXZlU2VydmljZVJlcXVlc3RzKCkgewogICAgICB0aGlzLmRlbGV0ZUluc3BlY3Rpb25EaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5hcmNoaXZlSW5zcGVjdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICBJbnNwZWN0aW9uU2VydmljZS5kZWxldGVPckFyY2hpdmVTZXJ2aWNlUmVxdWVzdCh0aGlzLnV1aWQsIHRoaXMucHJvY2Vzc1R5cGUpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc1R5cGUgPT09ICJhcmNoaXZlIikgewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiU2VydmljZSBSZXF1ZXN0IEFyY2hpdmVkIFN1Y2Nlc3NmdWxseS4iLCAic3VjY2VzcyIpOwogICAgICAgICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIlNlcnZpY2UgUmVxdWVzdCBEZWxldGVkIFN1Y2Nlc3NmdWxseS4iLCAic3VjY2VzcyIpOwogICAgICAgICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLmRhdGEuZGVzY3JpcHRpb24sICJlcnJvciIpOwogICAgICB9KTsKICAgIH0sCgogICAgc2hvd1RvYXN0KG1lc3NhZ2UsIHR5cGUpIHsKICAgICAgdGhpcy50b2FzdE1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICB0aGlzLnRvYXN0VHlwZSA9IHR5cGU7CiAgICAgIHRoaXMudG9hc3RGbGFnKys7CiAgICB9CgogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC50aXRsZSA9IHRoaXMuJHJvdXRlLm1ldGEudGl0bGU7CgogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy50b2FzdEZsYWcgPT09IHRydWUpIHsKICAgICAgdGhpcy5zaG93VG9hc3QodGhpcy4kcm91dGUucGFyYW1zLm1lc3NhZ2UsIHRoaXMuJHJvdXRlLnBhcmFtcy50b2FzdFN1Y2Nlc3MpOwogICAgfQoKICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKSk7CiAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IGN1cnJlbnRVc2VyRGV0YWlsczsKCiAgICBpZiAoY3VycmVudFVzZXJEZXRhaWxzID09PSBudWxsKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJmb3JjZVNpZ25vdXQiLCAieWVzIik7CiAgICAgIHJldHVybjsKICAgIH0gLy8gZmV0Y2hpbmcgY29uZmlncwoKCiAgICBsZXQgdXVpZCA9IGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkOwogICAgYXNzZXRQZXJzb25uZWxTZXJ2aWNlLmdldE9yZ0NvbmZpZ3ModXVpZCwgInRhYmxlQ29uZmlncyIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICB0aGlzLm9yZ0NvbmZpZ3NSZXNwb25zZSA9IHJlc3BvbnNlOwogICAgICBsZXQgYWxsQ29uZmlncyA9IEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YS50YWJsZUNvbmZpZ3MpOwogICAgICB0aGlzLnRhYmxlQ29uZmlnID0gYWxsQ29uZmlncy5maWx0ZXIoZGF0YSA9PiBkYXRhLnBhZ2VOYW1lID09PSAiU2VydmljZVJlcXVlc3QiKVswXTsKICAgICAgdGhpcy5leHRyYWN0RmllbGROYW1lc0ZvclNlYXJjaFF1ZXJ5KHRoaXMudGFibGVDb25maWcpOwogICAgICB0aGlzLnNldFN0YXRpY0NvbHVtbigpOwogICAgICB0aGlzLnNldFRhYmxlQ29uZmlncygpOwogICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICB0aGlzLnNob3dUb2FzdCgiRXJyb3IgZmV0Y2hpbmcgY29uZmlncyIsICJlcnJvciIpOwogICAgfSk7CiAgfSwKCiAgdmFsaWRhdGlvbnM6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7fTsKICB9LAogIHdhdGNoOiB7CiAgICBzZXJ2aWNlUmVxdWVzdFR5cGU6IGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAobmV3VmFsID09PSAiYXJjaGl2ZWQiKSB7CiAgICAgICAgbGV0IGFsbENvbmZpZ3MgPSBKU09OLnBhcnNlKHRoaXMub3JnQ29uZmlnc1Jlc3BvbnNlLmRhdGEudGFibGVDb25maWdzKTsKICAgICAgICBhbGxDb25maWdzID0gYWxsQ29uZmlncy5maWx0ZXIoZGF0YSA9PiBkYXRhLnBhZ2VOYW1lID09PSAiYXJjaGl2ZWRTZXJ2aWNlUmVxdWVzdCIpWzBdOwogICAgICAgIHRoaXMuYXJjaGl2ZWRDb25maWdzID0gYWxsQ29uZmlnczsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHt9Cn07"},null]}