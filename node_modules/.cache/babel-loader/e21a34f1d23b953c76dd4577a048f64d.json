{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/calendar/components/InspectionAssignment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/calendar/components/InspectionAssignment.vue","mtime":1661968702432},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/babel.config.js","mtime":1661968702388},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEFzc2V0UGVyc29ubmVsU2VydmljZSBmcm9tICIuLi8uLi8uLi9zZXJ2aWNlcy9Bc3NldFBlcnNvbm5lbFNlcnZpY2UiOwppbXBvcnQgSW5zcGVjdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvSW5zcGVjdGlvblNlcnZpY2UiOwppbXBvcnQgeyBGdW5jdGlvbnMgfSBmcm9tICJAL3NoYXJlZC9GdW5jdGlvbnMiOwppbXBvcnQgeyByZXF1aXJlZCB9IGZyb20gInZ1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyI7CmltcG9ydCBUZW1wbGF0ZUl0ZW1zIGZyb20gIi4uL2NvbXBvbmVudHMvdGVtcGxhdGVJdGVtcy52dWUiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCBsb2FkZXIgZnJvbSAiQC9jb21wb25lbnRzL0xvYWRlci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRlbXBsYXRlQXNzaWdubWVudCIsCiAgY29tcG9uZW50czogewogICAgbG9hZGVyLAogICAgVGVtcGxhdGVJdGVtcwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWxlY3RlZFRlbXBsYXRlOiAiIiwKICAgICAgdGVtcGxhdGVOYW1lOiAiIiwKICAgICAgdGVtcGxhdGVPcHRpb25zOiBbXSwKICAgICAgc2VsZWN0ZWRUZW1wSXRlbXM6IFtdLAogICAgICBsb2FkZXJGbGFnOiBmYWxzZSwKICAgICAgbmFtZTogIiIsCiAgICAgIGNoZWNrYm94OiB0cnVlLAogICAgICBzaG93VGVtcFBvcFVwOiBmYWxzZSwKICAgICAgcmVtaW5kZXJJbmRleDogMCwKICAgICAgdXNlcklkOiAwLAogICAgICB1c2VyR3JvdXBJZDogMCwKICAgICAgYXNzZXRJZDogMCwKICAgICAgYXNzZXRHcm91cElkOiAwLAogICAgICBkdXJhdGlvblR5cGVJRDogMCwKICAgICAgYXNzaWduQXNzZXRJZDogMCwKICAgICAgc2VsZWN0ZWRUeXBlOiAic2NoZWR1bGUiLAogICAgICBkZWFkbGluZTogIiIsCiAgICAgIHRlbXBsYXRlVVVJRDogIiIsCiAgICAgIGFkaG9jZGF0ZTogIiIsCiAgICAgIGFkaG9jdGltZTogIiIsCiAgICAgIHN0YXJ0RGF0ZTogIiIsCiAgICAgIHN0YXJ0VGltZTogIiIsCiAgICAgIGVuZERhdGU6ICIiLAogICAgICBlbmRUaW1lOiAiIiwKICAgICAgd2Vla0RheTogIiIsCiAgICAgIG1vbnRobHlEYXRlOiAiIiwKICAgICAgZGFpbHlEZWFkTGluZVRpbWU6ICIiLAogICAgICBjdXN0b21WYWx1ZTogIjEiLAogICAgICBvY2N1cmFuY2VzVmFsdWU6ICIiLAogICAgICBjdXN0b21XZWVrOiAid2VlayIsCiAgICAgIGN1c3RvbURhdGU6IHRydWUsCiAgICAgIG9jY3VyYW5jZXNBY3RpdmU6IHRydWUsCiAgICAgIGN1c3RvbVdlZWtEYXk6IFtdLAogICAgICBjdXN0b21Nb250aGx5OiAiIiwKICAgICAgQ3VzdG9tTW9udGhseURhdGU6ICIiLAogICAgICBhc3NpZ25lZEFzc2V0VXVpZDogIiIsCiAgICAgIGFzc2lnbmVkQXNzZXRzT3B0aW9uczogW10sCiAgICAgIGFzc2lnbmVkQXNzZXQ6ICIiLAogICAgICBuZXZlcjogIiIsCiAgICAgIG9uOiAiIiwKICAgICAgYWZ0ZXI6ICIiLAogICAgICBjdXJyZW50VXNlckRldGFpbHM6ICIiLAogICAgICBpbmRleFJlbWluZGVyOiAwLAogICAgICBGcmVxdWVuY3lTdHJpbmc6ICIiLAogICAgICBjdXN0b21PcHRpb25zOiBbewogICAgICAgIG5hbWU6ICJEYWlseSIsCiAgICAgICAgdmFsdWU6ICJkYXkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiV2Vla2x5IiwKICAgICAgICB2YWx1ZTogIndlZWsiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiTW9udGhseSIsCiAgICAgICAgdmFsdWU6ICJtb250aCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJZZWFybHkiLAogICAgICAgIHZhbHVlOiAieWVhciIKICAgICAgfV0sCiAgICAgIGN1c3RvbU9wdGlvbnNNb250aGx5OiBbewogICAgICAgIG5hbWU6ICIxIiwKICAgICAgICB2YWx1ZTogIjEiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMiIsCiAgICAgICAgdmFsdWU6ICIyIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIjMiLAogICAgICAgIHZhbHVlOiAiMyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICI0IiwKICAgICAgICB2YWx1ZTogIjQiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiNSIsCiAgICAgICAgdmFsdWU6ICI1IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIjYiLAogICAgICAgIHZhbHVlOiAiNiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICI3IiwKICAgICAgICB2YWx1ZTogIjciCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiOCIsCiAgICAgICAgdmFsdWU6ICI4IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIjkiLAogICAgICAgIHZhbHVlOiAiOSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxMCIsCiAgICAgICAgdmFsdWU6ICIxMCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxMSIsCiAgICAgICAgdmFsdWU6ICIxMSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxMiIsCiAgICAgICAgdmFsdWU6ICIxMiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxMyIsCiAgICAgICAgdmFsdWU6ICIxMyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxNCIsCiAgICAgICAgdmFsdWU6ICIxNCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxNSIsCiAgICAgICAgdmFsdWU6ICIxNSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxNiIsCiAgICAgICAgdmFsdWU6ICIxNiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxNyIsCiAgICAgICAgdmFsdWU6ICIxNyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxOCIsCiAgICAgICAgdmFsdWU6ICIxOCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxOSIsCiAgICAgICAgdmFsdWU6ICIxOSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyMCIsCiAgICAgICAgdmFsdWU6ICIyMCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyMSIsCiAgICAgICAgdmFsdWU6ICIyMSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyMiIsCiAgICAgICAgdmFsdWU6ICIyMiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyMyIsCiAgICAgICAgdmFsdWU6ICIyMyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyNCIsCiAgICAgICAgdmFsdWU6ICIyNCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyNSIsCiAgICAgICAgdmFsdWU6ICIyNSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyNiIsCiAgICAgICAgdmFsdWU6ICIyNiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyNyIsCiAgICAgICAgdmFsdWU6ICIyNyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyOCIsCiAgICAgICAgdmFsdWU6ICIyOCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyOSIsCiAgICAgICAgdmFsdWU6ICIyOSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIzMCIsCiAgICAgICAgdmFsdWU6ICIzMCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIzMSIsCiAgICAgICAgdmFsdWU6ICIzMSIKICAgICAgfV0sCiAgICAgIHNjaGVkdWxlOiBbewogICAgICAgIG5hbWU6ICJBZC1ob2MiLAogICAgICAgIHZhbHVlOiAiYWQtaG9jIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIkRhaWx5IiwKICAgICAgICB2YWx1ZTogImRhaWx5IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIldlZWtseSIsCiAgICAgICAgdmFsdWU6ICJ3ZWVrbHkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiTW9udGhseSIsCiAgICAgICAgdmFsdWU6ICJtb250aGx5IgogICAgICB9IC8vIHsgbmFtZTogIkN1c3RvbSIsIHZhbHVlOiAiY3VzdG9tIiB9LAogICAgICBdLAogICAgICB3ZWVrbHlEYXlzOiBbewogICAgICAgIG5hbWU6ICJTdW5kYXkiLAogICAgICAgIHZhbHVlOiAiU1VOREFZIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIk1vbmRheSIsCiAgICAgICAgdmFsdWU6ICJNT05EQVkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiVHVlc2RheSIsCiAgICAgICAgdmFsdWU6ICJUVUVTREFZIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIldlZG5lc2RheSIsCiAgICAgICAgdmFsdWU6ICJXRURORVNEQVkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiVGh1cnNkYXkiLAogICAgICAgIHZhbHVlOiAiVEhVUlNEQVkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiRnJpZGF5IiwKICAgICAgICB2YWx1ZTogIkZSSURBWSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJTYXR1cmRheSIsCiAgICAgICAgdmFsdWU6ICJTQVRVUkRBWSIKICAgICAgfV0sCiAgICAgIHNlbGVjdGVkU2NoZWR1bGU6ICIiLAogICAgICB0ZW1wbGF0ZVFhc2ltOiAiIiwKICAgICAgcmVtaW5kZXJBcnJheTogW3sKICAgICAgICByZW1pbmRlcjogW10sCiAgICAgICAgcmVtaW5kZXJPcHRpb25zOiBbewogICAgICAgICAgbmFtZTogIkVtYWlsIiwKICAgICAgICAgIHZhbHVlOiAiZW1haWwiCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIlNNUyIsCiAgICAgICAgICB2YWx1ZTogInNtcyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiTm90aWZpY2F0aW9uIiwKICAgICAgICAgIHZhbHVlOiAibm90aWZpY2F0aW9uIgogICAgICAgIH1dLAogICAgICAgIGR1cmF0aW9uVmFsdWU6ICIiLAogICAgICAgIGR1cmF0aW9uVHlwZTogIiIsCiAgICAgICAgZHVyYXRpb25UeXBlT3B0aW9uczogW3sKICAgICAgICAgIG5hbWU6ICJNaW51dGVzIiwKICAgICAgICAgIHZhbHVlOiAibWludXRlcyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiSG91cnMiLAogICAgICAgICAgdmFsdWU6ICJob3VycyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiRGF5cyIsCiAgICAgICAgICB2YWx1ZTogImRheXMiCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIldlZWtzIiwKICAgICAgICAgIHZhbHVlOiAid2Vla3MiCiAgICAgICAgfV0KICAgICAgfV0sCiAgICAgIGFzc2lnbmVlOiAiIiwKICAgICAgYXNzaWduZWVzOiBbewogICAgICAgIG5hbWU6ICJVc2VycyIsCiAgICAgICAgdmFsdWU6ICJ1c2VyIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIkFzc2V0cyIsCiAgICAgICAgdmFsdWU6ICJhc3NldCIKICAgICAgfV0sCiAgICAgIGFsbFVzZXJzOiBbXSwKICAgICAgdXNlckdyb3VwczogW10sCiAgICAgIGFzc2lnbmVkVXNlckdyb3VwOiAiIiwKICAgICAgYXNzaWduVXNlcnM6IFtdLAogICAgICBhc3NpZ25lZFVzZXI6ICIiLAogICAgICBhc3NldEdyb3VwT3B0aW9uczogW10sCiAgICAgIGdyb3VwQXNzZXRPcHRpb25zOiBbXSwKICAgICAgYXNzZXRHcm91cHM6ICIiLAogICAgICBhc3NldE5hbWU6ICIiLAogICAgICBlZGl0VmFsdWVmbGFnOiBmYWxzZSwKICAgICAgYXNzZXROYW1lVVVJRDogIiIsCiAgICAgIGFzc2V0R3JvdXBzVVVJRDogIiIsCiAgICAgIGFzc2lnbmVkVXNlclVVSUQ6ICIiLAogICAgICBhc3NpZ25lZFVzZXJHcm91cFVVSUQ6ICIiLAogICAgICBhc3NldEFzc2lnbkZsYWc6IHRydWUsCiAgICAgIGFzc2lnbmVkQXNzZXROYW1lOiAiIiwKICAgICAgYXNzZXRBc3NpZ25lZFVzZXJzOiBbXSwKICAgICAgU2VsZWN0ZWRUZW1wbGF0ZU9iajogIiIsCiAgICAgIGtleUluZGV4OiAwCiAgICB9OwogIH0sCgogIHByb3BzOiB7CiAgICB0ZW1wT2JqOiB7fSwKICAgIGFzc2lnbmVkVGVtcGxhdGVPYmo6IHt9LAogICAgY2FsZW5kZXJEYXRlT2JqOiB7fQogIH0sCiAgbWV0aG9kczogewogICAgLy8gIG9uU2VsZWN0ZWRUZW1wbGF0ZSh2YWx1ZSkgewogICAgLy8gICAgICAgICB0aGlzLnRlbXBsYXRlTmFtZSA9IHZhbHVlLmRpc3BsYXk7CiAgICAvLyAgfSwKICAgIG9uU2VsZWN0ZWRUZW1wbGF0ZSh2YWx1ZSkgewogICAgICB0aGlzLnRlbXBsYXRlTmFtZSA9IHZhbHVlLmRpc3BsYXk7CiAgICAgIHRoaXMuU2VsZWN0ZWRUZW1wbGF0ZU9iaiA9IHZhbHVlOyAvLwl0aGlzLm5hbWUgPSB2YWx1ZS5kaXNwbGF5OwoKICAgICAgdGhpcy50ZW1wbGF0ZVVVSUQgPSB2YWx1ZS52YWx1ZTsKICAgICAgY29uc29sZS5sb2codmFsdWUpOwogICAgICB0aGlzLnNob3dUZW1wUG9wVXAgPSB0cnVlOwogICAgfSwKCiAgICBnZXRBbGxUZW1wbGF0ZSgpIHsKICAgICAgbGV0IGN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKTsKICAgICAgSW5zcGVjdGlvblNlcnZpY2UuZ2V0QWxsSW5zcGVjdGlvblRlbXBsYXRlcyhjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAvLwljb25zb2xlLmxvZygid29yayIpOwogICAgICAgICAgdGhpcy50ZW1wbGF0ZU9wdGlvbnMgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25UZW1wbGF0ZURUT1M7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9LAoKICAgIGdldEZvcm1FcnJvck1lc3NhZ2UoZmllbGRWYWxpZGF0aW9uKSB7CiAgICAgIGlmIChmaWVsZFZhbGlkYXRpb24uJGRpcnR5KSB7CiAgICAgICAgcmV0dXJuIEZ1bmN0aW9ucy5nZXRGb3JtRmllbGRFcnJvck1lc3NhZ2UoZmllbGRWYWxpZGF0aW9uKTsKICAgICAgfQogICAgfSwKCiAgICBuZXZlcmZ1bmNOYW1lKHZhbCkgewogICAgICBpZiAodmFsID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5vbiA9IGZhbHNlOwogICAgICAgIHRoaXMuYWZ0ZXIgPSBmYWxzZTsKICAgICAgICB0aGlzLkN1c3RvbU1vbnRobHlEYXRlID0gIiIsIHRoaXMub2NjdXJhbmNlc1ZhbHVlID0gIiI7CiAgICAgIH0KICAgIH0sCgogICAgb25mdW5jTmFtZSh2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMubmV2ZXIgPSBmYWxzZTsKICAgICAgICB0aGlzLmFmdGVyID0gZmFsc2U7CiAgICAgICAgdGhpcy5jdXN0b21EYXRlID0gZmFsc2U7CiAgICAgICAgdGhpcy5vY2N1cmFuY2VzQWN0aXZlID0gdHJ1ZTsKICAgICAgICB0aGlzLm9jY3VyYW5jZXNWYWx1ZSA9ICIiOwogICAgICB9CiAgICB9LAoKICAgIGFmdGVyZnVuY05hbWUodmFsKSB7CiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgICB0aGlzLm9uID0gZmFsc2U7CiAgICAgICAgdGhpcy5uZXZlciA9IGZhbHNlOwogICAgICAgIHRoaXMub2NjdXJhbmNlc0FjdGl2ZSA9IGZhbHNlOwogICAgICAgIHRoaXMuY3VzdG9tRGF0ZSA9IHRydWU7CiAgICAgICAgdGhpcy5vY2N1cmFuY2VzVmFsdWUgPSAiMSI7CiAgICAgICAgdGhpcy5DdXN0b21Nb250aGx5RGF0ZSA9ICIiOwogICAgICB9CiAgICB9LAoKICAgIGNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCJjbG9zZSIpOwogICAgICB0aGlzLnNob3dUZW1wUG9wVXAgPSBmYWxzZTsKICAgIH0sCgogICAgb25TZWxlY3RlZFNjaGVkdWxlKHZhbCkgewogICAgICBpZiAodmFsLnZhbHVlID09PSAiZGFpbHkiKSB7CiAgICAgICAgdGhpcy5kZWFkTGluZURhdGUgPSAiIjsKICAgICAgICB0aGlzLmFkaG9jdGltZSA9ICIiOwogICAgICAgIHRoaXMuYWRob2NkYXRlID0gIiI7CiAgICAgICAgdGhpcy5GcmVxdWVuY3lTdHJpbmcgPSAiRGF5IjsKICAgICAgfSBlbHNlIGlmICh2YWwudmFsdWUgPT09ICJhZC1ob2MiKSB7CiAgICAgICAgdGhpcy5zdGFydERhdGUgPSAiIjsKICAgICAgICB0aGlzLmVuZFRpbWUgPSAiIjsKICAgICAgICB0aGlzLmVuZERhdGUgPSAiIjsKICAgICAgICB0aGlzLmVuZFRpbWUgPSAiIjsKICAgICAgICB0aGlzLmRhaWx5RGVhZExpbmVUaW1lID0gIiI7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09PSAid2Vla2x5IikgewogICAgICAgIHRoaXMuZGVhZExpbmVEYXRlID0gIiI7CiAgICAgICAgdGhpcy5hZGhvY3RpbWUgPSAiIjsKICAgICAgICB0aGlzLmFkaG9jZGF0ZSA9ICIiOwogICAgICAgIHRoaXMuRnJlcXVlbmN5U3RyaW5nID0gIldlZWsiOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PT0gIm1vbnRobHkiKSB7CiAgICAgICAgdGhpcy5kZWFkTGluZURhdGUgPSAiIjsKICAgICAgICB0aGlzLmFkaG9jdGltZSA9ICIiOwogICAgICAgIHRoaXMuYWRob2NkYXRlID0gIiI7CiAgICAgICAgdGhpcy5GcmVxdWVuY3lTdHJpbmcgPSAiTW9udGgiOwogICAgICB9CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRSZW1pbmRlcihpbmRleDEsIHZhbHVlKSB7CiAgICAgIC8vCWNvbnNvbGUubG9nKCJ2YWx1ZSIsIHRoaXMuJHJvdXRlLm5hbWUpOwogICAgICBpZiAodmFsdWUucmVtaW5kZXIubGVuZ3RoID4gMCAmJiB0aGlzLiRyb3V0ZS5uYW1lICE9PSAiaW5zcGVjdGlvbiIpIHsKICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yZW1pbmRlckFycmF5Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgdGhpcy5yZW1pbmRlckFycmF5W2luZGV4MV0uZHVyYXRpb25UeXBlID0gImRheXMiOwogICAgICAgICAgdGhpcy5yZW1pbmRlckFycmF5W2luZGV4MV0uZHVyYXRpb25WYWx1ZSA9ICIxIjsKICAgICAgICAgIGNvbnNvbGUubG9nKCJpbnNpZGUgbG9vcCIsIHZhbHVlKTsKICAgICAgICAgIHRoaXMuZHVyYXRpb25UeXBlSUQrKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgZHVyYXRpb25mdW5jKHZhbHVlKSB7CiAgICAgIGNvbnNvbGUubG9nKCIiLCB2YWx1ZSk7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWREdXJhdGlvblRpbWUodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRBc3NpZ25lZSh2YWwpIHsKICAgICAgLy9jb25zb2xlLmxvZyh2YWwpOwogICAgICBpZiAodmFsLmRpc3BsYXkgPT09ICJBc3NldHMiKSB7CiAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXIgPSAiIjsKICAgICAgICB0aGlzLmFzc2lnbmVkVXNlckdyb3VwID0gIiI7CiAgICAgICAgdGhpcy5jcmVhdGVkRm9yVXNlck5hbWUgPSBudWxsOwogICAgICAgIHRoaXMudXNlcklkKys7CiAgICAgICAgdGhpcy51c2VyR3JvdXBJZCsrOyAvL3RoaXMuZGlzYWJsZVVzZXIgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmICh2YWwuZGlzcGxheSA9PT0gIlVzZXJzIikgewogICAgICAgIHRoaXMuYXNzZXROYW1lID0gIiI7CiAgICAgICAgdGhpcy5hc3NldEdyb3VwcyA9ICIiOwogICAgICAgIHRoaXMuY3JlYXRlZEZvclVzZXJOYW1lID0gbnVsbDsKICAgICAgICB0aGlzLmFzc2V0QXNzaWduZWRVc2VycyA9IFtdOwogICAgICAgIHRoaXMuYXNzZXRHcm91cElkKys7CiAgICAgICAgdGhpcy5hc3NldElkKys7CiAgICAgICAgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMgPSBbXTsgLy90aGlzLmRpc2FibGVBc3NldCA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRVc2VyR3JvdXAodmFsKSB7CiAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gIiI7CiAgICAgIHRoaXMuZWRpdFZhbHVlZmxhZyA9IHRydWU7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldCA9ICIiOwogICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IG51bGw7CiAgICAgIHRoaXMuYXNzaWduQXNzZXRJZCsrOwogICAgICB0aGlzLnVzZXJJZCsrOwogICAgfSwKCiAgICBvblNlbGVjdGVkVXNlcih2YWwpIHsKICAgICAgY29uc29sZS5sb2codmFsKTsKICAgICAgdGhpcy5jcmVhdGVkRm9yVXNlck5hbWUgPSB2YWwuZGlzcGxheTsKICAgICAgdGhpcy5hc3NpZ25lZFVzZXJHcm91cCA9ICIiOwogICAgICB0aGlzLmVkaXRWYWx1ZWZsYWcgPSB0cnVlOwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSAiIjsKICAgICAgdGhpcy5hc3NpZ25Bc3NldElkKys7CiAgICAgIHRoaXMudXNlckdyb3VwSWQrKzsKICAgIH0sCgogICAgb25TZWxlY3RlZEFzc2V0R3JwKHZhbCkgewogICAgICB0aGlzLmFzc2V0TmFtZSA9ICIiOwogICAgICB0aGlzLmVkaXRWYWx1ZWZsYWcgPSB0cnVlOwogICAgICB0aGlzLmFzc2V0QXNzaWduZWRVc2VycyA9IFtdOwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkID0gIiI7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldCA9ICIiOwogICAgICB0aGlzLmFzc2V0SWQrKzsKICAgIH0sCgogICAgb25TZWxlY3RlZEFzc2V0KHZhbCkgewogICAgICB0aGlzLmFzc2V0R3JvdXBzID0gIiI7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPSAiIjsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0ID0gIiI7CiAgICAgIHRoaXMuZWRpdFZhbHVlZmxhZyA9IHRydWU7CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIEFzc2V0UGVyc29ubmVsU2VydmljZS5jaGVja0Fzc2lnbm1lbnRPZkFuQXNzZXRCeVVVSUQodmFsLnZhbHVlKS50aGVuKHJlcyA9PiB7CiAgICAgICAgLy9jb25zb2xlLmxvZygiYXNzZXQgYXNzaWduIG9yIG5vdCIsIHJlcy5kYXRhKTsKICAgICAgICB0aGlzLmFzc2V0QXNzaWduRmxhZyA9IHJlcy5kYXRhLmFzc2lnbm1lbnQ7CiAgICAgICAgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMgPSByZXMuZGF0YS51c2VyRFRPUyAhPT0gbnVsbCA/IHJlcy5kYXRhLnVzZXJEVE9TIDogW107CiAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgICAgdGhpcy5hc3NldEdyb3VwSWQrKzsKICAgIH0sCgogICAgb25TZWxlY3RlZEFzc2lnbkFzc2V0cyh2YWwpIHsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0TmFtZSA9IHZhbC5kaXNwbGF5OwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSB2YWwudmFsdWU7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPSAiIjsKICAgIH0sCgogICAgb25TZWxlY3RlZEN1c3RvbVdlZWsodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CgogICAgICBpZiAodmFsLmRpc3BsYXkgPT0gImRheSIpIHsKICAgICAgICB0aGlzLmZyZXF1ZW5jeURheXMgPSAiIjsKICAgICAgICB0aGlzLmN1c3RvbVdlZWtEYXkgPSAiIjsKICAgICAgICB0aGlzLmN1c3RvbU1vbnRobHkgPSAiIjsKICAgICAgfSBlbHNlIGlmICh2YWwuZGlzcGxheSA9PSAid2VlayIpIHsKICAgICAgICB0aGlzLmN1c3RvbU1vbnRobHkgPSAiIjsKICAgICAgfSBlbHNlIGlmICh2YWwuZGlzcGxheSA9PSAibW9udGgiKSB7CiAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gIiI7CiAgICAgIH0gZWxzZSBpZiAodmFsLmRpc3BsYXkgPT0gInllYXIiKSB7CiAgICAgICAgdGhpcy5mcmVxdWVuY3lEYXlzID0gIiI7CiAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gIiI7CiAgICAgICAgdGhpcy5jdXN0b21Nb250aGx5ID0gIiI7CiAgICAgIH0KICAgIH0sCgogICAgb25TZWxlY3RlZEN1c3RvbU1vbnRobHkoKSB7fSwKCiAgICBzZWxlY3RUZW1wbGF0ZSgpIHsKICAgICAgdGhpcy4kZW1pdCgic2VsZWN0VGVtcCIpOwogICAgfSwKCiAgICBvblNlbGVjdGVkV2Vla0RheSh2YWwpIHsKICAgICAgY29uc29sZS5sb2codmFsKTsKICAgIH0sCgogICAgY3JlYXRlQWRkaXRpb25hbEluc3BlY3Rpb24oKSB7CiAgICAgIHRoaXMuJGVtaXQoImNyZWF0ZUluc3BlY3Rpb24iKTsKICAgIH0sCgogICAgYWRkKGluZGV4KSB7CiAgICAgIHRoaXMuJGVtaXQoImFkZFJlbWluZGVycyIsIGluZGV4KTsKICAgIH0sCgogICAgY2xpY2tSZW1vdmUoaW5kZXgpIHsKICAgICAgdGhpcy4kZW1pdCgicmVtb3ZlUmVtaW5kZXJzIiwgaW5kZXgpOwogICAgfSwKCiAgICBhZGRUZW1wbGF0ZSgpIHsKICAgICAgdGhpcy5zaG93VGVtcFBvcFVwID0gdHJ1ZTsKICAgIH0sCgogICAgdGVtcENsb3NlKCkgewogICAgICB0aGlzLnNob3dUZW1wUG9wVXAgPSBmYWxzZTsKICAgIH0sCgogICAgYWRkUmVtaW5kZXIoKSB7CiAgICAgIHRoaXMucmVtaW5kZXJBcnJheS5wdXNoKHsKICAgICAgICByZW1pbmRlcjogW10sCiAgICAgICAgcmVtaW5kZXJPcHRpb25zOiBbewogICAgICAgICAgbmFtZTogIkVtYWlsIiwKICAgICAgICAgIHZhbHVlOiAiZW1haWwiCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIlNNUyIsCiAgICAgICAgICB2YWx1ZTogInNtcyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiTm90aWZpY2F0aW9uIiwKICAgICAgICAgIHZhbHVlOiAibm90aWZpY2F0aW9uIgogICAgICAgIH1dLAogICAgICAgIGR1cmF0aW9uVmFsdWU6ICIiLAogICAgICAgIGR1cmF0aW9uVHlwZTogIiIsCiAgICAgICAgZHVyYXRpb25UeXBlT3B0aW9uczogW3sKICAgICAgICAgIG5hbWU6ICJNaW51dGVzIiwKICAgICAgICAgIHZhbHVlOiAibWludXRlcyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiSG91cnMiLAogICAgICAgICAgdmFsdWU6ICJob3VycyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiRGF5cyIsCiAgICAgICAgICB2YWx1ZTogImRheXMiCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIldlZWtzIiwKICAgICAgICAgIHZhbHVlOiAid2Vla3MiCiAgICAgICAgfV0KICAgICAgfSk7CiAgICB9LAoKICAgIHJlbW92ZVJlbWluZGVyKGluZGV4KSB7CiAgICAgIGlmIChpbmRleCAhPT0gMCkgewogICAgICAgIHRoaXMucmVtaW5kZXJBcnJheS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CiAgICB9LAoKICAgIFRlbXBsYXRlQXNzaWdubWVudCgpIHsKICAgICAgLy8gdGhpcy4kdi4kdG91Y2goKTsKICAgICAgLy8gaWYgKHRoaXMuJHYuJGludmFsaWQpIHsKICAgICAgLy8gCXJldHVybjsKICAgICAgLy8gfQogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09PSAiY3VzdG9tIikgewogICAgICAgIC8vY29uc29sZS5sb2coInRydWUiKTsKICAgICAgICBpZiAodGhpcy5uZXZlciA9PT0gIiIgJiYgdGhpcy5vbiA9PT0gIiIgJiYgdGhpcy5hZnRlciA9PT0gIiIpIHsKICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IEVuZCBTY2hlZHVsZSBUaW1lIGluIGN1c3RvbSBSZWN1cmVuY2UiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmN1c3RvbVdlZWsgPT0gIndlZWsiICYmIHRoaXMuY3VzdG9tV2Vla0RheS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IFdlZWsgZGF5cyIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuY3VzdG9tV2VlayA9PSAibW9udGgiICYmIHRoaXMuY3VzdG9tTW9udGhseSA9PT0gIiIpIHsKICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IE1vbnRobHkgZGF5Iik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NpZ25lZSA9PT0gInVzZXIiKSB7CiAgICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyID09PSAiIiAmJiB0aGlzLmFzc2lnbmVkVXNlckdyb3VwID09PSAiIikgewogICAgICAgICAgYWxlcnQoIlBsZWFzZSBTZWxlY3QgVXNlciBvciBVc2VyIEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFzc2lnbmVlID09PSAiYXNzZXQiKSB7CiAgICAgICAgaWYgKHRoaXMuYXNzZXROYW1lID09ICIiICYmIHRoaXMuYXNzZXRHcm91cHMgPT0gIiIpIHsKICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IEFzc2V0IG9yIEFzc2V0IEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyICE9PSAiIiAmJiB0aGlzLmFzc2lnbmVkQXNzZXQgPT09ICIiKSB7CiAgICAgICAgYWxlcnQoIlBsZWFzZSBTZWxlY3QgQXNzZXQgdG8gYXNzaWduIFRlbXBsYXRlIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NpZ25lZFVzZXJHcm91cCAhPT0gIiIgJiYgdGhpcy5hc3NpZ25lZEFzc2V0ID09PSAiIikgewogICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IEFzc2V0IHRvIGFzc2lnbiBUZW1wbGF0ZSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYXNzZXROYW1lICE9PSAiIiAmJiB0aGlzLmFzc2V0QXNzaWduRmxhZyA9PT0gZmFsc2UpIHsKICAgICAgICBhbGVydCgiUGxlYXNlIEFzc2lnbiBBc3NldCB0byB1c2VyIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zdGFydERhdGUgIT09ICIiKSB7CiAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQodGhpcy5zdGFydERhdGUpLmZvcm1hdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc3RhcnREYXRlID0gIiI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmVuZERhdGUgIT09ICIiKSB7CiAgICAgICAgdGhpcy5lbmREYXRlID0gbW9tZW50KHRoaXMuZW5kRGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lbmREYXRlID0gIiI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFkaG9jZGF0ZSAhPT0gIiIgJiYgdGhpcy5hZGhvY2RhdGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuZGVhZExpbmVEYXRlID0gbW9tZW50KHRoaXMuYWRob2NkYXRlKS5mb3JtYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSA9ICIiOwogICAgICB9CgogICAgICBpZiAodGhpcy5tb250aGx5RGF0ZSAhPT0gIiIgJiYgdGhpcy5tb250aGx5RGF0ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5tb250aGx5RGF0ZSA9IG1vbWVudCh0aGlzLm1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1vbnRobHlEYXRlID0gIiI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFzc2V0TmFtZSAhPT0gIiIgJiYgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gdGhpcy5hc3NldEFzc2lnbmVkVXNlcnNbMF0udXVpZDsKICAgICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLm5hbWU7CiAgICAgIH0gLy8odGhpcy5lbmREYXRlID0gbW9tZW50KHRoaXMuZW5kRGF0ZSkuZm9ybWF0KCkpLAogICAgICAvLwkodGhpcy5kZWFkTGluZURhdGUgPSBtb21lbnQodGhpcy5hZGhvY2RhdGUpLmZvcm1hdCgpKSwKICAgICAgLy8odGhpcy5tb250aGx5RGF0ZSA9IG1vbWVudCh0aGlzLm1vbnRobHlEYXRlKS5mb3JtYXQoKSk7CiAgICAgIC8vY29uc29sZS5sb2coInRpbWUiLCB0aGlzLmFkaG9jdGltZSk7CgoKICAgICAgbGV0IHJlcXVlc3RPYmogPSB7CiAgICAgICAgdGVtcGxhdGVOYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgdGVtcGxhdGVVVUlEOiB0aGlzLnRlbXBsYXRlVVVJRCwKICAgICAgICBjcmVhdGVkRm9yVXNlck5hbWU6IHRoaXMuY3JlYXRlZEZvclVzZXJOYW1lLAogICAgICAgIHN0YXJ0RGF0ZTogdGhpcy5zdGFydERhdGUsCiAgICAgICAgc3RhcnRUaW1lOiB0aGlzLnN0YXJ0VGltZSwKICAgICAgICBlbmREYXRlOiB0aGlzLmVuZERhdGUsCiAgICAgICAgZW5kVGltZTogdGhpcy5lbmRUaW1lLAogICAgICAgIGRlYWRMaW5lRGF0ZTogdGhpcy5kZWFkTGluZURhdGUsCiAgICAgICAgZGVhZExpbmVUaW1lOiB0aGlzLmFkaG9jdGltZSwKICAgICAgICAvLwltb250aGx5RGF0ZTogdGhpcy5tb250aGx5RGF0ZSwKICAgICAgICBmcmVxdWVuY3lUeXBlOiB0aGlzLnNlbGVjdGVkU2NoZWR1bGUsCiAgICAgICAgY3JlYXRlZEZvckFzc2V0VVVJRDogdGhpcy5hc3NldE5hbWUsCiAgICAgICAgY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEOiB0aGlzLmFzc2V0R3JvdXBzLAogICAgICAgIGRhaWx5RGVhZExpbmVUaW1lOiB0aGlzLmRhaWx5RGVhZExpbmVUaW1lLAogICAgICAgIGNyZWF0ZWRGb3JVc2VyVVVJRDogdGhpcy5hc3NpZ25lZFVzZXIsCiAgICAgICAgY3JlYXRlZEZvclVzZXJHcm91cFVVSUQ6IHRoaXMuYXNzaWduZWRVc2VyR3JvdXAsCiAgICAgICAgc2VsZWN0ZWRVc2VyQXNzZXRVVUlEOiB0aGlzLmFzc2lnbmVkQXNzZXQsCiAgICAgICAgc2VsZWN0ZWRVc2VyQXNzZXROYW1lOiB0aGlzLmFzc2lnbmVkQXNzZXROYW1lLAogICAgICAgIHJlcGVhdEV2ZXJ5VGltZTogdGhpcy5jdXN0b21WYWx1ZSwKICAgICAgICByZXBlYXRFdmVyeVR5cGU6IHRoaXMuY3VzdG9tV2VlaywKICAgICAgICByZXBlYXRNb250aERheTogdGhpcy5jdXN0b21Nb250aGx5CiAgICAgIH07CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJhZC1ob2MiKSB7CiAgICAgICAgcmVxdWVzdE9iai5pbnNwZWN0aW9uVHlwZSA9ICJhZC1ob2MiOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcXVlc3RPYmouaW5zcGVjdGlvblR5cGUgPSAic2NoZWR1bGVkIjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAid2Vla2x5IikgewogICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IHRoaXMud2Vla0RheTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiY3VzdG9tIiAmJiByZXF1ZXN0T2JqLnJlcGVhdEV2ZXJ5VHlwZSA9PSAid2VlayIpIHsKICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmN1c3RvbVdlZWtEYXkpOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IikgewogICAgICAgIHJlcXVlc3RPYmoubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5tb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImRhaWx5IiB8fCB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gIndlZWtseSIgfHwgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IikgewogICAgICAgIC8vCXJlcXVlc3RPYmoubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5DdXN0b21Nb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgICAgaWYgKHJlcXVlc3RPYmoucmVwZWF0RXZlcnlUeXBlID09PSAid2VlayIpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY3VzdG9tV2Vla0RheSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5uZXZlciA9PSB0cnVlKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZFR5cGUgPSAibmV2ZXIiOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMub24gPT0gdHJ1ZSkgewogICAgICAgICAgcmVxdWVzdE9iai5lbmRUeXBlID0gIm9uIjsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kRGF0ZSA9IG1vbWVudCh0aGlzLkN1c3RvbU1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmFmdGVyID09IHRydWUpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kVHlwZSA9ICJhZnRlciI7CiAgICAgICAgICByZXF1ZXN0T2JqLm9jY3VycmVuY2UgPSB0aGlzLm9jY3VyYW5jZXNWYWx1ZTsKICAgICAgICB9CiAgICAgIH0gLy8gaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiY3VzdG9tIikgewogICAgICAvLyB9CgoKICAgICAgbGV0IHJlbWluZGVyQXJyYXkgPSBbXTsKCiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJlbWluZGVyQXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgIHJlbWluZGVyOiB0aGlzLnJlbWluZGVyQXJyYXlbaW5kZXhdLnJlbWluZGVyLAogICAgICAgICAgZHVyYXRpb25WYWx1ZTogdGhpcy5yZW1pbmRlckFycmF5W2luZGV4XS5kdXJhdGlvblZhbHVlLAogICAgICAgICAgZHVyYXRpb25UeXBlOiB0aGlzLnJlbWluZGVyQXJyYXlbaW5kZXhdLmR1cmF0aW9uVHlwZQogICAgICAgIH07CiAgICAgICAgcmVtaW5kZXJBcnJheS5wdXNoKG9iaik7CiAgICAgICAgcmVxdWVzdE9iai5yZW1pbmRlciA9IEpTT04uc3RyaW5naWZ5KHJlbWluZGVyQXJyYXkpOwogICAgICB9IC8vY29uc29sZS5sb2coInJlcXVlc3RPYmoiLCByZXF1ZXN0T2JqKTsKCgogICAgICB0aGlzLiRlbWl0KCJyZXF1ZXN0T2JqIiwgcmVxdWVzdE9iaik7CiAgICAgIHRoaXMuJGVtaXQoInNlbGVjdGVkVGVtcEl0ZW1zIiwgdGhpcy5zZWxlY3RlZFRlbXBJdGVtcyk7CiAgICAgIHRoaXMua2V5SW5kZXgrKzsKICAgIH0sCgogICAgZWRpdEFzc2lnbmVkVGVtcCgpIHsKICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID0gdGhpcy5hc3NpZ25lZFRlbXBsYXRlT2JqLmZyZXF1ZW5jeVR5cGU7CiAgICB9LAoKICAgIC8vIFVwZGF0ZVRlbXBsYXRlQXNzaWdubWVudCgpIHsKICAgIC8vIAl0aGlzLiR2LiR0b3VjaCgpOwogICAgLy8gCWlmICh0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAvLyAJCXJldHVybjsKICAgIC8vIAl9CiAgICAvLyAJaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PT0gImN1c3RvbSIpIHsKICAgIC8vIAkJLy9jb25zb2xlLmxvZygidHJ1ZSIpOwogICAgLy8gCQlpZiAodGhpcy5uZXZlciA9PT0gIiIgJiYgdGhpcy5vbiA9PT0gIiIgJiYgdGhpcy5hZnRlciA9PT0gIiIpIHsKICAgIC8vIAkJCWFsZXJ0KCJQbGVhc2UgU2VsZWN0IEVuZCBTY2hlZHVsZSBUaW1lIGluIGN1c3RvbSBSZWN1cmVuY2UiKTsKICAgIC8vIAkJCXJldHVybjsKICAgIC8vIAkJfQogICAgLy8gCQlpZiAodGhpcy5jdXN0b21XZWVrID09ICJ3ZWVrIiAmJiB0aGlzLmN1c3RvbVdlZWtEYXkubGVuZ3RoID09PSAwKSB7CiAgICAvLyAJCQlhbGVydCgiUGxlYXNlIFNlbGVjdCBXZWVrIGRheXMiKTsKICAgIC8vIAkJCXJldHVybjsKICAgIC8vIAkJfQogICAgLy8gCQlpZiAodGhpcy5jdXN0b21XZWVrID09ICJtb250aCIgJiYgdGhpcy5jdXN0b21Nb250aGx5ID09PSAiIikgewogICAgLy8gCQkJYWxlcnQoIlBsZWFzZSBTZWxlY3QgTW9udGhseSBkYXkiKTsKICAgIC8vIAkJCXJldHVybjsKICAgIC8vIAkJfQogICAgLy8gCX0KICAgIC8vIAlpZiAodGhpcy5hc3NpZ25lZSA9PT0gInVzZXIiKSB7CiAgICAvLyAJCWlmICh0aGlzLmFzc2lnbmVkVXNlciA9PT0gIiIgJiYgdGhpcy5hc3NpZ25lZFVzZXJHcm91cCA9PT0gIiIpIHsKICAgIC8vIAkJCWFsZXJ0KCJQbGVhc2UgU2VsZWN0IFVzZXIgb3IgVXNlciBHcm91cCB0byBhc3NpZ24gVGVtcGxhdGUiKTsKICAgIC8vIAkJCXJldHVybjsKICAgIC8vIAkJfQogICAgLy8gCX0gZWxzZSBpZiAodGhpcy5hc3NpZ25lZSA9PT0gImFzc2V0IikgewogICAgLy8gCQlpZiAodGhpcy5hc3NldE5hbWUgPT0gIiIgJiYgdGhpcy5hc3NldEdyb3VwcyA9PSAiIikgewogICAgLy8gCQkJYWxlcnQoIlBsZWFzZSBTZWxlY3QgQXNzZXQgb3IgQXNzZXQgR3JvdXAgdG8gYXNzaWduIFRlbXBsYXRlIik7CiAgICAvLyAJCQlyZXR1cm47CiAgICAvLyAJCX0KICAgIC8vIAl9CiAgICAvLyAJaWYgKAogICAgLy8gCQl0aGlzLmFzc2lnbmVkVXNlciAhPT0gIiIgJiYKICAgIC8vIAkJdGhpcy5hc3NpZ25lZEFzc2V0ID09PSAiIiAmJgogICAgLy8gCQl0aGlzLmFzc2lnbmVlID09PSAidXNlciIKICAgIC8vIAkpIHsKICAgIC8vIAkJYWxlcnQoIlBsZWFzZSBTZWxlY3QgQXNzZXQgdG8gYXNzaWduIFRlbXBsYXRlIik7CiAgICAvLyAJCXJldHVybjsKICAgIC8vIAl9CiAgICAvLyAJaWYgKHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgIT09ICIiICYmIHRoaXMuYXNzaWduZWRBc3NldCA9PT0gIiIpIHsKICAgIC8vIAkJYWxlcnQoIlBsZWFzZSBTZWxlY3QgQXNzZXQgdG8gYXNzaWduIFRlbXBsYXRlIik7CiAgICAvLyAJCXJldHVybjsKICAgIC8vIAl9CiAgICAvLyAJaWYgKHRoaXMuYXNzZXROYW1lICE9PSAiIiAmJiB0aGlzLmFzc2V0QXNzaWduRmxhZyA9PT0gZmFsc2UpIHsKICAgIC8vIAkJYWxlcnQoIlBsZWFzZSBBc3NpZ24gQXNzZXQgdG8gdXNlciIpOwogICAgLy8gCQlyZXR1cm47CiAgICAvLyAJfQogICAgLy8gCS8vCXRoaXMuc3RhcnREYXRlID0gbW9tZW50KHRoaXMuc3RhcnREYXRlKS50b0lTT1N0cmluZygpLAogICAgLy8gCS8vCXRoaXMuZW5kRGF0ZSA9IG1vbWVudCh0aGlzLmVuZERhdGUpLmZvcm1hdCgpLAogICAgLy8gCS8vCXRoaXMuZGVhZExpbmVEYXRlID0gbW9tZW50KHRoaXMuYWRob2NkYXRlKS5mb3JtYXQoKSwKICAgIC8vIAkvLwl0aGlzLm1vbnRobHlEYXRlID0gbW9tZW50KHRoaXMubW9udGhseURhdGUpLmZvcm1hdCgpOwogICAgLy8gCS8vY29uc29sZS5sb2coInRpbWUiLCB0aGlzLmFkaG9jdGltZSk7CiAgICAvLyAJbGV0IHJlcXVlc3RPYmogPSB7CiAgICAvLyAJCXRlbXBsYXRlTmFtZTogdGhpcy5uYW1lLAogICAgLy8gCQl0ZW1wbGF0ZVVVSUQ6IHRoaXMudGVtcGxhdGVVVUlELAogICAgLy8gCQljcmVhdGVkRm9yVXNlck5hbWU6IHRoaXMuY3JlYXRlZEZvclVzZXJOYW1lLAogICAgLy8gCQlkZWFkTGluZVRpbWU6IHRoaXMuYWRob2N0aW1lLAogICAgLy8gCQlmcmVxdWVuY3lUeXBlOiB0aGlzLnNlbGVjdGVkU2NoZWR1bGUsCiAgICAvLyAJCWxhc3RVcGRhdGVkQnlOYW1lOgogICAgLy8gCQkJdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5maXJzdE5hbWUgKwogICAgLy8gCQkJIiAiICsKICAgIC8vIAkJCXRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUubGFzdE5hbWUsCiAgICAvLyAJCWxhc3RVcGRhdGVkQnlVVUlEOiB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLnVzZXJpZCwKICAgIC8vIAkJLy8Jc2VsZWN0ZWRVc2VyQXNzZXRVVUlEOiB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkICE9PSAnJyA/ICB0aGlzLmFzc2lnbmVkQXNzZXQ6IHRoaXMuYXNzaWduZWRBc3NldFV1aWQsCiAgICAvLyAJCS8vCXNlbGVjdGVkVXNlckFzc2V0TmFtZTogdGhpcy5hc3NpZ25lZEFzc2V0VXVpZCAhPT0gJycgPyB0aGlzLmFzc2lnbmVkQXNzZXROYW1lOiB0aGlzLmFzc2lnbmVkQXNzZXQsCiAgICAvLyAJCS8vIGNyZWF0ZWRGb3JBc3NldFVVSUQ6IHRoaXMuYXNzZXROYW1lLAogICAgLy8gCQkvLyBjcmVhdGVkRm9yQXNzZXRHcm91cFVVSUQ6IHRoaXMuYXNzZXRHcm91cHMsCiAgICAvLyAJCS8vIGNyZWF0ZWRGb3JVc2VyVVVJRDogdGhpcy5hc3NpZ25lZFVzZXIsCiAgICAvLyAJCS8vIGNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEOiB0aGlzLmFzc2lnbmVkVXNlckdyb3VwLAogICAgLy8gCX07CiAgICAvLyAJaWYgKHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPT09ICIiIHx8IHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPT09IG51bGwpIHsKICAgIC8vIAkJcmVxdWVzdE9iai5zZWxlY3RlZFVzZXJBc3NldFVVSUQgPSB0aGlzLmFzc2lnbmVkQXNzZXQ7CiAgICAvLyAJCXJlcXVlc3RPYmouc2VsZWN0ZWRVc2VyQXNzZXROYW1lID0gdGhpcy5hc3NpZ25lZEFzc2V0TmFtZTsKICAgIC8vIAkJY29uc29sZS5sb2coImVtcHR5Iik7CiAgICAvLyAJfSBlbHNlIHsKICAgIC8vIAkJcmVxdWVzdE9iai5zZWxlY3RlZFVzZXJBc3NldFVVSUQgPSB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkOwogICAgLy8gCQlyZXF1ZXN0T2JqLnNlbGVjdGVkVXNlckFzc2V0TmFtZSA9IHRoaXMuYXNzaWduZWRBc3NldDsKICAgIC8vIAkJY29uc29sZS5sb2coIm5vdCBlbXB0eSIpOwogICAgLy8gCX0KICAgIC8vIAlpZiAodGhpcy5hc3NpZ25lZSA9PT0gImFzc2V0IiAmJiB0aGlzLmFzc2V0QXNzaWduZWRVc2Vycy5sZW5ndGggPiAwKSB7CiAgICAvLyAJCWlmICh0aGlzLmVkaXRWYWx1ZWZsYWcgPT09IHRydWUpIHsKICAgIC8vIAkJCXRoaXMuYXNzaWduZWRVc2VyID0gdGhpcy5hc3NldEFzc2lnbmVkVXNlcnNbMF0udXVpZDsKICAgIC8vIAkJCXJlcXVlc3RPYmouY3JlYXRlZEZvclVzZXJOYW1lID0gdGhpcy5hc3NldEFzc2lnbmVkVXNlcnNbMF0ubmFtZTsKICAgIC8vIAkJfSBlbHNlIHsKICAgIC8vIAkJCXRoaXMuYXNzaWduZWRVc2VyVVVJRCA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLnV1aWQ7CiAgICAvLyAJCQlyZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLm5hbWU7CiAgICAvLyAJCX0KICAgIC8vIAl9CiAgICAvLyAJaWYgKHRoaXMuZWRpdFZhbHVlZmxhZyA9PT0gdHJ1ZSkgewogICAgLy8gCQlyZXF1ZXN0T2JqLmNyZWF0ZWRGb3JBc3NldFVVSUQgPSB0aGlzLmFzc2V0TmFtZTsKICAgIC8vIAkJcmVxdWVzdE9iai5jcmVhdGVkRm9yQXNzZXRHcm91cFVVSUQgPSB0aGlzLmFzc2V0R3JvdXBzOwogICAgLy8gCQlyZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyVVVJRCA9IHRoaXMuYXNzaWduZWRVc2VyOwogICAgLy8gCQlyZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEID0gdGhpcy5hc3NpZ25lZFVzZXJHcm91cDsKICAgIC8vIAl9IGVsc2UgaWYgKHRoaXMuZWRpdFZhbHVlZmxhZyA9PT0gZmFsc2UpIHsKICAgIC8vIAkJcmVxdWVzdE9iai5jcmVhdGVkRm9yQXNzZXRVVUlEID0gdGhpcy5hc3NldE5hbWVVVUlEOwogICAgLy8gCQlyZXF1ZXN0T2JqLmNyZWF0ZWRGb3JBc3NldEdyb3VwVVVJRCA9IHRoaXMuYXNzZXRHcm91cHNVVUlEOwogICAgLy8gCQlyZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyVVVJRCA9IHRoaXMuYXNzaWduZWRVc2VyVVVJRDsKICAgIC8vIAkJcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlckdyb3VwVVVJRCA9IHRoaXMuYXNzaWduZWRVc2VyR3JvdXBVVUlEOwogICAgLy8gCX0KICAgIC8vIAlpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJhZC1ob2MiKSB7CiAgICAvLyAJCXJlcXVlc3RPYmouaW5zcGVjdGlvblR5cGUgPSAiYWQtaG9jIjsKICAgIC8vIAkJKHJlcXVlc3RPYmouZGVhZExpbmVEYXRlID0gbW9tZW50KHRoaXMuYWRob2NkYXRlKS5mb3JtYXQoKSksCiAgICAvLyAJCQkocmVxdWVzdE9iai5kZWFkTGluZVRpbWUgPSB0aGlzLmFkaG9jdGltZSk7CiAgICAvLyAJCXJlcXVlc3RPYmouZGFpbHlEZWFkTGluZVRpbWUgPSBudWxsOwogICAgLy8gCQlyZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBudWxsOwogICAgLy8gCQlyZXF1ZXN0T2JqLm1vbnRobHlEYXRlID0gbnVsbDsKICAgIC8vIAkJcmVxdWVzdE9iai5zdGFydERhdGUgPSBudWxsOwogICAgLy8gCQlyZXF1ZXN0T2JqLnN0YXJ0VGltZSA9IG51bGw7CiAgICAvLyAJCXJlcXVlc3RPYmouZW5kRGF0ZSA9IG51bGw7CiAgICAvLyAJCXJlcXVlc3RPYmouZW5kVGltZSA9IG51bGw7CiAgICAvLyAJfSBlbHNlIHsKICAgIC8vIAkJcmVxdWVzdE9iai5pbnNwZWN0aW9uVHlwZSA9ICJzY2hlZHVsZWQiOwogICAgLy8gCX0KICAgIC8vIAlpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJkYWlseSIpIHsKICAgIC8vIAkJcmVxdWVzdE9iai5kZWFkTGluZURhdGUgPSBudWxsOwogICAgLy8gCQlyZXF1ZXN0T2JqLmRlYWRMaW5lVGltZSA9IG51bGw7CiAgICAvLyAJCXJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IG51bGw7CiAgICAvLyAJCXJlcXVlc3RPYmoubW9udGhseURhdGUgPSBudWxsOwogICAgLy8gCQlyZXF1ZXN0T2JqLmRhaWx5RGVhZExpbmVUaW1lID0gdGhpcy5kYWlseURlYWRMaW5lVGltZTsKICAgIC8vIAkJKHJlcXVlc3RPYmouc3RhcnREYXRlID0gbW9tZW50KHRoaXMuc3RhcnREYXRlKS5mb3JtYXQoKSksCiAgICAvLyAJCQkocmVxdWVzdE9iai5zdGFydFRpbWUgPSB0aGlzLnN0YXJ0VGltZSk7CiAgICAvLyAJCShyZXF1ZXN0T2JqLmVuZERhdGUgPSBtb21lbnQodGhpcy5lbmREYXRlKS5mb3JtYXQoKSksCiAgICAvLyAJCQkocmVxdWVzdE9iai5lbmRUaW1lID0gdGhpcy5lbmRUaW1lKTsKICAgIC8vIAl9CiAgICAvLyAJaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAid2Vla2x5IikgewogICAgLy8gCQlyZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSB0aGlzLndlZWtEYXk7CiAgICAvLyAJCXJlcXVlc3RPYmouZGVhZExpbmVEYXRlID0gbnVsbDsKICAgIC8vIAkJcmVxdWVzdE9iai5kZWFkTGluZVRpbWUgPSBudWxsOwogICAgLy8gCQlyZXF1ZXN0T2JqLmRhaWx5RGVhZExpbmVUaW1lID0gbnVsbDsKICAgIC8vIAkJKHJlcXVlc3RPYmouc3RhcnREYXRlID0gbW9tZW50KHRoaXMuc3RhcnREYXRlKS5mb3JtYXQoKSksCiAgICAvLyAJCQkocmVxdWVzdE9iai5zdGFydFRpbWUgPSB0aGlzLnN0YXJ0VGltZSk7CiAgICAvLyAJCShyZXF1ZXN0T2JqLmVuZERhdGUgPSBtb21lbnQodGhpcy5lbmREYXRlKS5mb3JtYXQoKSksCiAgICAvLyAJCQkocmVxdWVzdE9iai5lbmRUaW1lID0gdGhpcy5lbmRUaW1lKTsKICAgIC8vIAl9CiAgICAvLyAJaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiY3VzdG9tIikgewogICAgLy8gCQlyZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSB0aGlzLmN1c3RvbVdlZWtEYXk7CiAgICAvLyAJCXJlcXVlc3RPYmouZGVhZExpbmVEYXRlID0gbnVsbDsKICAgIC8vIAkJcmVxdWVzdE9iai5kZWFkTGluZVRpbWUgPSBudWxsOwogICAgLy8gCX0KICAgIC8vIAlpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IikgewogICAgLy8gCQlyZXF1ZXN0T2JqLm1vbnRobHlEYXRlID0gbW9tZW50KHRoaXMubW9udGhseURhdGUpLmZvcm1hdCgpOwogICAgLy8gCQlyZXF1ZXN0T2JqLmRlYWRMaW5lRGF0ZSA9IG51bGw7CiAgICAvLyAJCXJlcXVlc3RPYmouZGVhZExpbmVUaW1lID0gbnVsbDsKICAgIC8vIAkJcmVxdWVzdE9iai5kYWlseURlYWRMaW5lVGltZSA9IG51bGw7CiAgICAvLyAJCXJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IG51bGw7CiAgICAvLyAJCShyZXF1ZXN0T2JqLnN0YXJ0RGF0ZSA9IG1vbWVudCh0aGlzLnN0YXJ0RGF0ZSkuZm9ybWF0KCkpLAogICAgLy8gCQkJKHJlcXVlc3RPYmouc3RhcnRUaW1lID0gdGhpcy5zdGFydFRpbWUpOwogICAgLy8gCQkocmVxdWVzdE9iai5lbmREYXRlID0gbW9tZW50KHRoaXMuZW5kRGF0ZSkuZm9ybWF0KCkpLAogICAgLy8gCQkJKHJlcXVlc3RPYmouZW5kVGltZSA9IHRoaXMuZW5kVGltZSk7CiAgICAvLyAJfQogICAgLy8gCWlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImN1c3RvbSIpIHsKICAgIC8vIAkJcmVxdWVzdE9iai5tb250aGx5RGF0ZSA9IG1vbWVudCh0aGlzLkN1c3RvbU1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgIC8vIAkJcmVxdWVzdE9iai5kZWFkTGluZURhdGUgPSBudWxsOwogICAgLy8gCQlyZXF1ZXN0T2JqLmRlYWRMaW5lVGltZSA9IG51bGw7CiAgICAvLyAJCXJlcXVlc3RPYmouZGFpbHlEZWFkTGluZVRpbWUgPSBudWxsOwogICAgLy8gCQlyZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBudWxsOwogICAgLy8gCQlyZXF1ZXN0T2JqLm1vbnRobHlEYXRlID0gbnVsbDsKICAgIC8vIAkJcmVxdWVzdE9iai5zdGFydERhdGUgPSBudWxsOwogICAgLy8gCQlyZXF1ZXN0T2JqLnN0YXJ0VGltZSA9IG51bGw7CiAgICAvLyAJCXJlcXVlc3RPYmouZW5kRGF0ZSA9IG51bGw7CiAgICAvLyAJCXJlcXVlc3RPYmouZW5kVGltZSA9IG51bGw7CiAgICAvLyAJCXJlcXVlc3RPYmoucmVwZWF0RXZlcnlUaW1lID0gdGhpcy5jdXN0b21WYWx1ZTsKICAgIC8vIAkJcmVxdWVzdE9iai5yZXBlYXRFdmVyeVR5cGUgPSB0aGlzLmN1c3RvbVdlZWs7CiAgICAvLyAJCWlmICh0aGlzLm5ldmVyID09IHRydWUpIHsKICAgIC8vIAkJCXJlcXVlc3RPYmouZW5kVHlwZSA9ICJuZXZlciI7CiAgICAvLyAJCQlyZXF1ZXN0T2JqLmVuZERhdGUgPSAiIjsKICAgIC8vIAkJCXJlcXVlc3RPYmoub2NjdXJyZW5jZSA9ICIiOwogICAgLy8gCQl9CiAgICAvLyAJCWlmICh0aGlzLm9uID09IHRydWUpIHsKICAgIC8vIAkJCXJlcXVlc3RPYmouZW5kVHlwZSA9ICJvbiI7CiAgICAvLyAJCQlyZXF1ZXN0T2JqLmVuZERhdGUgPSBtb21lbnQodGhpcy5DdXN0b21Nb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAvLyAJCQlyZXF1ZXN0T2JqLm9jY3VycmVuY2UgPSAiIjsKICAgIC8vIAkJfQogICAgLy8gCQlpZiAodGhpcy5hZnRlciA9PSB0cnVlKSB7CiAgICAvLyAJCQlyZXF1ZXN0T2JqLmVuZFR5cGUgPSAiYWZ0ZXIiOwogICAgLy8gCQkJcmVxdWVzdE9iai5vY2N1cnJlbmNlID0gdGhpcy5vY2N1cmFuY2VzVmFsdWU7CiAgICAvLyAJCQlyZXF1ZXN0T2JqLmVuZERhdGUgPSAiIjsKICAgIC8vIAkJfQogICAgLy8gCQlpZiAocmVxdWVzdE9iai5yZXBlYXRFdmVyeVR5cGUgPT09ICJ3ZWVrIikgewogICAgLy8gCQkJcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jdXN0b21XZWVrRGF5KTsKICAgIC8vIAkJfSBlbHNlIGlmIChyZXF1ZXN0T2JqLnJlcGVhdEV2ZXJ5VHlwZSA9PT0gIm1vbnRoIikgewogICAgLy8gCQkJKHJlcXVlc3RPYmoucmVwZWF0TW9udGhEYXkgPSB0aGlzLmN1c3RvbU1vbnRobHkpLAogICAgLy8gCQkJCShyZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSAiIik7CiAgICAvLyAJCX0gZWxzZSBpZiAoCiAgICAvLyAJCQlyZXF1ZXN0T2JqLnJlcGVhdEV2ZXJ5VHlwZSA9PT0gImRheSIgfHwKICAgIC8vIAkJCXJlcXVlc3RPYmoucmVwZWF0RXZlcnlUeXBlID09PSAieWVhciIKICAgIC8vIAkJKSB7CiAgICAvLyAJCQkocmVxdWVzdE9iai5yZXBlYXRNb250aERheSA9ICIiKSwgKHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9ICIiKTsKICAgIC8vIAkJfQogICAgLy8gCX0KICAgIC8vIAkvLwljb25zb2xlLmxvZygiYmVmb3JlIGFycmF5IiwgdGhpcy5yZW1pbmRlckFycmF5KTsKICAgIC8vIAlsZXQgcmVtaW5kZXJBcnJheSA9IFtdOwogICAgLy8gCWZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJlbWluZGVyQXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAvLyAJCS8vZGVidWdnZXIKICAgIC8vIAkJbGV0IG9iaiA9IHsKICAgIC8vIAkJCXJlbWluZGVyOiB0aGlzLnJlbWluZGVyQXJyYXlbaW5kZXhdLnJlbWluZGVyLAogICAgLy8gCQkJZHVyYXRpb25WYWx1ZTogdGhpcy5yZW1pbmRlckFycmF5W2luZGV4XS5kdXJhdGlvblZhbHVlLAogICAgLy8gCQkJZHVyYXRpb25UeXBlOiB0aGlzLnJlbWluZGVyQXJyYXlbaW5kZXhdLmR1cmF0aW9uVHlwZSwKICAgIC8vIAkJfTsKICAgIC8vIAkJLy8JY29uc29sZS5sb2coImFycmF5IiwgcmVtaW5kZXJBcnJheSk7CiAgICAvLyAJCXJlbWluZGVyQXJyYXkucHVzaChvYmopOwogICAgLy8gCQlyZXF1ZXN0T2JqLnJlbWluZGVyID0gSlNPTi5zdHJpbmdpZnkocmVtaW5kZXJBcnJheSk7CiAgICAvLyAJfQogICAgLy8gCWNvbnNvbGUubG9nKHJlcXVlc3RPYmopOwogICAgLy8gCS8vCXJldHVybgogICAgLy8gCXRoaXMuJGVtaXQoInVwZGF0ZUFzc2lnbmVkVGVtcGxhdGUiLCByZXF1ZXN0T2JqKTsKICAgIC8vIH0sCiAgICBnZXRFeGlzdGluZ0luc3BlY3Rpb25UZW1wbGF0ZSh1dWlkLCB0ZW5hbnRVVUlEKSB7CiAgICAgIGxldCBpbnNwZWN0aW9uSXRlbSA9IG51bGw7CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmdldEluc3BlY3Rpb25UZW1wbGF0ZUJ5VVVJRCh1dWlkLCB0ZW5hbnRVVUlEKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuZ3JvdXBBc3NldE9wdGlvbnMgPSByZXNwb25zZS5kYXRhLmFzc2V0QW5kR3JvdXBzTmFtZVJlc3BvbnNlLmFzc2V0RFRPUzsKICAgICAgICAgIHRoaXMuYXNzZXRHcm91cE9wdGlvbnMgPSByZXNwb25zZS5kYXRhLmFzc2V0QW5kR3JvdXBzTmFtZVJlc3BvbnNlLmFzc2V0R3JvdXBEVE9TOwogICAgICAgICAgdGhpcy51c2VyR3JvdXBzID0gcmVzcG9uc2UuZGF0YS51c2VyQW5kR3JvdXBSZXNwb25zZS51c2VyR3JvdXBEVE9TOwogICAgICAgICAgdGhpcy5hc3NpZ25Vc2VycyA9IHJlc3BvbnNlLmRhdGEudXNlckFuZEdyb3VwUmVzcG9uc2UudXNlckRUT1M7CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblRlbXBsYXRlICE9IG51bGwpIHsKICAgICAgICAgICAgaW5zcGVjdGlvbkl0ZW0gPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25UZW1wbGF0ZTsKICAgICAgICAgICAgdGhpcy5pbnNwZWN0aW9uVGVtcGxhdGUgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25UZW1wbGF0ZTsKICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZU5hbWUgPSBpbnNwZWN0aW9uSXRlbS5uYW1lOwogICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPSBpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlOwogICAgICAgICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSBpbnNwZWN0aW9uSXRlbS5zZWxlY3RlZFVzZXJBc3NldE5hbWU7CiAgICAgICAgICAgIHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPSBpbnNwZWN0aW9uSXRlbS5zZWxlY3RlZFVzZXJBc3NldFVVSUQ7CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5VHlwZSA9PT0gImFkLWhvYyIpIHsKICAgICAgICAgICAgICB0aGlzLmFkaG9jZGF0ZSA9IG1vbWVudChpbnNwZWN0aW9uSXRlbS5kZWFkTGluZURhdGUpLmZvcm1hdCgiREQgTU1NIFlZWVkiKTsKICAgICAgICAgICAgICB0aGlzLmFkaG9jdGltZSA9IGluc3BlY3Rpb25JdGVtLmRlYWRMaW5lVGltZTsKICAgICAgICAgICAgICB0aGlzLmluZGV4UmVtaW5kZXIrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeVR5cGUgPT09ICJkYWlseSIpIHsKICAgICAgICAgICAgICB0aGlzLmRhaWx5RGVhZExpbmVUaW1lID0gaW5zcGVjdGlvbkl0ZW0uZGFpbHlEZWFkTGluZVRpbWU7CiAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uc3RhckRhdGUpLmZvcm1hdCgiREQgTU1NIFlZWVkiKTsKICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IGluc3BlY3Rpb25JdGVtLnN0YXJ0VGltZTsKICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uZW5kRGF0ZSkuZm9ybWF0KCJERCBNTU0gWVlZWSIpOwogICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IGluc3BlY3Rpb25JdGVtLmVuZFRpbWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlID09PSAid2Vla2x5IikgewogICAgICAgICAgICAgIHRoaXMud2Vla0RheSA9IGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeURheXM7CiAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uc3RhckRhdGUpLmZvcm1hdCgiREQgTU1NIFlZWVkiKTsKICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IGluc3BlY3Rpb25JdGVtLnN0YXJ0VGltZTsKICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uZW5kRGF0ZSkuZm9ybWF0KCJERCBNTU0gWVlZWSIpOwogICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IGluc3BlY3Rpb25JdGVtLmVuZFRpbWU7CiAgICAgICAgICAgICAgdGhpcy5pbmRleFJlbWluZGVyKys7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlID09PSAibW9udGhseSIpIHsKICAgICAgICAgICAgICB0aGlzLm1vbnRobHlEYXRlID0gbW9tZW50KGluc3BlY3Rpb25JdGVtLm1vbnRobHlEYXRlKS5mb3JtYXQoIkREIE1NTSBZWVlZIik7CiAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uc3RhckRhdGUpLmZvcm1hdCgiREQgTU1NIFlZWVkiKTsKICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IGluc3BlY3Rpb25JdGVtLnN0YXJ0VGltZTsKICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uZW5kRGF0ZSkuZm9ybWF0KCJERCBNTU0gWVlZWSIpOwogICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IGluc3BlY3Rpb25JdGVtLmVuZFRpbWU7CiAgICAgICAgICAgICAgdGhpcy5pbmRleFJlbWluZGVyKys7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlID09PSAiY3VzdG9tIikgewogICAgICAgICAgICAgIHRoaXMuY3VzdG9tV2VlayA9IGluc3BlY3Rpb25JdGVtLnJlcGVhdEV2ZXJ5VHlwZTsKICAgICAgICAgICAgICB0aGlzLmN1c3RvbVZhbHVlID0gaW5zcGVjdGlvbkl0ZW0ucmVwZWF0RXZlcnlUaW1lOwogICAgICAgICAgICAgIHRoaXMuY3VzdG9tTW9udGhseSA9IGluc3BlY3Rpb25JdGVtLnJlcGVhdE1vbnRoRGF5OwoKICAgICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5RGF5cyAhPSAiIikgewogICAgICAgICAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gSlNPTi5wYXJzZShpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lEYXlzKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5lbmRUeXBlID09PSAibmV2ZXIiKSB7CiAgICAgICAgICAgICAgICB0aGlzLm5ldmVyID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluc3BlY3Rpb25JdGVtLmVuZFR5cGUgPT09ICJvbiIpIHsKICAgICAgICAgICAgICAgIHRoaXMub24gPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5DdXN0b21Nb250aGx5RGF0ZSA9IG1vbWVudChpbnNwZWN0aW9uSXRlbS5lbmREYXRlKS5mb3JtYXQoIkREIE1NTSBZWVlZIik7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnNwZWN0aW9uSXRlbS5lbmRUeXBlID09PSAiYWZ0ZXIiKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFmdGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMub2NjdXJhbmNlc1ZhbHVlID0gaW5zcGVjdGlvbkl0ZW0ub2NjdXJyZW5jZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yVXNlclVVSUQgIT09ICIiICYmIGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyVVVJRCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHRoaXMuYXNzaWduZWUgPSAidXNlciI7CgogICAgICAgICAgICAgIGlmICh0aGlzLmFzc2lnblVzZXJzLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICAgICAgbGV0IHVzZXIgPSB0aGlzLmFzc2lnblVzZXJzLmZpbmQodSA9PiB1LnV1aWQgPT09IGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyVVVJRCk7CgogICAgICAgICAgICAgICAgaWYgKHVzZXIgIT09IHVuZGVmaW5lZCAmJiB1c2VyICE9PSBudWxsICYmIHVzZXIgIT09IHt9KSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gdXNlci5uYW1lOwogICAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlclVVSUQgPSB1c2VyLnV1aWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLnVzZXJJZCsrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvclVzZXJHcm91cFVVSUQgIT09ICIiICYmIGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMudXNlckdyb3Vwcy5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgICAgIGxldCBncm91cCA9IHRoaXMudXNlckdyb3Vwcy5maW5kKGcgPT4gZy51dWlkID09PSBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yVXNlckdyb3VwVVVJRCk7CgogICAgICAgICAgICAgICAgaWYgKGdyb3VwICE9PSB1bmRlZmluZWQgJiYgZ3JvdXAgIT09IG51bGwgJiYgZ3JvdXAgIT09IHt9KSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgPSBncm91cC5uYW1lOwogICAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlckdyb3VwVVVJRCA9IGdyb3VwLnV1aWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVlID0gInVzZXIiOwogICAgICAgICAgICAgIHRoaXMudXNlckdyb3VwSWQrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmFzc2V0VVVJRCAhPT0gIiIgJiYgaW5zcGVjdGlvbkl0ZW0uYXNzZXRVVUlEICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBBc3NldE9wdGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgbGV0IGFzc2V0ID0gdGhpcy5ncm91cEFzc2V0T3B0aW9ucy5maW5kKGEgPT4gYS51dWlkID09PSBpbnNwZWN0aW9uSXRlbS5hc3NldFVVSUQpOwoKICAgICAgICAgICAgICAgIGlmIChhc3NldCAhPT0gdW5kZWZpbmVkICYmIGFzc2V0ICE9PSBudWxsICYmIGFzc2V0ICE9PSB7fSkgewogICAgICAgICAgICAgICAgICB0aGlzLmFzc2V0TmFtZSA9IGFzc2V0Lm5hbWU7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXROYW1lVVVJRCA9IGFzc2V0LnV1aWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVlID0gImFzc2V0IjsKCiAgICAgICAgICAgICAgaWYgKHRoaXMuYXNzaWduVXNlcnMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgICAgICBsZXQgdXNlciA9IHRoaXMuYXNzaWduVXNlcnMuZmluZCh1ID0+IHUudXVpZCA9PT0gaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvclVzZXJVVUlEKTsKCiAgICAgICAgICAgICAgICBpZiAodXNlciAhPT0gdW5kZWZpbmVkICYmIHVzZXIgIT09IG51bGwgJiYgdXNlciAhPT0ge30pIHsKICAgICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXIgPSB1c2VyLm5hbWU7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyVVVJRCA9IHVzZXIudXVpZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMuYXNzZXRJZCsrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEICE9PSAiIiAmJiBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yQXNzZXRHcm91cFVVSUQgIT09IG51bGwpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5hc3NldEdyb3VwT3B0aW9ucy5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgICAgIGxldCBhc3NldEdyb3VwID0gdGhpcy5hc3NldEdyb3VwT3B0aW9ucy5maW5kKGFnID0+IGFnLnV1aWQgPT09IGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JBc3NldEdyb3VwVVVJRCk7CgogICAgICAgICAgICAgICAgaWYgKGFzc2V0R3JvdXAgIT09IHVuZGVmaW5lZCAmJiBhc3NldEdyb3VwICE9PSBudWxsICYmIGFzc2V0R3JvdXAgIT09IHt9KSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRHcm91cHMgPSBhc3NldEdyb3VwLmdyb3VwTmFtZTsKICAgICAgICAgICAgICAgICAgdGhpcy5hc3NldEdyb3Vwc1VVSUQgPSBhc3NldEdyb3VwLnV1aWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZSA9ICJhc3NldCI7CiAgICAgICAgICAgICAgICB0aGlzLmFzc2V0R3JvdXBJZCsrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IHJlbWluZCA9IEpTT04ucGFyc2UoaW5zcGVjdGlvbkl0ZW0ucmVtaW5kZXIpOwoKICAgICAgICAgICAgaWYgKHJlbWluZCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHRoaXMucmVtaW5kZXJBcnJheSA9IFtdOwoKICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcmVtaW5kLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgICAgICAgICAgcmVtaW5kZXI6IHJlbWluZFtpbmRleF0ucmVtaW5kZXIsCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uVmFsdWU6IHJlbWluZFtpbmRleF0uZHVyYXRpb25WYWx1ZSwKICAgICAgICAgICAgICAgICAgZHVyYXRpb25UeXBlOiByZW1pbmRbaW5kZXhdLmR1cmF0aW9uVHlwZSwKICAgICAgICAgICAgICAgICAgcmVtaW5kZXJPcHRpb25zOiBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJFbWFpbCIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJlbWFpbCIKICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJTTVMiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAic21zIgogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIk5vdGlmaWNhdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJub3RpZmljYXRpb24iCiAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICBkdXJhdGlvblR5cGVPcHRpb25zOiBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJNaW51dGVzIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIm1pbnV0ZXMiCiAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiSG91cnMiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiaG91cnMiCiAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiRGF5cyIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJkYXlzIgogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIldlZWtzIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIndlZWtzIgogICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMucmVtaW5kZXJBcnJheS5wdXNoKG9iaik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmluZGV4UmVtaW5kZXIrKzsKICAgICAgICAgICAgdGhpcy5kdXJhdGlvblR5cGVJRCsrOwogICAgICAgICAgICB0aGlzLnJlbWluZGVySW5kZXgrKzsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpOwogICAgdGhpcy5nZXRBbGxUZW1wbGF0ZSgpOyAvL3RoaXMuZ2V0VXNlckdyb3Vwcyh0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkKTsKICAgIC8vCXRoaXMubmFtZSA9IHRoaXMudGVtcE9iai5uYW1lOwogICAgLy8JdGhpcy50ZW1wbGF0ZVVVSUQgPSB0aGlzLnRlbXBPYmoudXVpZDsKICAgIC8vCWNvbnNvbGUubG9nKCJjYWxlbmRlckRhdGUgT2JqIiwgdGhpcy5jYWxlbmRlckRhdGVPYmopOwoKICAgIGlmICh0aGlzLmNhbGVuZGVyRGF0ZU9iaiA9PSB1bmRlZmluZWQgfHwgdGhpcy5jYWxlbmRlckRhdGVPYmogPT0gIiIpIHsKICAgICAgbGV0IEN1cnJlbnREYXRlID0gbmV3IERhdGUoKTsKICAgICAgdmFyIHN1Yk9uZUhvdXIgPSBtb21lbnQoQ3VycmVudERhdGUpLnN1YnRyYWN0KDEsICJoIikuZm9ybWF0KCk7CiAgICAgIGxldCBzdGFydFRpbWUgPSBuZXcgRGF0ZShDdXJyZW50RGF0ZSk7CiAgICAgIGxldCBlbmRUaW1lID0gbmV3IERhdGUoc3ViT25lSG91cik7CiAgICAgIGxldCB0ZW1wT2JqID0gewogICAgICAgIGNhbmNlbDogZmFsc2UsCiAgICAgICAgZWxlbWVudDogIiIsCiAgICAgICAgZW5kVGltZTogZW5kVGltZSwKICAgICAgICBpc0FsbERheTogZmFsc2UsCiAgICAgICAgbmFtZTogImNlbGxDbGljayIsCiAgICAgICAgc3RhcnRUaW1lOiBzdGFydFRpbWUKICAgICAgfTsgLy8JdGhpcy5jYWxlbmRlckRhdGVPYmogPSB0ZW1wT2JqOwogICAgICAvLwljb25zb2xlLmxvZygiY3VycmVudERhdGUgT2JqIiwgdGhpcy5jYWxlbmRlckRhdGVPYmopOwogICAgfQoKICAgIHRoaXMuZ2V0RXhpc3RpbmdJbnNwZWN0aW9uVGVtcGxhdGUoIm5vbmUiLCB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkKTsgLy8gaWYgKHRoaXMudGVtcE9iai5lZGl0RmxhZyA9PT0gdHJ1ZSkgewogICAgLy8gCXRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAvLyAJdGhpcy5nZXRFeGlzdGluZ0luc3BlY3Rpb25UZW1wbGF0ZSgKICAgIC8vIAkJdGhpcy50ZW1wbGF0ZVVVSUQsCiAgICAvLyAJCXRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQKICAgIC8vIAkpOwogICAgLy8gfSBlbHNlIHsKICAgIC8vIH0KICB9LAoKICB2YWxpZGF0aW9uczogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogewogICAgICAgIHJlcXVpcmVkCiAgICAgIH0sCiAgICAgIHNlbGVjdGVkU2NoZWR1bGU6IHsKICAgICAgICByZXF1aXJlZAogICAgICB9LAogICAgICBzZWxlY3RlZFRlbXBsYXRlOiB7CiAgICAgICAgcmVxdWlyZWQKICAgICAgfSwKICAgICAgcmVtaW5kZXJBcnJheTogewogICAgICAgICRlYWNoOiB7CiAgICAgICAgICByZW1pbmRlcjogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIGR1cmF0aW9uVmFsdWU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBkdXJhdGlvblR5cGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIC4uLnRoaXMuZ2V0QWRob2NWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmdldERhaWx5VmFsaWRhdGlvbiwKICAgICAgLi4udGhpcy5nZXRXZWVrbHlWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmdldE1vbnRobHlWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmN1c3RvbVZhbGlkYXRpb25zLAogICAgICAuLi50aGlzLmFzc2lnblZhbGlkYXRpb25zLAogICAgICAuLi50aGlzLmN1c3RvbU9uCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGdldEFkaG9jVmFsaWRhdGlvbigpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJhZC1ob2MiKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBhZGhvY2RhdGU6IHt9LAogICAgICAgICAgYWRob2N0aW1lOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBhZGhvY2RhdGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBhZGhvY3RpbWU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAoKICAgIGdldERhaWx5VmFsaWRhdGlvbigpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJkYWlseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGRhaWx5RGVhZExpbmVUaW1lOiB7fSwKICAgICAgICAgIHN0YXJ0RGF0ZToge30sCiAgICAgICAgICBzdGFydFRpbWU6IHt9LAogICAgICAgICAgZW5kRGF0ZToge30sCiAgICAgICAgICBlbmRUaW1lOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBkYWlseURlYWRMaW5lVGltZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIHN0YXJ0RGF0ZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIHN0YXJ0VGltZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIGVuZERhdGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBlbmRUaW1lOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfSwKCiAgICBnZXRXZWVrbHlWYWxpZGF0aW9uKCkgewogICAgICBsZXQgdmFsaWRhdGlvbnMgPSB7fTsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgIT0gIndlZWtseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIHdlZWtEYXk6IHt9LAogICAgICAgICAgc3RhcnREYXRlOiB7fSwKICAgICAgICAgIHN0YXJ0VGltZToge30sCiAgICAgICAgICBlbmREYXRlOiB7fSwKICAgICAgICAgIGVuZFRpbWU6IHt9CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIHdlZWtEYXk6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBzdGFydERhdGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBzdGFydFRpbWU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBlbmREYXRlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9LAogICAgICAgICAgZW5kVGltZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0sCgogICAgZ2V0TW9udGhseVZhbGlkYXRpb24oKSB7CiAgICAgIGxldCB2YWxpZGF0aW9ucyA9IHt9OwoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSAhPSAibW9udGhseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIG1vbnRobHlEYXRlOiB7fSwKICAgICAgICAgIHN0YXJ0RGF0ZToge30sCiAgICAgICAgICBzdGFydFRpbWU6IHt9LAogICAgICAgICAgZW5kRGF0ZToge30sCiAgICAgICAgICBlbmRUaW1lOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBtb250aGx5RGF0ZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIHN0YXJ0RGF0ZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIHN0YXJ0VGltZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIGVuZERhdGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBlbmRUaW1lOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfSwKCiAgICBjdXN0b21WYWxpZGF0aW9ucygpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJjdXN0b20iKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBjdXN0b21XZWVrOiB7fSwKICAgICAgICAgIGN1c3RvbVZhbHVlOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBjdXN0b21XZWVrOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9LAogICAgICAgICAgY3VzdG9tVmFsdWU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAoKICAgIGFzc2lnblZhbGlkYXRpb25zKCkgewogICAgICBsZXQgdmFsaWRhdGlvbnMgPSB7fTsKCiAgICAgIGlmICh0aGlzLmFzc2lnbmVlICE9ICIiKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBhc3NpZ25lZToge30sCiAgICAgICAgICBhc3NpZ25lZFVzZXJHcm91cDoge30sCiAgICAgICAgICBhc3NpZ25lZFVzZXI6IHt9CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGFzc2lnbmVlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9LAogICAgICAgICAgYXNzaWduZWRVc2VyR3JvdXA6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBhc3NpZ25lZFVzZXI6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAoKICAgIGN1c3RvbU9uKCkgewogICAgICBsZXQgdmFsaWRhdGlvbnMgPSB7fTsKCiAgICAgIGlmICh0aGlzLm9uICE9IHRydWUpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIG9uOiB7fSwKICAgICAgICAgIEN1c3RvbU1vbnRobHlEYXRlOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBvbjogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIEN1c3RvbU1vbnRobHlEYXRlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfQoKICB9Cn07"},null]}