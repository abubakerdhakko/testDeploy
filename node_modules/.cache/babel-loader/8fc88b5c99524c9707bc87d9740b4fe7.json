{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/issues/Issues.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/issues/Issues.vue","mtime":1661968702436},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/babel.config.js","mtime":1661968702388},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGFzc2V0TWFuYWdlbWVudFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZXMvQXNzZXRNYW5hZ2VtZW50U2VydmljZSI7CmltcG9ydCBhc3NldFBlcnNvbm5lbFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZXMvQXNzZXRQZXJzb25uZWxTZXJ2aWNlIjsKaW1wb3J0IEluc3BlY3Rpb25TZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL0luc3BlY3Rpb25TZXJ2aWNlIjsKaW1wb3J0IHdvcmtPcmRlclNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZXMvV29ya09yZGVyU2VydmljZSI7CmltcG9ydCB7IHJlcXVpcmVkIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsKaW1wb3J0IEVuZHBvaW50cyBmcm9tICIuLi8uLi9zZXJ2aWNlcy9FbmRQb2ludHMiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCBBcmNoaXZlZElzc3VlcyBmcm9tICIuLy4uL2lzc3Vlcy9hcmNoaXZlZElzc3Vlcy52dWUiOwppbXBvcnQgVmlld0lzc3VlIGZyb20gIi4uLy4uL3ZpZXdzL2lzc3Vlcy9jb21wb25lbnRzL1ZpZXdJc3N1ZSI7CmltcG9ydCBJZ25vcmVSZXF1ZXN0IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvSWdub3JlUmVxdWVzdCI7CmltcG9ydCBDcmVhdGVJc3N1ZSBmcm9tICIuLi8uLi9jb21wb25lbnRzL0NyZWF0ZUlzc3VlIjsKaW1wb3J0IERlbGV0ZURpYWxvZyBmcm9tICIuLi8uLi9jb21wb25lbnRzL0RlbGV0ZURpYWxvZyI7CmltcG9ydCBBcmNoaXZlRGlhbG9nIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvQXJjaGl2ZURpYWxvZyI7CmltcG9ydCB7IEZ1bmN0aW9ucyB9IGZyb20gIkAvc2hhcmVkL0Z1bmN0aW9ucyI7CmltcG9ydCBsb2FkZXIgZnJvbSAiQC9jb21wb25lbnRzL0xvYWRlci52dWUiOwpsZXQgc3RyaW5nT3B0aW9uV29ya09yZGVyVVVJRCA9IFtdOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIklzc3VlcyIsCiAgY29tcG9uZW50czogewogICAgVmlld0lzc3VlLAogICAgSWdub3JlUmVxdWVzdCwKICAgIENyZWF0ZUlzc3VlLAogICAgRGVsZXRlRGlhbG9nLAogICAgQXJjaGl2ZURpYWxvZywKICAgIEFyY2hpdmVkSXNzdWVzLAogICAgbG9hZGVyCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwZGF0ZUNvbXA6IDAsCiAgICAgIGNyZWF0ZUlzc3VlQ29tcDogMCwKICAgICAgdG9hc3RGbGFnOiAwLAogICAgICB0b2FzdE1lc3NhZ2U6ICIiLAogICAgICB0b2FzdFR5cGU6ICIiLAogICAgICB0b2FzdFRpbWVPdXQ6IDMwMDAsCiAgICAgIGxvYWRlckZsYWc6IGZhbHNlLAogICAgICBpc3N1ZVRhYjogImlzc3VlcyIsCiAgICAgIGlzc3VlVGFiT3B0aW9uczogW3sKICAgICAgICBsYWJlbDogIklzc3VlcyIsCiAgICAgICAgdmFsdWU6ICJpc3N1ZXMiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogIkFyY2hpdmVkIiwKICAgICAgICB2YWx1ZTogImFyY2hpdmVkIgogICAgICB9XSwKICAgICAgZmlsdGVyQ291bnQ6ICIiLAogICAgICBjdXJyZW50VXNlckRldGFpbHM6ICIiLAogICAgICBpc3N1ZUlEOiAiIiwKICAgICAgYXJjaGl2ZUlzc3VlRGlhbG9nOiBmYWxzZSwKICAgICAgZGVsZXRlSXNzdWVEaWFsb2c6IGZhbHNlLAogICAgICBjcmVhdGVJc3N1ZXM6IGZhbHNlLAogICAgICB2aWV3SXNzdWU6IGZhbHNlLAogICAgICBlZGl0SXNzdWU6IGZhbHNlLAogICAgICBpZ25vcmVJc3N1ZTogZmFsc2UsCiAgICAgIHVzZXI6ICIiLAogICAgICB1c2VybmFtZTogIiIsCiAgICAgIGlzTG9hZGluZ1BhZ2U6IGZhbHNlLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBwcm9tcHQ6IGZhbHNlLAogICAgICBwcm9tcHRWaWV3TmFtZTogIiIsCiAgICAgIHNlcnZlckRhdGE6ICIiLAogICAgICBmaWx0ZXJGaWVsZExpc3Q6IFtdLAogICAgICBpc3N1ZTogIiIsCiAgICAgIGV2ZW50RGF0YTogIiIsCiAgICAgIHNkdF90b2tlbjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpLmFjY2Vzc190b2tlbiwKICAgICAgcGFyZW50U3lzdGVtU2V0dGluZ3M6IHsKICAgICAgICBzZXJ2aWNlVVJMOiBFbmRwb2ludHMucHJlZmVyZW5jZVNlcnZpY2UucHJlZmVyZW5jZSwKICAgICAgICAvLyBzZXJ2aWNlVVJMOiAnaHR0cDovL2xvY2FsaG9zdDo4MDk5L3ByZWZlcmVuY2VzJywKICAgICAgICBidXR0b25zOiBbXSwKICAgICAgICBzZWFyY2hWYWx1ZTogIiIsCiAgICAgICAgaGVpZ2h0OiAiOTUwcHgiLAogICAgICAgIHNlbGVjdGlvbkNvbHVtbjogdHJ1ZSwKICAgICAgICBzZWxlY3RUeXBlOiAiY2hlY2tib3giLAogICAgICAgIG1vcmVPcHRpb25zOiBbXSwKICAgICAgICBhY3Rpb25zT3B0aW9uczogWyJWaWV3IiwgIkVkaXQiLCAiQXJjaGl2ZSIsICJJZ25vcmUiXSwKICAgICAgICBjb2x1bW5JY29uczogW3sKICAgICAgICAgIGZpZWxkOiAiIiwKICAgICAgICAgIGljb246ICJwb3J0IgogICAgICAgIH0sIHsKICAgICAgICAgIGZpZWxkOiAiIiwKICAgICAgICAgIGljb246ICJwb3J0IgogICAgICAgIH1dLAogICAgICAgIHBpbGxDb25maWc6IFt7CiAgICAgICAgICBjb2x1bW46ICIiLAogICAgICAgICAgc3RhdGU6ICJzdWNjZXNzIiwKICAgICAgICAgIGRhdGE6ICIiCiAgICAgICAgfSwgewogICAgICAgICAgY29sdW1uOiAiIiwKICAgICAgICAgIHN0YXRlOiAiZXJyb3IiLAogICAgICAgICAgZGF0YTogIiIKICAgICAgICB9LCB7CiAgICAgICAgICBjb2x1bW46ICIiLAogICAgICAgICAgc3RhdGU6ICJub3JtYWwiLAogICAgICAgICAgZGF0YTogIiIKICAgICAgICB9XSwKICAgICAgICBzdGF0aWNDb2x1bW5zOiBbXSwKICAgICAgICB1c2VyOiAiIiwKICAgICAgICB1cHBlcmNhc2VDb2x1bW5zOiBbXSwKICAgICAgICAvLyBwYXNzIGNvbHVtbiBuYW1lIHdob3NlIGRhdGEgc2hvdWxkIGJlIHNob3duIGluIGNhcHMKICAgICAgICBkYXRlRm9ybWF0OiAiREQvTU0veXl5eSBoaDptbSBhIiAvL3Bhc3MgYW55IG1vbWVudCBkYXRlIGZvcm1hdCBoZXJlCgogICAgICB9LAogICAgICBwYXJlbnREZWZhdWx0U3lzdGVtVmlldzogewogICAgICAgIHZpZXdOYW1lczogW3sKICAgICAgICAgIG5hbWU6ICJEZWZhdWx0IFZpZXciLAogICAgICAgICAgdGlsZUZsYWc6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbjogMSwKICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIgogICAgICAgIH0sIHsKICAgICAgICAgIG5hbWU6ICJBZGQgQSBWaWV3IFRpbGUiLAogICAgICAgICAgdGlsZUZsYWc6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbjogMCwKICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIgogICAgICAgIH1dLAogICAgICAgIGRlZmF1bHRUYWJsZTogewogICAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgICB2aWV3TmFtZTogIkRlZmF1bHQgVmlldyIsCiAgICAgICAgICBkZW5zaXR5OiAiIiwKICAgICAgICAgIHBhZ2VTaXplOiAiIiwKICAgICAgICAgIHBhZ2VOYW1lOiAiIiwKICAgICAgICAgIHVzZXI6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKS5wcm9maWxlLnVzZXJuYW1lLAogICAgICAgICAgZGVmYXVsdFZpZXdGbGFnOiB0cnVlLAogICAgICAgICAgc29ydEZpZWxkOiAiIiwKICAgICAgICAgIHNvcnREaXJlY3Rpb246ICIiLAogICAgICAgICAgdGlsZUZsYWc6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbjogMSwKICAgICAgICAgIC8vIGFsd2F5cyBwYXNzIDEKICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIGNvbHVtbnM6IFtdCiAgICAgICAgfQogICAgICB9LAogICAgICBwYXJlbnREYXRhOiBbXSwKICAgICAgaXNzdWVzVVVJRDogW10sCiAgICAgIGlzc3Vlc051bWJlcjogW10sCiAgICAgIGlzc3Vlc0Fzc2V0T2JqOiBbXSwKICAgICAgaXNzdWVzU3RhdHVzOiBbXSwKICAgICAgaXNzdWVzV29ya29iajogW10sCiAgICAgIGFzc2V0VVVJRDogW10sCiAgICAgIGlzc3VlUmVzb2x2ZWQ6IFtdLAogICAgICB3b3JrT3JkZXJPcHQ6IHN0cmluZ09wdGlvbldvcmtPcmRlclVVSUQsCiAgICAgIGV4aXN0aW5nOiBmYWxzZSwKICAgICAgd29ya09yZGVyTnVtYmVyOiAiIiwKICAgICAgdGFibGVDb25maWc6ICIiLAogICAgICBzaG93Q3JlYXRlT3JkZXI6IGZhbHNlLAogICAgICBzZHREYXRhOiAiIiwKICAgICAgZmllbGROYW1lczogW10KICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgZ2V0Rm9ybUVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pIHsKICAgICAgaWYgKGZpZWxkVmFsaWRhdGlvbi4kZGlydHkpIHsKICAgICAgICByZXR1cm4gRnVuY3Rpb25zLmdldEZvcm1GaWVsZEVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pOwogICAgICB9CiAgICB9LAoKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLmRlbGV0ZUlzc3VlRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuYXJjaGl2ZUlzc3VlRGlhbG9nID0gZmFsc2U7CiAgICB9LAoKICAgIHNlbGVjdFRhYigpIHt9LAoKICAgIGRpc3BsYXlNZXNzYWdlKCkgewogICAgICB0aGlzLnNob3dUb2FzdCgiSXNzdWUgQ3JlYXRlZCBTdWNjdXNzZnVsbHkuIiwgInN1Y2Nlc3MiKTsKICAgIH0sCgogICAgZGVsZXRlRGlhbG9nKCkgewogICAgICB0aGlzLmRlbGV0ZUlzc3VlRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuZGVsZXRlSXNzdWVzKHRoaXMuaXNzdWVJRCwgIkRlbGV0ZSIpOwogICAgfSwKCiAgICBhcmNoaXZlRGlhbG9nKCkgewogICAgICB0aGlzLmFyY2hpdmVJc3N1ZURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmRlbGV0ZUlzc3Vlcyh0aGlzLmlzc3VlSUQsICJBcmNoaXZlIik7CiAgICB9LAoKICAgIGNyZWF0ZUlzc3VlKCkgewogICAgICB0aGlzLmNyZWF0ZUlzc3VlcyA9IHRydWU7CiAgICB9LAoKICAgIGNsb3NlSXNzdWUoKSB7CiAgICAgIHRoaXMuY3JlYXRlSXNzdWVzID0gZmFsc2U7CiAgICAgIHRoaXMuY3JlYXRlSXNzdWVDb21wKys7CiAgICB9LAoKICAgIHNhdmUoKSB7CiAgICAgIHRoaXMuY3JlYXRlSXNzdWVzID0gZmFsc2U7CiAgICAgIHRoaXMuY3JlYXRlSXNzdWVDb21wKys7CiAgICAgIHRoaXMubG9hZFRhYmxlKHRoaXMuc2R0RGF0YSk7CiAgICB9LAoKICAgIGlnbm9yZVJlcXVlc3QodmFsdWUpIHsKICAgICAgbGV0IGlzc3VlSWdub3JlUmVxdWVzdCA9IHt9OwogICAgICB0aGlzLmlzc3VlLmlnbm9yZUNvbW1lbnRzID0gdmFsdWUudmFsdWU7CiAgICAgIGlzc3VlSWdub3JlUmVxdWVzdC5pc3N1ZVJlcG9ydGluZyA9IHsKICAgICAgICBpZDogdGhpcy5pc3N1ZS5pZCwKICAgICAgICB1dWlkOiB0aGlzLmlzc3VlLnV1aWQsCiAgICAgICAgc3RhdHVzOiAiSWdub3JlZCIsCiAgICAgICAgdGVuYW50VVVJRDogdGhpcy5pc3N1ZS50ZW5hbnRVVUlELAogICAgICAgIGlzc3VlRmxhZzogdGhpcy5pc3N1ZS5pc3N1ZUZsYWcsCiAgICAgICAgaWdub3JlQ29tbWVudHM6IHZhbHVlLnZhbHVlLAogICAgICAgIGlnbm9yZWRCeTogdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS51c2VybmFtZQogICAgICB9OwogICAgICBpc3N1ZUlnbm9yZVJlcXVlc3QuaW1hZ2VWb2ljZXMgPSBbXTsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgSW5zcGVjdGlvblNlcnZpY2UudXBkYXRlSXNzdWUoaXNzdWVJZ25vcmVSZXF1ZXN0KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJJc3N1ZSBJZ25vcmVkIFN1Y2Nlc3NmdWxseSIsICJzdWNjZXNzIik7CiAgICAgICAgICB0aGlzLmlnbm9yZUlzc3VlID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLmRhdGEucmVzcG9uc2UsICJlcnJvciIpOwogICAgICB9KTsKICAgIH0sCgogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuaWdub3JlSXNzdWUgPSBmYWxzZTsKICAgIH0sCgogICAgZGVsZXRlSXNzdWVzKHV1aWQsIHR5cGUpIHsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgSW5zcGVjdGlvblNlcnZpY2UuZGVsZXRlSXNzdWVzKHV1aWQsIHR5cGUpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgaWYgKHR5cGUgPT09ICJEZWxldGUiKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJJc3N1ZSBEZWxldGVkIFN1Y2Nlc3NmdWxseSIsICJzdWNjZXNzIik7CiAgICAgICAgICAgIHRoaXMubG9hZFRhYmxlKHRoaXMuc2R0RGF0YSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiSXNzdWUgQXJjaGl2ZWQgU3VjY2Vzc2Z1bGx5IiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5kYXRhLnJlc3BvbnNlLCAiZXJyb3IiKTsKICAgICAgfSk7CiAgICB9LAoKICAgIGNsb3NlSXNzdWVEaWFsb2coKSB7CiAgICAgIHRoaXMuZWRpdElzc3VlID0gZmFsc2U7CiAgICAgIHRoaXMudmlld0lzc3VlID0gZmFsc2U7CiAgICB9LAoKICAgIC8vIFNEVCBmdW5jdGlvbnMgc3RhcnQgaGVyZQogICAgY2F0Y2hEZXBhcnR1cmU6IGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJkYXRhIiwgZGF0YSk7CiAgICAgIHRoaXMuc2R0RGF0YSA9IGRhdGE7CgogICAgICBpZiAoZGF0YS5zdGF0dXMgPT0gMSB8fCBkYXRhLnN0YXR1cyA9PSAzKSB7CiAgICAgICAgdGhpcy5sb2FkVGFibGUoZGF0YSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5zdGF0dXMgPT0gNCkgewogICAgICAgIHRoaXMubG9hZFRhYmxlKGRhdGEpOwogICAgICB9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDEwKSB7CiAgICAgICAgdmFyIGkgPSBbXTsgLy8gY29uc29sZS5sb2coZGF0YS5tZXNzYWdlKTsKCiAgICAgICAgaWYgKGRhdGEubWVzc2FnZS5jaGVja2JveC5jaGVja2VkID09PSBmYWxzZSkgewogICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuaXNzdWVzVVVJRC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNzdWVzVVVJRFtpbmRleF0gIT09IGRhdGEubWVzc2FnZS51dWlkKSB7CiAgICAgICAgICAgICAgaS5wdXNoKGluZGV4KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaXNzdWVzVVVJRCA9IHRoaXMuaXNzdWVzVVVJRC5maWx0ZXIoKGlzc3VlLCBpbmRleCkgPT4gewogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGkubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBpZiAoaVtqXSA9PT0gaW5kZXgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5pc3N1ZXNOdW1iZXIgPSB0aGlzLmlzc3Vlc051bWJlci5maWx0ZXIoKGlzc3VlLCBpbmRleCkgPT4gewogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGkubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBpZiAoaVtqXSA9PT0gaW5kZXgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5pc3N1ZXNBc3NldE9iaiA9IHRoaXMuaXNzdWVzQXNzZXRPYmouZmlsdGVyKChpc3N1ZSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgaWYgKGlbal0gPT09IGluZGV4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXNzdWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuaXNzdWVzV29ya29iaiA9IHRoaXMuaXNzdWVzV29ya29iai5maWx0ZXIoKGlzc3VlLCBpbmRleCkgPT4gewogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGkubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBpZiAoaVtqXSA9PT0gaW5kZXgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5hc3NldFVVSUQgPSB0aGlzLmFzc2V0VVVJRC5maWx0ZXIoKGlzc3VlLCBpbmRleCkgPT4gewogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGkubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBpZiAoaVtqXSA9PT0gaW5kZXgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5pc3N1ZVJlc29sdmVkID0gdGhpcy5pc3N1ZVJlc29sdmVkLmZpbHRlcigoaXNzdWUsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGlmIChpW2pdID09PSBpbmRleCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmlzc3Vlc1N0YXR1cyA9IHRoaXMuaXNzdWVzU3RhdHVzLmZpbHRlcigoaXNzdWUsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGlmIChpW2pdID09PSBpbmRleCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaXNzdWVzQXNzZXRPYmoucHVzaChkYXRhLm1lc3NhZ2UuYXNzZXROYW1lKTsKICAgICAgICAgIHRoaXMuaXNzdWVzU3RhdHVzLnB1c2goZGF0YS5tZXNzYWdlLnN0YXR1cyk7CiAgICAgICAgICB0aGlzLmlzc3Vlc1dvcmtvYmoucHVzaChkYXRhLm1lc3NhZ2Uud29ya09yZGVyTnVtYmVyKTsKICAgICAgICAgIHRoaXMuaXNzdWVzVVVJRC5wdXNoKGRhdGEubWVzc2FnZS51dWlkKTsKICAgICAgICAgIHRoaXMuaXNzdWVzTnVtYmVyLnB1c2goZGF0YS5tZXNzYWdlLmlzc3VlTnVtYmVyKTsKICAgICAgICAgIHRoaXMuYXNzZXRVVUlELnB1c2goZGF0YS5tZXNzYWdlLmFzc2V0VVVJRCk7CiAgICAgICAgICB0aGlzLmlzc3VlUmVzb2x2ZWQucHVzaChkYXRhLm1lc3NhZ2UucmVzb2x2ZWQpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBsb2FkVGFibGUoc2R0RGF0YSkgewogICAgICBsZXQgZmlsdGVycyA9IFtdOwogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBsZXQgZmlsdGVyRmxhZyA9IGZhbHNlOwoKICAgICAgZm9yIChsZXQgc2R0X2RhdGEgb2Ygc2R0RGF0YS5tZXNzYWdlKSB7CiAgICAgICAgaWYgKHNkdF9kYXRhLmZpZWxkTmFtZSAhPT0gImFjdGlvbnMiKSB7CiAgICAgICAgICBsZXQgbmV3RGF0ZSA9ICIiOwoKICAgICAgICAgIGlmIChzZHRfZGF0YS5maWVsZFR5cGUgPT09ICJkYXRlIiAmJiBzZHRfZGF0YS5maWx0ZXJWYWx1ZSAhPT0gIiIpIHsKICAgICAgICAgICAgbGV0IGRhdGUgPSBzZHRfZGF0YS5maWx0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBkYXRlID0gZGF0ZS5zcGxpdCgiLyIpOwogICAgICAgICAgICBuZXdEYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVsxXX0vJHtkYXRlWzBdfS8ke2RhdGVbMl19YCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHNkdF9kYXRhLmZpbHRlclZhbHVlID09PSBudWxsKSB7CiAgICAgICAgICAgIHNkdF9kYXRhLmZpbHRlclZhbHVlID0gIiI7CiAgICAgICAgICB9CgogICAgICAgICAgZmlsdGVycy5wdXNoKHsKICAgICAgICAgICAgZmllbGROYW1lOiBzZHRfZGF0YS5maWVsZE5hbWUsCiAgICAgICAgICAgIGZpZWxkVHlwZTogc2R0X2RhdGEuZmllbGRUeXBlLAogICAgICAgICAgICBmaWx0ZXJWYWx1ZTogbmV3RGF0ZSA9PT0gbnVsbCB8fCBuZXdEYXRlID09PSAiIiA/IHNkdF9kYXRhLmZpbHRlclZhbHVlIDogbmV3RGF0ZS5nZXRUaW1lKCksCiAgICAgICAgICAgIHNlY29uZFZhbHVlOiBzZHRfZGF0YS5zZWNvbmRWYWx1ZSwKICAgICAgICAgICAgY29tcGFyaXNvblR5cGU6IHNkdF9kYXRhLmNvbXBhcmlzb25UeXBlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZ2V0UGFnaW5hdGVkSXNzdWVzKGZpbHRlcnMsIHNkdERhdGEuZGF0YS5zb3J0RmllbGQsIHNkdERhdGEuZGF0YS5zb3J0RGlyZWN0aW9uLCBzZHREYXRhLmRhdGEub2Zmc2V0LCBzZHREYXRhLmRhdGEubGltaXQsIHNkdERhdGEuZGF0YS5zZWFyY2hRdWVyeSk7CiAgICB9LAoKICAgIGxvYWRTRFQocmVzcG9uc2UsIGRhdGEpIHsKICAgICAgdGhpcy5wYXJlbnREYXRhID0gZGF0YTsKICAgICAgbGV0IGV2ZW50RGF0YSA9IHsKICAgICAgICBkYXRhOiB0aGlzLnBhcmVudERhdGEsCiAgICAgICAgdG90YWxFbGVtZW50czogcmVzcG9uc2UuZGF0YS5pc3N1ZVJlcG9ydGluZ3MudG90YWxFbGVtZW50cywKICAgICAgICB0b3RhbFBhZ2VzOiByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy50b3RhbFBhZ2VzLAogICAgICAgIHBhZ2VOdW1iZXI6IHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmdzLm9mZnNldAogICAgICB9OwogICAgICB0aGlzLiRyZWZzLnRlc3QuZGF0YUxvYWRFdmVudChldmVudERhdGEpOwogICAgfSwKCiAgICBnZXRQYWdpbmF0ZWRJc3N1ZXMoZmlsdGVycywgc29ydEZpZWxkLCBzb3J0RGlyZWN0aW9uLCBvZmZzZXQsIGxpbWl0LCBzZWFyY2hRdWVyeSkgewogICAgICBsZXQgY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpOwogICAgICBsZXQgcmVxdWVzdE9iaiA9IHsKICAgICAgICBzZWFyY2hRdWVyeTogc2VhcmNoUXVlcnksCiAgICAgICAgLy8gc2VhcmNoQ29sdW1uczogc2VhcmNoQ29sdW1ucywKICAgICAgICBmaWx0ZXJzOiBmaWx0ZXJzLAogICAgICAgIHNvcnRGaWVsZDogc29ydEZpZWxkLAogICAgICAgIHNvcnREaXJlY3Rpb246IHNvcnREaXJlY3Rpb24sCiAgICAgICAgb2Zmc2V0OiBvZmZzZXQsCiAgICAgICAgbGltaXQ6IGxpbWl0LAogICAgICAgIHRlbmFudFVVSUQ6IGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgICAgIGZpZWxkTmFtZXM6IHRoaXMuZmllbGROYW1lcwogICAgICB9OwogICAgICBJbnNwZWN0aW9uU2VydmljZS5nZXRQYWdpbmF0ZWRJc3N1ZXMocmVxdWVzdE9iaikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy5vZmZzZXQgPSBvZmZzZXQ7CiAgICAgICAgICBsZXQgaXNzdWVzID0gcmVzcG9uc2UuZGF0YS5pc3N1ZVJlcG9ydGluZ3MuY29udGVudDsKICAgICAgICAgIHRoaXMuZmlsdGVyQ291bnQgPSByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy50b3RhbEVsZW1lbnRzOwoKICAgICAgICAgIGlmIChpc3N1ZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMubG9hZFNEVChyZXNwb25zZSwgaXNzdWVzKTsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaXNzdWVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmNvdW50T2ZUb3RhbElzc3VlcyA9IHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmdzLnRvdGFsRWxlbWVudHM7CiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gaXNzdWVzOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaXNzdWVzLm1hcChpc3N1ZSA9PiB7CiAgICAgICAgICAgICAgaWYgKGlzc3VlLnJlc29sdmVkID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBpc3N1ZS5yZXNvbHZlZCA9ICJZZXMiOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpc3N1ZS5yZXNvbHZlZCA9ICJObyI7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoaXNzdWUubGlua2VkID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBpc3N1ZS5saW5rZWQgPSAiWWVzIjsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaXNzdWUubGlua2VkID0gIk5vIjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghaXNzdWUud29ya09yZGVyQXNzaWduZWQpIHsKICAgICAgICAgICAgICAgIGlzc3VlLndvcmtPcmRlck51bWJlciA9ICJOb3QgQXNzaWduZWQiOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGlzc3VlLndvcmtPcmRlckFzc2lnbmVkID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBpc3N1ZS53b3JrT3JkZXJBc3NpZ25lZCA9ICJZZXMiOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpc3N1ZS53b3JrT3JkZXJBc3NpZ25lZCA9ICJObyI7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpc3N1ZS5yZXBvcnRlZEF0ID0gbW9tZW50LnV0Yyhpc3N1ZS5yZXBvcnRlZEF0KS5sb2NhbCgpLmZvcm1hdCgnREQvTU0vWVlZWSBoaDptbSBhJyk7CiAgICAgICAgICAgICAgaXNzdWUuY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgIGlzc3Vlcy50aXRsZSA9IGlzc3Vlcy50aXRsZSA/IGlzc3VlLnRpdGxlIDogaXNzdWUuaXNzdWVOYW1lOwoKICAgICAgICAgICAgICBpZiAoIWlzc3VlLnRpdGxlKSB7CiAgICAgICAgICAgICAgICBpc3N1ZS50aXRsZSA9IGlzc3VlLmlzc3VlRGVzY3JpcHRpb247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy5vZmZzZXQgPSBvZmZzZXQgKyAxOwogICAgICAgICAgdGhpcy5sb2FkU0RUKHJlc3BvbnNlLCBpc3N1ZXMpOwogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmlzc3VlcyA9IGlzc3VlczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIHdoaWxlIGdldHRpbmcgaXNzdWVzLlBsZWFzZSB0cnkgYWdhaW4iLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgIT09IHVuZGVmaW5lZCAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNikgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXNjcmlwdGlvbiwgImVycm9yIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJBbiBFcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIElzc3Vlcy4gUGxlYXNlIHRyeSBhZ2Fpbi4iLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBnZXRBY3Rpb25zT3B0aW9uKHZhbCkgewogICAgICBpZiAodmFsLnZhbHVlID09ICJWaWV3IikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJpc3N1ZS1kZXRhaWwiLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGlzc3VlSUQ6IHZhbC5yb3cudXVpZCwKICAgICAgICAgICAgZmxhZzogdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAodmFsLnZhbHVlID09ICJFZGl0IikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJlZGl0LWlzc3VlIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBpc3N1ZUlEOiB2YWwucm93LnV1aWQsCiAgICAgICAgICAgIGZsYWc6IHZhbC5yb3cuc3RhdHVzID09PSAiSW4gcHJvZ3Jlc3MiIHx8IHZhbC5yb3cuc3RhdHVzID09PSAiUmVzb2x2ZWQiID8gdHJ1ZSA6IGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh2YWwudmFsdWUgPT0gIkFyY2hpdmUiKSB7CiAgICAgICAgdGhpcy5pc3N1ZUlEID0gdmFsLnJvdy51dWlkOwoKICAgICAgICBpZiAodmFsLnJvdy5zdGF0dXMgPT0gIkluIHByb2dyZXNzIikgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIklucHJvZ3Jlc3MgaXNzdWUgY2FuJ3QgYmUgYXJjaGl2ZSIsICJlcnJvciIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5hcmNoaXZlSXNzdWVEaWFsb2cgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAodmFsLnZhbHVlID09ICJEZWxldGUiKSB7CiAgICAgICAgdGhpcy5pc3N1ZUlEID0gdmFsLnJvdy51dWlkOwogICAgICAgIHRoaXMuZGVsZXRlSXNzdWVEaWFsb2cgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAodmFsLnZhbHVlID09ICJJZ25vcmUiKSB7CiAgICAgICAgdGhpcy5pc3N1ZSA9IHZhbC5yb3c7CgogICAgICAgIGlmICh0aGlzLmlzc3VlLndvcmtPcmRlck51bWJlciAhPT0gbnVsbCkgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIklucHJvZ3Jlc3MgaXNzdWUgY2FuJ3QgYmUgaWdub3JlIiwgImVycm9yIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0aGlzLmlnbm9yZUlzc3VlID0gdHJ1ZTsKICAgICAgfQogICAgfSwKCiAgICBnZXREb3dubG9hZEFzT3B0aW9uKG9wdCkgewogICAgICAvLyBjb25zb2xlLmxvZygnZG93bmxvYWQgYXMgb3B0aW9uJyxvcHQpOwogICAgICBpZiAob3B0Lm9wdGlvbiA9PSAicGRmIikgey8vIG5vdGlmaWNhdGlvbkFuZENvbW11bmljYXRpb25TZXJ2aWNlLmRvd25sb2FkU2VsZWN0ZWRQREYob2JqKQogICAgICAgIC8vIC50aGVuKChyZXMpID0+IHsKICAgICAgICAvLyAvLyBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgLy8gbGV0IGZpbGVDb250ZW50cyA9IG51bGw7CiAgICAgICAgLy8gICAgIGxldCBwb3B1cFdpbj1udWxsOwogICAgICAgIC8vICAgICBwb3B1cFdpbiA9IHdpbmRvdy5vcGVuKCcnLCAnX2JsYW5rJywgJ3RvcD0wLGxlZnQ9MCxoZWlnaHQ9NzAwLHdpZHRoPTEwMDA7Jyk7CiAgICAgICAgLy8gICAgIGxldCBkb2N1bWVudCA9IHsKICAgICAgICAvLyAgICAgICAgICdkb2N1bWVudE5hbWUnOiAnQmlsbGluZycKICAgICAgICAvLyAgICAgfTsKICAgICAgICAvLyBmaWxlQ29udGVudHMgPSByZXMuZGF0YS50eXBlICsgcmVzLmRhdGEuY29udGVudDsKICAgICAgICAvLyAgIHBvcHVwV2luLmRvY3VtZW50LndyaXRlKGAKICAgICAgICAvLyAgICAgPGh0bWw+CiAgICAgICAgLy8gICAgICAgICA8aGVhZD4KICAgICAgICAvLyAgICAgICAgICA8IS0tdGl0bGU+UHJpbnQgdGFiPC90aXRsZS0tPgogICAgICAgIC8vICAgICAgICAgICAgIDxzdHlsZT4KICAgICAgICAvLyAgICAgICAgICAgICAgICAgI2J1dHRvbnN7ZGlzcGxheTpub25lO30KICAgICAgICAvLyAgICAgICAgICAgICAgICAgIGJvZHkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICJPcGVuIFNhbnMiLCAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsIEV1Y2xpZCBDaXJjdWxhciBCLCAiSGVsdmV0aWNhIE5ldWUiLCBBcmlhbCwgc2Fucy1zZXJpZiwgIkFwcGxlIENvbG9yIEVtb2ppIiwgIlNlZ29lIFVJIEVtb2ppIiwgIlNlZ29lIFVJIFN5bWJvbCI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMjEyNTI5OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgYnV0dG9uLCBtZXRlciwgcHJvZ3Jlc3MgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC13cml0aW5nLW1vZGU6IGhvcml6b250YWwtdGIgIWltcG9ydGFudDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICBpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgYnV0dG9uIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtcmVuZGVyaW5nOiBhdXRvOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGluaXRpYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogbm9ybWFsOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgd29yZC1zcGFjaW5nOiBub3JtYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtaW5kZW50OiAwcHg7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LXNoYWRvdzogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IHN0YXJ0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250OiA0MDAgMTMuMzMzM3B4IEFyaWFsOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlucHV0W3R5cGU9ImJ1dHRvbiIgaV0sIGlucHV0W3R5cGU9InN1Ym1pdCIgaV0sIGlucHV0W3R5cGU9InJlc2V0IiBpXSwgaW5wdXRbdHlwZT0iZmlsZSIgaV06Oi13ZWJraXQtZmlsZS11cGxvYWQtYnV0dG9uLCBidXR0b24gewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb2xvcjogYnV0dG9udGV4dDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGJ1dHRvbmZhY2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMnB4IDZweCAzcHg7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItd2lkdGg6IDJweDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1zdHlsZTogb3V0c2V0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiBidXR0b25mYWNlOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWltYWdlOiBpbml0aWFsOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlucHV0LCBidXR0b24sIHNlbGVjdCwgb3B0Z3JvdXAsIHRleHRhcmVhIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiBpbmhlcml0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgYnV0dG9uLCBzZWxlY3QgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0biB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjM3NXJlbSAwLjc1cmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3JkZXItY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJveC1zaGFkb3cgMC4xNXMgZWFzZS1pbi1vdXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0bi1vdXRsaW5lLXByaW1hcnkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMDdiZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICMwMDdiZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0bi1vdXRsaW5lLXByaW1hcnkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICNkMDMyMzI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDAzMjMyOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUgewogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzdHlsZT4uZmEgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udDogbm9ybWFsIG5vcm1hbCBub3JtYWwgMTRweC8xIEZvbnRBd2Vzb21lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiBpbmhlcml0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1yZW5kZXJpbmc6IGF1dG87CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH08L3N0eWxlPgogICAgICAgIC8vICAgICAgICAgICAgICAgICA8c3R5bGU+KiwgKjo6YmVmb3JlLCAqOjphZnRlciB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIFN0eWxlIEF0dHJpYnV0ZSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0biwgLmZvcm0tY29udHJvbCB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjI1cmVtIDAuNXJlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4zcmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxNXB4OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyM3B4OwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9PC9zdHlsZT4KICAgICAgICAvLyAgICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIC8vICAgICAgICAgPC9oZWFkPgogICAgICAgIC8vICAgICAgICAgPGJvZHkgb25sb2FkPSIiPgogICAgICAgIC8vICAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IiA+CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxhIGhyZWY9IiR7ZmlsZUNvbnRlbnRzfSIgZG93bmxvYWQ9IiR7ZG9jdW1lbnQuZG9jdW1lbnROYW1lfSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1wcmltYXJ5Ij5Eb3dubG9hZDwvYnV0dG9uPjwvYT4KICAgICAgICAvLyAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAvLyAgICAgICAgICAgICA8YnI+CiAgICAgICAgLy8gICAgICAgICAgICAgPGlmcmFtZSBzcmM9JyR7ZmlsZUNvbnRlbnRzfScgIHN0eWxlPSJtaW4td2lkdGg6IDEwMCU7aGVpZ2h0OiAxMDAlOyIgPjwvaWZyYW1lPgogICAgICAgIC8vICAgICAgICAgPC9ib2R5PgogICAgICAgIC8vICAgICA8L2h0bWw+YAogICAgICAgIC8vICk7CiAgICAgICAgLy8gfSkKICAgICAgICAvLyAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7CiAgICAgIH0gZWxzZSBpZiAob3B0Lm9wdGlvbiA9PSAiY3N2Iikgey8vIAlsZXQgZmlsZVRpdGxlID0gJ0JpbGxpbmdzJzsKICAgICAgICAvLyAJbGV0IGhlYWRlcnMgPSB7CiAgICAgICAgLy8gICAgICAgY3JlYXRlZERhdGU6ICdSZXF1ZXN0ZWQgT24nLnJlcGxhY2UoLywvZywgJycpLCAvLyByZW1vdmUgY29tbWFzIHRvIGF2b2lkIGVycm9ycwogICAgICAgIC8vICAgICAgIGR1ZURhdGU6ICJEdWUgRGF0ZSIsCiAgICAgICAgLy8gICAgICAgc2hpcG1lbnROdW1iZXI6ICJTaGlwbWVudCAjIiwKICAgICAgICAvLyAJCSAgcG9ydE9mTG9hZGluZzogIlBvcnQgb2YgTG9hZCIsCiAgICAgICAgLy8gCQkgIHBvcnRPZkRpc2NoYXJnZTogIlBvcnQgT2YgRGlzY2hhcmdlIiwKICAgICAgICAvLyAJCSAgYW1vdW50OiAiQW1vdW50IiwKICAgICAgICAvLyAJCSAgYmFsYW5jZTogIkJhbGFuY2UiLAogICAgICAgIC8vIAkJICBuZXRzdWl0ZVN0YXR1czogIlN0YXR1cyIKICAgICAgICAvLyAJfTsKICAgICAgICAvLyAJbGV0IGRhdGFPYmogPSBbXTsKICAgICAgICAvLyAJZm9yIChsZXQgaSA9IDA7IGkgPCBvcHQucm93cy5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIAkJY29uc3QgYmlsbCA9IG9wdC5yb3dzW2ldOwogICAgICAgIC8vIAkJZGF0YU9iai5wdXNoKHsKICAgICAgICAvLyAJCQljcmVhdGVkRGF0ZTogYmlsbC5jcmVhdGVkRGF0ZSwKICAgICAgICAvLyAJCQlkdWVEYXRlOiBiaWxsLmR1ZURhdGUsCiAgICAgICAgLy8gCQkJc2hpcG1lbnROdW1iZXI6IGJpbGwuc2hpcG1lbnROdW1iZXIsCiAgICAgICAgLy8gCQkJcG9ydE9mTG9hZGluZzogYmlsbC5wb3J0T2ZMb2FkaW5nLAogICAgICAgIC8vIAkJCXBvcnRPZkRpc2NoYXJnZTogYmlsbC5wb3J0T2ZEaXNjaGFyZ2UsCiAgICAgICAgLy8gCQkJYW1vdW50OiBiaWxsLmFtb3VudCwKICAgICAgICAvLyAJCQliYWxhbmNlOiBiaWxsLmJhbGFuY2UsCiAgICAgICAgLy8gCQkJbmV0c3VpdGVTdGF0dXM6IGJpbGwubmV0c3VpdGVTdGF0dXMKICAgICAgICAvLyAJCX0pOwogICAgICAgIC8vIAl9CiAgICAgICAgLy8gCXRoaXMuZXhwb3J0Q1NWRmlsZShoZWFkZXJzLCBkYXRhT2JqLCBmaWxlVGl0bGUpOwogICAgICB9CiAgICB9LAoKICAgIGV4cG9ydENTVkZpbGUoaGVhZGVycywgYmlsbGluZ0RhdGEsIGZpbGVUaXRsZSkgey8vIGlmIChoZWFkZXJzKSB7CiAgICAgIC8vICAgICBiaWxsaW5nRGF0YS51bnNoaWZ0KGhlYWRlcnMpOwogICAgICAvLyB9CiAgICAgIC8vIC8vIENvbnZlcnQgT2JqZWN0IHRvIEpTT04KICAgICAgLy8gdmFyIGpzb25PYmplY3QgPSBKU09OLnN0cmluZ2lmeShiaWxsaW5nRGF0YSk7CiAgICAgIC8vIHZhciBjc3YgPSB0aGlzLmNvbnZlcnRUb0NTVihqc29uT2JqZWN0KTsKICAgICAgLy8gdmFyIGV4cG9ydGVkRmlsZW5tYWUgPSBmaWxlVGl0bGUgKyAnLmNzdicgfHwgJ2V4cG9ydC5jc3YnOwogICAgICAvLyB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3ZdLCB7IHR5cGU6ICd0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04OycgfSk7CiAgICAgIC8vIGlmIChuYXZpZ2F0b3IubXNTYXZlQmxvYikgeyAvLyBJRSAxMCsKICAgICAgLy8gICAgIG5hdmlnYXRvci5tc1NhdmVCbG9iKGJsb2IsIGV4cG9ydGVkRmlsZW5tYWUpOwogICAgICAvLyB9IGVsc2UgewogICAgICAvLyAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgIC8vICAgICBpZiAobGluay5kb3dubG9hZCAhPT0gdW5kZWZpbmVkKSB7IC8vIGZlYXR1cmUgZGV0ZWN0aW9uCiAgICAgIC8vICAgICAgICAgLy8gQnJvd3NlcnMgdGhhdCBzdXBwb3J0IEhUTUw1IGRvd25sb2FkIGF0dHJpYnV0ZQogICAgICAvLyAgICAgICAgIHZhciB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAvLyAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCJocmVmIiwgdXJsKTsKICAgICAgLy8gICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBleHBvcnRlZEZpbGVubWFlKTsKICAgICAgLy8gICAgICAgICBsaW5rLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgICAgLy8gICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgICAvLyAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgLy8gICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgICAvLyAgICAgfQogICAgICAvLyB9CiAgICB9LAoKICAgIGNvbnZlcnRUb0NTVihvYmpBcnJheSkgewogICAgICB2YXIgYXJyYXkgPSB0eXBlb2Ygb2JqQXJyYXkgIT0gIm9iamVjdCIgPyBKU09OLnBhcnNlKG9iakFycmF5KSA6IG9iakFycmF5OwogICAgICB2YXIgc3RyID0gIiI7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGxpbmUgPSAiIjsKCiAgICAgICAgZm9yICh2YXIgaW5kZXggaW4gYXJyYXlbaV0pIHsKICAgICAgICAgIGlmIChsaW5lICE9ICIiKSBsaW5lICs9ICIsIjsKICAgICAgICAgIGxpbmUgKz0gYXJyYXlbaV1baW5kZXhdOwogICAgICAgIH0KCiAgICAgICAgc3RyICs9IGxpbmUgKyAiXHJcbiI7CiAgICAgIH0KCiAgICAgIHJldHVybiBzdHI7CiAgICB9LAoKICAgIHNldFRhYmxlQ29uZmlncygpIHsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuZGVuc2l0eSA9IHRoaXMudGFibGVDb25maWcuZGVuc2l0eTsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUucGFnZVNpemUgPSB0aGlzLnRhYmxlQ29uZmlnLnBhZ2VTaXplOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5wYWdlTmFtZSA9IHRoaXMudGFibGVDb25maWcucGFnZU5hbWU7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnNvcnRGaWVsZCA9IHRoaXMudGFibGVDb25maWcuc29ydEZpZWxkOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5zb3J0RGlyZWN0aW9uID0gdGhpcy50YWJsZUNvbmZpZy5zb3J0RGlyZWN0aW9uOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5jb2x1bW5zID0gdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zOwogICAgfSwKCiAgICBleHRyYWN0RmllbGROYW1lc0ZvclNlYXJjaFF1ZXJ5KGNvbmZpZykgewogICAgICBmb3IgKGxldCBjb2x1bW4gb2YgY29uZmlnLmNvbHVtbnMpIHsKICAgICAgICB0aGlzLmZpZWxkTmFtZXMucHVzaChjb2x1bW4uZmllbGROYW1lKTsKICAgICAgfQogICAgfSwKCiAgICAvLyBTRFQgZnVuY3Rpb25zIGVuZCBoZXJlCiAgICBjcmVhdGVXb3JrT3JkZXIoKSB7CiAgICAgIGxldCBpc3N1ZSA9IFtdOwoKICAgICAgaWYgKG5ldyBTZXQodGhpcy5pc3N1ZXNBc3NldE9iaikuc2l6ZSA9PT0gMSA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiUGxlYXNlIHNlbGVjdCBpc3N1ZSBvZiBTYW1lIEFzc2V0IE5hbWUhIiwgImVycm9yIik7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc3N1ZXNXb3Jrb2JqLmxlbmd0aCA+IDApIHsKICAgICAgICBsZXQgd29ya09yZGVyID0gdGhpcy5pc3N1ZXNXb3Jrb2JqLm1hcChpc3N1ZSA9PiB7CiAgICAgICAgICBpZiAoaXNzdWUgPT09ICJOb3QgQXNzaWduZWQiKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSBlbHNlIHt9CiAgICAgICAgfSk7CgogICAgICAgIGlmICh0aGlzLmlzc3Vlc1N0YXR1cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBpc3N1ZSA9IHRoaXMuaXNzdWVzU3RhdHVzLm1hcChpc3N1ZSA9PiB7CiAgICAgICAgICAgIGlmIChpc3N1ZSA9PT0gIklnbm9yZWQiKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7fQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAod29ya09yZGVyWzBdICE9PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiUGxlYXNlIHNlbGVjdCBpc3N1ZXMgdGhhdCBkbyBub3QgaGF2ZSBhIHdvcmsgb3JkZXIgYXNzaWduZWQgdG8gdGhlbSEiLCAiZXJyb3IiKTsKICAgICAgICB9IGVsc2UgaWYgKGlzc3VlWzBdID09PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiU2VsZWN0ZWQgSXNzdWUgU3RhdHVzIGlzIGlnbm9yZWQiLCAic3VjY2VzcyIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmdldFdvcmtPcmRlcnModGhpcy5hc3NldFVVSURbMF0pOwogICAgICAgICAgdGhpcy5zaG93Q3JlYXRlT3JkZXIgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBnZXRXb3JrT3JkZXJzKGFzc2V0VVVJRCkgewogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICB3b3JrT3JkZXJTZXJ2aWNlLmdldEFsbFdvcmtPcmRlcnNCeUFzc2V0KGFzc2V0VVVJRCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgIGxldCB3b3JrT3JkZXJzID0gW107CiAgICAgICAgICBzdHJpbmdPcHRpb25Xb3JrT3JkZXJVVUlEID0gW107CgogICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJlc3BvbnNlLmRhdGEud29ya09yZGVycy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgbGV0IHdvcmtPcmRlciA9IHt9OwogICAgICAgICAgICB3b3JrT3JkZXIubGFiZWwgPSByZXNwb25zZS5kYXRhLndvcmtPcmRlcnNbaW5kZXhdLndvcmtPcmRlck51bWJlcjsKICAgICAgICAgICAgd29ya09yZGVyLnZhbHVlID0gcmVzcG9uc2UuZGF0YS53b3JrT3JkZXJzW2luZGV4XS53b3JrT3JkZXJOdW1iZXI7CiAgICAgICAgICAgIHdvcmtPcmRlci51dWlkID0gcmVzcG9uc2UuZGF0YS53b3JrT3JkZXJzW2luZGV4XS51dWlkOwogICAgICAgICAgICB3b3JrT3JkZXJzLnB1c2god29ya09yZGVyKTsKICAgICAgICAgICAgc3RyaW5nT3B0aW9uV29ya09yZGVyVVVJRC5wdXNoKHsKICAgICAgICAgICAgICBsYWJlbDogd29ya09yZGVyLnZhbHVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMud29ya09yZGVycyA9IHdvcmtPcmRlcnM7CiAgICAgICAgICB0aGlzLndvcmtPcmRlck9wdCA9IHN0cmluZ09wdGlvbldvcmtPcmRlclVVSUQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJFcnJvciB3aGlsZSBnZXR0aW5nIHdvcmsgb3JkZXJzIiwgImVycm9yIik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA2KSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5yZXNwb25zZS5kYXRhLmRlc2NyaXB0aW9uLCAiZXJyb3IiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIHdoaWxlIGdldHRpbmcgd29yayBvcmRlcnMiLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBleGlzdGluZ1dvcmtPcmRlcigpIHsKICAgICAgdGhpcy5leGlzdGluZyA9IHRydWU7CiAgICAgIHRoaXMuZ2V0V29ya09yZGVycyh0aGlzLmFzc2V0VVVJRFswXSk7CiAgICB9LAoKICAgIG5ld1dvcmtPcmRlcigpIHsKICAgICAgdGhpcy5leGlzdGluZyA9IGZhbHNlOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogImNyZWF0ZS13b3JrLW9yZGVyIiwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGlzc3VldXVpZDogdGhpcy5pc3N1ZXNVVUlELAogICAgICAgICAgaXNzdWVudW1iZXI6IHRoaXMuaXNzdWVzTnVtYmVyLAogICAgICAgICAgYXNzZXRVVUlEOiB0aGlzLmFzc2V0VVVJRFswXSwKICAgICAgICAgIGNyZWF0ZVdvcmtPcmRlcjogdHJ1ZQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGV4aXN0aW5nQWRkV29ya09yZGVyKCkgewogICAgICB0aGlzLiR2LiR0b3VjaCgpOwoKICAgICAgaWYgKHRoaXMuJHYuJGludmFsaWQpIHsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiUGxlYXNlIFNlbGVjdCBXb3JrIE9yZGVyIE51bWJlciIsICJlcnJvciIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWRkSXNzdWVzSW5Xb3JrT3JkZXIoKTsKICAgICAgfQogICAgfSwKCiAgICBvbkNsZWFyU2VsZWN0ZWRXb3JrT3JkZXIoKSB7CiAgICAgIHRoaXMud29ya09yZGVyTnVtYmVyID0gIiI7CiAgICAgIHRoaXMudXBkYXRlQ29tcCsrOwogICAgfSwKCiAgICBhZGRJc3N1ZXNJbldvcmtPcmRlcigpIHsKICAgICAgLy9jcmVhdGUgYW4gYXJyYXkgb2Ygc2VsZWN0ZWQgaXNzdWVzCiAgICAgIGxldCBpbmRleCA9IHN0cmluZ09wdGlvbldvcmtPcmRlclVVSUQuZmluZEluZGV4KHdvcmtPcmRlciA9PiB3b3JrT3JkZXIubGFiZWwgPT09IHRoaXMud29ya09yZGVyTnVtYmVyKTsKICAgICAgbGV0IHdvcmtPcmRlclVVSUQgPSB0aGlzLndvcmtPcmRlcnNbaW5kZXhdOwogICAgICBsZXQgYWRkSXNzdWVJbldvcmtPcmRlclJlcXVlc3QgPSB7fTsKICAgICAgbGV0IGlzc3VlcyA9IFtdOwoKICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgdGhpcy5pc3N1ZXNVVUlELmxlbmd0aDsgaWR4KyspIHsKICAgICAgICBsZXQgaXNzdWUgPSB7fTsKICAgICAgICBpc3N1ZS5pc3N1ZU51bWJlciA9IHRoaXMuaXNzdWVzTnVtYmVyW2lkeF07CiAgICAgICAgaXNzdWUuaXNzdWVVVUlEID0gdGhpcy5pc3N1ZXNVVUlEW2lkeF07CiAgICAgICAgaXNzdWUucmVzb2x2ZWQgPSBmYWxzZTsKICAgICAgICBpc3N1ZS5yZWNvbW1lbmRlZEFjdGlvbiA9IG51bGw7CiAgICAgICAgaXNzdWVzLnB1c2goaXNzdWUpOwogICAgICB9CgogICAgICBhZGRJc3N1ZUluV29ya09yZGVyUmVxdWVzdC5pc3N1ZXMgPSBpc3N1ZXM7CiAgICAgIGFkZElzc3VlSW5Xb3JrT3JkZXJSZXF1ZXN0LndvcmtPcmRlclVVSUQgPSB3b3JrT3JkZXJVVUlELnV1aWQ7CiAgICAgIHdvcmtPcmRlclNlcnZpY2UuYWRkSXNzdWVzSW5Xb3JrT3JkZXIoYWRkSXNzdWVJbldvcmtPcmRlclJlcXVlc3QpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAid29yay1vcmRlciIsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIHRvYXN0RmxhZzogdHJ1ZSwKICAgICAgICAgICAgICB0b2FzdFR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICBtZXNzYWdlOiAiV29ya09yZGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IgogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIHdoaWxlIGFkZGluZyBpc3N1ZXMgaW4gd29yayBvcmRlciIsICJlcnJvciIpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNikgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIHdoaWxlIGFkZGluZyBpc3N1ZXMgaW4gd29yayBvcmRlciIsICJlcnJvciIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiQW4gdW5leHBlY3RlZCBFcnJvciBPY2N1cnJlZCIsICJlcnJvciIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy5zaG93Q3JlYXRlT3JkZXIgPSBmYWxzZTsKICAgICAgdGhpcy5leGlzdGluZyA9IGZhbHNlOwogICAgfSwKCiAgICBjbG9zZU1vZGFsKCkgewogICAgICB0aGlzLnNob3dDcmVhdGVPcmRlciA9IGZhbHNlOwogICAgICB0aGlzLmV4aXN0aW5nID0gZmFsc2U7CiAgICB9LAoKICAgIHNldFN0YXRpY0NvbHVtbigpIHsKICAgICAgbGV0IHN0YXRpY0NvbCA9IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5maWx0ZXIoY29sID0+IGNvbC5sYWJlbE5hbWUgPT0gIklzc3VlIE51bWJlciIpWzBdOwogICAgICB0aGlzLnBhcmVudFN5c3RlbVNldHRpbmdzLnN0YXRpY0NvbHVtbnMucHVzaChzdGF0aWNDb2wpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zW2ldLmxhYmVsTmFtZSA9PSBzdGF0aWNDb2wubGFiZWxOYW1lKSB7CiAgICAgICAgICB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnMuc3BsaWNlKGksIDEpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBzaG93VG9hc3QobWVzc2FnZSwgdHlwZSkgewogICAgICB0aGlzLnRvYXN0TWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgIHRoaXMudG9hc3RUeXBlID0gdHlwZTsKICAgICAgdGhpcy50b2FzdEZsYWcrKzsKICAgIH0KCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMudG9hc3RGbGFnID09PSB0cnVlKSB7CiAgICAgIHRoaXMuc2hvd1RvYXN0KHRoaXMuJHJvdXRlLnBhcmFtcy50b2Fzc3RNZXNzYWdlLCB0aGlzLiRyb3V0ZS5wYXJhbXMudG9hc3RUeXBlKTsKICAgIH0KCiAgICBsZXQgZCA9IG5ldyBEYXRlKCk7CiAgICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyAxICogMjQgKiA2MCAqIDYwICogMTAwMCk7CiAgICBsZXQgZXhwaXJlcyA9ICJleHBpcmVzPSIgKyBkLnRvVVRDU3RyaW5nKCk7CiAgICB0aGlzLiRjb29raWUuc2V0KCJ1c2VySWQiLCAiYW5lZXMiLCBleHBpcmVzKTsKICAgIGRvY3VtZW50LnRpdGxlID0gdGhpcy4kcm91dGUubWV0YS50aXRsZTsKICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKSk7CiAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IGN1cnJlbnRVc2VyRGV0YWlsczsgLy8gc2VuZGluZyBvbmx5IGZpcnN0IGFuZCBsYXN0IG5hbWUgZm9yIFNEVAoKICAgIGxldCBuYW1lID0gY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUudXNlcm5hbWU7CgogICAgaWYgKG5hbWUuaW5jbHVkZXMoIkAiKSkgewogICAgICBuYW1lID0gbmFtZS5zcGxpdCgiQCIpOwogICAgICBuYW1lID0gbmFtZVswXTsKICAgIH0KCiAgICB0aGlzLnBhcmVudFN5c3RlbVNldHRpbmdzLnVzZXIgPSBuYW1lOwoKICAgIGlmIChjdXJyZW50VXNlckRldGFpbHMgPT09IG51bGwpIHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImZvcmNlU2lnbm91dCIsICJ5ZXMiKTsKICAgICAgcmV0dXJuOwogICAgfSAvLyBmZXRjaGluZyBjb25maWdzCgoKICAgIGxldCB1dWlkID0gY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQ7CiAgICBhc3NldFBlcnNvbm5lbFNlcnZpY2UuZ2V0T3JnQ29uZmlncyh1dWlkLCAidGFibGVDb25maWdzIikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpCiAgICAgIGxldCBhbGxDb25maWdzID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhLnRhYmxlQ29uZmlncyk7CiAgICAgIGFsbENvbmZpZ3MgPSBhbGxDb25maWdzLmZpbHRlcihkYXRhID0+IGRhdGEucGFnZU5hbWUgPT09ICJWaWV3SXNzdWUiKVswXTsgLy8gY2NjY2NjYwoKICAgICAgdGhpcy50YWJsZUNvbmZpZyA9IGFsbENvbmZpZ3M7CiAgICAgIHRoaXMuZXh0cmFjdEZpZWxkTmFtZXNGb3JTZWFyY2hRdWVyeSh0aGlzLnRhYmxlQ29uZmlnKTsKICAgICAgdGhpcy5zZXRTdGF0aWNDb2x1bW4oKTsKICAgICAgdGhpcy5zZXRUYWJsZUNvbmZpZ3MoKTsKICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgdGhpcy5zaG93VG9hc3QoZXJyb3IuZGF0YS5yZXNwb25zZSwgImVycm9yIik7CiAgICB9KTsKICB9LAoKICBjb21wdXRlZDogewogICAgY3NzVmFycygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAiLS10aC1wcmltYXJ5IjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidGhlbWVDb25maWdzIikpLnByaW1hcnksCiAgICAgICAgIi0tdGgtcHJpbWFyeVRleHQiOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0aGVtZUNvbmZpZ3MiKSkucHJpbWFyeVRleHQsCiAgICAgICAgIi0tdGgtc2Vjb25kYXJ5IjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidGhlbWVDb25maWdzIikpLnNlY29uZGFyeSwKICAgICAgICAiLS10aC1zZWNvbmRhcnlUZXh0IjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidGhlbWVDb25maWdzIikpLnNlY29uZGFyeVRleHQsCiAgICAgICAgIi0tdGgtZm9uZC1mYW1pbHkiOiAiSGVlYm8iCiAgICAgIH07CiAgICB9LAoKICAgIHFCdG5TdHlsZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBiYWNrZ3JvdW5kOiAidmFyKC0tdGgtc2Vjb25kYXJ5KSIsCiAgICAgICAgY29sb3I6ICJ2YXIoLS10aC1zZWNvbmRhcnlUZXh0KSIsCiAgICAgICAgInRleHQtdHJhbnNmb3JtIjogImluaXRpYWwiLAogICAgICAgIC8vICJ3aWR0aCI6IjEwMCUiLAogICAgICAgIGZsb2F0OiAicmlnaHQiCiAgICAgIH07CiAgICB9CgogIH0sCiAgdmFsaWRhdGlvbnM6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIHdvcmtPcmRlck51bWJlcjogewogICAgICAgIHJlcXVpcmVkCiAgICAgIH0KICAgIH07CiAgfQp9Ow=="},null]}