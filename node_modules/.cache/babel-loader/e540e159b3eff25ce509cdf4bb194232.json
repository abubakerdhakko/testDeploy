{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/usage/components/CreateUsages.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/usage/components/CreateUsages.vue","mtime":1661968702448},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/babel.config.js","mtime":1661968702388},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEFzc2V0TWFuYWdlbWVudFNlcnZpY2UgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvQXNzZXRNYW5hZ2VtZW50U2VydmljZSI7CmltcG9ydCBTaWRlQmFyIGZyb20gIi4vU2lkZUJhciI7CmltcG9ydCB7IEZ1bmN0aW9ucyB9IGZyb20gIkAvc2hhcmVkL0Z1bmN0aW9ucyI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IHsgcmVxdWlyZWQsIHJlcXVpcmVkSWYsIG1pblZhbHVlLCBtYXhMZW5ndGggfSBmcm9tICJ2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgbG9hZGVyIGZyb20gIkAvY29tcG9uZW50cy9Mb2FkZXIudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDcmVhdGVVc2FnZXMiLAogIGNvbXBvbmVudHM6IHsKICAgIFNpZGVCYXIsCiAgICBsb2FkZXIKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RhdGVEaXNhYmxlOiBmYWxzZSwKICAgICAgdXNhZ2VfbG9hZGVyRmxhZzogZmFsc2UsCiAgICAgIGxvY2F0aW9uX2xvYWRlckZsYWc6IGZhbHNlLAogICAgICB0b2FzdEZsYWc6IDAsCiAgICAgIHRvYXN0TWVzc2FnZTogIiIsCiAgICAgIHRvYXN0VHlwZTogIiIsCiAgICAgIGluZGV4S2V5OiAwLAogICAgICBsb2FkZXJGbGFnOiBmYWxzZSwKICAgICAgY3VycmVudFVzZXJEZXRhaWxzOiAiIiwKICAgICAgYXNzZXRDYXRlZ29yaWVzOiAiIiwKICAgICAgYXNzZXRDYXRlZ29yeTogIiIsCiAgICAgIGFzc2V0Q2F0ZWdvcnlMYWJlbDogIiIsCiAgICAgIGFzc2V0c05hbWVzOiBbXSwKICAgICAgdG90YWxBc3NldE5hbWVzOiAiIiwKICAgICAgYXNzZXROYW1lOiAiIiwKICAgICAgYXNzZXROYW1lTGFiZWw6ICIiLAogICAgICBmaWVsZENhdGVnb3J5OiAiIiwKICAgICAgZmllbGRDYXRlZ29yeUxhYmVsOiAiIiwKICAgICAgYXNzZXRzOiB7fSwKICAgICAgYXNzZXROdW1iZXI6ICIiLAogICAgICBmaWVsZENhdGVnb3JpZXM6IFt7CiAgICAgICAgbmFtZTogIlRyaXAiLAogICAgICAgIHZhbHVlOiAidHJpcCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJSZWd1bGFyIiwKICAgICAgICB2YWx1ZTogIm5vcm1hbCIKICAgICAgfV0sCiAgICAgIGFzc2V0OiAiIiwKICAgICAgbG9jYXRpb25EaWFsb2c6IGZhbHNlLAogICAgICBzZWNvbmRhcnlMb2NhdGlvbkRpYWxvZzogZmFsc2UsCgogICAgICAvKk1hcCBCb3ggRGF0YSovCiAgICAgIHN1Z2dlc3Rpb25Tb3VyY2U6IFtdLAogICAgICBtYXBTZWFyY2hPYmo6IHt9LAogICAgICBhY2Nlc3NUb2tlbjogInBrLmV5SjFJam9pYlhWb1lXMXRZV1F0YzJGaFpDSXNJbUVpT2lKamF6VmpOWGswZURNeGFXZG9NMjV3YzNod2QydGpObkowSW4wLmt2MEpaVEVaaC1oZ0Q2ak1uVjF6d2ciLAogICAgICBkZWZhdWx0X2xvY2F0aW9uOiBbXSwKCiAgICAgIC8qTWFwIEJveCBEYXRhKi8KICAgICAgbWFya2VyczogW10sCiAgICAgIGxhdDogIiIsCiAgICAgIGxvbmc6ICIiLAogICAgICBwcmltYXJ5VXNhZ2VVbml0OiAiIiwKICAgICAgc2Vjb25kYXJ5VXNhZ2VVbml0OiAiIiwKICAgICAgc3RhcnREYXRlOiAiIiwKICAgICAgZW5kRGF0ZTogIiIsCiAgICAgIGFzc2V0UHJpbWFyeVZhbHVlOiAiIiwKICAgICAgYXNzZXRTZWNvbmRhcnlWYWx1ZTogIiIsCiAgICAgIHR5cGVPcHRpb25zOiBbewogICAgICAgIGxhYmVsOiAiUHJpbWFyeSBMb2NhdGlvbiIsCiAgICAgICAgdmFsdWU6ICJwcmltYXJ5IgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICJTZWNvbmRhcnkgTG9jYXRpb24iLAogICAgICAgIHZhbHVlOiAic2Vjb25kYXJ5IgogICAgICB9XSwKICAgICAgdXNhZ2VzOiB7CiAgICAgICAgcHJpbWFyeVVzYWdlVmFsdWU6ICIiLAogICAgICAgIHNlY29uZGFyeVVzYWdlVmFsdWU6ICIiLAogICAgICAgIHByaW1hcnlVc2FnZVRpbWU6ICIiLAogICAgICAgIHByaW1hcnlVc2FnZUxhdDogIiIsCiAgICAgICAgcHJpbWFyeVVzYWdlTG5nOiAiIiwKICAgICAgICBzZWNvbmRhcnlVc2FnZVRpbWU6ICIiLAogICAgICAgIHNlY29uZGFyeVVzYWdlTGF0OiAiIiwKICAgICAgICBzZWNvbmRhcnlVc2FnZUxuZzogIiIsCiAgICAgICAgY2F0ZWdvcnk6ICIiLAogICAgICAgIHN0YXJ0VGltZTogIiIsCiAgICAgICAgc3RvcFRpbWU6ICIiLAogICAgICAgIHRyaXBFbmRVc2FnZVZhbHVlOiAiIiwKICAgICAgICBjcmVhdGVkQXQ6ICIiLAogICAgICAgIGFzc2V0VVVJRDogIiIsCiAgICAgICAgdGVuYW50VVVJRDogIiIsCiAgICAgICAgbG9jYXRpb246ICIiLAogICAgICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgICAgICBkZXNjcmlwdGlvbjogIiIKICAgICAgfSwKICAgICAgZm9ybVRpdGxlOiAiQWRkIgogICAgfTsKICB9LAoKICBwcm9wczoge30sCiAgbWV0aG9kczogewogICAgZ2V0U3VnZ2VzdGlvbnMob2JqcykgewogICAgICB0aGlzLnN1Z2dlc3Rpb25Tb3VyY2UgPSBvYmpzOwogICAgfSwKCiAgICBhc3luYyBnZXRMb2NhdGlvbnMoc2VhcmNoSW5wdXQpIHsKICAgICAgY29uc3QgdXJsID0gImh0dHBzOi8vYXBpLm1hcGJveC5jb20vZ2VvY29kaW5nL3Y1L21hcGJveC5wbGFjZXMvIiArIHNlYXJjaElucHV0ICsgIi5qc29uP2FjY2Vzc190b2tlbj0iICsgdGhpcy5hY2Nlc3NUb2tlbjsKCiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICAgIHJldHVybiByZXNwb25zZUpzb24uZGF0YTsKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiVW5hYmxlIHRvIGZldGNoIGxvY2F0aW9uLiBFbmFibGUgbG9jYXRpb24gYW5kIHRyeSByZWxvYWRpbmcgdGhlIHBhZ2UiLCAiZXJyb3JJIik7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiTWFwLmdldExvY2F0aW9uc19vdXRlciIsIGUpOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGdldERlZmF1bHRMb2NhdGlvbk9iaihsbmcsIGxhdCkgewogICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkubWFwYm94LmNvbS9nZW9jb2RpbmcvdjUvbWFwYm94LnBsYWNlcy8ke2xuZ30sJHtsYXR9Lmpzb24/dHlwZT1hZGRyZXNzJmFjY2Vzc190b2tlbj0ke3RoaXMuYWNjZXNzVG9rZW59YDsKCiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldCh1cmwpLnRoZW4ocmVzcG9uc2VKc29uID0+IHsKICAgICAgICAgIGxldCBsb2NhdGlvbiA9IHJlc3BvbnNlSnNvbi5kYXRhOwogICAgICAgICAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IHt9OwogICAgICAgICAgY3VycmVudExvY2F0aW9uLnNlbGVjdGVkT2JqZWN0ID0gbG9jYXRpb24uZmVhdHVyZXNbMV07CiAgICAgICAgICB0aGlzLm9uU2VsZWN0ZWQoY3VycmVudExvY2F0aW9uKTsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRMb2MobG9jYXRpb24uZmVhdHVyZXNbMV0pOwogICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJNYXAuZ2V0TG9jYXRpb25zX2lubmRlciIsIGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKCJNYXAuZ2V0TG9jYXRpb25zX291dGVyIiwgZSk7CiAgICAgIH0KICAgIH0sCgogICAgc2VsZWN0ZWRMb2Mob2JqKSB7CiAgICAgIHRoaXMudXNhZ2VzWyJsb2NhdGlvbiJdID0gb2JqLnBsYWNlX25hbWU7CgogICAgICBpZiAodGhpcy51c2FnZXMudHlwZSA9PSAicHJpbWFyeSIpIHsKICAgICAgICB0aGlzLnVzYWdlcy5wcmltYXJ5VXNhZ2VMbmcgPSBvYmouZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF07CiAgICAgICAgdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlTGF0ID0gb2JqLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXNhZ2VzLnNlY29uZGFyeVVzYWdlTG5nID0gb2JqLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdOwogICAgICAgIHRoaXMudXNhZ2VzLnNlY29uZGFyeVVzYWdlTGF0ID0gb2JqLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdOwogICAgICB9CiAgICB9LAoKICAgIG9uU2VsZWN0ZWQodmFsKSB7CiAgICAgIHRoaXMubWFwU2VhcmNoT2JqID0gdmFsLnNlbGVjdGVkT2JqZWN0OwogICAgfSwKCiAgICBvbklucHV0KHZhbCkgewogICAgICB0aGlzLnVzYWdlcy5sb2NhdGlvbiA9IHZhbDsKICAgIH0sCgogICAgY2xlYXJTZWxlY3RlZExvY2F0aW9uKCkgewogICAgICB0aGlzLnVzYWdlcy5sb2NhdGlvbiA9ICIiOwogICAgICB0aGlzLmRlZmF1bHRMb2NhdGlvbiA9IFtdOwogICAgICB0aGlzLm1hcFNlYXJjaE9iaiA9IHt9OwogICAgICB0aGlzLmluZGV4S2V5Kys7CiAgICB9LAoKICAgIGRhdGVIYW5kbGVyKGRhdGUsIGtleSkgewogICAgICBsZXQgY3VycmVudERhdGUgPSBtb21lbnQoKS5mb3JtYXQoKS5zcGxpdCgiVCIpOwogICAgICBjdXJyZW50RGF0ZSA9IGN1cnJlbnREYXRlWzBdOwoKICAgICAgaWYgKGtleSA9PT0gInN0YXJ0X2RhdGUiKSB7CiAgICAgICAgaWYgKG1vbWVudChkYXRlKS5pc0JlZm9yZShjdXJyZW50RGF0ZSkgfHwgbW9tZW50KHRoaXMuZW5kRGF0ZSkuaXNCZWZvcmUoZGF0ZSkpIHsKICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gIiI7CiAgICAgICAgICByZXR1cm4gdGhpcy5zaG93VG9hc3QoIlN0YXJ0IERhdGUgbXVzdCBiZSBjdXJyZW50IERhdGUgJiBMZXNzIHRoYW4gRW5kIERhdGUiLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuc3RhcnREYXRlICYmIG1vbWVudChkYXRlKS5pc0JlZm9yZSh0aGlzLnN0YXJ0RGF0ZSkpIHsKICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9ICIiOwogICAgICAgICAgcmV0dXJuIHRoaXMuc2hvd1RvYXN0KCJFbmQgRGF0ZSBtdXN0IGJlIHNhbWUgYXMgU3RhcnQgRGF0ZSBvciBncmVhdGVyIHRoYW4gdGhlIFN0YXJ0IERhdGUiLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgY2hlY2tWYWxpZGF0aW9uKGZpZWxkKSB7CiAgICAgIHRoaXMuJHYudXNhZ2VzW2ZpZWxkXS4kdG91Y2goKTsKICAgIH0sCgogICAgZGVmYXVsdExvY2F0aW9uKCkgewogICAgICB0aGlzLmxvY2F0aW9uX2xvYWRlckZsYWcgPSB0cnVlOwogICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKHBvc2l0aW9uID0+IHsKICAgICAgICB0aGlzLmRlZmF1bHRfbG9jYXRpb24ucHVzaCh7CiAgICAgICAgICBsYXQ6IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSwKICAgICAgICAgIGxuZzogcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSwKICAgICAgICAgIHR5cGU6ICJsb2NhdGlvbiIKICAgICAgICB9KTsKICAgICAgICB0aGlzLmdldERlZmF1bHRMb2NhdGlvbk9iaihwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlLCBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUpOwogICAgICAgIHRoaXMubG9jYXRpb25fbG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICB9LCBlcnJvciA9PiB7CiAgICAgICAgdGhpcy5sb2NhdGlvbl9sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgIH0pOwogICAgfSwKCiAgICBjcmVhdGVVc2FnZSgpIHsKICAgICAgdGhpcy4kdi4kdG91Y2goKTsKCiAgICAgIGlmICh0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIlBsZWFzZSBmaWxsIGFsbCByZXF1aXJlZCBmaWVsZHMiLCAid2FybmluZyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudXNhZ2VzLnByaW1hcnlVc2FnZVZhbHVlICYmIHRoaXMudXNhZ2VzLnByaW1hcnlVc2FnZVZhbHVlIDw9IHRoaXMuYXNzZXRQcmltYXJ5VmFsdWUpIHsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiUHJpbWFyeSBVc2FnZSB2YWx1ZSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuICIgKyB0aGlzLmFzc2V0UHJpbWFyeVZhbHVlICsgIi4iLCAid2FybmluZyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudXNhZ2VzLnNlY29uZGFyeVVzYWdlVmFsdWUgJiYgdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VWYWx1ZSA8PSB0aGlzLmFzc2V0U2Vjb25kYXJ5VmFsdWUpIHsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiU2Vjb25kYXJ5IFVzYWdlIHZhbHVlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gIiArIHRoaXMuYXNzZXRTZWNvbmRhcnlWYWx1ZSArICIuIiwgIndhcm5pbmciKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxldCByZXF1ZXN0ID0gewogICAgICAgIHVzYWdlOiB0aGlzLnVzYWdlcwogICAgICB9OwogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwoKICAgICAgaWYgKHRoaXMuc3RhcnREYXRlKSB7CiAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IG1vbWVudCh0aGlzLnN0YXJ0RGF0ZSkuZm9ybWF0KCJZWVlZLU1NLUREVEhIOk1NOlNTWiIpOwogICAgICAgIHJlcXVlc3QudXNhZ2Uuc3RhcnRUaW1lID0gc2VsZWN0ZWREYXRlOwogICAgICB9CgogICAgICBpZiAodGhpcy5lbmREYXRlKSB7CiAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZUVuZCA9IG1vbWVudCh0aGlzLmVuZERhdGUpLmZvcm1hdCgiWVlZWS1NTS1ERFRISDpNTTpTU1oiKTsKICAgICAgICByZXF1ZXN0LnVzYWdlLnN0b3BUaW1lID0gc2VsZWN0ZWREYXRlRW5kOwogICAgICB9CgogICAgICByZXF1ZXN0LnVzYWdlLnRlbmFudFVVSUQgPSB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5vcmdhbml6YXRpb25JZDsKICAgICAgcmVxdWVzdC51c2FnZS5wcmltYXJ5VXNhZ2VVbml0ID0gdGhpcy5wcmltYXJ5VXNhZ2VVbml0OwogICAgICByZXF1ZXN0LnVzYWdlLnNlY29uZGFyeVVzYWdlVW5pdCA9IHRoaXMuc2Vjb25kYXJ5VXNhZ2VVbml0OwogICAgICByZXF1ZXN0LnVzYWdlLmFzc2V0TmFtZSA9IHRoaXMuYXNzZXROYW1lTGFiZWw7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuYWRkVXNhZ2VzKHJlcXVlc3QpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmRhdGEucmVzcG9uc2VDb2RlID09ICIyMDAiKSB7CiAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogInVzYWdlIiwKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgdG9hc3RNZXNzYWdlOiByZXMuZGF0YS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICB0b2FzdFR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICB0b2FzdEZsYWc6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiRXJyb3Igd2hpbGUgYWRkaW5nIHVzYWdlIGluIGFzc2V0LiIsICJlcnJvciIpOwogICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCgogICAgdXBkYXRlVXNhZ2UoKSB7CiAgICAgIHRoaXMuJHYuJHRvdWNoKCk7CgogICAgICBpZiAodGhpcy4kdi4kaW52YWxpZCkgewogICAgICAgIHRoaXMuc2hvd1RvYXN0KCJQbGVhc2UgZmlsbCBhbGwgcmVxdWlyZWQgZmllbGRzIiwgIndhcm5pbmciKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIGxldCByZXF1ZXN0ID0gewogICAgICAgIHVzYWdlOiB7CiAgICAgICAgICBpZDogdGhpcy51c2FnZXMuaWQsCiAgICAgICAgICBwcmltYXJ5VXNhZ2VWYWx1ZTogdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlVmFsdWUsCiAgICAgICAgICBzZWNvbmRhcnlVc2FnZVZhbHVlOiB0aGlzLnVzYWdlcy5zZWNvbmRhcnlVc2FnZVZhbHVlLAogICAgICAgICAgcHJpbWFyeVVzYWdlVGltZTogdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlVGltZSwKICAgICAgICAgIHByaW1hcnlVc2FnZUxhdDogdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlTGF0LAogICAgICAgICAgcHJpbWFyeVVzYWdlTG5nOiB0aGlzLnVzYWdlcy5wcmltYXJ5VXNhZ2VMbmcsCiAgICAgICAgICBzZWNvbmRhcnlVc2FnZVRpbWU6IHRoaXMudXNhZ2VzLnNlY29uZGFyeVVzYWdlVGltZSwKICAgICAgICAgIHNlY29uZGFyeVVzYWdlTGF0OiB0aGlzLnVzYWdlcy5zZWNvbmRhcnlVc2FnZUxhdCwKICAgICAgICAgIHNlY29uZGFyeVVzYWdlTG5nOiB0aGlzLnVzYWdlcy5zZWNvbmRhcnlVc2FnZUxuZywKICAgICAgICAgIGNhdGVnb3J5OiB0aGlzLnVzYWdlcy5jYXRlZ29yeSwKICAgICAgICAgIHRyaXBFbmRVc2FnZVZhbHVlOiB0aGlzLnVzYWdlcy50cmlwRW5kVXNhZ2VWYWx1ZSwKICAgICAgICAgIHRlbmFudFVVSUQ6IHRoaXMudXNhZ2VzLnRlbmFudFVVSUQsCiAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy51c2FnZXMuZGVzY3JpcHRpb24KICAgICAgICB9CiAgICAgIH07CiAgICAgIHZhciBzZWxlY3RlZERhdGUgPSBtb21lbnQodGhpcy5zdGFydERhdGUpLmZvcm1hdCgiWVlZWS1NTS1ERFRISDpNTTpTU1oiKTsKICAgICAgdmFyIGRhdGVTcGxpdCA9IHNlbGVjdGVkRGF0ZS5zcGxpdCgiVCIpOwogICAgICB2YXIgb2JqRGF0ZSA9IGRhdGVTcGxpdFswXTsKICAgICAgdmFyIHRpbWVTcGxpdCA9IHRoaXMudXNhZ2VzLnN0YXJ0VGltZS5zcGxpdCgiOiIpOwogICAgICB2YXIgaG91ciA9IHRpbWVTcGxpdFswXTsKICAgICAgdmFyIG1pbiA9IHRpbWVTcGxpdFsxXTsKICAgICAgdmFyIGFzc2lnbm1lbnREYXRlID0gb2JqRGF0ZSArICJUIiArIGhvdXIgKyAiOiIgKyBtaW4gKyAiOiIgKyAiMDArMDU6MDAiOwogICAgICByZXF1ZXN0LnVzYWdlLnN0YXJ0VGltZSA9IGFzc2lnbm1lbnREYXRlOwogICAgICB2YXIgc2VsZWN0ZWREYXRlRW5kID0gbW9tZW50KHRoaXMuZW5kRGF0ZSkuZm9ybWF0KCJZWVlZLU1NLUREVEhIOk1NOlNTWiIpOwogICAgICB2YXIgZGF0ZVNwbGl0MSA9IHNlbGVjdGVkRGF0ZUVuZC5zcGxpdCgiVCIpOwogICAgICB2YXIgb2JqRGF0ZTEgPSBkYXRlU3BsaXQxWzBdOwogICAgICB2YXIgdGltZVNwbGl0MSA9IHRoaXMudXNhZ2VzLnN0b3BUaW1lLnNwbGl0KCI6Iik7CiAgICAgIHZhciBob3VyMSA9IHRpbWVTcGxpdDFbMF07CiAgICAgIHZhciBtaW4xc3RhcnREYXRlID0gdGltZVNwbGl0MVsxXTsKICAgICAgdmFyIGFzc2lnbm1lbnREYXRlRW5kID0gb2JqRGF0ZTEgKyAiVCIgKyBob3VyMSArICI6IiArIG1pbjFzdGFydERhdGUgKyAiOiIgKyAiMDArMDU6MDAiOwogICAgICByZXF1ZXN0LnVzYWdlLnN0b3BUaW1lID0gYXNzaWdubWVudERhdGVFbmQ7CiAgICAgIHJlcXVlc3QudXNhZ2UuYXNzZXRVVUlEID0gdGhpcy51c2FnZXMuYXNzZXRVVUlEOwogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmVkaXRVc2FnZXMocmVxdWVzdCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YS5yZXNwb25zZUNvZGUgPT0gIjIwMCIpIHsKICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAidXNhZ2UiLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2U6IHJlcy5kYXRhLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgIHRvYXN0VHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHRvYXN0RmxhZzogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgIHRoaXMuc2hvd1RvYXN0KCJFcnJvciB3aGlsZSBhZGRpbmcgdXNhZ2UgaW4gYXNzZXQuIiwgImVycm9yIik7CiAgICAgIH0pOwogICAgfSwKCiAgICBnZXRBbGxDYXRlZ29yaWVzKGN1cnJlbnRVc2VyRGV0YWlscykgewogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldEFsbEFzc2V0Q2F0ZWdvcmllcyhjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmFzc2V0Q2F0ZWdvcmllcyA9IHJlc3BvbnNlLmRhdGEuY2F0ZWdvcmllczsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHt9KTsKICAgIH0sCgogICAgZ2V0QWxsQXNzZXQoY3VycmVudFVzZXJEZXRhaWxzKSB7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0QWxsQXNzZXRzKGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHRoaXMudG90YWxBc3NldE5hbWVzID0gcmVzcG9uc2UuZGF0YS5hc3NldHM7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7fSk7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRDYXRlZ29yeSh2YWx1ZSkgewogICAgICB0aGlzLmFzc2V0c05hbWVzID0gW107CiAgICAgIHRoaXMuYXNzZXRDYXRlZ29yeSA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0OwoKICAgICAgZm9yIChsZXQgYXNzZXQgb2YgdGhpcy50b3RhbEFzc2V0TmFtZXMpIHsKICAgICAgICBpZiAoYXNzZXQuY2F0ZWdvcnlVVUlEID09PSB0aGlzLmFzc2V0Q2F0ZWdvcnkudXVpZCkgewogICAgICAgICAgdGhpcy5hc3NldHNOYW1lcy5wdXNoKGFzc2V0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgY2xlYXJTZWxlY3RlZENhdGVnb3J5KCkgewogICAgICB0aGlzLmFzc2V0Q2F0ZWdvcnlMYWJlbCA9ICIiOwogICAgICB0aGlzLmFzc2V0TmFtZUxhYmVsID0gIiI7CiAgICAgIHRoaXMuYXNzZXRzID0ge307CiAgICAgIHRoaXMudXNhZ2VzLnByaW1hcnlVc2FnZVZhbHVlID0gIiI7CiAgICAgIHRoaXMudXNhZ2VzLnNlY29uZGFyeVVzYWdlVmFsdWUgPSAiIjsKICAgICAgdGhpcy5wcmltYXJ5VXNhZ2VVbml0ID0gIiI7CiAgICAgIHRoaXMuc2Vjb25kYXJ5VXNhZ2VVbml0ID0gIiI7CiAgICAgIHRoaXMuYXNzZXRzTmFtZXMgPSBbXTsKICAgICAgdGhpcy5pbmRleEtleSsrOwogICAgfSwKCiAgICBvblNlbGVjdGVkTmFtZSh2YWx1ZSkgewogICAgICBpZiAodmFsdWUpIHsKICAgICAgICB0aGlzLnVzYWdlX2xvYWRlckZsYWcgPSB0cnVlOwogICAgICAgIHRoaXMuYXNzZXROYW1lTGFiZWwgPSB2YWx1ZS5zZWxlY3RlZE9iamVjdC5uYW1lOwogICAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0QXNzZXQodmFsdWUuc2VsZWN0ZWRPYmplY3QudXVpZCkudGhlbihyZXMgPT4gewogICAgICAgICAgbGV0IGFzc2V0ID0gcmVzLmRhdGEuYXNzZXQ7CiAgICAgICAgICB0aGlzLmFzc2V0UHJpbWFyeVZhbHVlID0gYXNzZXQubGFzdFVzYWdlLnByaW1hcnlVc2FnZVZhbHVlID8gYXNzZXQubGFzdFVzYWdlLnByaW1hcnlVc2FnZVZhbHVlIDogMDsKICAgICAgICAgIHRoaXMuYXNzZXRTZWNvbmRhcnlWYWx1ZSA9IGFzc2V0Lmxhc3RVc2FnZS5zZWNvbmRhcnlVc2FnZVZhbHVlID8gYXNzZXQubGFzdFVzYWdlLnNlY29uZGFyeVVzYWdlVmFsdWUgOiAwOwogICAgICAgICAgdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlVmFsdWUgPSBhc3NldC5sYXN0VXNhZ2UucHJpbWFyeVVzYWdlVmFsdWUgPyBhc3NldC5sYXN0VXNhZ2UucHJpbWFyeVVzYWdlVmFsdWUgOiAwOwogICAgICAgICAgdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VWYWx1ZSA9IGFzc2V0Lmxhc3RVc2FnZS5zZWNvbmRhcnlVc2FnZVZhbHVlID8gYXNzZXQubGFzdFVzYWdlLnNlY29uZGFyeVVzYWdlVmFsdWUgOiAwOwogICAgICAgICAgdGhpcy51c2FnZV9sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJGYWlsZWQgdG8gbG9hZCB1c2FnZS4iLCAiZXJyb3IiKTsKICAgICAgICAgIHRoaXMudXNhZ2VfbG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuYXNzZXRzID0gdmFsdWUuc2VsZWN0ZWRPYmplY3Q7CiAgICAgICAgdGhpcy51c2FnZXMuYXNzZXRVVUlEID0gdmFsdWUuc2VsZWN0ZWRPYmplY3QudXVpZDsKICAgICAgICB0aGlzLnVzYWdlcy5hc3NldE51bWJlciA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0LmFzc2V0TnVtYmVyOwogICAgICAgIHRoaXMucHJpbWFyeVVzYWdlVW5pdCA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0LnByaW1hcnlVc2FnZVVuaXQ7CiAgICAgICAgdGhpcy5zZWNvbmRhcnlVc2FnZVVuaXQgPSB2YWx1ZS5zZWxlY3RlZE9iamVjdC5zZWNvbmRhcnlVc2FnZVVuaXQ7CiAgICAgICAgdGhpcy5pbmRleEtleSsrOwogICAgICB9CiAgICB9LAoKICAgIGNsZWFyU2VsZWN0ZWRBc3NldE5hbWUoKSB7CiAgICAgIHRoaXMuYXNzZXROYW1lTGFiZWwgPSAiIjsKICAgICAgdGhpcy5hc3NldHMgPSB7fTsKICAgICAgdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlVmFsdWUgPSAiIjsKICAgICAgdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VWYWx1ZSA9ICIiOwogICAgICB0aGlzLnByaW1hcnlVc2FnZVVuaXQgPSAiIjsKICAgICAgdGhpcy5zZWNvbmRhcnlVc2FnZVVuaXQgPSAiIjsKICAgICAgdGhpcy5pbmRleEtleSsrOwogICAgfSwKCiAgICBvblNlbGVjdGVkRmllbGRDYXRlZ29yeSh2YWx1ZSkgewogICAgICB0aGlzLnVzYWdlcy5jYXRlZ29yeSA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0LnZhbHVlOwogICAgICB0aGlzLmZpZWxkQ2F0ZWdvcnkgPSB2YWx1ZS5zZWxlY3RlZE9iamVjdDsKICAgIH0sCgogICAgY2xlYXJTZWxlY3RlZEZpZWxkQ2F0ZWdvcnkoKSB7CiAgICAgIHRoaXMudXNhZ2VzLmNhdGVnb3J5ID0gIiI7CiAgICAgIHRoaXMuZmllbGRDYXRlZ29yeSA9ICIiOwogICAgICB0aGlzLmZpZWxkQ2F0ZWdvcnlMYWJlbCA9ICIiOwogICAgICB0aGlzLmluZGV4S2V5Kys7CiAgICB9LAoKICAgIGFzc2V0RGV0YWlsc0FjY29yZGlvbkZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLmFzc2V0RGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuJHJlZnMudXNhZ2VEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcmVmcy50aW1lRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJHJlZnMubWFwRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIHVzYWdlQWNjb3JkaW9uRnVuY3Rpb24odmFsdWUpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMudXNhZ2VEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy4kcmVmcy50aW1lRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJHJlZnMubWFwRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJHJlZnMuYXNzZXREZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgdGltZUFjY29yZGlvbkZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLnRpbWVEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy4kcmVmcy51c2FnZURldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB0aGlzLiRyZWZzLm1hcERldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB0aGlzLiRyZWZzLmFzc2V0RGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIG1hcEFjY29yZGlvbkZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLm1hcERldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPT09IHRydWUpIHsKICAgICAgICB0aGlzLiRyZWZzLnVzYWdlRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJHJlZnMudGltZURldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB0aGlzLiRyZWZzLmFzc2V0RGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIGdldEZvcm1FcnJvck1lc3NhZ2UoZmllbGRWYWxpZGF0aW9uKSB7CiAgICAgIGlmIChmaWVsZFZhbGlkYXRpb24gJiYgZmllbGRWYWxpZGF0aW9uLiRkaXJ0eSkgewogICAgICAgIHJldHVybiBGdW5jdGlvbnMuZ2V0Rm9ybUZpZWxkRXJyb3JNZXNzYWdlKGZpZWxkVmFsaWRhdGlvbik7CiAgICAgIH0KICAgIH0sCgogICAgZ2V0VXNhZ2VCeUlkKCkgewogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldFVzYWdlQnlJZCh0aGlzLiRyb3V0ZS5wYXJhbXMudXNhZ2VJRCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ2dldFVzYWdlQnlJZCcsIHJlc3BvbnNlKTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICBsZXQgdXNhZ2UgPSByZXNwb25zZS5kYXRhLnVzYWdlOwogICAgICAgICAgbGV0IGFzc2V0dXVpZHMgPSBbXTsKICAgICAgICAgIGFzc2V0dXVpZHMucHVzaCh1c2FnZS5hc3NldFVVSUQpOwogICAgICAgICAgdGhpcy51c2FnZXMuY3JlYXRlZERhdGUgPSBtb21lbnQudXRjKHVzYWdlLmNyZWF0ZWRBdCkubG9jYWwoKS5mb3JtYXQoIkREIE1NTSBZWVlZIGhoOm1tIGEiKTsKCiAgICAgICAgICBpZiAodXNhZ2UuY2F0ZWdvcnkgIT09IG51bGwpIHsKICAgICAgICAgICAgdGhpcy5wcmltYXJ5VXNhZ2VVbml0ID0gdXNhZ2UucHJpbWFyeVVzYWdlVW5pdDsKICAgICAgICAgICAgdGhpcy5zZWNvbmRhcnlVc2FnZVVuaXQgPSB1c2FnZS5zZWNvbmRhcnlVc2FnZVVuaXQ7CiAgICAgICAgICAgIHRoaXMudXNhZ2VzLmFzc2V0TmFtZSA9IHVzYWdlLmFzc2V0TmFtZTsKICAgICAgICAgICAgdGhpcy5maWVsZENhdGVnb3J5TGFiZWwgPSB0aGlzLiR0aXRsZV9jYXNlKHVzYWdlLmNhdGVnb3J5KTsKICAgICAgICAgICAgdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlTGF0ID0gdXNhZ2UucHJpbWFyeVVzYWdlTGF0OwogICAgICAgICAgICB0aGlzLnVzYWdlcy5wcmltYXJ5VXNhZ2VMbmcgPSB1c2FnZS5wcmltYXJ5VXNhZ2VMbmc7CiAgICAgICAgICAgIHRoaXMudXNhZ2VzLnNlY29uZGFyeVVzYWdlTGF0ID0gdXNhZ2Uuc2Vjb25kYXJ5VXNhZ2VMYXQ7CiAgICAgICAgICAgIHRoaXMudXNhZ2VzLnNlY29uZGFyeVVzYWdlTG5nID0gdXNhZ2Uuc2Vjb25kYXJ5VXNhZ2VMbmc7CiAgICAgICAgICAgIHVzYWdlLnN0YXJ0RGF0ZSA9IHVzYWdlLnN0YXJ0VGltZSA/IG1vbWVudC51dGModXNhZ2Uuc3RhcnRUaW1lKS5sb2NhbCgpLmZvcm1hdCgiREQgTU1NIFlZWVkiKSA6ICIiOwogICAgICAgICAgICB1c2FnZS5lbmREYXRlID0gdXNhZ2Uuc3RvcFRpbWUgPyBtb21lbnQudXRjKHVzYWdlLnN0b3BUaW1lKS5sb2NhbCgpLmZvcm1hdCgiREQgTU1NIFlZWVkiKSA6ICIiOwogICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IHVzYWdlLnN0YXJ0VGltZTsKICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gdXNhZ2Uuc3RvcFRpbWU7CiAgICAgICAgICAgIHVzYWdlLnN0YXJ0VGltZSA9IHVzYWdlLnN0YXJ0VGltZSA/IG1vbWVudC51dGModXNhZ2Uuc3RhcnRUaW1lKS5sb2NhbCgpLmZvcm1hdCgiaGg6bW0iKSA6ICIiOwogICAgICAgICAgICB1c2FnZS5zdG9wVGltZSA9IHVzYWdlLnN0b3BUaW1lID8gbW9tZW50LnV0Yyh1c2FnZS5zdG9wVGltZSkubG9jYWwoKS5mb3JtYXQoImhoOm1tIikgOiAiIjsKICAgICAgICAgICAgdGhpcy5kZWZhdWx0X2xvY2F0aW9uLnB1c2goewogICAgICAgICAgICAgIGxuZzogdXNhZ2UucHJpbWFyeVVzYWdlTG5nID8gdXNhZ2UucHJpbWFyeVVzYWdlTG5nIDogdXNhZ2Uuc2Vjb25kYXJ5VXNhZ2VMbmcgPyB1c2FnZS5zZWNvbmRhcnlVc2FnZUxuZyA6ICIiLAogICAgICAgICAgICAgIGxhdDogdXNhZ2UucHJpbWFyeVVzYWdlTGF0ID8gdXNhZ2UucHJpbWFyeVVzYWdlTGF0IDogdXNhZ2Uuc2Vjb25kYXJ5VXNhZ2VMYXQgPyB1c2FnZS5zZWNvbmRhcnlVc2FnZUxhdCA6ICIiLAogICAgICAgICAgICAgIHR5cGU6ICJvZmZpY2UiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB1c2FnZS5sb2NhdGlvbiA9ICIiOwoKICAgICAgICAgICAgaWYgKHVzYWdlLnByaW1hcnlVc2FnZUxuZykgewogICAgICAgICAgICAgIHVzYWdlLnR5cGUgPSAicHJpbWFyeSI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHVzYWdlLnNlY29uZGFyeVVzYWdlTG5nKSB7CiAgICAgICAgICAgICAgICB1c2FnZS50eXBlID0gInNlY29uZGFyeSI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgQXNzZXRNYW5hZ2VtZW50U2VydmljZS5nZXROYW1lQW5kVHlwZU9mQXNzZXRzQnlVVUlEUyh7CiAgICAgICAgICAgIHV1aWRzOiBhc3NldHV1aWRzCiAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlMSA9PiB7CiAgICAgICAgICAgIHRoaXMuYXNzZXRzID0gcmVzcG9uc2UxLmRhdGEuYXNzZXRzW2Fzc2V0dXVpZHNdOwogICAgICAgICAgICB0aGlzLmFzc2V0TmFtZUxhYmVsID0gcmVzcG9uc2UxLmRhdGEuYXNzZXRzW3VzYWdlLmFzc2V0VVVJRF0ubmFtZTsKICAgICAgICAgICAgdGhpcy5hc3NldENhdGVnb3J5TGFiZWwgPSByZXNwb25zZTEuZGF0YS5hc3NldHNbdXNhZ2UuYXNzZXRVVUlEXS50eXBlOwogICAgICAgICAgICB0aGlzLnVzYWdlcy5hc3NldE51bWJlciA9IHJlc3BvbnNlMS5kYXRhLmFzc2V0c1t1c2FnZS5hc3NldFVVSURdLmFzc2V0TnVtYmVyOwogICAgICAgICAgICB0aGlzLnVzYWdlcy5wcmltYXJ5VXNhZ2VVbml0ID0gcmVzcG9uc2UxLmRhdGEuYXNzZXRzW3VzYWdlLmFzc2V0VVVJRF0ucHJpbWFyeVVzYWdlVW5pdDsKICAgICAgICAgICAgdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VVbml0ID0gcmVzcG9uc2UxLmRhdGEuYXNzZXRzW3VzYWdlLmFzc2V0VVVJRF0uc2Vjb25kYXJ5VXNhZ2VVbml0OwogICAgICAgICAgICB0aGlzLnVzYWdlcyA9IHsgLi4udXNhZ2UKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5pbmRleEtleSsrOwoKICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgIT0gImNyZWF0ZS11c2FnZSIgJiYgdGhpcy5kZWZhdWx0X2xvY2F0aW9uLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICB0aGlzLmdldERlZmF1bHRMb2NhdGlvbk9iaih0aGlzLmRlZmF1bHRfbG9jYXRpb25bMF0ubG5nLCB0aGlzLmRlZmF1bHRfbG9jYXRpb25bMF0ubGF0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5yZXNwb25zZS5tZXNzYWdlLCAiZXJyb3IiKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLnJlc3BvbnNlLm1lc3NhZ2UsICJlcnJvciIpOwogICAgICB9KTsKICAgIH0sCgogICAgc2hvd1RvYXN0KG1lc3NhZ2UsIHR5cGUpIHsKICAgICAgdGhpcy50b2FzdE1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICB0aGlzLnRvYXN0VHlwZSA9IHR5cGU7CiAgICAgIHRoaXMudG9hc3RGbGFnKys7CiAgICB9CgogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGdldFNvdXJjZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3VnZ2VzdGlvblNvdXJjZTsKICAgIH0sCgogICAgbWluRW5kRGF0ZSgpIHsKICAgICAgbGV0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7CgogICAgICBpZiAodGhpcy5zdGFydERhdGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5zdGFydERhdGU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHN0YXJ0RGF0ZTsKICAgICAgfQogICAgfSwKCiAgICBtYXhTdGFydERhdGUoKSB7CiAgICAgIGlmICh0aGlzLmVuZERhdGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5lbmREYXRlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgRGF0ZShgJHtuZXcgRGF0ZSgpLmdldE1vbnRoKCl9LzEvJHtuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyICsgMTAwfWApOwogICAgICB9CiAgICB9CgogIH0sCiAgd2F0Y2g6IHsKICAgIHN1Z2dlc3Rpb25Tb3VyY2U6IHsKICAgICAgZGVlcDogdHJ1ZSwKCiAgICAgIGhhbmRsZXIodiwgb3YpIHt9CgogICAgfQogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKTsKICAgIC8qIEZldGNoZXMgRGVmYXVsdCBMb2NhdGlvbiAqLwoKICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09ICJjcmVhdGUtdXNhZ2UiKSB7CiAgICAgIHRoaXMuZGVmYXVsdExvY2F0aW9uKCk7CiAgICB9CgogICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT09ICJ1c2FnZS1kZXRhaWwiKSB7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMudHlwZSA9PSAidmlldyIpIHsKICAgICAgICB0aGlzLnN0YXRlRGlzYWJsZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIHRoaXMuZm9ybVRpdGxlID0gYCR7dGhpcy4kdGl0bGVfY2FzZSh0aGlzLiRyb3V0ZS5wYXJhbXMudHlwZSl9YDsKICAgICAgdGhpcy5nZXRVc2FnZUJ5SWQoKTsKICAgIH0KCiAgICB0aGlzLmdldEFsbENhdGVnb3JpZXModGhpcy5jdXJyZW50VXNlckRldGFpbHMpOwogICAgdGhpcy5nZXRBbGxBc3NldCh0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyk7CiAgfSwKCiAgdmFsaWRhdGlvbnM6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGFzc2V0Q2F0ZWdvcnlMYWJlbDogewogICAgICAgIHJlcXVpcmVkCiAgICAgIH0sCiAgICAgIGFzc2V0TmFtZUxhYmVsOiB7CiAgICAgICAgcmVxdWlyZWQKICAgICAgfSwKICAgICAgZmllbGRDYXRlZ29yeUxhYmVsOiB7CiAgICAgICAgcmVxdWlyZWQKICAgICAgfSwKICAgICAgc3RhcnREYXRlOiB7CiAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkSWYoKCkgPT4gewogICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRDYXRlZ29yeUxhYmVsLnRvTG93ZXJDYXNlKCkgPT0gInRyaXAiID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgIH0pCiAgICAgIH0sCiAgICAgIGVuZERhdGU6IHsKICAgICAgICByZXF1aXJlZDogcmVxdWlyZWRJZigoKSA9PiB7CiAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZENhdGVnb3J5TGFiZWwudG9Mb3dlckNhc2UoKSA9PSAidHJpcCIgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfSkKICAgICAgfSwKICAgICAgdXNhZ2VzOiB7CiAgICAgICAgcHJpbWFyeVVzYWdlVmFsdWU6IHsKICAgICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZElmKCgpID0+IHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNhZ2VzLnNlY29uZGFyeVVzYWdlVmFsdWUgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICB9KSwKICAgICAgICAgIG1pblZhbHVlOiBtaW5WYWx1ZSgwKQogICAgICAgIH0sCiAgICAgICAgc2Vjb25kYXJ5VXNhZ2VWYWx1ZTogewogICAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkSWYoKCkgPT4gewogICAgICAgICAgICByZXR1cm4gdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlVmFsdWUgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICB9KSwKICAgICAgICAgIG1pblZhbHVlOiBtaW5WYWx1ZSgwKQogICAgICAgIH0sCiAgICAgICAgbG9jYXRpb246IHsKICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgfSwKICAgICAgICBkZXNjcmlwdGlvbjogewogICAgICAgICAgcmVxdWlyZWQsCiAgICAgICAgICBtYXhMZW5ndGg6IG1heExlbmd0aCg1MDApCiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0KfTs="},null]}