{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/manage-inspection-templates/components/TemplateAssignment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/manage-inspection-templates/components/TemplateAssignment.vue","mtime":1661968702444},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/babel.config.js","mtime":1661968702388},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":1662622637719},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1662622639723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEFzc2V0UGVyc29ubmVsU2VydmljZSBmcm9tICIuLi8uLi8uLi9zZXJ2aWNlcy9Bc3NldFBlcnNvbm5lbFNlcnZpY2UiOwppbXBvcnQgSW5zcGVjdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvSW5zcGVjdGlvblNlcnZpY2UiOwppbXBvcnQgeyBGdW5jdGlvbnMgfSBmcm9tICJAL3NoYXJlZC9GdW5jdGlvbnMiOwppbXBvcnQgeyByZXF1aXJlZCwgbWluVmFsdWUsIHJlcXVpcmVkSWYgfSBmcm9tICJ2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCBsb2FkZXIgZnJvbSAiQC9jb21wb25lbnRzL0xvYWRlci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRlbXBsYXRlQXNzaWdubWVudCIsCiAgY29tcG9uZW50czogewogICAgbG9hZGVyCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRlckZsYWc6IGZhbHNlLAogICAgICBuYW1lOiAiIiwKICAgICAgY2hlY2tib3g6IHRydWUsCiAgICAgIHNob3dUZW1wUG9wVXA6IGZhbHNlLAogICAgICByZW1pbmRlckluZGV4OiAwLAogICAgICB1c2VySWQ6IDAsCiAgICAgIHVzZXJHcm91cElkOiAwLAogICAgICBhc3NldElkOiAwLAogICAgICBhc3NldEdyb3VwSWQ6IDAsCiAgICAgIGR1cmF0aW9uVHlwZUlEOiAwLAogICAgICBhc3NpZ25Bc3NldElkOiAwLAogICAgICBzZWxlY3RlZFR5cGU6ICJzY2hlZHVsZSIsCiAgICAgIGRlYWRsaW5lOiAiIiwKICAgICAgdGVtcGxhdGVVVUlEOiAiIiwKICAgICAgYWRob2NkYXRlOiAiIiwKICAgICAgYWRob2N0aW1lOiAiIiwKICAgICAgc3RhcnREYXRlOiAiIiwKICAgICAgc3RhcnRUaW1lOiAiIiwKICAgICAgZW5kRGF0ZTogIiIsCiAgICAgIGVuZFRpbWU6ICIiLAogICAgICB3ZWVrRGF5OiAiIiwKICAgICAgbW9udGhseURhdGU6ICIiLAogICAgICBkYWlseURlYWRMaW5lVGltZTogIiIsCiAgICAgIGN1c3RvbVZhbHVlOiAiMSIsCiAgICAgIG9jY3VyYW5jZXNWYWx1ZTogIiIsCiAgICAgIGN1c3RvbVdlZWs6ICJ3ZWVrIiwKICAgICAgY3VzdG9tRGF0ZTogdHJ1ZSwKICAgICAgb2NjdXJhbmNlc0FjdGl2ZTogdHJ1ZSwKICAgICAgY3VzdG9tV2Vla0RheTogW10sCiAgICAgIGN1c3RvbU1vbnRobHk6ICIiLAogICAgICBDdXN0b21Nb250aGx5RGF0ZTogIiIsCiAgICAgIGFzc2lnbmVkQXNzZXRVdWlkOiAiIiwKICAgICAgYXNzaWduZWRBc3NldHNPcHRpb25zOiBbXSwKICAgICAgYXNzaWduZWRBc3NldDogIiIsCiAgICAgIG5ldmVyOiAiIiwKICAgICAgb246ICIiLAogICAgICBhZnRlcjogIiIsCiAgICAgIGN1cnJlbnRVc2VyRGV0YWlsczogIiIsCiAgICAgIGluZGV4UmVtaW5kZXI6IDAsCiAgICAgIGN1c3RvbU9wdGlvbnM6IFt7CiAgICAgICAgbmFtZTogIkRheSIsCiAgICAgICAgdmFsdWU6ICJkYXkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiV2VlayIsCiAgICAgICAgdmFsdWU6ICJ3ZWVrIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIk1vbnRoIiwKICAgICAgICB2YWx1ZTogIm1vbnRoIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIlllYXIiLAogICAgICAgIHZhbHVlOiAieWVhciIKICAgICAgfV0sCiAgICAgIGN1c3RvbU9wdGlvbnNNb250aGx5OiBbewogICAgICAgIG5hbWU6ICIxIiwKICAgICAgICB2YWx1ZTogIjEiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMiIsCiAgICAgICAgdmFsdWU6ICIyIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIjMiLAogICAgICAgIHZhbHVlOiAiMyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICI0IiwKICAgICAgICB2YWx1ZTogIjQiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiNSIsCiAgICAgICAgdmFsdWU6ICI1IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIjYiLAogICAgICAgIHZhbHVlOiAiNiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICI3IiwKICAgICAgICB2YWx1ZTogIjciCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiOCIsCiAgICAgICAgdmFsdWU6ICI4IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIjkiLAogICAgICAgIHZhbHVlOiAiOSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxMCIsCiAgICAgICAgdmFsdWU6ICIxMCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxMSIsCiAgICAgICAgdmFsdWU6ICIxMSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxMiIsCiAgICAgICAgdmFsdWU6ICIxMiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxMyIsCiAgICAgICAgdmFsdWU6ICIxMyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxNCIsCiAgICAgICAgdmFsdWU6ICIxNCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxNSIsCiAgICAgICAgdmFsdWU6ICIxNSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxNiIsCiAgICAgICAgdmFsdWU6ICIxNiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxNyIsCiAgICAgICAgdmFsdWU6ICIxNyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxOCIsCiAgICAgICAgdmFsdWU6ICIxOCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIxOSIsCiAgICAgICAgdmFsdWU6ICIxOSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyMCIsCiAgICAgICAgdmFsdWU6ICIyMCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyMSIsCiAgICAgICAgdmFsdWU6ICIyMSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyMiIsCiAgICAgICAgdmFsdWU6ICIyMiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyMyIsCiAgICAgICAgdmFsdWU6ICIyMyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyNCIsCiAgICAgICAgdmFsdWU6ICIyNCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyNSIsCiAgICAgICAgdmFsdWU6ICIyNSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyNiIsCiAgICAgICAgdmFsdWU6ICIyNiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyNyIsCiAgICAgICAgdmFsdWU6ICIyNyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyOCIsCiAgICAgICAgdmFsdWU6ICIyOCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIyOSIsCiAgICAgICAgdmFsdWU6ICIyOSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIzMCIsCiAgICAgICAgdmFsdWU6ICIzMCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIzMSIsCiAgICAgICAgdmFsdWU6ICIzMSIKICAgICAgfV0sCiAgICAgIHNjaGVkdWxlOiBbewogICAgICAgIG5hbWU6ICJBZC1ob2MiLAogICAgICAgIHZhbHVlOiAiYWQtaG9jIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIkRhaWx5IiwKICAgICAgICB2YWx1ZTogImRhaWx5IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIldlZWtseSIsCiAgICAgICAgdmFsdWU6ICJ3ZWVrbHkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiTW9udGhseSIsCiAgICAgICAgdmFsdWU6ICJtb250aGx5IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIkN1c3RvbSIsCiAgICAgICAgdmFsdWU6ICJjdXN0b20iCiAgICAgIH1dLAogICAgICB3ZWVrbHlEYXlzOiBbewogICAgICAgIG5hbWU6ICJTdW5kYXkiLAogICAgICAgIHZhbHVlOiAiU1VOREFZIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIk1vbmRheSIsCiAgICAgICAgdmFsdWU6ICJNT05EQVkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiVHVlc2RheSIsCiAgICAgICAgdmFsdWU6ICJUVUVTREFZIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIldlZG5lc2RheSIsCiAgICAgICAgdmFsdWU6ICJXRURORVNEQVkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiVGh1cnNkYXkiLAogICAgICAgIHZhbHVlOiAiVEhVUlNEQVkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiRnJpZGF5IiwKICAgICAgICB2YWx1ZTogIkZSSURBWSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJTYXR1cmRheSIsCiAgICAgICAgdmFsdWU6ICJTQVRVUkRBWSIKICAgICAgfV0sCiAgICAgIHNlbGVjdGVkU2NoZWR1bGU6ICIiLAogICAgICByZW1pbmRlckFycmF5OiBbewogICAgICAgIHJlbWluZGVyOiBbXSwKICAgICAgICByZW1pbmRlck9wdGlvbnM6IFt7CiAgICAgICAgICBuYW1lOiAiRW1haWwiLAogICAgICAgICAgdmFsdWU6ICJlbWFpbCIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiU01TIiwKICAgICAgICAgIHZhbHVlOiAic21zIgogICAgICAgIH0sIHsKICAgICAgICAgIG5hbWU6ICJOb3RpZmljYXRpb24iLAogICAgICAgICAgdmFsdWU6ICJub3RpZmljYXRpb24iCiAgICAgICAgfV0sCiAgICAgICAgZHVyYXRpb25WYWx1ZTogIiIsCiAgICAgICAgZHVyYXRpb25UeXBlOiAiIiwKICAgICAgICBkdXJhdGlvblR5cGVPcHRpb25zOiBbewogICAgICAgICAgbmFtZTogIk1pbnV0ZXMiLAogICAgICAgICAgdmFsdWU6ICJtaW51dGVzIgogICAgICAgIH0sIHsKICAgICAgICAgIG5hbWU6ICJIb3VycyIsCiAgICAgICAgICB2YWx1ZTogImhvdXJzIgogICAgICAgIH0sIHsKICAgICAgICAgIG5hbWU6ICJEYXlzIiwKICAgICAgICAgIHZhbHVlOiAiZGF5cyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiV2Vla3MiLAogICAgICAgICAgdmFsdWU6ICJ3ZWVrcyIKICAgICAgICB9XQogICAgICB9XSwKICAgICAgYXNzaWduZWU6ICIiLAogICAgICBhc3NpZ25lZXM6IFt7CiAgICAgICAgbmFtZTogIlVzZXJzIiwKICAgICAgICB2YWx1ZTogInVzZXIiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiQXNzZXRzIiwKICAgICAgICB2YWx1ZTogImFzc2V0IgogICAgICB9XSwKICAgICAgYWxsVXNlcnM6IFtdLAogICAgICB1c2VyR3JvdXBzOiBbXSwKICAgICAgYXNzaWduZWRVc2VyR3JvdXA6ICIiLAogICAgICBhc3NpZ25Vc2VyczogW10sCiAgICAgIGFzc2lnbmVkVXNlcjogIiIsCiAgICAgIGFzc2V0R3JvdXBPcHRpb25zOiBbXSwKICAgICAgZ3JvdXBBc3NldE9wdGlvbnM6IFtdLAogICAgICBhc3NldEdyb3VwczogIiIsCiAgICAgIGFzc2V0TmFtZTogIiIsCiAgICAgIGVkaXRWYWx1ZWZsYWc6IGZhbHNlLAogICAgICBhc3NldE5hbWVVVUlEOiAiIiwKICAgICAgYXNzZXRHcm91cHNVVUlEOiAiIiwKICAgICAgYXNzaWduZWRVc2VyVVVJRDogIiIsCiAgICAgIGFzc2lnbmVkVXNlckdyb3VwVVVJRDogIiIsCiAgICAgIGFzc2V0QXNzaWduRmxhZzogdHJ1ZSwKICAgICAgYXNzaWduZWRBc3NldE5hbWU6ICIiLAogICAgICBhc3NldEFzc2lnbmVkVXNlcnM6IFtdCiAgICB9OwogIH0sCgogIHByb3BzOiB7CiAgICB0ZW1wT2JqOiB7fSwKICAgIGFzc2lnbmVkVGVtcGxhdGVPYmo6IHt9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRGb3JtRXJyb3JNZXNzYWdlKGZpZWxkVmFsaWRhdGlvbikgewogICAgICBpZiAoZmllbGRWYWxpZGF0aW9uLiRkaXJ0eSkgewogICAgICAgIHJldHVybiBGdW5jdGlvbnMuZ2V0Rm9ybUZpZWxkRXJyb3JNZXNzYWdlKGZpZWxkVmFsaWRhdGlvbik7CiAgICAgIH0KICAgIH0sCgogICAgY2xlYXJTZWxlY3RlZER1cmF0aW9uVHlwZShpbmRleCkgewogICAgICB0aGlzLnJlbWluZGVyQXJyYXlbaW5kZXhdLmR1cmF0aW9uVHlwZSA9ICIiOwogICAgICB0aGlzLmR1cmF0aW9uVHlwZUlEKys7CiAgICB9LAoKICAgIGdldFZhbGlkRGF0ZSgpIHsKICAgICAgbGV0IGN1cnJlbnREYXRlID0gbW9tZW50KCkuZm9ybWF0KCkuc3BsaXQoIlQiKTsKICAgICAgY3VycmVudERhdGUgPSBjdXJyZW50RGF0ZVswXTsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImFkLWhvYyIpIHsKICAgICAgICBpZiAobW9tZW50KHRoaXMuYWRob2NkYXRlKS5pc0JlZm9yZShjdXJyZW50RGF0ZSkpIHsKICAgICAgICAgIHRoaXMuYWRob2NkYXRlID0gIiI7CiAgICAgICAgICByZXR1cm4gdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBzZWxlY3QgY3VycmVudCBvciBmdXR1cmUgZGF0ZSIsICJlcnJvciIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSAhPSAiYWQtaG9jIiAmJiB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgIT0gImN1c3RvbSIpIHsKICAgICAgICBpZiAodGhpcy5zdGFydERhdGUgJiYgdGhpcy5lbmREYXRlICYmIChtb21lbnQodGhpcy5lbmREYXRlKS5pc0JlZm9yZShjdXJyZW50RGF0ZSkgfHwgbW9tZW50KHRoaXMuZW5kRGF0ZSkuaXNCZWZvcmUodGhpcy5zdGFydERhdGUpKSkgewogICAgICAgICAgdGhpcy5lbmREYXRlID0gIiI7CiAgICAgICAgICByZXR1cm4gdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlRoZSBFbmQgRGF0ZSBtdXN0IGJlIGFmdGVyIFN0YXJ0ICYgQ3VycmVudCBEYXRlIiwgImVycm9yIik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIG5ldmVyZnVuY05hbWUodmFsKSB7CiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgICB0aGlzLm9uID0gZmFsc2U7CiAgICAgICAgdGhpcy5hZnRlciA9IGZhbHNlOwogICAgICAgIHRoaXMuQ3VzdG9tTW9udGhseURhdGUgPSAiIjsKICAgICAgICB0aGlzLm9jY3VyYW5jZXNWYWx1ZSA9ICIiOwogICAgICB9CiAgICB9LAoKICAgIG9uZnVuY05hbWUodmFsKSB7CiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgICB0aGlzLm5ldmVyID0gZmFsc2U7CiAgICAgICAgdGhpcy5hZnRlciA9IGZhbHNlOwogICAgICAgIHRoaXMuY3VzdG9tRGF0ZSA9IGZhbHNlOwogICAgICAgIHRoaXMub2NjdXJhbmNlc0FjdGl2ZSA9IHRydWU7CiAgICAgICAgdGhpcy5vY2N1cmFuY2VzVmFsdWUgPSAiIjsKICAgICAgfQogICAgfSwKCiAgICBhZnRlcmZ1bmNOYW1lKHZhbCkgewogICAgICBpZiAodmFsID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5vbiA9IGZhbHNlOwogICAgICAgIHRoaXMubmV2ZXIgPSBmYWxzZTsKICAgICAgICB0aGlzLm9jY3VyYW5jZXNBY3RpdmUgPSBmYWxzZTsKICAgICAgICB0aGlzLmN1c3RvbURhdGUgPSB0cnVlOwogICAgICAgIHRoaXMub2NjdXJhbmNlc1ZhbHVlID0gIjEiOwogICAgICAgIHRoaXMuQ3VzdG9tTW9udGhseURhdGUgPSAiIjsKICAgICAgfQogICAgfSwKCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2xvc2UiKTsKICAgIH0sCgogICAgb25TZWxlY3RlZFNjaGVkdWxlKHZhbCkgewogICAgICBpZiAodmFsLnZhbHVlID09PSAiZGFpbHkiKSB7CiAgICAgICAgdGhpcy5kZWFkTGluZURhdGUgPSAiIjsKICAgICAgICB0aGlzLmFkaG9jdGltZSA9ICIiOwogICAgICAgIHRoaXMuYWRob2NkYXRlID0gIiI7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09PSAiYWQtaG9jIikgewogICAgICAgIHRoaXMuc3RhcnREYXRlID0gIiI7CiAgICAgICAgdGhpcy5lbmRUaW1lID0gIiI7CiAgICAgICAgdGhpcy5lbmREYXRlID0gIiI7CiAgICAgICAgdGhpcy5lbmRUaW1lID0gIiI7CiAgICAgICAgdGhpcy5kYWlseURlYWRMaW5lVGltZSA9ICIiOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PT0gIndlZWtseSIgfHwgdmFsLnZhbHVlID09PSAibW9udGhseSIpIHsKICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSA9ICIiOwogICAgICAgIHRoaXMuYWRob2N0aW1lID0gIiI7CiAgICAgICAgdGhpcy5hZGhvY2RhdGUgPSAiIjsKICAgICAgfQogICAgfSwKCiAgICBvblNlbGVjdGVkUmVtaW5kZXIoaW5kZXgxLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUucmVtaW5kZXIubGVuZ3RoID4gMCAmJiB0aGlzLiRyb3V0ZS5uYW1lICE9PSAiaW5zcGVjdGlvbiIpIHsKICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yZW1pbmRlckFycmF5Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgdGhpcy5yZW1pbmRlckFycmF5W2luZGV4MV0uZHVyYXRpb25UeXBlID0gImRheXMiOwogICAgICAgICAgdGhpcy5yZW1pbmRlckFycmF5W2luZGV4MV0uZHVyYXRpb25WYWx1ZSA9ICIxIjsKICAgICAgICAgIHRoaXMuZHVyYXRpb25UeXBlSUQrKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgY2hlY2tNaW5WYWx1ZShpbmRleCkgewogICAgICB0aGlzLiR2LnJlbWluZGVyQXJyYXkuJGVhY2hbaW5kZXhdLmR1cmF0aW9uVmFsdWUuJHRvdWNoKCk7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWREdXJhdGlvblRpbWUodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRBc3NpZ25lZSh2YWwpIHsKICAgICAgaWYgKHZhbC5kaXNwbGF5ID09PSAiQXNzZXRzIikgewogICAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gIiI7CiAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXJHcm91cCA9ICIiOwogICAgICAgIHRoaXMuY3JlYXRlZEZvclVzZXJOYW1lID0gbnVsbDsKICAgICAgICB0aGlzLnVzZXJJZCsrOwogICAgICAgIHRoaXMudXNlckdyb3VwSWQrKzsgLy90aGlzLmRpc2FibGVVc2VyID0gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAodmFsLmRpc3BsYXkgPT09ICJVc2VycyIpIHsKICAgICAgICB0aGlzLmFzc2V0TmFtZSA9ICIiOwogICAgICAgIHRoaXMuYXNzZXRHcm91cHMgPSAiIjsKICAgICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMgPSBbXTsKICAgICAgICB0aGlzLmFzc2V0R3JvdXBJZCsrOwogICAgICAgIHRoaXMuYXNzZXRJZCsrOwogICAgICAgIHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzID0gW107IC8vdGhpcy5kaXNhYmxlQXNzZXQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICBjbGVhclNlbGVjdGVkQXNzaWduZWUoKSB7CiAgICAgIHRoaXMuYXNzaWduZWUgPSAiIjsKICAgICAgdGhpcy5pbmRleFJlbWluZGVyKys7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRVc2VyR3JvdXAodmFsKSB7CiAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gIiI7CiAgICAgIHRoaXMuZWRpdFZhbHVlZmxhZyA9IHRydWU7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldCA9ICIiOwogICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IG51bGw7CiAgICAgIHRoaXMuYXNzaWduQXNzZXRJZCsrOwogICAgICB0aGlzLnVzZXJJZCsrOwogICAgfSwKCiAgICBjbGVhclNlbGVjdGVkVXNlckdyb3VwKCkgewogICAgICB0aGlzLmFzc2lnbmVkVXNlckdyb3VwID0gIiI7CiAgICAgIHRoaXMudXNlckdyb3VwSWQrKzsKICAgIH0sCgogICAgb25TZWxlY3RlZFVzZXIodmFsKSB7CiAgICAgIHRoaXMuY3JlYXRlZEZvclVzZXJOYW1lID0gdmFsLmRpc3BsYXk7CiAgICAgIHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgPSAiIjsKICAgICAgdGhpcy5lZGl0VmFsdWVmbGFnID0gdHJ1ZTsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0ID0gIiI7CiAgICAgIHRoaXMuYXNzaWduQXNzZXRJZCsrOwogICAgICB0aGlzLnVzZXJHcm91cElkKys7CiAgICB9LAoKICAgIGNsZWFyU2VsZWN0ZWRVc2VyKCkgewogICAgICB0aGlzLmFzc2lnbmVkVXNlciA9ICIiOwogICAgICB0aGlzLnVzZXJJZCsrOwogICAgfSwKCiAgICBvblNlbGVjdGVkQXNzZXRHcnAodmFsKSB7CiAgICAgIHRoaXMuYXNzZXROYW1lID0gIiI7CiAgICAgIHRoaXMuZWRpdFZhbHVlZmxhZyA9IHRydWU7CiAgICAgIHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzID0gW107CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPSAiIjsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0ID0gIiI7CiAgICAgIHRoaXMuYXNzZXRJZCsrOwogICAgfSwKCiAgICBjbGVhclNlbGVjdGVkQXNzZXRHcm91cCgpIHsKICAgICAgdGhpcy5hc3NldEdyb3VwcyA9ICIiOwogICAgICB0aGlzLmFzc2V0R3JvdXBJZCsrOwogICAgfSwKCiAgICBvblNlbGVjdGVkQXNzZXQodmFsKSB7CiAgICAgIHRoaXMuYXNzZXRHcm91cHMgPSAiIjsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0VXVpZCA9ICIiOwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSAiIjsKICAgICAgdGhpcy5lZGl0VmFsdWVmbGFnID0gdHJ1ZTsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgQXNzZXRQZXJzb25uZWxTZXJ2aWNlLmNoZWNrQXNzaWdubWVudE9mQW5Bc3NldEJ5VVVJRCh2YWwudmFsdWUpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmFzc2V0QXNzaWduRmxhZyA9IHJlcy5kYXRhLmFzc2lnbm1lbnQ7CiAgICAgICAgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMgPSByZXMuZGF0YS51c2VyRFRPUyAhPT0gbnVsbCA/IHJlcy5kYXRhLnVzZXJEVE9TIDogW107CiAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgICAgdGhpcy5hc3NldEdyb3VwSWQrKzsKICAgIH0sCgogICAgY2xlYXJTZWxlY3RlZEFzc2V0KCkgewogICAgICB0aGlzLmFzc2V0TmFtZSA9ICIiOwogICAgICB0aGlzLmFzc2V0QXNzaWduRmxhZyA9ICIiOwogICAgICB0aGlzLmFzc2V0QXNzaWduZWRVc2VycyA9ICIiOwogICAgICB0aGlzLmFzc2V0SWQrKzsKICAgIH0sCgogICAgb25TZWxlY3RlZEFzc2lnbkFzc2V0cyh2YWwpIHsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0TmFtZSA9IHZhbC5kaXNwbGF5OwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSB2YWwudmFsdWU7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPSAiIjsKICAgIH0sCgogICAgY2xlYXJTZWxlY3RlZEFzc2lnbkFzc2V0KCkgewogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSAiIjsKICAgICAgdGhpcy5hc3NpZ25Bc3NldElkKys7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRDdXN0b21XZWVrKHZhbCkgewogICAgICBpZiAodmFsLmRpc3BsYXkgPT0gImRheSIpIHsKICAgICAgICB0aGlzLmZyZXF1ZW5jeURheXMgPSAiIjsKICAgICAgICB0aGlzLmN1c3RvbVdlZWtEYXkgPSAiIjsKICAgICAgICB0aGlzLmN1c3RvbU1vbnRobHkgPSAiIjsKICAgICAgfSBlbHNlIGlmICh2YWwuZGlzcGxheSA9PSAid2VlayIpIHsKICAgICAgICB0aGlzLmN1c3RvbU1vbnRobHkgPSAiIjsKICAgICAgfSBlbHNlIGlmICh2YWwuZGlzcGxheSA9PSAibW9udGgiKSB7CiAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gIiI7CiAgICAgIH0gZWxzZSBpZiAodmFsLmRpc3BsYXkgPT0gInllYXIiKSB7CiAgICAgICAgdGhpcy5mcmVxdWVuY3lEYXlzID0gIiI7CiAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gIiI7CiAgICAgICAgdGhpcy5jdXN0b21Nb250aGx5ID0gIiI7CiAgICAgIH0KICAgIH0sCgogICAgb25TZWxlY3RlZEN1c3RvbU1vbnRobHkoKSB7fSwKCiAgICBzZWxlY3RUZW1wbGF0ZSgpIHsKICAgICAgdGhpcy4kZW1pdCgic2VsZWN0VGVtcCIpOwogICAgfSwKCiAgICBvblNlbGVjdGVkV2Vla0RheSh2YWwpIHsKICAgICAgY29uc29sZS5sb2codmFsKTsKICAgIH0sCgogICAgY3JlYXRlQWRkaXRpb25hbEluc3BlY3Rpb24oKSB7CiAgICAgIHRoaXMuJGVtaXQoImNyZWF0ZUluc3BlY3Rpb24iKTsKICAgIH0sCgogICAgYWRkKGluZGV4KSB7CiAgICAgIHRoaXMuJGVtaXQoImFkZFJlbWluZGVycyIsIGluZGV4KTsKICAgIH0sCgogICAgY2xpY2tSZW1vdmUoaW5kZXgpIHsKICAgICAgdGhpcy4kZW1pdCgicmVtb3ZlUmVtaW5kZXJzIiwgaW5kZXgpOwogICAgfSwKCiAgICBhZGRUZW1wbGF0ZSgpIHsKICAgICAgdGhpcy5zaG93VGVtcFBvcFVwID0gdHJ1ZTsKICAgIH0sCgogICAgdGVtcENsb3NlKCkgewogICAgICB0aGlzLnNob3dUZW1wUG9wVXAgPSBmYWxzZTsKICAgIH0sCgogICAgYWRkUmVtaW5kZXIoKSB7CiAgICAgIHRoaXMucmVtaW5kZXJBcnJheS5wdXNoKHsKICAgICAgICByZW1pbmRlcjogW10sCiAgICAgICAgcmVtaW5kZXJPcHRpb25zOiBbewogICAgICAgICAgbmFtZTogIkVtYWlsIiwKICAgICAgICAgIHZhbHVlOiAiZW1haWwiCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIlNNUyIsCiAgICAgICAgICB2YWx1ZTogInNtcyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiTm90aWZpY2F0aW9uIiwKICAgICAgICAgIHZhbHVlOiAibm90aWZpY2F0aW9uIgogICAgICAgIH1dLAogICAgICAgIGR1cmF0aW9uVmFsdWU6ICIiLAogICAgICAgIGR1cmF0aW9uVHlwZTogIiIsCiAgICAgICAgZHVyYXRpb25UeXBlT3B0aW9uczogW3sKICAgICAgICAgIG5hbWU6ICJNaW51dGVzIiwKICAgICAgICAgIHZhbHVlOiAibWludXRlcyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiSG91cnMiLAogICAgICAgICAgdmFsdWU6ICJob3VycyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiRGF5cyIsCiAgICAgICAgICB2YWx1ZTogImRheXMiCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIldlZWtzIiwKICAgICAgICAgIHZhbHVlOiAid2Vla3MiCiAgICAgICAgfV0KICAgICAgfSk7CiAgICB9LAoKICAgIHJlbW92ZVJlbWluZGVyKGluZGV4KSB7CiAgICAgIGlmIChpbmRleCAhPT0gMCkgewogICAgICAgIHRoaXMucmVtaW5kZXJBcnJheS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CiAgICB9LAoKICAgIFRlbXBsYXRlQXNzaWdubWVudCgpIHsKICAgICAgdGhpcy4kdi4kdG91Y2goKTsKCiAgICAgIGlmICh0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGVtaXQoInNob3dUb2FzdCIsICJQbGVhc2UgZmlsbCBhbGwgcmVxdWlyZWQgZmllbGRzLiEiLCAid2FybmluZyIpOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09PSAiY3VzdG9tIikgewogICAgICAgIGlmICh0aGlzLm5ldmVyID09PSAiIiAmJiB0aGlzLm9uID09PSAiIiAmJiB0aGlzLmFmdGVyID09PSAiIikgewogICAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBTZWxlY3QgRW5kIFNjaGVkdWxlIFRpbWUgaW4gY3VzdG9tIFJlY3VycmVuY2UiLCAiZXJyb3IiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmN1c3RvbVdlZWsgPT0gIndlZWsiICYmIHRoaXMuY3VzdG9tV2Vla0RheS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHRoaXMuJGVtaXQoInNob3dUb2FzdCIsICJQbGVhc2UgU2VsZWN0IFdlZWsgZGF5cyIsICJlcnJvciIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuY3VzdG9tV2VlayA9PSAibW9udGgiICYmIHRoaXMuY3VzdG9tTW9udGhseSA9PT0gIiIpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoInNob3dUb2FzdCIsICJQbGVhc2UgU2VsZWN0IE1vbnRobHkgZGF5IiwgImVycm9yIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NpZ25lZSA9PT0gInVzZXIiKSB7CiAgICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyID09PSAiIiAmJiB0aGlzLmFzc2lnbmVkVXNlckdyb3VwID09PSAiIikgewogICAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBTZWxlY3QgVXNlciBvciBVc2VyIEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIsICJlcnJvciIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFzc2lnbmVlID09PSAiYXNzZXQiKSB7CiAgICAgICAgaWYgKHRoaXMuYXNzZXROYW1lID09ICIiICYmIHRoaXMuYXNzZXRHcm91cHMgPT0gIiIpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoInNob3dUb2FzdCIsICJQbGVhc2UgU2VsZWN0IEFzc2V0IG9yIEFzc2V0IEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIsICJlcnJvciIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyICE9PSAiIiAmJiB0aGlzLmFzc2lnbmVkQXNzZXQgPT09ICIiKSB7CiAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBTZWxlY3QgQXNzZXQgdG8gYXNzaWduIFRlbXBsYXRlIiwgImVycm9yIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NpZ25lZFVzZXJHcm91cCAhPT0gIiIgJiYgdGhpcy5hc3NpZ25lZEFzc2V0ID09PSAiIikgewogICAgICAgIHRoaXMuJGVtaXQoInNob3dUb2FzdCIsICJQbGVhc2UgU2VsZWN0IEFzc2V0IHRvIGFzc2lnbiBUZW1wbGF0ZSIsICJlcnJvciIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYXNzZXROYW1lICE9PSAiIiAmJiB0aGlzLmFzc2V0QXNzaWduRmxhZyA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLiRlbWl0KCJzaG93VG9hc3QiLCAiUGxlYXNlIEFzc2lnbiBBc3NldCB0byB1c2VyIiwgImVycm9yIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zdGFydERhdGUgIT09ICIiKSB7CiAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQodGhpcy5zdGFydERhdGUpLmZvcm1hdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc3RhcnREYXRlID0gIiI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmVuZERhdGUgIT09ICIiKSB7CiAgICAgICAgdGhpcy5lbmREYXRlID0gbW9tZW50KHRoaXMuZW5kRGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lbmREYXRlID0gIiI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFkaG9jZGF0ZSAhPT0gIiIgJiYgdGhpcy5hZGhvY2RhdGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuZGVhZExpbmVEYXRlID0gbW9tZW50KHRoaXMuYWRob2NkYXRlKS5mb3JtYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSA9ICIiOwogICAgICB9CgogICAgICBpZiAodGhpcy5tb250aGx5RGF0ZSAhPT0gIiIgJiYgdGhpcy5tb250aGx5RGF0ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5tb250aGx5RGF0ZSA9IG1vbWVudCh0aGlzLm1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1vbnRobHlEYXRlID0gIiI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFzc2V0TmFtZSAhPT0gIiIgJiYgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gdGhpcy5hc3NldEFzc2lnbmVkVXNlcnNbMF0udXVpZDsKICAgICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLm5hbWU7CiAgICAgIH0gLy8odGhpcy5lbmREYXRlID0gbW9tZW50KHRoaXMuZW5kRGF0ZSkuZm9ybWF0KCkpLAogICAgICAvLwkodGhpcy5kZWFkTGluZURhdGUgPSBtb21lbnQodGhpcy5hZGhvY2RhdGUpLmZvcm1hdCgpKSwKICAgICAgLy8odGhpcy5tb250aGx5RGF0ZSA9IG1vbWVudCh0aGlzLm1vbnRobHlEYXRlKS5mb3JtYXQoKSk7CgoKICAgICAgbGV0IHJlcXVlc3RPYmogPSB7CiAgICAgICAgdGVtcGxhdGVOYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgdGVtcGxhdGVVVUlEOiB0aGlzLnRlbXBsYXRlVVVJRCwKICAgICAgICBjcmVhdGVkRm9yVXNlck5hbWU6IHRoaXMuY3JlYXRlZEZvclVzZXJOYW1lLAogICAgICAgIHN0YXJ0RGF0ZTogdGhpcy5zdGFydERhdGUsCiAgICAgICAgc3RhcnRUaW1lOiB0aGlzLnN0YXJ0VGltZSwKICAgICAgICBlbmREYXRlOiB0aGlzLmVuZERhdGUsCiAgICAgICAgZW5kVGltZTogdGhpcy5lbmRUaW1lLAogICAgICAgIGRlYWRMaW5lRGF0ZTogdGhpcy5kZWFkTGluZURhdGUsCiAgICAgICAgZGVhZExpbmVUaW1lOiB0aGlzLmFkaG9jdGltZSwKICAgICAgICAvLwltb250aGx5RGF0ZTogdGhpcy5tb250aGx5RGF0ZSwKICAgICAgICBmcmVxdWVuY3lUeXBlOiB0aGlzLnNlbGVjdGVkU2NoZWR1bGUsCiAgICAgICAgY3JlYXRlZEZvckFzc2V0VVVJRDogdGhpcy5hc3NldE5hbWUsCiAgICAgICAgY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEOiB0aGlzLmFzc2V0R3JvdXBzLAogICAgICAgIGRhaWx5RGVhZExpbmVUaW1lOiB0aGlzLmRhaWx5RGVhZExpbmVUaW1lLAogICAgICAgIGNyZWF0ZWRGb3JVc2VyVVVJRDogdGhpcy5hc3NpZ25lZFVzZXIsCiAgICAgICAgY3JlYXRlZEZvclVzZXJHcm91cFVVSUQ6IHRoaXMuYXNzaWduZWRVc2VyR3JvdXAsCiAgICAgICAgc2VsZWN0ZWRVc2VyQXNzZXRVVUlEOiB0aGlzLmFzc2lnbmVkQXNzZXQsCiAgICAgICAgc2VsZWN0ZWRVc2VyQXNzZXROYW1lOiB0aGlzLmFzc2lnbmVkQXNzZXROYW1lLAogICAgICAgIHJlcGVhdEV2ZXJ5VGltZTogdGhpcy5jdXN0b21WYWx1ZSwKICAgICAgICByZXBlYXRFdmVyeVR5cGU6IHRoaXMuY3VzdG9tV2VlaywKICAgICAgICByZXBlYXRNb250aERheTogdGhpcy5jdXN0b21Nb250aGx5CiAgICAgIH07CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJhZC1ob2MiKSB7CiAgICAgICAgcmVxdWVzdE9iai5pbnNwZWN0aW9uVHlwZSA9ICJhZC1ob2MiOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcXVlc3RPYmouaW5zcGVjdGlvblR5cGUgPSAic2NoZWR1bGVkIjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAid2Vla2x5IikgewogICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IHRoaXMud2Vla0RheTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiY3VzdG9tIiAmJiByZXF1ZXN0T2JqLnJlcGVhdEV2ZXJ5VHlwZSA9PSAid2VlayIpIHsKICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmN1c3RvbVdlZWtEYXkpOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IikgewogICAgICAgIHJlcXVlc3RPYmoubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5tb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImN1c3RvbSIpIHsKICAgICAgICAvLwlyZXF1ZXN0T2JqLm1vbnRobHlEYXRlID0gbW9tZW50KHRoaXMuQ3VzdG9tTW9udGhseURhdGUpLmZvcm1hdCgpOwogICAgICAgIGlmIChyZXF1ZXN0T2JqLnJlcGVhdEV2ZXJ5VHlwZSA9PT0gIndlZWsiKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmN1c3RvbVdlZWtEYXkpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMubmV2ZXIgPT0gdHJ1ZSkgewogICAgICAgICAgcmVxdWVzdE9iai5lbmRUeXBlID0gIm5ldmVyIjsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLm9uID09IHRydWUpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kVHlwZSA9ICJvbiI7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZERhdGUgPSBtb21lbnQodGhpcy5DdXN0b21Nb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5hZnRlciA9PSB0cnVlKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZFR5cGUgPSAiYWZ0ZXIiOwogICAgICAgICAgcmVxdWVzdE9iai5vY2N1cnJlbmNlID0gdGhpcy5vY2N1cmFuY2VzVmFsdWU7CiAgICAgICAgfQogICAgICB9IC8vIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImN1c3RvbSIpIHsKICAgICAgLy8gfQoKCiAgICAgIGxldCByZW1pbmRlckFycmF5ID0gW107CgogICAgICBmb3IgKGxldCByZW0gb2YgcmVtaW5kZXJBcnJheSkgewogICAgICAgIC8vZGVidWdnZXIKICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgcmVtaW5kZXI6IHJlbS5yZW1pbmRlciwKICAgICAgICAgIGR1cmF0aW9uVmFsdWU6IHJlbS5kdXJhdGlvblZhbHVlLAogICAgICAgICAgZHVyYXRpb25UeXBlOiByZW0uZHVyYXRpb25UeXBlCiAgICAgICAgfTsKICAgICAgICByZW1pbmRlckFycmF5LnB1c2gob2JqKTsKICAgICAgICByZXF1ZXN0T2JqLnJlbWluZGVyID0gSlNPTi5zdHJpbmdpZnkocmVtaW5kZXJBcnJheSk7CiAgICAgIH0gLy8gY29uc29sZS5sb2coJ3JlcXVlc3RPYmotb2xkJyxyZXF1ZXN0T2JqKQoKCiAgICAgIHRoaXMuJGVtaXQoInJlcXVlc3RPYmoiLCByZXF1ZXN0T2JqKTsKICAgIH0sCgogICAgZWRpdEFzc2lnbmVkVGVtcCgpIHsKICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID0gdGhpcy5hc3NpZ25lZFRlbXBsYXRlT2JqLmZyZXF1ZW5jeVR5cGU7CiAgICB9LAoKICAgIFVwZGF0ZVRlbXBsYXRlQXNzaWdubWVudCgpIHsKICAgICAgdGhpcy4kdi4kdG91Y2goKTsKCiAgICAgIGlmICh0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGVtaXQoInNob3dUb2FzdCIsICJQbGVhc2UgZmlsbCBhbGwgcmVxdWlyZWQgZmllbGRzLiEiLCAid2FybmluZyIpOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09PSAiY3VzdG9tIikgewogICAgICAgIGlmICh0aGlzLm5ldmVyID09PSAiIiAmJiB0aGlzLm9uID09PSAiIiAmJiB0aGlzLmFmdGVyID09PSAiIikgewogICAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBTZWxlY3QgRW5kIFNjaGVkdWxlIFRpbWUgaW4gY3VzdG9tIFJlY3VyZW5jZSIsICJlcnJvciIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuY3VzdG9tV2VlayA9PSAid2VlayIgJiYgdGhpcy5jdXN0b21XZWVrRGF5Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBTZWxlY3QgV2VlayBkYXlzIiwgImVycm9yIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5jdXN0b21XZWVrID09ICJtb250aCIgJiYgdGhpcy5jdXN0b21Nb250aGx5ID09PSAiIikgewogICAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBTZWxlY3QgTW9udGhseSBkYXkiLCAiZXJyb3IiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFzc2lnbmVlID09PSAidXNlciIpIHsKICAgICAgICBpZiAodGhpcy5hc3NpZ25lZFVzZXIgPT09ICIiICYmIHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgPT09ICIiKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCJzaG93VG9hc3QiLCAiUGxlYXNlIFNlbGVjdCBVc2VyIG9yIFVzZXIgR3JvdXAgdG8gYXNzaWduIFRlbXBsYXRlIiwgImVycm9yIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRoaXMuYXNzaWduZWUgPT09ICJhc3NldCIpIHsKICAgICAgICBpZiAodGhpcy5hc3NldE5hbWUgPT0gIiIgJiYgdGhpcy5hc3NldEdyb3VwcyA9PSAiIikgewogICAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBTZWxlY3QgQXNzZXQgb3IgQXNzZXQgR3JvdXAgdG8gYXNzaWduIFRlbXBsYXRlIiwgImVycm9yIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NpZ25lZFVzZXIgIT09ICIiICYmIHRoaXMuYXNzaWduZWRBc3NldCA9PT0gIiIgJiYgdGhpcy5hc3NpZ25lZSA9PT0gInVzZXIiKSB7CiAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBTZWxlY3QgQXNzZXQgdG8gYXNzaWduIFRlbXBsYXRlIiwgImVycm9yIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NpZ25lZFVzZXJHcm91cCAhPT0gIiIgJiYgdGhpcy5hc3NpZ25lZEFzc2V0ID09PSAiIikgewogICAgICAgIHRoaXMuJGVtaXQoInNob3dUb2FzdCIsICJQbGVhc2UgU2VsZWN0IEFzc2V0IHRvIGFzc2lnbiBUZW1wbGF0ZSIsICJlcnJvciIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYXNzZXROYW1lICE9PSAiIiAmJiB0aGlzLmFzc2V0QXNzaWduRmxhZyA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLiRlbWl0KCJzaG93VG9hc3QiLCAiUGxlYXNlIEFzc2lnbiBBc3NldCB0byB1c2VyIiwgImVycm9yIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vCXRoaXMuc3RhcnREYXRlID0gbW9tZW50KHRoaXMuc3RhcnREYXRlKS50b0lTT1N0cmluZygpLAogICAgICAvLwl0aGlzLmVuZERhdGUgPSBtb21lbnQodGhpcy5lbmREYXRlKS5mb3JtYXQoKSwKICAgICAgLy8JdGhpcy5kZWFkTGluZURhdGUgPSBtb21lbnQodGhpcy5hZGhvY2RhdGUpLmZvcm1hdCgpLAogICAgICAvLwl0aGlzLm1vbnRobHlEYXRlID0gbW9tZW50KHRoaXMubW9udGhseURhdGUpLmZvcm1hdCgpOwoKCiAgICAgIGxldCByZXF1ZXN0T2JqID0gewogICAgICAgIHRlbXBsYXRlTmFtZTogdGhpcy5uYW1lLAogICAgICAgIHRlbXBsYXRlVVVJRDogdGhpcy50ZW1wbGF0ZVVVSUQsCiAgICAgICAgY3JlYXRlZEZvclVzZXJOYW1lOiB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSwKICAgICAgICBkZWFkTGluZVRpbWU6IHRoaXMuYWRob2N0aW1lLAogICAgICAgIGZyZXF1ZW5jeVR5cGU6IHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSwKICAgICAgICBsYXN0VXBkYXRlZEJ5TmFtZTogdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5maXJzdE5hbWUgKyAiICIgKyB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLmxhc3ROYW1lLAogICAgICAgIGxhc3RVcGRhdGVkQnlVVUlEOiB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLnVzZXJpZCAvLwlzZWxlY3RlZFVzZXJBc3NldFVVSUQ6IHRoaXMuYXNzaWduZWRBc3NldFV1aWQgIT09ICcnID8gIHRoaXMuYXNzaWduZWRBc3NldDogdGhpcy5hc3NpZ25lZEFzc2V0VXVpZCwKICAgICAgICAvLwlzZWxlY3RlZFVzZXJBc3NldE5hbWU6IHRoaXMuYXNzaWduZWRBc3NldFV1aWQgIT09ICcnID8gdGhpcy5hc3NpZ25lZEFzc2V0TmFtZTogdGhpcy5hc3NpZ25lZEFzc2V0LAogICAgICAgIC8vIGNyZWF0ZWRGb3JBc3NldFVVSUQ6IHRoaXMuYXNzZXROYW1lLAogICAgICAgIC8vIGNyZWF0ZWRGb3JBc3NldEdyb3VwVVVJRDogdGhpcy5hc3NldEdyb3VwcywKICAgICAgICAvLyBjcmVhdGVkRm9yVXNlclVVSUQ6IHRoaXMuYXNzaWduZWRVc2VyLAogICAgICAgIC8vIGNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEOiB0aGlzLmFzc2lnbmVkVXNlckdyb3VwLAoKICAgICAgfTsKCiAgICAgIGlmICh0aGlzLmFzc2lnbmVkQXNzZXRVdWlkID09PSAiIiB8fCB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkID09PSBudWxsKSB7CiAgICAgICAgcmVxdWVzdE9iai5zZWxlY3RlZFVzZXJBc3NldFVVSUQgPSB0aGlzLmFzc2lnbmVkQXNzZXQ7CiAgICAgICAgcmVxdWVzdE9iai5zZWxlY3RlZFVzZXJBc3NldE5hbWUgPSB0aGlzLmFzc2lnbmVkQXNzZXROYW1lOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcXVlc3RPYmouc2VsZWN0ZWRVc2VyQXNzZXRVVUlEID0gdGhpcy5hc3NpZ25lZEFzc2V0VXVpZDsKICAgICAgICByZXF1ZXN0T2JqLnNlbGVjdGVkVXNlckFzc2V0TmFtZSA9IHRoaXMuYXNzaWduZWRBc3NldDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYXNzaWduZWUgPT09ICJhc3NldCIgJiYgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMubGVuZ3RoID4gMCkgewogICAgICAgIGlmICh0aGlzLmVkaXRWYWx1ZWZsYWcgPT09IHRydWUpIHsKICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gdGhpcy5hc3NldEFzc2lnbmVkVXNlcnNbMF0udXVpZDsKICAgICAgICAgIHJlcXVlc3RPYmouY3JlYXRlZEZvclVzZXJOYW1lID0gdGhpcy5hc3NldEFzc2lnbmVkVXNlcnNbMF0ubmFtZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXJVVUlEID0gdGhpcy5hc3NldEFzc2lnbmVkVXNlcnNbMF0udXVpZDsKICAgICAgICAgIHJlcXVlc3RPYmouY3JlYXRlZEZvclVzZXJOYW1lID0gdGhpcy5hc3NldEFzc2lnbmVkVXNlcnNbMF0ubmFtZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmVkaXRWYWx1ZWZsYWcgPT09IHRydWUpIHsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JBc3NldFVVSUQgPSB0aGlzLmFzc2V0TmFtZTsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JBc3NldEdyb3VwVVVJRCA9IHRoaXMuYXNzZXRHcm91cHM7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlclVVSUQgPSB0aGlzLmFzc2lnbmVkVXNlcjsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEID0gdGhpcy5hc3NpZ25lZFVzZXJHcm91cDsKICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRWYWx1ZWZsYWcgPT09IGZhbHNlKSB7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yQXNzZXRVVUlEID0gdGhpcy5hc3NldE5hbWVVVUlEOwogICAgICAgIHJlcXVlc3RPYmouY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEID0gdGhpcy5hc3NldEdyb3Vwc1VVSUQ7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlclVVSUQgPSB0aGlzLmFzc2lnbmVkVXNlclVVSUQ7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlckdyb3VwVVVJRCA9IHRoaXMuYXNzaWduZWRVc2VyR3JvdXBVVUlEOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJhZC1ob2MiKSB7CiAgICAgICAgcmVxdWVzdE9iai5pbnNwZWN0aW9uVHlwZSA9ICJhZC1ob2MiOwogICAgICAgIHJlcXVlc3RPYmouZGVhZExpbmVEYXRlID0gbW9tZW50KHRoaXMuYWRob2NkYXRlKS5mb3JtYXQoKSwgcmVxdWVzdE9iai5kZWFkTGluZVRpbWUgPSB0aGlzLmFkaG9jdGltZTsKICAgICAgICByZXF1ZXN0T2JqLmRhaWx5RGVhZExpbmVUaW1lID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmoubW9udGhseURhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouc3RhcnREYXRlID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLnN0YXJ0VGltZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5lbmREYXRlID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmVuZFRpbWUgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcXVlc3RPYmouaW5zcGVjdGlvblR5cGUgPSAic2NoZWR1bGVkIjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiZGFpbHkiKSB7CiAgICAgICAgcmVxdWVzdE9iai5kZWFkTGluZURhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZGVhZExpbmVUaW1lID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmoubW9udGhseURhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZGFpbHlEZWFkTGluZVRpbWUgPSB0aGlzLmRhaWx5RGVhZExpbmVUaW1lOwogICAgICAgIHJlcXVlc3RPYmouc3RhcnREYXRlID0gbW9tZW50KHRoaXMuc3RhcnREYXRlKS5mb3JtYXQoKSwgcmVxdWVzdE9iai5zdGFydFRpbWUgPSB0aGlzLnN0YXJ0VGltZTsKICAgICAgICByZXF1ZXN0T2JqLmVuZERhdGUgPSBtb21lbnQodGhpcy5lbmREYXRlKS5mb3JtYXQoKSwgcmVxdWVzdE9iai5lbmRUaW1lID0gdGhpcy5lbmRUaW1lOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJ3ZWVrbHkiKSB7CiAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gdGhpcy53ZWVrRGF5OwogICAgICAgIHJlcXVlc3RPYmouZGVhZExpbmVEYXRlID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmRlYWRMaW5lVGltZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5kYWlseURlYWRMaW5lVGltZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5zdGFydERhdGUgPSBtb21lbnQodGhpcy5zdGFydERhdGUpLmZvcm1hdCgpLCByZXF1ZXN0T2JqLnN0YXJ0VGltZSA9IHRoaXMuc3RhcnRUaW1lOwogICAgICAgIHJlcXVlc3RPYmouZW5kRGF0ZSA9IG1vbWVudCh0aGlzLmVuZERhdGUpLmZvcm1hdCgpLCByZXF1ZXN0T2JqLmVuZFRpbWUgPSB0aGlzLmVuZFRpbWU7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImN1c3RvbSIpIHsKICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSB0aGlzLmN1c3RvbVdlZWtEYXk7CiAgICAgICAgcmVxdWVzdE9iai5kZWFkTGluZURhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZGVhZExpbmVUaW1lID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAibW9udGhseSIpIHsKICAgICAgICByZXF1ZXN0T2JqLm1vbnRobHlEYXRlID0gbW9tZW50KHRoaXMubW9udGhseURhdGUpLmZvcm1hdCgpOwogICAgICAgIHJlcXVlc3RPYmouZGVhZExpbmVEYXRlID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmRlYWRMaW5lVGltZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5kYWlseURlYWRMaW5lVGltZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLnN0YXJ0RGF0ZSA9IG1vbWVudCh0aGlzLnN0YXJ0RGF0ZSkuZm9ybWF0KCksIHJlcXVlc3RPYmouc3RhcnRUaW1lID0gdGhpcy5zdGFydFRpbWU7CiAgICAgICAgcmVxdWVzdE9iai5lbmREYXRlID0gbW9tZW50KHRoaXMuZW5kRGF0ZSkuZm9ybWF0KCksIHJlcXVlc3RPYmouZW5kVGltZSA9IHRoaXMuZW5kVGltZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiY3VzdG9tIikgewogICAgICAgIHJlcXVlc3RPYmoubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5DdXN0b21Nb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgICAgcmVxdWVzdE9iai5kZWFkTGluZURhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZGVhZExpbmVUaW1lID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmRhaWx5RGVhZExpbmVUaW1lID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmoubW9udGhseURhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouc3RhcnREYXRlID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLnN0YXJ0VGltZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5lbmREYXRlID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmVuZFRpbWUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmoucmVwZWF0RXZlcnlUaW1lID0gdGhpcy5jdXN0b21WYWx1ZTsKICAgICAgICByZXF1ZXN0T2JqLnJlcGVhdEV2ZXJ5VHlwZSA9IHRoaXMuY3VzdG9tV2VlazsKCiAgICAgICAgaWYgKHRoaXMubmV2ZXIgPT0gdHJ1ZSkgewogICAgICAgICAgcmVxdWVzdE9iai5lbmRUeXBlID0gIm5ldmVyIjsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kRGF0ZSA9ICIiOwogICAgICAgICAgcmVxdWVzdE9iai5vY2N1cnJlbmNlID0gIiI7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5vbiA9PSB0cnVlKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZFR5cGUgPSAib24iOwogICAgICAgICAgcmVxdWVzdE9iai5lbmREYXRlID0gbW9tZW50KHRoaXMuQ3VzdG9tTW9udGhseURhdGUpLmZvcm1hdCgpOwogICAgICAgICAgcmVxdWVzdE9iai5vY2N1cnJlbmNlID0gIiI7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5hZnRlciA9PSB0cnVlKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZFR5cGUgPSAiYWZ0ZXIiOwogICAgICAgICAgcmVxdWVzdE9iai5vY2N1cnJlbmNlID0gdGhpcy5vY2N1cmFuY2VzVmFsdWU7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZERhdGUgPSAiIjsKICAgICAgICB9CgogICAgICAgIGlmIChyZXF1ZXN0T2JqLnJlcGVhdEV2ZXJ5VHlwZSA9PT0gIndlZWsiKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmN1c3RvbVdlZWtEYXkpOwogICAgICAgIH0gZWxzZSBpZiAocmVxdWVzdE9iai5yZXBlYXRFdmVyeVR5cGUgPT09ICJtb250aCIpIHsKICAgICAgICAgIHJlcXVlc3RPYmoucmVwZWF0TW9udGhEYXkgPSB0aGlzLmN1c3RvbU1vbnRobHksIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9ICIiOwogICAgICAgIH0gZWxzZSBpZiAocmVxdWVzdE9iai5yZXBlYXRFdmVyeVR5cGUgPT09ICJkYXkiIHx8IHJlcXVlc3RPYmoucmVwZWF0RXZlcnlUeXBlID09PSAieWVhciIpIHsKICAgICAgICAgIHJlcXVlc3RPYmoucmVwZWF0TW9udGhEYXkgPSAiIiwgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gIiI7CiAgICAgICAgfQogICAgICB9CgogICAgICBsZXQgcmVtaW5kZXJBcnJheSA9IFtdOwoKICAgICAgZm9yIChsZXQgcmVtIG9mIHJlbWluZGVyQXJyYXkpIHsKICAgICAgICAvL2RlYnVnZ2VyCiAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgIHJlbWluZGVyOiByZW0ucmVtaW5kZXIsCiAgICAgICAgICBkdXJhdGlvblZhbHVlOiByZW0uZHVyYXRpb25WYWx1ZSwKICAgICAgICAgIGR1cmF0aW9uVHlwZTogcmVtLmR1cmF0aW9uVHlwZQogICAgICAgIH07CiAgICAgICAgcmVtaW5kZXJBcnJheS5wdXNoKG9iaik7CiAgICAgICAgcmVxdWVzdE9iai5yZW1pbmRlciA9IEpTT04uc3RyaW5naWZ5KHJlbWluZGVyQXJyYXkpOwogICAgICB9IC8vCXJldHVybgoKCiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZUFzc2lnbmVkVGVtcGxhdGUiLCByZXF1ZXN0T2JqKTsKICAgIH0sCgogICAgZ2V0RXhpc3RpbmdJbnNwZWN0aW9uVGVtcGxhdGUodXVpZCwgdGVuYW50VVVJRCkgewogICAgICBsZXQgaW5zcGVjdGlvbkl0ZW0gPSBudWxsOwogICAgICBJbnNwZWN0aW9uU2VydmljZS5nZXRJbnNwZWN0aW9uVGVtcGxhdGVCeVVVSUQodXVpZCwgdGVuYW50VVVJRCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmdyb3VwQXNzZXRPcHRpb25zID0gcmVzcG9uc2UuZGF0YS5hc3NldEFuZEdyb3Vwc05hbWVSZXNwb25zZS5hc3NldERUT1M7CiAgICAgICAgICB0aGlzLmFzc2V0R3JvdXBPcHRpb25zID0gcmVzcG9uc2UuZGF0YS5hc3NldEFuZEdyb3Vwc05hbWVSZXNwb25zZS5hc3NldEdyb3VwRFRPUzsKICAgICAgICAgIHRoaXMudXNlckdyb3VwcyA9IHJlc3BvbnNlLmRhdGEudXNlckFuZEdyb3VwUmVzcG9uc2UudXNlckdyb3VwRFRPUzsKICAgICAgICAgIHRoaXMuYXNzaWduVXNlcnMgPSByZXNwb25zZS5kYXRhLnVzZXJBbmRHcm91cFJlc3BvbnNlLnVzZXJEVE9TOwoKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmluc3BlY3Rpb25UZW1wbGF0ZSAhPSBudWxsKSB7CiAgICAgICAgICAgIGluc3BlY3Rpb25JdGVtID0gcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uVGVtcGxhdGU7CiAgICAgICAgICAgIHRoaXMuaW5zcGVjdGlvblRlbXBsYXRlID0gcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uVGVtcGxhdGU7CiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVOYW1lID0gaW5zcGVjdGlvbkl0ZW0ubmFtZTsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID0gaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5VHlwZTsKICAgICAgICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0ID0gaW5zcGVjdGlvbkl0ZW0uc2VsZWN0ZWRVc2VyQXNzZXROYW1lOwogICAgICAgICAgICB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkID0gaW5zcGVjdGlvbkl0ZW0uc2VsZWN0ZWRVc2VyQXNzZXRVVUlEOwoKICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeVR5cGUgPT09ICJhZC1ob2MiKSB7CiAgICAgICAgICAgICAgdGhpcy5hZGhvY2RhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uZGVhZExpbmVEYXRlKS5mb3JtYXQoIkREIE1NTSBZWVlZIik7CiAgICAgICAgICAgICAgdGhpcy5hZGhvY3RpbWUgPSBpbnNwZWN0aW9uSXRlbS5kZWFkTGluZVRpbWU7CiAgICAgICAgICAgICAgdGhpcy5pbmRleFJlbWluZGVyKys7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlID09PSAiZGFpbHkiKSB7CiAgICAgICAgICAgICAgdGhpcy5kYWlseURlYWRMaW5lVGltZSA9IGluc3BlY3Rpb25JdGVtLmRhaWx5RGVhZExpbmVUaW1lOwogICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gbW9tZW50KGluc3BlY3Rpb25JdGVtLnN0YXJEYXRlKS5mb3JtYXQoIkREIE1NTSBZWVlZIik7CiAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBpbnNwZWN0aW9uSXRlbS5zdGFydFRpbWU7CiAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gbW9tZW50KGluc3BlY3Rpb25JdGVtLmVuZERhdGUpLmZvcm1hdCgiREQgTU1NIFlZWVkiKTsKICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSBpbnNwZWN0aW9uSXRlbS5lbmRUaW1lOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5VHlwZSA9PT0gIndlZWtseSIpIHsKICAgICAgICAgICAgICB0aGlzLndlZWtEYXkgPSBpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lEYXlzOwogICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gbW9tZW50KGluc3BlY3Rpb25JdGVtLnN0YXJEYXRlKS5mb3JtYXQoIkREIE1NTSBZWVlZIik7CiAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBpbnNwZWN0aW9uSXRlbS5zdGFydFRpbWU7CiAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gbW9tZW50KGluc3BlY3Rpb25JdGVtLmVuZERhdGUpLmZvcm1hdCgiREQgTU1NIFlZWVkiKTsKICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSBpbnNwZWN0aW9uSXRlbS5lbmRUaW1lOwogICAgICAgICAgICAgIHRoaXMuaW5kZXhSZW1pbmRlcisrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5VHlwZSA9PT0gIm1vbnRobHkiKSB7CiAgICAgICAgICAgICAgdGhpcy5tb250aGx5RGF0ZSA9IG1vbWVudChpbnNwZWN0aW9uSXRlbS5tb250aGx5RGF0ZSkuZm9ybWF0KCJERCBNTU0gWVlZWSIpOwogICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gbW9tZW50KGluc3BlY3Rpb25JdGVtLnN0YXJEYXRlKS5mb3JtYXQoIkREIE1NTSBZWVlZIik7CiAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBpbnNwZWN0aW9uSXRlbS5zdGFydFRpbWU7CiAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gbW9tZW50KGluc3BlY3Rpb25JdGVtLmVuZERhdGUpLmZvcm1hdCgiREQgTU1NIFlZWVkiKTsKICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSBpbnNwZWN0aW9uSXRlbS5lbmRUaW1lOwogICAgICAgICAgICAgIHRoaXMuaW5kZXhSZW1pbmRlcisrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5VHlwZSA9PT0gImN1c3RvbSIpIHsKICAgICAgICAgICAgICB0aGlzLmN1c3RvbVdlZWsgPSBpbnNwZWN0aW9uSXRlbS5yZXBlYXRFdmVyeVR5cGU7CiAgICAgICAgICAgICAgdGhpcy5jdXN0b21WYWx1ZSA9IGluc3BlY3Rpb25JdGVtLnJlcGVhdEV2ZXJ5VGltZTsKICAgICAgICAgICAgICB0aGlzLmN1c3RvbU1vbnRobHkgPSBpbnNwZWN0aW9uSXRlbS5yZXBlYXRNb250aERheTsKCiAgICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeURheXMgIT0gIiIpIHsKICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tV2Vla0RheSA9IEpTT04ucGFyc2UoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5RGF5cyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZW5kVHlwZSA9PT0gIm5ldmVyIikgewogICAgICAgICAgICAgICAgdGhpcy5uZXZlciA9IHRydWU7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnNwZWN0aW9uSXRlbS5lbmRUeXBlID09PSAib24iKSB7CiAgICAgICAgICAgICAgICB0aGlzLm9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuQ3VzdG9tTW9udGhseURhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uZW5kRGF0ZSkuZm9ybWF0KCJERCBNTU0gWVlZWSIpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5zcGVjdGlvbkl0ZW0uZW5kVHlwZSA9PT0gImFmdGVyIikgewogICAgICAgICAgICAgICAgdGhpcy5hZnRlciA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLm9jY3VyYW5jZXNWYWx1ZSA9IGluc3BlY3Rpb25JdGVtLm9jY3VycmVuY2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvclVzZXJVVUlEICE9PSAiIiAmJiBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yVXNlclVVSUQgIT09IG51bGwpIHsKICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVlID0gInVzZXIiOwoKICAgICAgICAgICAgICBpZiAodGhpcy5hc3NpZ25Vc2Vycy5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgICAgIGxldCB1c2VyID0gdGhpcy5hc3NpZ25Vc2Vycy5maW5kKHUgPT4gdS51dWlkID09PSBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yVXNlclVVSUQpOwoKICAgICAgICAgICAgICAgIGlmICh1c2VyICE9PSB1bmRlZmluZWQgJiYgdXNlciAhPT0gbnVsbCAmJiB1c2VyICE9PSB7fSkgewogICAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlciA9IHVzZXIubmFtZTsKICAgICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXJVVUlEID0gdXNlci51dWlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhpcy51c2VySWQrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEICE9PSAiIiAmJiBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yVXNlckdyb3VwVVVJRCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIGlmICh0aGlzLnVzZXJHcm91cHMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgICAgICBsZXQgZ3JvdXAgPSB0aGlzLnVzZXJHcm91cHMuZmluZChnID0+IGcudXVpZCA9PT0gaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvclVzZXJHcm91cFVVSUQpOwoKICAgICAgICAgICAgICAgIGlmIChncm91cCAhPT0gdW5kZWZpbmVkICYmIGdyb3VwICE9PSBudWxsICYmIGdyb3VwICE9PSB7fSkgewogICAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlckdyb3VwID0gZ3JvdXAubmFtZTsKICAgICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXJHcm91cFVVSUQgPSBncm91cC51dWlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZSA9ICJ1c2VyIjsKICAgICAgICAgICAgICB0aGlzLnVzZXJHcm91cElkKys7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5hc3NldFVVSUQgIT09ICIiICYmIGluc3BlY3Rpb25JdGVtLmFzc2V0VVVJRCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwQXNzZXRPcHRpb25zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGxldCBhc3NldCA9IHRoaXMuZ3JvdXBBc3NldE9wdGlvbnMuZmluZChhID0+IGEudXVpZCA9PT0gaW5zcGVjdGlvbkl0ZW0uYXNzZXRVVUlEKTsKCiAgICAgICAgICAgICAgICBpZiAoYXNzZXQgIT09IHVuZGVmaW5lZCAmJiBhc3NldCAhPT0gbnVsbCAmJiBhc3NldCAhPT0ge30pIHsKICAgICAgICAgICAgICAgICAgdGhpcy5hc3NldE5hbWUgPSBhc3NldC5uYW1lOwogICAgICAgICAgICAgICAgICB0aGlzLmFzc2V0TmFtZVVVSUQgPSBhc3NldC51dWlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZSA9ICJhc3NldCI7CgogICAgICAgICAgICAgIGlmICh0aGlzLmFzc2lnblVzZXJzLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICAgICAgbGV0IHVzZXIgPSB0aGlzLmFzc2lnblVzZXJzLmZpbmQodSA9PiB1LnV1aWQgPT09IGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyVVVJRCk7CgogICAgICAgICAgICAgICAgaWYgKHVzZXIgIT09IHVuZGVmaW5lZCAmJiB1c2VyICE9PSBudWxsICYmIHVzZXIgIT09IHt9KSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gdXNlci5uYW1lOwogICAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlclVVSUQgPSB1c2VyLnV1aWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLmFzc2V0SWQrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JBc3NldEdyb3VwVVVJRCAhPT0gIiIgJiYgaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuYXNzZXRHcm91cE9wdGlvbnMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgICAgICBsZXQgYXNzZXRHcm91cCA9IHRoaXMuYXNzZXRHcm91cE9wdGlvbnMuZmluZChhZyA9PiBhZy51dWlkID09PSBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yQXNzZXRHcm91cFVVSUQpOwoKICAgICAgICAgICAgICAgIGlmIChhc3NldEdyb3VwICE9PSB1bmRlZmluZWQgJiYgYXNzZXRHcm91cCAhPT0gbnVsbCAmJiBhc3NldEdyb3VwICE9PSB7fSkgewogICAgICAgICAgICAgICAgICB0aGlzLmFzc2V0R3JvdXBzID0gYXNzZXRHcm91cC5ncm91cE5hbWU7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRHcm91cHNVVUlEID0gYXNzZXRHcm91cC51dWlkOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWUgPSAiYXNzZXQiOwogICAgICAgICAgICAgICAgdGhpcy5hc3NldEdyb3VwSWQrKzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCByZW1pbmQgPSBKU09OLnBhcnNlKGluc3BlY3Rpb25JdGVtLnJlbWluZGVyKTsKCiAgICAgICAgICAgIGlmIChyZW1pbmQgIT09IG51bGwpIHsKICAgICAgICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXkgPSBbXTsKCiAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJlbWluZC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICAgICAgICAgIHJlbWluZGVyOiByZW1pbmRbaW5kZXhdLnJlbWluZGVyLAogICAgICAgICAgICAgICAgICBkdXJhdGlvblZhbHVlOiByZW1pbmRbaW5kZXhdLmR1cmF0aW9uVmFsdWUsCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uVHlwZTogcmVtaW5kW2luZGV4XS5kdXJhdGlvblR5cGUsCiAgICAgICAgICAgICAgICAgIHJlbWluZGVyT3B0aW9uczogW3sKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiRW1haWwiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiZW1haWwiCiAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiU01TIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInNtcyIKICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJOb3RpZmljYXRpb24iLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAibm90aWZpY2F0aW9uIgogICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgZHVyYXRpb25UeXBlT3B0aW9uczogW3sKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiTWludXRlcyIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJtaW51dGVzIgogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIkhvdXJzIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogImhvdXJzIgogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIkRheXMiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiZGF5cyIKICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJXZWVrcyIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ3ZWVrcyIKICAgICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXkucHVzaChvYmopOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5pbmRleFJlbWluZGVyKys7CiAgICAgICAgICAgIHRoaXMuZHVyYXRpb25UeXBlSUQrKzsKICAgICAgICAgICAgdGhpcy5yZW1pbmRlckluZGV4Kys7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKTsgLy8gdGhpcy5nZXRVc2VyR3JvdXBzKHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQpOwoKICAgIHRoaXMubmFtZSA9IHRoaXMudGVtcE9iai5uYW1lOwogICAgdGhpcy50ZW1wbGF0ZVVVSUQgPSB0aGlzLnRlbXBPYmoudXVpZDsKCiAgICBpZiAodGhpcy50ZW1wT2JqLmVkaXRGbGFnID09PSB0cnVlKSB7CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIHRoaXMuZ2V0RXhpc3RpbmdJbnNwZWN0aW9uVGVtcGxhdGUodGhpcy50ZW1wbGF0ZVVVSUQsIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5nZXRFeGlzdGluZ0luc3BlY3Rpb25UZW1wbGF0ZSgibm9uZSIsIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQpOwogICAgfQogIH0sCgogIHZhbGlkYXRpb25zOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiB7CiAgICAgICAgcmVxdWlyZWQKICAgICAgfSwKICAgICAgc2VsZWN0ZWRTY2hlZHVsZTogewogICAgICAgIHJlcXVpcmVkCiAgICAgIH0sCiAgICAgIHJlbWluZGVyQXJyYXk6IHsKICAgICAgICAkZWFjaDogewogICAgICAgICAgcmVtaW5kZXI6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBkdXJhdGlvblZhbHVlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkLAogICAgICAgICAgICBtaW5WYWx1ZTogbWluVmFsdWUoMSkKICAgICAgICAgIH0sCiAgICAgICAgICBkdXJhdGlvblR5cGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIC4uLnRoaXMuZ2V0QWRob2NWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmdldERhaWx5VmFsaWRhdGlvbiwKICAgICAgLi4udGhpcy5nZXRXZWVrbHlWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmdldE1vbnRobHlWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmN1c3RvbVZhbGlkYXRpb25zLAogICAgICAuLi50aGlzLmFzc2lnblZhbGlkYXRpb25zLAogICAgICAuLi50aGlzLmN1c3RvbU9uCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGdldEFkaG9jVmFsaWRhdGlvbigpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJhZC1ob2MiKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBhZGhvY2RhdGU6IHt9LAogICAgICAgICAgYWRob2N0aW1lOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBhZGhvY2RhdGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBhZGhvY3RpbWU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAoKICAgIGdldERhaWx5VmFsaWRhdGlvbigpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJkYWlseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGRhaWx5RGVhZExpbmVUaW1lOiB7fSwKICAgICAgICAgIHN0YXJ0RGF0ZToge30sCiAgICAgICAgICBzdGFydFRpbWU6IHt9LAogICAgICAgICAgZW5kRGF0ZToge30sCiAgICAgICAgICBlbmRUaW1lOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBkYWlseURlYWRMaW5lVGltZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIHN0YXJ0RGF0ZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIHN0YXJ0VGltZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIGVuZERhdGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBlbmRUaW1lOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfSwKCiAgICBnZXRXZWVrbHlWYWxpZGF0aW9uKCkgewogICAgICBsZXQgdmFsaWRhdGlvbnMgPSB7fTsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgIT0gIndlZWtseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIHdlZWtEYXk6IHt9LAogICAgICAgICAgc3RhcnREYXRlOiB7fSwKICAgICAgICAgIHN0YXJ0VGltZToge30sCiAgICAgICAgICBlbmREYXRlOiB7fSwKICAgICAgICAgIGVuZFRpbWU6IHt9CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIHdlZWtEYXk6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBzdGFydERhdGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBzdGFydFRpbWU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBlbmREYXRlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9LAogICAgICAgICAgZW5kVGltZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0sCgogICAgZ2V0TW9udGhseVZhbGlkYXRpb24oKSB7CiAgICAgIGxldCB2YWxpZGF0aW9ucyA9IHt9OwoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSAhPSAibW9udGhseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIG1vbnRobHlEYXRlOiB7fSwKICAgICAgICAgIHN0YXJ0RGF0ZToge30sCiAgICAgICAgICBzdGFydFRpbWU6IHt9LAogICAgICAgICAgZW5kRGF0ZToge30sCiAgICAgICAgICBlbmRUaW1lOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBtb250aGx5RGF0ZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIHN0YXJ0RGF0ZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIHN0YXJ0VGltZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIGVuZERhdGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBlbmRUaW1lOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfSwKCiAgICBjdXN0b21WYWxpZGF0aW9ucygpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJjdXN0b20iKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBjdXN0b21XZWVrOiB7fSwKICAgICAgICAgIGN1c3RvbVZhbHVlOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBjdXN0b21XZWVrOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9LAogICAgICAgICAgY3VzdG9tVmFsdWU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAoKICAgIGFzc2lnblZhbGlkYXRpb25zKCkgewogICAgICBsZXQgdmFsaWRhdGlvbnMgPSB7fTsKCiAgICAgIGlmICh0aGlzLmFzc2lnbmVlID09ICJ1c2VyIikgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgYXNzaWduZWU6IHt9LAogICAgICAgICAgYXNzZXRHcm91cHM6IHt9LAogICAgICAgICAgYXNzZXROYW1lOiB7fSwKICAgICAgICAgIGFzc2lnbmVkQXNzZXQ6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBhc3NpZ25lZFVzZXJHcm91cDogewogICAgICAgICAgICByZXF1aXJlZDogcmVxdWlyZWRJZigoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIH0sCiAgICAgICAgICBhc3NpZ25lZFVzZXI6IHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkSWYoKCkgPT4gewogICAgICAgICAgICAgIGlmICh0aGlzLmFzc2lnbmVkVXNlckdyb3VwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9IGVsc2UgaWYgKHRoaXMuYXNzaWduZWUgPT0gImFzc2V0IikgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgYXNzaWduZWU6IHt9LAogICAgICAgICAgYXNzaWduZWRVc2VyOiB7fSwKICAgICAgICAgIGFzc2lnbmVkVXNlckdyb3VwOiB7fSwKICAgICAgICAgIGFzc2lnbmVkQXNzZXQ6IHt9LAogICAgICAgICAgYXNzZXRHcm91cHM6IHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkSWYoKCkgPT4gewogICAgICAgICAgICAgIGlmICh0aGlzLmFzc2V0TmFtZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9LAogICAgICAgICAgYXNzZXROYW1lOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZElmKCgpID0+IHsKICAgICAgICAgICAgICBpZiAodGhpcy5hc3NldEdyb3VwcykgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGFzc2lnbmVlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9LAogICAgICAgICAgYXNzaWduZWRVc2VyR3JvdXA6IHt9LAogICAgICAgICAgYXNzaWduZWRVc2VyOiB7fSwKICAgICAgICAgIGFzc2lnbmVkQXNzZXQ6IHt9LAogICAgICAgICAgYXNzZXROYW1lOiB7fSwKICAgICAgICAgIGFzc2V0R3JvdXBzOiB7fQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0sCgogICAgY3VzdG9tT24oKSB7CiAgICAgIGxldCB2YWxpZGF0aW9ucyA9IHt9OwoKICAgICAgaWYgKHRoaXMub24gIT0gdHJ1ZSkgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgb246IHt9LAogICAgICAgICAgQ3VzdG9tTW9udGhseURhdGU6IHt9LAogICAgICAgICAgb2NjdXJhbmNlc1ZhbHVlOiB7CiAgICAgICAgICAgIG1pblZhbHVlOiBtaW5WYWx1ZSgxKQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBvbjogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIEN1c3RvbU1vbnRobHlEYXRlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9LAogICAgICAgICAgb2NjdXJhbmNlc1ZhbHVlOiB7fQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0KCiAgfQp9Ow=="},null]}