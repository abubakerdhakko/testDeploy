{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/components/G_InspectionTemplate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/components/G_InspectionTemplate.vue","mtime":1661968702404},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/babel.config.js","mtime":1661968702388},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEFzc2V0UGVyc29ubmVsU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9Bc3NldFBlcnNvbm5lbFNlcnZpY2UiOwppbXBvcnQgSW5zcGVjdGlvblNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvSW5zcGVjdGlvblNlcnZpY2UiOwppbXBvcnQgeyBGdW5jdGlvbnMgfSBmcm9tICJAL3NoYXJlZC9GdW5jdGlvbnMiOwppbXBvcnQgeyByZXF1aXJlZCwgbWluVmFsdWUgfSBmcm9tICJ2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMiOwppbXBvcnQgVGVtcGxhdGVJdGVtcyBmcm9tICIuLi92aWV3cy9jYWxlbmRhci9jb21wb25lbnRzL3RlbXBsYXRlSXRlbXMudnVlIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgbG9hZGVyIGZyb20gIkAvY29tcG9uZW50cy9Mb2FkZXIudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUZW1wbGF0ZUFzc2lnbm1lbnQiLAogIGNvbXBvbmVudHM6IHsKICAgIGxvYWRlciwKICAgIFRlbXBsYXRlSXRlbXMKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hlY2tPbmU6ICIiLAogICAgICBjaGVja1R3bzogIiIsCiAgICAgIG9uQ2hlY2tPbmU6ICJmYWxzZSIsCiAgICAgIG9uQ2hlY2tUd286ICJmYWxzZSIsCiAgICAgIGFzc2V0U2VsZWN0TmFtZTogIiIsCiAgICAgIHNlbGVjdGVkVGVtcGxhdGU6ICIiLAogICAgICB0ZW1wbGF0ZU5hbWU6ICIiLAogICAgICB0ZW1wbGF0ZU9wdGlvbnM6IFtdLAogICAgICBzZWxlY3RlZFRlbXBJdGVtczogW10sCiAgICAgIGxvYWRlckZsYWc6IGZhbHNlLAogICAgICBuYW1lOiAiIiwKICAgICAgY2hlY2tib3g6IHRydWUsCiAgICAgIHNob3dUZW1wUG9wVXA6IGZhbHNlLAogICAgICByZW1pbmRlckluZGV4OiAwLAogICAgICB1c2VySWQ6IDAsCiAgICAgIHVzZXJHcm91cElkOiAwLAogICAgICBhc3NldElkOiAwLAogICAgICBhc3NldEdyb3VwSWQ6IDAsCiAgICAgIGR1cmF0aW9uVHlwZUlEOiAwLAogICAgICBhc3NpZ25Bc3NldElkOiAwLAogICAgICBzZWxlY3RlZFR5cGU6ICJzY2hlZHVsZSIsCiAgICAgIGRlYWRsaW5lOiAiIiwKICAgICAgdGVtcGxhdGVVVUlEOiAiIiwKICAgICAgYWRob2NkYXRlOiAiIiwKICAgICAgYWRob2N0aW1lOiAiIiwKICAgICAgc3RhcnREYXRlOiAiIiwKICAgICAgc3RhcnRUaW1lOiAiIiwKICAgICAgZW5kRGF0ZTogIiIsCiAgICAgIGVuZFRpbWU6ICIiLAogICAgICB3ZWVrRGF5OiAiIiwKICAgICAgbW9udGhseURhdGU6ICIiLAogICAgICBkYWlseURlYWRMaW5lVGltZTogIiIsCiAgICAgIGN1c3RvbVZhbHVlOiAiMSIsCiAgICAgIG9jY3VyYW5jZXNWYWx1ZTogIiIsCiAgICAgIGN1c3RvbVdlZWs6ICJ3ZWVrIiwKICAgICAgY3VzdG9tRGF0ZTogdHJ1ZSwKICAgICAgb2NjdXJhbmNlc0FjdGl2ZTogdHJ1ZSwKICAgICAgY3VzdG9tV2Vla0RheTogW10sCiAgICAgIGN1c3RvbVllYXJNb250aDogW10sCiAgICAgIGN1c3RvbU1vbnRobHk6ICIiLAogICAgICB3ZWVrRGF5c1ZhbDogIiIsCiAgICAgIEN1c3RvbU1vbnRobHlEYXRlOiAiIiwKICAgICAgYXNzaWduZWRBc3NldFV1aWQ6ICIiLAogICAgICBhc3NpZ25lZEFzc2V0c09wdGlvbnM6IFtdLAogICAgICBhc3NpZ25lZEFzc2V0OiAiIiwKICAgICAgbmV2ZXI6ICIiLAogICAgICBvbjogIiIsCiAgICAgIGFmdGVyOiAiIiwKICAgICAgY3VycmVudFVzZXJEZXRhaWxzOiAiIiwKICAgICAgaW5kZXhSZW1pbmRlcjogMCwKICAgICAgRnJlcXVlbmN5U3RyaW5nOiAiIiwKICAgICAgY3VzdG9tT3B0aW9uczogW3sKICAgICAgICBuYW1lOiAiRGFpbHkiLAogICAgICAgIHZhbHVlOiAiZGF5IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIldlZWtseSIsCiAgICAgICAgdmFsdWU6ICJ3ZWVrIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIk1vbnRobHkiLAogICAgICAgIHZhbHVlOiAibW9udGgiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiWWVhcmx5IiwKICAgICAgICB2YWx1ZTogInllYXIiCiAgICAgIH1dLAogICAgICBjdXN0b21PcHRpb25zTW9udGhseTogW3sKICAgICAgICBuYW1lOiAiMSIsCiAgICAgICAgdmFsdWU6ICIxIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIjIiLAogICAgICAgIHZhbHVlOiAiMiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICIzIiwKICAgICAgICB2YWx1ZTogIjMiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiNCIsCiAgICAgICAgdmFsdWU6ICI0IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIjUiLAogICAgICAgIHZhbHVlOiAiNSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICI2IiwKICAgICAgICB2YWx1ZTogIjYiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiNyIsCiAgICAgICAgdmFsdWU6ICI3IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIjgiLAogICAgICAgIHZhbHVlOiAiOCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICI5IiwKICAgICAgICB2YWx1ZTogIjkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMTAiLAogICAgICAgIHZhbHVlOiAiMTAiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMTEiLAogICAgICAgIHZhbHVlOiAiMTEiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMTIiLAogICAgICAgIHZhbHVlOiAiMTIiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMTMiLAogICAgICAgIHZhbHVlOiAiMTMiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMTQiLAogICAgICAgIHZhbHVlOiAiMTQiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMTUiLAogICAgICAgIHZhbHVlOiAiMTUiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMTYiLAogICAgICAgIHZhbHVlOiAiMTYiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMTciLAogICAgICAgIHZhbHVlOiAiMTciCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMTgiLAogICAgICAgIHZhbHVlOiAiMTgiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMTkiLAogICAgICAgIHZhbHVlOiAiMTkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMjAiLAogICAgICAgIHZhbHVlOiAiMjAiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMjEiLAogICAgICAgIHZhbHVlOiAiMjEiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMjIiLAogICAgICAgIHZhbHVlOiAiMjIiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMjMiLAogICAgICAgIHZhbHVlOiAiMjMiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMjQiLAogICAgICAgIHZhbHVlOiAiMjQiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMjUiLAogICAgICAgIHZhbHVlOiAiMjUiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMjYiLAogICAgICAgIHZhbHVlOiAiMjYiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMjciLAogICAgICAgIHZhbHVlOiAiMjciCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMjgiLAogICAgICAgIHZhbHVlOiAiMjgiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMjkiLAogICAgICAgIHZhbHVlOiAiMjkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMzAiLAogICAgICAgIHZhbHVlOiAiMzAiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiMzEiLAogICAgICAgIHZhbHVlOiAiMzEiCiAgICAgIH1dLAogICAgICBjdXN0b21PcHRpb25zRGF5c01vbnRobHk6IFt7CiAgICAgICAgbmFtZTogIk9ORSIsCiAgICAgICAgdmFsdWU6ICJvbmUiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiVFdPIiwKICAgICAgICB2YWx1ZTogInR3byIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJUSFJFRSIsCiAgICAgICAgdmFsdWU6ICJ0aHJlZSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJGT1VSIiwKICAgICAgICB2YWx1ZTogImZvdXIiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiRklWRSIsCiAgICAgICAgdmFsdWU6ICJmaXZlIgogICAgICB9XSwKICAgICAgc2NoZWR1bGU6IFt7CiAgICAgICAgbmFtZTogIkFkLWhvYyIsCiAgICAgICAgdmFsdWU6ICJhZC1ob2MiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiRGFpbHkiLAogICAgICAgIHZhbHVlOiAiZGFpbHkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiV2Vla2x5IiwKICAgICAgICB2YWx1ZTogIndlZWtseSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJNb250aGx5IiwKICAgICAgICB2YWx1ZTogIm1vbnRobHkiCiAgICAgIH0sIC8vIHsgbmFtZTogIkN1c3RvbSIsIHZhbHVlOiAiY3VzdG9tIiB9LAogICAgICB7CiAgICAgICAgbmFtZTogIlllYXJseSIsCiAgICAgICAgdmFsdWU6ICJ5ZWFybHkiCiAgICAgIH1dLAogICAgICB3ZWVrbHlEYXlzOiBbewogICAgICAgIG5hbWU6ICJTdW5kYXkiLAogICAgICAgIHZhbHVlOiAiU1VOREFZIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIk1vbmRheSIsCiAgICAgICAgdmFsdWU6ICJNT05EQVkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiVHVlc2RheSIsCiAgICAgICAgdmFsdWU6ICJUVUVTREFZIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIldlZG5lc2RheSIsCiAgICAgICAgdmFsdWU6ICJXRURORVNEQVkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiVGh1cnNkYXkiLAogICAgICAgIHZhbHVlOiAiVEhVUlNEQVkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiRnJpZGF5IiwKICAgICAgICB2YWx1ZTogIkZSSURBWSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJTYXR1cmRheSIsCiAgICAgICAgdmFsdWU6ICJTQVRVUkRBWSIKICAgICAgfV0sCiAgICAgIHllYXJseU1vbnRoczogW3sKICAgICAgICBuYW1lOiAiSmFudWFyeSIsCiAgICAgICAgdmFsdWU6ICIxIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIkZlYnJ1YXJ5IiwKICAgICAgICB2YWx1ZTogIjIiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiTWFyY2giLAogICAgICAgIHZhbHVlOiAiMyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJBcHJpbCIsCiAgICAgICAgdmFsdWU6ICI0IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIk1heSIsCiAgICAgICAgdmFsdWU6ICI1IgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIkp1bmUiLAogICAgICAgIHZhbHVlOiAiNiIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJKdWx5IiwKICAgICAgICB2YWx1ZTogIjciCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiQXVndXN0IiwKICAgICAgICB2YWx1ZTogIjgiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiU2VwdGVtYmVyIiwKICAgICAgICB2YWx1ZTogIjkiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiT2N0b2JlciIsCiAgICAgICAgdmFsdWU6ICIxMCIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJOb3ZlbWJlciIsCiAgICAgICAgdmFsdWU6ICIxMSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJEZWNlbWJlciIsCiAgICAgICAgdmFsdWU6ICIxMiIKICAgICAgfV0sCiAgICAgIHNlbGVjdGVkU2NoZWR1bGU6ICIiLAogICAgICB0ZW1wbGF0ZVFhc2ltOiAiIiwKICAgICAgcmVtaW5kZXJBcnJheTogW3sKICAgICAgICByZW1pbmRlcjogW10sCiAgICAgICAgcmVtaW5kZXJPcHRpb25zOiBbewogICAgICAgICAgbmFtZTogIkVtYWlsIiwKICAgICAgICAgIHZhbHVlOiAiZW1haWwiCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIlNNUyIsCiAgICAgICAgICB2YWx1ZTogInNtcyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiTm90aWZpY2F0aW9uIiwKICAgICAgICAgIHZhbHVlOiAibm90aWZpY2F0aW9uIgogICAgICAgIH1dLAogICAgICAgIGR1cmF0aW9uVmFsdWU6ICIiLAogICAgICAgIGR1cmF0aW9uVHlwZTogIiIsCiAgICAgICAgZHVyYXRpb25UeXBlT3B0aW9uczogW3sKICAgICAgICAgIG5hbWU6ICJNaW51dGVzIiwKICAgICAgICAgIHZhbHVlOiAibWludXRlcyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiSG91cnMiLAogICAgICAgICAgdmFsdWU6ICJob3VycyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiRGF5cyIsCiAgICAgICAgICB2YWx1ZTogImRheXMiCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIldlZWtzIiwKICAgICAgICAgIHZhbHVlOiAid2Vla3MiCiAgICAgICAgfV0KICAgICAgfV0sCiAgICAgIGFzc2lnbmVlOiAiIiwKICAgICAgYXNzaWduZWVzOiBbewogICAgICAgIG5hbWU6ICJVc2VycyIsCiAgICAgICAgdmFsdWU6ICJ1c2VyIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIkFzc2V0cyIsCiAgICAgICAgdmFsdWU6ICJhc3NldCIKICAgICAgfV0sCiAgICAgIGFsbFVzZXJzOiBbXSwKICAgICAgdXNlckdyb3VwczogW10sCiAgICAgIGFzc2lnbmVkVXNlckdyb3VwOiAiIiwKICAgICAgYXNzaWduVXNlcnM6IFtdLAogICAgICBhc3NpZ25lZFVzZXI6ICIiLAogICAgICBhc3NldEdyb3VwT3B0aW9uczogW10sCiAgICAgIGdyb3VwQXNzZXRPcHRpb25zOiBbXSwKICAgICAgYXNzZXRHcm91cHM6ICIiLAogICAgICBhc3NldE5hbWU6ICIiLAogICAgICBlZGl0VmFsdWVmbGFnOiBmYWxzZSwKICAgICAgYXNzZXROYW1lVVVJRDogIiIsCiAgICAgIGFzc2V0R3JvdXBzVVVJRDogIiIsCiAgICAgIGFzc2lnbmVkVXNlclVVSUQ6ICIiLAogICAgICBhc3NpZ25lZFVzZXJHcm91cFVVSUQ6ICIiLAogICAgICBhc3NldEFzc2lnbkZsYWc6IHRydWUsCiAgICAgIGFzc2lnbmVkQXNzZXROYW1lOiAiIiwKICAgICAgYXNzZXRBc3NpZ25lZFVzZXJzOiBbXSwKICAgICAgU2VsZWN0ZWRUZW1wbGF0ZU9iajogIiIsCiAgICAgIGtleUluZGV4OiAwLAogICAgICBnbG9iYWxTY2hlZHVsZXJkYXRlOiAiIiwKICAgICAgaW5zcGVjdGlvbkl0ZW1DYXRlZ29yaWVzOiAiIgogICAgfTsKICB9LAoKICBwcm9wczogewogICAgRWRpdFNjaGVUZW5hbnRVVUlkOiBTdHJpbmcsCiAgICBFZGl0U2NoZUlkOiBTdHJpbmcsCiAgICB0ZW1wT2JqOiB7fSwKICAgIGFzc2lnbmVkVGVtcGxhdGVPYmo6IHt9LAogICAgY2FsZW5kZXJEYXRlT2JqOiB7fQogIH0sCiAgbWV0aG9kczogewogICAgdmFsaWRhdGVEdXJhdGlvbihpbmRleCwgaXRlbSkgewogICAgICB0aGlzLiR2LnJlbWluZGVyQXJyYXkuJGVhY2hbaW5kZXhdW2l0ZW1dLiR0b3VjaCgpOwogICAgfSwKCiAgICB2YWxpZGF0ZURhdGUoZGF0ZSwgZmllbGQpIHsKICAgICAgbGV0IGN1cnJlbnREYXRlID0gbW9tZW50KCkuZm9ybWF0KCkuc3BsaXQoIlQiKTsKICAgICAgY3VycmVudERhdGUgPSBjdXJyZW50RGF0ZVswXTsKCiAgICAgIGlmIChtb21lbnQoZGF0ZSkuaXNCZWZvcmUoY3VycmVudERhdGUpKSB7CiAgICAgICAgdGhpc1tmaWVsZF0gPSAiIjsKICAgICAgICByZXR1cm4gdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBTZWxlY3QgQ3VycmVudCBEYXRlIG9yIEZ1dHVyZSBEYXRlLiIsICJlcnJvciIpOwogICAgICB9CiAgICB9LAoKICAgIHNob3dDYXRhZ29yaWVzKCkgewogICAgICB0aGlzLnNob3dUZW1wUG9wVXAgPSB0cnVlOwogICAgICB0aGlzLnRlbXBPYmouZWRpdEZsYWc7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRUZW1wbGF0ZSh2YWx1ZSkgewogICAgICB0aGlzLnRlbXBsYXRlTmFtZSA9IHZhbHVlLmRpc3BsYXk7CiAgICAgIHRoaXMuU2VsZWN0ZWRUZW1wbGF0ZU9iaiA9IHZhbHVlOwogICAgICB0aGlzLnRlbXBsYXRlVVVJRCA9IHZhbHVlLnZhbHVlOwogICAgICB0aGlzLnNob3dUZW1wUG9wVXAgPSB0cnVlOwogICAgfSwKCiAgICBnZXRBbGxUZW1wbGF0ZSgpIHsKICAgICAgbGV0IGN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKTsKICAgICAgSW5zcGVjdGlvblNlcnZpY2UuZ2V0QWxsSW5zcGVjdGlvblRlbXBsYXRlcyhjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLnRlbXBsYXRlT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblRlbXBsYXRlRFRPUzsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgIH0sCgogICAgZ2V0Rm9ybUVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pIHsKICAgICAgaWYgKGZpZWxkVmFsaWRhdGlvbi4kZGlydHkpIHsKICAgICAgICByZXR1cm4gRnVuY3Rpb25zLmdldEZvcm1GaWVsZEVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pOwogICAgICB9CiAgICB9LAoKICAgIG5ldmVyZnVuY05hbWUodmFsKSB7CiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgICB0aGlzLm9uID0gZmFsc2U7CiAgICAgICAgdGhpcy5hZnRlciA9IGZhbHNlOwogICAgICAgIHRoaXMuQ3VzdG9tTW9udGhseURhdGUgPSAiIiwgdGhpcy5vY2N1cmFuY2VzVmFsdWUgPSAiIjsKICAgICAgfQogICAgfSwKCiAgICBjaGVja09uZUZ1bmModmFsKSB7CiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmN1c3RvbU1vbnRobHkgPSAiIiwgdGhpcy53ZWVrRGF5c1ZhbCA9ICIiLCB0aGlzLmNoZWNrVHdvID0gIiIsIHRoaXMub25DaGVja09uZSA9ICJ0cnVlIiwgdGhpcy5vbkNoZWNrVHdvID0gImZhbHNlIjsKICAgICAgfQogICAgfSwKCiAgICBjaGVja1R3b0Z1bmModmFsKSB7CiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmNoZWNrT25lID0gIiI7CiAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gIiIsIHRoaXMuY3VzdG9tTW9udGhseSA9ICIiLCB0aGlzLm9uQ2hlY2tUd28gPSAidHJ1ZSIsIHRoaXMub25DaGVja09uZSA9ICJmYWxzZSI7CiAgICAgIH0gZWxzZSB7fQogICAgfSwKCiAgICBvbmZ1bmNOYW1lKHZhbCkgewogICAgICBpZiAodmFsID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5uZXZlciA9IGZhbHNlOwogICAgICAgIHRoaXMuYWZ0ZXIgPSBmYWxzZTsKICAgICAgICB0aGlzLmN1c3RvbURhdGUgPSBmYWxzZTsKICAgICAgICB0aGlzLm9jY3VyYW5jZXNBY3RpdmUgPSB0cnVlOwogICAgICAgIHRoaXMub2NjdXJhbmNlc1ZhbHVlID0gIiI7CiAgICAgIH0KICAgIH0sCgogICAgYWZ0ZXJmdW5jTmFtZSh2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMub24gPSBmYWxzZTsKICAgICAgICB0aGlzLm5ldmVyID0gZmFsc2U7CiAgICAgICAgdGhpcy5vY2N1cmFuY2VzQWN0aXZlID0gZmFsc2U7CiAgICAgICAgdGhpcy5jdXN0b21EYXRlID0gdHJ1ZTsKICAgICAgICB0aGlzLm9jY3VyYW5jZXNWYWx1ZSA9ICIxIjsKICAgICAgICB0aGlzLkN1c3RvbU1vbnRobHlEYXRlID0gIiI7CiAgICAgIH0KICAgIH0sCgogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlIik7CiAgICAgIHRoaXMuc2hvd1RlbXBQb3BVcCA9IGZhbHNlOwogICAgfSwKCiAgICBvblNlbGVjdGVkU2NoZWR1bGUodmFsKSB7CiAgICAgIGlmICh2YWwudmFsdWUgPT09ICJkYWlseSIpIHsKICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSA9ICIiOwogICAgICAgIHRoaXMuYWRob2N0aW1lID0gIiI7CiAgICAgICAgdGhpcy5hZGhvY2RhdGUgPSAiIjsKICAgICAgICB0aGlzLkZyZXF1ZW5jeVN0cmluZyA9ICJEYXkiOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PT0gImFkLWhvYyIpIHsKICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9ICIiOwogICAgICAgIHRoaXMuZW5kVGltZSA9ICIiOwogICAgICAgIHRoaXMuZW5kRGF0ZSA9ICIiOwogICAgICAgIHRoaXMuZW5kVGltZSA9ICIiOwogICAgICAgIHRoaXMuZGFpbHlEZWFkTGluZVRpbWUgPSAiIjsKICAgICAgfSBlbHNlIGlmICh2YWwudmFsdWUgPT09ICJ3ZWVrbHkiKSB7CiAgICAgICAgdGhpcy5kZWFkTGluZURhdGUgPSAiIjsKICAgICAgICB0aGlzLmFkaG9jdGltZSA9ICIiOwogICAgICAgIHRoaXMuYWRob2NkYXRlID0gIiI7CiAgICAgICAgdGhpcy5GcmVxdWVuY3lTdHJpbmcgPSAiV2VlayI7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09PSAibW9udGhseSIpIHsKICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSA9ICIiOwogICAgICAgIHRoaXMuYWRob2N0aW1lID0gIiI7CiAgICAgICAgdGhpcy5hZGhvY2RhdGUgPSAiIjsKICAgICAgICB0aGlzLkZyZXF1ZW5jeVN0cmluZyA9ICJNb250aCI7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09PSAieWVhcmx5IikgewogICAgICAgIHRoaXMuZGVhZExpbmVEYXRlID0gIiI7CiAgICAgICAgdGhpcy5hZGhvY3RpbWUgPSAiIjsKICAgICAgICB0aGlzLmFkaG9jZGF0ZSA9ICIiOwogICAgICAgIHRoaXMuRnJlcXVlbmN5U3RyaW5nID0gIlllYXIiOwogICAgICB9CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRSZW1pbmRlcihpbmRleDEsIHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZS5yZW1pbmRlci5sZW5ndGggPiAwICYmIHRoaXMuJHJvdXRlLm5hbWUgIT09ICJpbnNwZWN0aW9uIikgewogICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJlbWluZGVyQXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXlbaW5kZXgxXS5kdXJhdGlvblR5cGUgPSAiZGF5cyI7CiAgICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXlbaW5kZXgxXS5kdXJhdGlvblZhbHVlID0gIjEiOwogICAgICAgICAgdGhpcy5kdXJhdGlvblR5cGVJRCsrOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBvblNlbGVjdGVkRHVyYXRpb25UaW1lKHZhbCkgey8vIGNvbnNvbGUubG9nKHZhbCk7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRBc3NpZ25lZSh2YWwpIHsKICAgICAgaWYgKHZhbC5kaXNwbGF5ID09PSAiQXNzZXRzIikgewogICAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gIiI7CiAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXJHcm91cCA9ICIiOwogICAgICAgIHRoaXMuY3JlYXRlZEZvclVzZXJOYW1lID0gbnVsbDsKICAgICAgICB0aGlzLnVzZXJJZCsrOwogICAgICAgIHRoaXMudXNlckdyb3VwSWQrKzsgLy90aGlzLmRpc2FibGVVc2VyID0gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAodmFsLmRpc3BsYXkgPT09ICJVc2VycyIpIHsKICAgICAgICB0aGlzLmFzc2V0TmFtZSA9ICIiOwogICAgICAgIHRoaXMuYXNzZXRHcm91cHMgPSAiIjsKICAgICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMgPSBbXTsKICAgICAgICB0aGlzLmFzc2V0R3JvdXBJZCsrOwogICAgICAgIHRoaXMuYXNzZXRJZCsrOwogICAgICAgIHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzID0gW107IC8vdGhpcy5kaXNhYmxlQXNzZXQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICBvblNlbGVjdGVkVXNlckdyb3VwKHZhbCkgewogICAgICB0aGlzLmFzc2lnbmVkVXNlciA9ICIiOwogICAgICB0aGlzLmVkaXRWYWx1ZWZsYWcgPSB0cnVlOwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSAiIjsKICAgICAgdGhpcy5jcmVhdGVkRm9yVXNlck5hbWUgPSBudWxsOwogICAgICB0aGlzLmFzc2lnbkFzc2V0SWQrKzsKICAgICAgdGhpcy51c2VySWQrKzsKICAgIH0sCgogICAgb25TZWxlY3RlZFVzZXIodmFsKSB7CiAgICAgIHRoaXMuY3JlYXRlZEZvclVzZXJOYW1lID0gdmFsLmRpc3BsYXk7CiAgICAgIHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgPSAiIjsKICAgICAgdGhpcy5lZGl0VmFsdWVmbGFnID0gdHJ1ZTsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0ID0gIiI7CiAgICAgIHRoaXMuYXNzaWduQXNzZXRJZCsrOwogICAgICB0aGlzLnVzZXJHcm91cElkKys7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRBc3NldEdycCh2YWwpIHsKICAgICAgdGhpcy5hc3NldE5hbWUgPSAiIjsKICAgICAgdGhpcy5lZGl0VmFsdWVmbGFnID0gdHJ1ZTsKICAgICAgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMgPSBbXTsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0VXVpZCA9ICIiOwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSAiIjsKICAgICAgdGhpcy5hc3NldElkKys7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRBc3NldCh2YWwpIHsKICAgICAgdGhpcy5hc3NldFNlbGVjdE5hbWUgPSB2YWwuZGlzcGxheTsKICAgICAgdGhpcy5hc3NldEdyb3VwcyA9ICIiOwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkID0gIiI7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldCA9ICIiOwogICAgICB0aGlzLmVkaXRWYWx1ZWZsYWcgPSB0cnVlOwogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBBc3NldFBlcnNvbm5lbFNlcnZpY2UuY2hlY2tBc3NpZ25tZW50T2ZBbkFzc2V0QnlVVUlEKHZhbC52YWx1ZSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuYXNzZXRBc3NpZ25GbGFnID0gcmVzLmRhdGEuYXNzaWdubWVudDsKICAgICAgICB0aGlzLmFzc2V0QXNzaWduZWRVc2VycyA9IHJlcy5kYXRhLnVzZXJEVE9TICE9PSBudWxsID8gcmVzLmRhdGEudXNlckRUT1MgOiBbXTsKICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0pOwogICAgICB0aGlzLmFzc2V0R3JvdXBJZCsrOwogICAgfSwKCiAgICBvblNlbGVjdGVkQXNzaWduQXNzZXRzKHZhbCkgewogICAgICB0aGlzLmFzc2lnbmVkQXNzZXROYW1lID0gdmFsLmRpc3BsYXk7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldCA9IHZhbC52YWx1ZTsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0VXVpZCA9ICIiOwogICAgfSwKCiAgICBvblNlbGVjdGVkQ3VzdG9tV2Vlayh2YWwpIHsKICAgICAgaWYgKHZhbC5kaXNwbGF5ID09ICJkYXkiKSB7CiAgICAgICAgdGhpcy5mcmVxdWVuY3lEYXlzID0gIiI7CiAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gIiI7CiAgICAgICAgdGhpcy5jdXN0b21Nb250aGx5ID0gIiI7CiAgICAgIH0gZWxzZSBpZiAodmFsLmRpc3BsYXkgPT0gIndlZWsiKSB7CiAgICAgICAgdGhpcy5jdXN0b21Nb250aGx5ID0gIiI7CiAgICAgIH0gZWxzZSBpZiAodmFsLmRpc3BsYXkgPT0gIm1vbnRoIikgewogICAgICAgIHRoaXMuY3VzdG9tV2Vla0RheSA9ICIiOwogICAgICB9IGVsc2UgaWYgKHZhbC5kaXNwbGF5ID09ICJ5ZWFyIikgewogICAgICAgIHRoaXMuZnJlcXVlbmN5RGF5cyA9ICIiOwogICAgICAgIHRoaXMuY3VzdG9tV2Vla0RheSA9ICIiOwogICAgICAgIHRoaXMuY3VzdG9tTW9udGhseSA9ICIiOwogICAgICB9CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRDdXN0b21Nb250aGx5KCkge30sCgogICAgc2VsZWN0VGVtcGxhdGUoKSB7CiAgICAgIHRoaXMuJGVtaXQoInNlbGVjdFRlbXAiKTsKICAgIH0sCgogICAgb25TZWxlY3RlZFdlZWtEYXkodmFsKSB7Ly8gY29uc29sZS5sb2coIm9uU2VsZWN0ZWRXZWVrRGF5IiwgdmFsKTsKICAgIH0sCgogICAgb25TZWxlY3RlZFllYXJNb250aCh2YWwpIHsvLyBjb25zb2xlLmxvZygib25TZWxlY3RlZFllYXJNb250aCIsIHZhbCk7CiAgICB9LAoKICAgIGNyZWF0ZUFkZGl0aW9uYWxJbnNwZWN0aW9uKCkgewogICAgICB0aGlzLiRlbWl0KCJjcmVhdGVJbnNwZWN0aW9uIik7CiAgICB9LAoKICAgIGFkZChpbmRleCkgewogICAgICB0aGlzLiRlbWl0KCJhZGRSZW1pbmRlcnMiLCBpbmRleCk7CiAgICB9LAoKICAgIGNsaWNrUmVtb3ZlKGluZGV4KSB7CiAgICAgIHRoaXMuJGVtaXQoInJlbW92ZVJlbWluZGVycyIsIGluZGV4KTsKICAgIH0sCgogICAgYWRkVGVtcGxhdGUoKSB7CiAgICAgIHRoaXMuc2hvd1RlbXBQb3BVcCA9IHRydWU7CiAgICB9LAoKICAgIHRlbXBDbG9zZSgpIHsKICAgICAgdGhpcy5zaG93VGVtcFBvcFVwID0gZmFsc2U7CiAgICAgIHRoaXMudGVtcE9iai5lZGl0RmxhZyA9IGZhbHNlOwogICAgfSwKCiAgICBhZGRSZW1pbmRlcigpIHsKICAgICAgdGhpcy5yZW1pbmRlckFycmF5LnB1c2goewogICAgICAgIHJlbWluZGVyOiBbXSwKICAgICAgICByZW1pbmRlck9wdGlvbnM6IFt7CiAgICAgICAgICBuYW1lOiAiRW1haWwiLAogICAgICAgICAgdmFsdWU6ICJlbWFpbCIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiU01TIiwKICAgICAgICAgIHZhbHVlOiAic21zIgogICAgICAgIH0sIHsKICAgICAgICAgIG5hbWU6ICJOb3RpZmljYXRpb24iLAogICAgICAgICAgdmFsdWU6ICJub3RpZmljYXRpb24iCiAgICAgICAgfV0sCiAgICAgICAgZHVyYXRpb25WYWx1ZTogIiIsCiAgICAgICAgZHVyYXRpb25UeXBlOiAiIiwKICAgICAgICBkdXJhdGlvblR5cGVPcHRpb25zOiBbewogICAgICAgICAgbmFtZTogIk1pbnV0ZXMiLAogICAgICAgICAgdmFsdWU6ICJtaW51dGVzIgogICAgICAgIH0sIHsKICAgICAgICAgIG5hbWU6ICJIb3VycyIsCiAgICAgICAgICB2YWx1ZTogImhvdXJzIgogICAgICAgIH0sIHsKICAgICAgICAgIG5hbWU6ICJEYXlzIiwKICAgICAgICAgIHZhbHVlOiAiZGF5cyIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiV2Vla3MiLAogICAgICAgICAgdmFsdWU6ICJ3ZWVrcyIKICAgICAgICB9XQogICAgICB9KTsKICAgIH0sCgogICAgcmVtb3ZlUmVtaW5kZXIoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ICE9PSAwKSB7CiAgICAgICAgdGhpcy5yZW1pbmRlckFycmF5LnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgIH0sCgogICAgVGVtcGxhdGVBc3NpZ25tZW50KCkgewogICAgICB0aGlzLiR2LiR0b3VjaCgpOwoKICAgICAgaWYgKHRoaXMuJHYuJGludmFsaWQpIHsKICAgICAgICByZXR1cm4gdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBmaWxsIGFsbCByZXF1aXJlZCBmaWVsZHMuISIsICJ3YXJuaW5nIik7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT09ICJjdXN0b20iKSB7CiAgICAgICAgaWYgKHRoaXMubmV2ZXIgPT09ICIiICYmIHRoaXMub24gPT09ICIiICYmIHRoaXMuYWZ0ZXIgPT09ICIiKSB7CiAgICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBFbmQgU2NoZWR1bGUgVGltZSBpbiBjdXN0b20gUmVjdXJlbmNlIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5jdXN0b21XZWVrID09ICJ3ZWVrIiAmJiB0aGlzLmN1c3RvbVdlZWtEYXkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBXZWVrIGRheXMiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmN1c3RvbVdlZWsgPT0gIm1vbnRoIiAmJiB0aGlzLmN1c3RvbU1vbnRobHkgPT09ICIiKSB7CiAgICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBNb250aGx5IGRheSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuYXNzaWduZWUgPT09ICJ1c2VyIikgewogICAgICAgIGlmICh0aGlzLmFzc2lnbmVkVXNlciA9PT0gIiIgJiYgdGhpcy5hc3NpZ25lZFVzZXJHcm91cCA9PT0gIiIpIHsKICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IFVzZXIgb3IgVXNlciBHcm91cCB0byBhc3NpZ24gVGVtcGxhdGUiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hc3NpZ25lZSA9PT0gImFzc2V0IikgewogICAgICAgIGlmICh0aGlzLmFzc2V0TmFtZSA9PSAiIiAmJiB0aGlzLmFzc2V0R3JvdXBzID09ICIiKSB7CiAgICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBBc3NldCBvciBBc3NldCBHcm91cCB0byBhc3NpZ24gVGVtcGxhdGUiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFzc2lnbmVkVXNlciAhPT0gIiIgJiYgdGhpcy5hc3NpZ25lZEFzc2V0ID09PSAiIikgewogICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IEFzc2V0IHRvIGFzc2lnbiBUZW1wbGF0ZSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgIT09ICIiICYmIHRoaXMuYXNzaWduZWRBc3NldCA9PT0gIiIpIHsKICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBBc3NldCB0byBhc3NpZ24gVGVtcGxhdGUiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFzc2V0TmFtZSAhPT0gIiIgJiYgdGhpcy5hc3NldEFzc2lnbkZsYWcgPT09IGZhbHNlKSB7CiAgICAgICAgYWxlcnQoIlBsZWFzZSBBc3NpZ24gQXNzZXQgdG8gdXNlciIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc3RhcnREYXRlICE9PSAiIikgewogICAgICAgIHRoaXMuc3RhcnREYXRlID0gbW9tZW50KHRoaXMuc3RhcnREYXRlKS5mb3JtYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9ICIiOwogICAgICB9CgogICAgICBpZiAodGhpcy5lbmREYXRlICE9PSAiIikgewogICAgICAgIHRoaXMuZW5kRGF0ZSA9IG1vbWVudCh0aGlzLmVuZERhdGUpLmZvcm1hdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZW5kRGF0ZSA9ICIiOwogICAgICB9CgogICAgICBpZiAodGhpcy5hZGhvY2RhdGUgIT09ICIiICYmIHRoaXMuYWRob2NkYXRlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSA9IG1vbWVudCh0aGlzLmFkaG9jZGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kZWFkTGluZURhdGUgPSAiIjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubW9udGhseURhdGUgIT09ICIiICYmIHRoaXMubW9udGhseURhdGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5tb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tb250aGx5RGF0ZSA9ICIiOwogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NldE5hbWUgIT09ICIiICYmIHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLmFzc2lnbmVkVXNlciA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLnV1aWQ7CiAgICAgICAgdGhpcy5jcmVhdGVkRm9yVXNlck5hbWUgPSB0aGlzLmFzc2V0QXNzaWduZWRVc2Vyc1swXS5uYW1lOwogICAgICB9CgogICAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKTsKICAgICAgdmFyIGN1cnJlbnREYXRlVGltZUZvclRlbXAgPSBtb21lbnQoKS50b0RhdGUoKS5nZXRUaW1lKCk7CiAgICAgIHZhciBnZXRUb2RheURhdGUgPSBtb21lbnQoKS50b0RhdGUoKTsKICAgICAgdmFyIGZvcm1hdGVUb2RheURhdGUgPSBtb21lbnQoZ2V0VG9kYXlEYXRlKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgdmFyIGRhaWx5U2NoZWR1bGVyRGF0ZSA9ICIiOwoKICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT0gInNjaGVkdWxlciIgJiYgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJkYWlseSIpIHsKICAgICAgICBsZXQgc2VsZWN0ZWREYXRlID0gbW9tZW50KHRoaXMuY2FsZW5kZXJEYXRlT2JqLnN0YXJ0VGltZSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgbGV0IG9iakRhdGUgPSBzZWxlY3RlZERhdGU7CiAgICAgICAgdGhpcy5nbG9iYWxTY2hlZHVsZXJkYXRlID0gb2JqRGF0ZTsKICAgICAgfQoKICAgICAgbGV0IHJlcXVlc3RPYmogPSB7CiAgICAgICAgY3JlYXRlZEJ5VXNlck5hbWU6IHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUuZmlyc3ROYW1lLAogICAgICAgIHRlbXBsYXRlTmFtZTogdGhpcy5uYW1lLAogICAgICAgIHRlbXBsYXRlVVVJRDogdGhpcy50ZW1wbGF0ZVVVSUQsCiAgICAgICAgY3JlYXRlZEZvclVzZXJOYW1lOiB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSwKICAgICAgICBzdGFydERhdGU6IHRoaXMuc3RhcnREYXRlLAogICAgICAgIHN0YXJ0VGltZTogdGhpcy5zdGFydFRpbWUsCiAgICAgICAgY3JlYXRlZEJ5OiBgJHt0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLmZpcnN0TmFtZX0gJHt0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLmxhc3ROYW1lfWAsCiAgICAgICAgLy8gYWRob2MKICAgICAgICBkZWFkTGluZURhdGU6IHRoaXMuZGVhZExpbmVEYXRlICE9PSAiIiAmJiB0aGlzLmFkaG9jdGltZSAhPT0gIiIgPyBtb21lbnQodGhpcy5kZWFkTGluZURhdGUpLmZvcm1hdCgiWVlZWS1NTS1ERCIpICsgIlQiICsgdGhpcy5hZGhvY3RpbWUgKyAiOiIgKyAiMDArMDU6MDAiIDogdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09PSAiZGFpbHkiICYmIHRoaXMuJHJvdXRlLm5hbWUgPT09ICJzY2hlZHVsZXIiID8gdGhpcy5nbG9iYWxTY2hlZHVsZXJkYXRlICsgIlQiICsgdGhpcy5kYWlseURlYWRMaW5lVGltZSArICI6IiArICIwMCswNTowMCIgOiBmb3JtYXRlVG9kYXlEYXRlICsgIlQiICsgdGhpcy5kYWlseURlYWRMaW5lVGltZSArICI6IiArICIwMCswNTowMCIsCiAgICAgICAgZGVhZExpbmVUaW1lOiB0aGlzLmFkaG9jdGltZSwKICAgICAgICBmcmVxdWVuY3lUeXBlOiB0aGlzLnNlbGVjdGVkU2NoZWR1bGUsCiAgICAgICAgY3JlYXRlZEZvckFzc2V0VVVJRDogdGhpcy5hc3NldE5hbWUsCiAgICAgICAgY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEOiB0aGlzLmFzc2V0R3JvdXBzLAogICAgICAgIGNyZWF0ZWRGb3JVc2VyVVVJRDogdGhpcy5hc3NpZ25lZFVzZXIsCiAgICAgICAgY3JlYXRlZEZvclVzZXJHcm91cFVVSUQ6IHRoaXMuYXNzaWduZWRVc2VyR3JvdXAsCiAgICAgICAgc2VsZWN0ZWRVc2VyQXNzZXRVVUlEOiB0aGlzLmFzc2lnbmVkQXNzZXQsCiAgICAgICAgc2VsZWN0ZWRVc2VyQXNzZXROYW1lOiB0aGlzLmFzc2lnbmVkQXNzZXROYW1lIHx8IHRoaXMuYXNzZXRTZWxlY3ROYW1lLAogICAgICAgIHJlcGVhdEV2ZXJ5OiBwYXJzZUludCh0aGlzLmN1c3RvbVZhbHVlKSwKICAgICAgICByZXBlYXRFdmVyeVRpbWU6IHRoaXMuY3VzdG9tVmFsdWUsCiAgICAgICAgcmVwZWF0RXZlcnlUeXBlOiB0aGlzLmN1c3RvbVdlZWssCiAgICAgICAgcmVwZWF0TW9udGhEYXk6IHRoaXMuY3VzdG9tTW9udGhseQogICAgICB9OwoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiYWQtaG9jIikgewogICAgICAgIHJlcXVlc3RPYmouaW5zcGVjdGlvblR5cGUgPSAiYWQtaG9jIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXF1ZXN0T2JqLmluc3BlY3Rpb25UeXBlID0gInNjaGVkdWxlZCI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gIndlZWtseSIpIHsKICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSB0aGlzLndlZWtEYXk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImN1c3RvbSIgJiYgcmVxdWVzdE9iai5yZXBlYXRFdmVyeVR5cGUgPT0gIndlZWsiKSB7CiAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jdXN0b21ZZWFyTW9udGgpOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IikgewogICAgICAgIHJlcXVlc3RPYmoubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5tb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImRhaWx5IiB8fCB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gIndlZWtseSIgfHwgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IiB8fCB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gInllYXJseSIpIHsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09PSAieWVhcmx5IikgewogICAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jdXN0b21ZZWFyTW9udGgpOwogICAgICAgIH0gLy8JcmVxdWVzdE9iai5tb250aGx5RGF0ZSA9IG1vbWVudCh0aGlzLkN1c3RvbU1vbnRobHlEYXRlKS5mb3JtYXQoKTsKCgogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gIndlZWtseSIpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY3VzdG9tV2Vla0RheSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5uZXZlciA9PSB0cnVlKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZFR5cGUgPSAibmV2ZXIiOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMub24gPT0gdHJ1ZSkgewogICAgICAgICAgcmVxdWVzdE9iai5lbmRUeXBlID0gIm9uIjsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kRGF0ZSA9IG1vbWVudCh0aGlzLkN1c3RvbU1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmFmdGVyID09IHRydWUpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kVHlwZSA9ICJhZnRlciI7CiAgICAgICAgICByZXF1ZXN0T2JqLm9jY3VycmVuY2UgPSB0aGlzLm9jY3VyYW5jZXNWYWx1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gIndlZWtseSIgfHwgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IiB8fCB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gInllYXJseSIpIHsKICAgICAgICBpZiAodGhpcy4kcm91dGUubmFtZSA9PSAic2NoZWR1bGVyIikgewogICAgICAgICAgbGV0IHNlbGVjdGVkRGF0ZSA9IG1vbWVudCh0aGlzLmNhbGVuZGVyRGF0ZU9iai5zdGFydFRpbWUpLmZvcm1hdCgiWVlZWS1NTS1ERFRISDpNTTpTU1oiKTsKICAgICAgICAgIGxldCBkYXRlU3BsaXQgPSBzZWxlY3RlZERhdGUuc3BsaXQoIlQiKTsKICAgICAgICAgIGxldCBvYmpEYXRlID0gZGF0ZVNwbGl0WzBdOwogICAgICAgICAgbGV0IHRpbWVWYWx1ZSA9IGRhdGVTcGxpdFsxXTsKICAgICAgICAgIGxldCB0aW1lU3BsaXQgPSB0aW1lVmFsdWUuc3BsaXQoIjoiKTsKICAgICAgICAgIGxldCBob3VyID0gdGltZVNwbGl0WzBdOwogICAgICAgICAgbGV0IG1pbiA9IHRpbWVTcGxpdFsxXTsKICAgICAgICAgIGxldCBkYXRlVGltZVZhbHVlID0gb2JqRGF0ZSArICJUIiArIGhvdXIgKyAiOiIgKyBtaW4gKyAiOiIgKyAiMDArMDU6MDAiOyAvL2xldCBkYXRlID0gRGF0ZSgpOwoKICAgICAgICAgIGxldCBjdXJyZW50RGF0ZSA9IG1vbWVudChkYXRlVGltZVZhbHVlKS5mb3JtYXQoKTsKICAgICAgICAgIHJlcXVlc3RPYmouc3RhcnREYXRlID0gY3VycmVudERhdGU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlcXVlc3RPYmouc3RhcnREYXRlID0gY3VycmVudERhdGVUaW1lRm9yVGVtcDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGxldCByZW1pbmRlckFycmF5ID0gW107CgogICAgICBmb3IgKGxldCBmaWVsZCBvZiB0aGlzLnJlbWluZGVyQXJyYXkpIHsKICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgcmVtaW5kZXI6IGZpZWxkLnJlbWluZGVyLAogICAgICAgICAgZHVyYXRpb25WYWx1ZTogZmllbGQuZHVyYXRpb25WYWx1ZSwKICAgICAgICAgIGR1cmF0aW9uVHlwZTogZmllbGQuZHVyYXRpb25UeXBlCiAgICAgICAgfTsKICAgICAgICByZW1pbmRlckFycmF5LnB1c2gob2JqKTsKICAgICAgICByZXF1ZXN0T2JqLnJlbWluZGVyID0gSlNPTi5zdHJpbmdpZnkocmVtaW5kZXJBcnJheSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoInJlcXVlc3RPYmoiLCByZXF1ZXN0T2JqKTsKICAgICAgdGhpcy4kZW1pdCgic2VsZWN0ZWRUZW1wSXRlbXMiLCB0aGlzLnNlbGVjdGVkVGVtcEl0ZW1zKTsKCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09ICJzY2hlZHVsZXIiKSB7CiAgICAgICAgbGV0IHNjaGVkdWxlT2JqID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlNjaGVkdWxlIikuZWoyX2luc3RhbmNlc1swXTsKICAgICAgICBzY2hlZHVsZU9iai5yZWZyZXNoTGF5b3V0KCk7CiAgICAgICAgdGhpcy5rZXlJbmRleCsrOwogICAgICB9CiAgICB9LAoKICAgIGVkaXRBc3NpZ25lZFRlbXAoKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9IHRoaXMuYXNzaWduZWRUZW1wbGF0ZU9iai5mcmVxdWVuY3lUeXBlOwogICAgfSwKCiAgICAvLyBvbGQgZWRpdAogICAgVXBkYXRlVGVtcGxhdGVBc3NpZ25tZW50KCkgewogICAgICB0aGlzLiR2LiR0b3VjaCgpOwoKICAgICAgaWYgKHRoaXMuJHYuJGludmFsaWQpIHsKICAgICAgICByZXR1cm4gdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBmaWxsIGFsbCByZXF1aXJlZCBmaWVsZHMuISIsICJ3YXJuaW5nIik7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT09ICJjdXN0b20iKSB7CiAgICAgICAgaWYgKHRoaXMubmV2ZXIgPT09ICIiICYmIHRoaXMub24gPT09ICIiICYmIHRoaXMuYWZ0ZXIgPT09ICIiKSB7CiAgICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBFbmQgU2NoZWR1bGUgVGltZSBpbiBjdXN0b20gUmVjdXJlbmNlIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5jdXN0b21XZWVrID09ICJ3ZWVrIiAmJiB0aGlzLmN1c3RvbVdlZWtEYXkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBXZWVrIGRheXMiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmN1c3RvbVdlZWsgPT0gIm1vbnRoIiAmJiB0aGlzLmN1c3RvbU1vbnRobHkgPT09ICIiKSB7CiAgICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBNb250aGx5IGRheSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuYXNzaWduZWUgPT09ICJ1c2VyIikgewogICAgICAgIGlmICh0aGlzLmFzc2lnbmVkVXNlciA9PT0gIiIgJiYgdGhpcy5hc3NpZ25lZFVzZXJHcm91cCA9PT0gIiIpIHsKICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IFVzZXIgb3IgVXNlciBHcm91cCB0byBhc3NpZ24gVGVtcGxhdGUiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hc3NpZ25lZSA9PT0gImFzc2V0IikgewogICAgICAgIGlmICh0aGlzLmFzc2V0TmFtZSA9PSAiIiAmJiB0aGlzLmFzc2V0R3JvdXBzID09ICIiKSB7CiAgICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBBc3NldCBvciBBc3NldCBHcm91cCB0byBhc3NpZ24gVGVtcGxhdGUiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFzc2lnbmVkVXNlciAhPT0gIiIgJiYgdGhpcy5hc3NpZ25lZEFzc2V0ID09PSAiIikgewogICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IEFzc2V0IHRvIGFzc2lnbiBUZW1wbGF0ZSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgIT09ICIiICYmIHRoaXMuYXNzaWduZWRBc3NldCA9PT0gIiIpIHsKICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBBc3NldCB0byBhc3NpZ24gVGVtcGxhdGUiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFzc2V0TmFtZSAhPT0gIiIgJiYgdGhpcy5hc3NldEFzc2lnbkZsYWcgPT09IGZhbHNlKSB7CiAgICAgICAgYWxlcnQoIlBsZWFzZSBBc3NpZ24gQXNzZXQgdG8gdXNlciIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc3RhcnREYXRlICE9PSAiIikgewogICAgICAgIHRoaXMuc3RhcnREYXRlID0gbW9tZW50KHRoaXMuc3RhcnREYXRlKS5mb3JtYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9ICIiOwogICAgICB9CgogICAgICBpZiAodGhpcy5lbmREYXRlICE9PSAiIikgewogICAgICAgIHRoaXMuZW5kRGF0ZSA9IG1vbWVudCh0aGlzLmVuZERhdGUpLmZvcm1hdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZW5kRGF0ZSA9ICIiOwogICAgICB9CgogICAgICBpZiAodGhpcy5hZGhvY2RhdGUgIT09ICIiICYmIHRoaXMuYWRob2NkYXRlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSA9IG1vbWVudCh0aGlzLmFkaG9jZGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kZWFkTGluZURhdGUgPSAiIjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubW9udGhseURhdGUgIT09ICIiICYmIHRoaXMubW9udGhseURhdGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5tb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tb250aGx5RGF0ZSA9ICIiOwogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NldE5hbWUgIT09ICIiICYmIHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLmFzc2lnbmVkVXNlciA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLnV1aWQ7CiAgICAgICAgdGhpcy5jcmVhdGVkRm9yVXNlck5hbWUgPSB0aGlzLmFzc2V0QXNzaWduZWRVc2Vyc1swXS5uYW1lOwogICAgICB9CgogICAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKTsKICAgICAgdmFyIGdldFRvZGF5RGF0ZSA9IG1vbWVudCgpLnRvRGF0ZSgpOwogICAgICB2YXIgZm9ybWF0ZVRvZGF5RGF0ZSA9IG1vbWVudChnZXRUb2RheURhdGUpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwoKICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT0gInNjaGVkdWxlciIgJiYgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJkYWlseSIpIHsKICAgICAgICBsZXQgc2VsZWN0ZWREYXRlID0gbW9tZW50KHRoaXMuY2FsZW5kZXJEYXRlT2JqLnN0YXJ0VGltZSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgbGV0IG9iakRhdGUgPSBzZWxlY3RlZERhdGU7CiAgICAgICAgdGhpcy5nbG9iYWxTY2hlZHVsZXJkYXRlID0gb2JqRGF0ZTsKICAgICAgfQoKICAgICAgbGV0IHJlcXVlc3RPYmogPSB7CiAgICAgICAgY3JlYXRlZEJ5VXNlck5hbWU6IHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUuZmlyc3ROYW1lLAogICAgICAgIHRlbXBsYXRlTmFtZTogdGhpcy5uYW1lLAogICAgICAgIHRlbXBsYXRlVVVJRDogdGhpcy4kcm91dGUubmFtZSA9PSAic2NoZWR1bGVyIiA/IHRoaXMuRWRpdFNjaGVJZCA6IHRoaXMudGVtcGxhdGVVVUlELAogICAgICAgIGNyZWF0ZWRGb3JVc2VyTmFtZTogdGhpcy5jcmVhdGVkRm9yVXNlck5hbWUsCiAgICAgICAgc3RhcnREYXRlOiB0aGlzLnN0YXJ0RGF0ZSwKICAgICAgICBzdGFydFRpbWU6IHRoaXMuc3RhcnRUaW1lLAogICAgICAgIGRlYWRMaW5lRGF0ZTogdGhpcy5kZWFkTGluZURhdGUgIT09ICIiICYmIHRoaXMuYWRob2N0aW1lICE9PSAiIiA/IG1vbWVudCh0aGlzLmRlYWRMaW5lRGF0ZSkuZm9ybWF0KCJZWVlZLU1NLUREIikgKyAiVCIgKyB0aGlzLmFkaG9jdGltZSArICI6IiArICIwMCswNTowMCIgOiB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImRhaWx5IiA/IGZvcm1hdGVUb2RheURhdGUgKyAiVCIgKyB0aGlzLmRhaWx5RGVhZExpbmVUaW1lICsgIjoiICsgIjAwKzA1OjAwIiA6IHRoaXMuZ2xvYmFsU2NoZWR1bGVyZGF0ZSArICJUIiArIHRoaXMuZGFpbHlEZWFkTGluZVRpbWUgKyAiOiIgKyAiMDArMDU6MDAiLAogICAgICAgIGRlYWRMaW5lVGltZTogdGhpcy5hZGhvY3RpbWUsCiAgICAgICAgZnJlcXVlbmN5VHlwZTogdGhpcy5zZWxlY3RlZFNjaGVkdWxlLAogICAgICAgIHJlcGVhdEV2ZXJ5OiBwYXJzZUludCh0aGlzLmN1c3RvbVZhbHVlKSwKICAgICAgICByZXBlYXRFdmVyeVRpbWU6IHRoaXMuY3VzdG9tVmFsdWUsCiAgICAgICAgcmVwZWF0RXZlcnlUeXBlOiB0aGlzLmN1c3RvbVdlZWssCiAgICAgICAgcmVwZWF0TW9udGhEYXk6IHRoaXMuY3VzdG9tTW9udGhseQogICAgICB9OwoKICAgICAgaWYgKHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPT09ICIiIHx8IHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPT09IG51bGwpIHsKICAgICAgICByZXF1ZXN0T2JqLnNlbGVjdGVkVXNlckFzc2V0VVVJRCA9IHRoaXMuYXNzaWduZWRBc3NldDsKICAgICAgICByZXF1ZXN0T2JqLnNlbGVjdGVkVXNlckFzc2V0TmFtZSA9IHRoaXMuYXNzaWduZWRBc3NldE5hbWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVxdWVzdE9iai5zZWxlY3RlZFVzZXJBc3NldFVVSUQgPSB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkOwogICAgICAgIHJlcXVlc3RPYmouc2VsZWN0ZWRVc2VyQXNzZXROYW1lID0gdGhpcy5hc3NpZ25lZEFzc2V0OwogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NpZ25lZSA9PT0gImFzc2V0IiAmJiB0aGlzLmFzc2V0QXNzaWduZWRVc2Vycy5sZW5ndGggPiAwKSB7CiAgICAgICAgaWYgKHRoaXMuZWRpdFZhbHVlZmxhZyA9PT0gdHJ1ZSkgewogICAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXIgPSB0aGlzLmFzc2V0QXNzaWduZWRVc2Vyc1swXS51dWlkOwogICAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlck5hbWUgPSB0aGlzLmFzc2V0QXNzaWduZWRVc2Vyc1swXS5uYW1lOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlclVVSUQgPSB0aGlzLmFzc2V0QXNzaWduZWRVc2Vyc1swXS51dWlkOwogICAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlck5hbWUgPSB0aGlzLmFzc2V0QXNzaWduZWRVc2Vyc1swXS5uYW1lOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuZWRpdFZhbHVlZmxhZyA9PT0gdHJ1ZSkgewogICAgICAgIHJlcXVlc3RPYmouY3JlYXRlZEZvckFzc2V0VVVJRCA9IHRoaXMuYXNzZXROYW1lOwogICAgICAgIHJlcXVlc3RPYmouY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEID0gdGhpcy5hc3NldEdyb3VwczsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyVVVJRCA9IHRoaXMuYXNzaWduZWRVc2VyOwogICAgICAgIHJlcXVlc3RPYmouY3JlYXRlZEZvclVzZXJHcm91cFVVSUQgPSB0aGlzLmFzc2lnbmVkVXNlckdyb3VwOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdFZhbHVlZmxhZyA9PT0gZmFsc2UpIHsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JBc3NldFVVSUQgPSB0aGlzLmFzc2V0TmFtZVVVSUQ7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yQXNzZXRHcm91cFVVSUQgPSB0aGlzLmFzc2V0R3JvdXBzVVVJRDsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyVVVJRCA9IHRoaXMuYXNzaWduZWRVc2VyVVVJRDsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEID0gdGhpcy5hc3NpZ25lZFVzZXJHcm91cFVVSUQ7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImFkLWhvYyIpIHsKICAgICAgICByZXF1ZXN0T2JqLmluc3BlY3Rpb25UeXBlID0gImFkLWhvYyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVxdWVzdE9iai5pbnNwZWN0aW9uVHlwZSA9ICJzY2hlZHVsZWQiOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJ3ZWVrbHkiKSB7CiAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gdGhpcy53ZWVrRGF5OwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJjdXN0b20iICYmIHJlcXVlc3RPYmoucmVwZWF0RXZlcnlUeXBlID09ICJ3ZWVrIikgewogICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY3VzdG9tV2Vla0RheSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gIm1vbnRobHkiKSB7CiAgICAgICAgcmVxdWVzdE9iai5tb250aGx5RGF0ZSA9IG1vbWVudCh0aGlzLm1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiZGFpbHkiIHx8IHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAid2Vla2x5IiB8fCB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gIm1vbnRobHkiIHx8IHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAieWVhcmx5IikgewogICAgICAgIGlmIChyZXF1ZXN0T2JqLnNlbGVjdGVkU2NoZWR1bGUgPT09ICJ5ZWFybHkiKSB7CiAgICAgICAgICBkZWJ1Z2dlcjsgLy8gY29uc29sZS5sb2coInRoaXMuY3VzdG9tWWVhck1vbnRoIiwgdGhpcy5jdXN0b21ZZWFyTW9udGgpOwogICAgICAgICAgLy8gZGVidWdnZXI7CiAgICAgICAgICAvLyByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmN1c3RvbVllYXJNb250aCk7CiAgICAgICAgICAvLyBkZWJ1Z2dlcjsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXF1ZXN0T2JqLmN1c3RvbVllYXJNb250aCcscmVxdWVzdE9iai5jdXN0b21ZZWFyTW9udGgpCiAgICAgICAgfSAvLwlyZXF1ZXN0T2JqLm1vbnRobHlEYXRlID0gbW9tZW50KHRoaXMuQ3VzdG9tTW9udGhseURhdGUpLmZvcm1hdCgpOwoKCiAgICAgICAgaWYgKHJlcXVlc3RPYmoucmVwZWF0RXZlcnlUeXBlID09PSAid2VlayIpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY3VzdG9tV2Vla0RheSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5uZXZlciA9PSB0cnVlKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZFR5cGUgPSAibmV2ZXIiOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMub24gPT0gdHJ1ZSkgewogICAgICAgICAgcmVxdWVzdE9iai5lbmRUeXBlID0gIm9uIjsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kRGF0ZSA9IG1vbWVudCh0aGlzLkN1c3RvbU1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmFmdGVyID09IHRydWUpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kVHlwZSA9ICJhZnRlciI7CiAgICAgICAgICByZXF1ZXN0T2JqLm9jY3VycmVuY2UgPSB0aGlzLm9jY3VyYW5jZXNWYWx1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGxldCByZW1pbmRlckFycmF5ID0gW107CgogICAgICBmb3IgKGxldCBmaWVsZCBvZiB0aGlzLnJlbWluZGVyQXJyYXkpIHsKICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgcmVtaW5kZXI6IGZpZWxkLnJlbWluZGVyLAogICAgICAgICAgZHVyYXRpb25WYWx1ZTogZmllbGQuZHVyYXRpb25WYWx1ZSwKICAgICAgICAgIGR1cmF0aW9uVHlwZTogZmllbGQuZHVyYXRpb25UeXBlCiAgICAgICAgfTsKICAgICAgICByZW1pbmRlckFycmF5LnB1c2gob2JqKTsKICAgICAgICByZXF1ZXN0T2JqLnJlbWluZGVyID0gSlNPTi5zdHJpbmdpZnkocmVtaW5kZXJBcnJheSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZUFzc2lnbmVkVGVtcGxhdGUiLCByZXF1ZXN0T2JqKTsKICAgICAgdGhpcy50ZW1wT2JqLmVkaXRGbGFnID0gZmFsc2U7CiAgICB9LAoKICAgIGdldEV4aXN0aW5nSW5zcGVjdGlvblRlbXBsYXRlKHV1aWQsIHRlbmFudFVVSUQpIHsKICAgICAgbGV0IGluc3BlY3Rpb25JdGVtID0gbnVsbDsKICAgICAgSW5zcGVjdGlvblNlcnZpY2UuZ2V0SW5zcGVjdGlvblRlbXBsYXRlQnlVVUlEKHV1aWQsIHRlbmFudFVVSUQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgLy8gaWYodGhpcy5FZGl0U2NoZVRlbmFudFVVSWQgIT09ICIiICYmIHRoaXMuRWRpdFNjaGVJZCAhPT0gIiIpewogICAgICAgICAgLy8gICB0aGlzLmluc3BlY3Rpb25JdGVtQ2F0ZWdvcmllcyA9CiAgICAgICAgICAvLyAgICAgcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uVGVtcGxhdGUuaW5zcGVjdGlvbkl0ZW1DYXRlZ29yaWVzOwogICAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKCdlZGl0JyxyZXNwb25zZS5kYXRhLmluc3BlY3Rpb25UZW1wbGF0ZSkKICAgICAgICAgIC8vIH0KICAgICAgICAgIHRoaXMuZ3JvdXBBc3NldE9wdGlvbnMgPSByZXNwb25zZS5kYXRhLmFzc2V0QW5kR3JvdXBzTmFtZVJlc3BvbnNlLmFzc2V0RFRPUzsKICAgICAgICAgIHRoaXMuYXNzZXRHcm91cE9wdGlvbnMgPSByZXNwb25zZS5kYXRhLmFzc2V0QW5kR3JvdXBzTmFtZVJlc3BvbnNlLmFzc2V0R3JvdXBEVE9TOwogICAgICAgICAgdGhpcy51c2VyR3JvdXBzID0gcmVzcG9uc2UuZGF0YS51c2VyQW5kR3JvdXBSZXNwb25zZS51c2VyR3JvdXBEVE9TOwogICAgICAgICAgdGhpcy5hc3NpZ25Vc2VycyA9IHJlc3BvbnNlLmRhdGEudXNlckFuZEdyb3VwUmVzcG9uc2UudXNlckRUT1M7CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblRlbXBsYXRlICE9IG51bGwpIHsKICAgICAgICAgICAgaW5zcGVjdGlvbkl0ZW0gPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25UZW1wbGF0ZTsKICAgICAgICAgICAgdGhpcy5pbnNwZWN0aW9uVGVtcGxhdGUgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25UZW1wbGF0ZTsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID0gaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5VHlwZTsKICAgICAgICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0ID0gaW5zcGVjdGlvbkl0ZW0uc2VsZWN0ZWRVc2VyQXNzZXROYW1lOwogICAgICAgICAgICB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkID0gaW5zcGVjdGlvbkl0ZW0uc2VsZWN0ZWRVc2VyQXNzZXRVVUlEOwoKICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT09ICJzY2hlZHVsZXIiKSB7CiAgICAgICAgICAgICAgdGhpcy5uYW1lID0gaW5zcGVjdGlvbkl0ZW0ubmFtZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmVuZFR5cGUgPT0gIm9uIikgewogICAgICAgICAgICAgIHRoaXMuQ3VzdG9tTW9udGhseURhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uZW5kRGF0ZSkuZm9ybWF0KCJERCBNTU0gWVlZWSIpOwogICAgICAgICAgICAgIHRoaXMub24gPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKGluc3BlY3Rpb25JdGVtLmVuZFR5cGUgPT0gIm5ldmVyIikgewogICAgICAgICAgICAgIHRoaXMubmV2ZXIgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuYWZ0ZXIgPSB0cnVlOwogICAgICAgICAgICAgIHRoaXMub2NjdXJhbmNlc1ZhbHVlID0gaW5zcGVjdGlvbkl0ZW0ub2NjdXJyZW5jZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeVR5cGUgPT09ICJhZC1ob2MiKSB7CiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID0gaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5VHlwZTsKICAgICAgICAgICAgICB0aGlzLmFkaG9jZGF0ZSA9IG1vbWVudChpbnNwZWN0aW9uSXRlbS5kZWFkTGluZURhdGUpLmZvcm1hdCgiREQgTU1NIFlZWVkiKTsKICAgICAgICAgICAgICB2YXIgcmVhbFRpbWUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uZGVhZExpbmVEYXRlKS5mb3JtYXQoIkhIOm1tIik7CiAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gbW9tZW50LmR1cmF0aW9uKHsKICAgICAgICAgICAgICAgIGhvdXJzOiA1CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy5hZGhvY3RpbWUgPSByZWFsVGltZTsKICAgICAgICAgICAgICB0aGlzLmluZGV4UmVtaW5kZXIrKzsKICAgICAgICAgICAgICB0aGlzLmluZGV4UmVtaW5kZXIrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeVR5cGUgPT09ICJkYWlseSIpIHsKICAgICAgICAgICAgICB2YXIgcmVhbFRpbWVEYWlseSA9IG1vbWVudChpbnNwZWN0aW9uSXRlbS5kZWFkTGluZURhdGUpLmZvcm1hdCgiSEg6bW0iKTsKICAgICAgICAgICAgICB0aGlzLmRhaWx5RGVhZExpbmVUaW1lID0gcmVhbFRpbWVEYWlseTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeVR5cGUgPT09ICJ3ZWVrbHkiKSB7CiAgICAgICAgICAgICAgdGhpcy53ZWVrRGF5ID0gaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5RGF5czsKICAgICAgICAgICAgICB0aGlzLmN1c3RvbVdlZWtEYXkgPSBKU09OLnBhcnNlKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeURheXMpOwogICAgICAgICAgICAgIHRoaXMuaW5kZXhSZW1pbmRlcisrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5VHlwZSA9PT0gInllYXJseSIpIHsKICAgICAgICAgICAgICB0aGlzLmN1c3RvbU1vbnRobHkgPSBpbnNwZWN0aW9uSXRlbS5yZXBlYXRNb250aERheTsKICAgICAgICAgICAgICB0aGlzLmN1c3RvbVdlZWtEYXkgPSBKU09OLnBhcnNlKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeURheXMpOwogICAgICAgICAgICAgIHRoaXMuaW5kZXhSZW1pbmRlcisrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5VHlwZSA9PT0gIm1vbnRobHkiKSB7CiAgICAgICAgICAgICAgdGhpcy5jdXN0b21Nb250aGx5ID0gaW5zcGVjdGlvbkl0ZW0ucmVwZWF0TW9udGhEYXk7CiAgICAgICAgICAgICAgdGhpcy5pbmRleFJlbWluZGVyKys7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlID09PSAiY3VzdG9tIikgewogICAgICAgICAgICAgIHRoaXMuY3VzdG9tV2VlayA9IGluc3BlY3Rpb25JdGVtLnJlcGVhdEV2ZXJ5VHlwZTsKICAgICAgICAgICAgICB0aGlzLmN1c3RvbVZhbHVlID0gaW5zcGVjdGlvbkl0ZW0ucmVwZWF0RXZlcnlUaW1lOwogICAgICAgICAgICAgIHRoaXMuY3VzdG9tTW9udGhseSA9IGluc3BlY3Rpb25JdGVtLnJlcGVhdE1vbnRoRGF5OwoKICAgICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5RGF5cyAhPSAiIikgewogICAgICAgICAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gSlNPTi5wYXJzZShpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lEYXlzKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5lbmRUeXBlID09PSAibmV2ZXIiKSB7CiAgICAgICAgICAgICAgICB0aGlzLm5ldmVyID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluc3BlY3Rpb25JdGVtLmVuZFR5cGUgPT09ICJvbiIpIHsKICAgICAgICAgICAgICAgIHRoaXMub24gPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5DdXN0b21Nb250aGx5RGF0ZSA9IG1vbWVudChpbnNwZWN0aW9uSXRlbS5lbmREYXRlKS5mb3JtYXQoIkREIE1NTSBZWVlZIik7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnNwZWN0aW9uSXRlbS5lbmRUeXBlID09PSAiYWZ0ZXIiKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFmdGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMub2NjdXJhbmNlc1ZhbHVlID0gaW5zcGVjdGlvbkl0ZW0ub2NjdXJyZW5jZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yVXNlclVVSUQgIT09ICIiICYmIGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyVVVJRCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHRoaXMuYXNzaWduZWUgPSAidXNlciI7CgogICAgICAgICAgICAgIGlmICh0aGlzLmFzc2lnblVzZXJzLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICAgICAgbGV0IHVzZXIgPSB0aGlzLmFzc2lnblVzZXJzLmZpbmQodSA9PiB1LnV1aWQgPT09IGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyVVVJRCk7CgogICAgICAgICAgICAgICAgaWYgKHVzZXIgIT09IHVuZGVmaW5lZCAmJiB1c2VyICE9PSBudWxsICYmIHVzZXIgIT09IHt9KSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gdXNlci5uYW1lOwogICAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlclVVSUQgPSB1c2VyLnV1aWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLnVzZXJJZCsrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvclVzZXJHcm91cFVVSUQgIT09ICIiICYmIGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMudXNlckdyb3Vwcy5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgICAgIGxldCBncm91cCA9IHRoaXMudXNlckdyb3Vwcy5maW5kKGcgPT4gZy51dWlkID09PSBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yVXNlckdyb3VwVVVJRCk7CgogICAgICAgICAgICAgICAgaWYgKGdyb3VwICE9PSB1bmRlZmluZWQgJiYgZ3JvdXAgIT09IG51bGwgJiYgZ3JvdXAgIT09IHt9KSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgPSBncm91cC5uYW1lOwogICAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlckdyb3VwVVVJRCA9IGdyb3VwLnV1aWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVlID0gInVzZXIiOwogICAgICAgICAgICAgIHRoaXMudXNlckdyb3VwSWQrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmFzc2V0VVVJRCAhPT0gIiIgJiYgaW5zcGVjdGlvbkl0ZW0uYXNzZXRVVUlEICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBBc3NldE9wdGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgbGV0IGFzc2V0ID0gdGhpcy5ncm91cEFzc2V0T3B0aW9ucy5maW5kKGEgPT4gYS51dWlkID09PSBpbnNwZWN0aW9uSXRlbS5hc3NldFVVSUQpOwoKICAgICAgICAgICAgICAgIGlmIChhc3NldCAhPT0gdW5kZWZpbmVkICYmIGFzc2V0ICE9PSBudWxsICYmIGFzc2V0ICE9PSB7fSkgewogICAgICAgICAgICAgICAgICB0aGlzLmFzc2V0TmFtZSA9IGFzc2V0Lm5hbWU7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXROYW1lVVVJRCA9IGFzc2V0LnV1aWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVlID0gImFzc2V0IjsKCiAgICAgICAgICAgICAgaWYgKHRoaXMuYXNzaWduVXNlcnMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgICAgICBsZXQgdXNlciA9IHRoaXMuYXNzaWduVXNlcnMuZmluZCh1ID0+IHUudXVpZCA9PT0gaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvclVzZXJVVUlEKTsKCiAgICAgICAgICAgICAgICBpZiAodXNlciAhPT0gdW5kZWZpbmVkICYmIHVzZXIgIT09IG51bGwgJiYgdXNlciAhPT0ge30pIHsKICAgICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXIgPSB1c2VyLm5hbWU7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyVVVJRCA9IHVzZXIudXVpZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMuYXNzZXRJZCsrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEICE9PSAiIiAmJiBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yQXNzZXRHcm91cFVVSUQgIT09IG51bGwpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5hc3NldEdyb3VwT3B0aW9ucy5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgICAgIGxldCBhc3NldEdyb3VwID0gdGhpcy5hc3NldEdyb3VwT3B0aW9ucy5maW5kKGFnID0+IGFnLnV1aWQgPT09IGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JBc3NldEdyb3VwVVVJRCk7CgogICAgICAgICAgICAgICAgaWYgKGFzc2V0R3JvdXAgIT09IHVuZGVmaW5lZCAmJiBhc3NldEdyb3VwICE9PSBudWxsICYmIGFzc2V0R3JvdXAgIT09IHt9KSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRHcm91cHMgPSBhc3NldEdyb3VwLmdyb3VwTmFtZTsKICAgICAgICAgICAgICAgICAgdGhpcy5hc3NldEdyb3Vwc1VVSUQgPSBhc3NldEdyb3VwLnV1aWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZSA9ICJhc3NldCI7CiAgICAgICAgICAgICAgICB0aGlzLmFzc2V0R3JvdXBJZCsrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IHJlbWluZCA9IEpTT04ucGFyc2UoaW5zcGVjdGlvbkl0ZW0ucmVtaW5kZXIpOwoKICAgICAgICAgICAgaWYgKHJlbWluZCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHRoaXMucmVtaW5kZXJBcnJheSA9IFtdOwoKICAgICAgICAgICAgICBmb3IgKGxldCBmaWVsZCBvZiByZW1pbmQpIHsKICAgICAgICAgICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICAgICAgICAgIHJlbWluZGVyOiBmaWVsZC5yZW1pbmRlciwKICAgICAgICAgICAgICAgICAgZHVyYXRpb25WYWx1ZTogZmllbGQuZHVyYXRpb25WYWx1ZSwKICAgICAgICAgICAgICAgICAgZHVyYXRpb25UeXBlOiBmaWVsZC5kdXJhdGlvblR5cGUsCiAgICAgICAgICAgICAgICAgIHJlbWluZGVyT3B0aW9uczogW3sKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiRW1haWwiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiZW1haWwiCiAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiU01TIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInNtcyIKICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJOb3RpZmljYXRpb24iLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAibm90aWZpY2F0aW9uIgogICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgZHVyYXRpb25UeXBlT3B0aW9uczogW3sKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiTWludXRlcyIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJtaW51dGVzIgogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIkhvdXJzIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogImhvdXJzIgogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIkRheXMiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiZGF5cyIKICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJXZWVrcyIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ3ZWVrcyIKICAgICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXkucHVzaChvYmopOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5pbmRleFJlbWluZGVyKys7CiAgICAgICAgICAgIHRoaXMuZHVyYXRpb25UeXBlSUQrKzsKICAgICAgICAgICAgdGhpcy5yZW1pbmRlckluZGV4Kys7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKTsKICAgIHRoaXMuZ2V0QWxsVGVtcGxhdGUoKTsKICAgIHRoaXMubmFtZSA9IHRoaXMudGVtcE9iai5uYW1lOwogICAgdGhpcy50ZW1wbGF0ZVVVSUQgPSB0aGlzLnRlbXBPYmoudXVpZDsKCiAgICBpZiAodGhpcy5jYWxlbmRlckRhdGVPYmogPT0gdW5kZWZpbmVkIHx8IHRoaXMuY2FsZW5kZXJEYXRlT2JqID09ICIiKSB7CiAgICAgIGxldCBDdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBzdWJPbmVIb3VyID0gbW9tZW50KEN1cnJlbnREYXRlKS5zdWJ0cmFjdCgxLCAiaCIpLmZvcm1hdCgpOwogICAgICBsZXQgc3RhcnRUaW1lID0gbmV3IERhdGUoQ3VycmVudERhdGUpOwogICAgICBsZXQgZW5kVGltZSA9IG5ldyBEYXRlKHN1Yk9uZUhvdXIpOwogICAgICBsZXQgdGVtcE9iaiA9IHsKICAgICAgICBjYW5jZWw6IGZhbHNlLAogICAgICAgIGVsZW1lbnQ6ICIiLAogICAgICAgIGVuZFRpbWU6IGVuZFRpbWUsCiAgICAgICAgaXNBbGxEYXk6IGZhbHNlLAogICAgICAgIG5hbWU6ICJjZWxsQ2xpY2siLAogICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lCiAgICAgIH07IC8vCXRoaXMuY2FsZW5kZXJEYXRlT2JqID0gdGVtcE9iajsKICAgIH0KCiAgICB0aGlzLmdldEV4aXN0aW5nSW5zcGVjdGlvblRlbXBsYXRlKCJub25lIiwgdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCk7CgogICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgIT09ICJzY2hlZHVsZXIiKSB7CiAgICAgIGlmICh0aGlzLnRlbXBPYmouZWRpdEZsYWcgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICAgIHRoaXMuZ2V0RXhpc3RpbmdJbnNwZWN0aW9uVGVtcGxhdGUodGhpcy50ZW1wbGF0ZVVVSUQsIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQpOwogICAgICB9CiAgICB9CiAgfSwKCiAgd2F0Y2g6IHsKICAgIEVkaXRTY2hlVGVuYW50VVVJZDogZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmICh0aGlzLkVkaXRTY2hlVGVuYW50VVVJZCAhPT0gIiIgJiYgdGhpcy5FZGl0U2NoZUlkICE9PSAiIikgewogICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgICAgdGhpcy5nZXRFeGlzdGluZ0luc3BlY3Rpb25UZW1wbGF0ZSh0aGlzLkVkaXRTY2hlSWQsIHRoaXMuRWRpdFNjaGVUZW5hbnRVVUlkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmluc3BlY3Rpb25JdGVtQ2F0ZWdvcmllcyA9ICIiOwogICAgICB9CiAgICB9CiAgfSwKICB2YWxpZGF0aW9uczogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogewogICAgICAgIHJlcXVpcmVkCiAgICAgIH0sCiAgICAgIHNlbGVjdGVkU2NoZWR1bGU6IHsKICAgICAgICByZXF1aXJlZAogICAgICB9LAogICAgICBzZWxlY3RlZFRlbXBsYXRlOiB7CiAgICAgICAgcmVxdWlyZWQKICAgICAgfSwKICAgICAgcmVtaW5kZXJBcnJheTogewogICAgICAgICRlYWNoOiB7CiAgICAgICAgICByZW1pbmRlcjogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIGR1cmF0aW9uVmFsdWU6IHsKICAgICAgICAgICAgcmVxdWlyZWQsCiAgICAgICAgICAgIG1pblZhbHVlOiBtaW5WYWx1ZSgwKQogICAgICAgICAgfSwKICAgICAgICAgIGR1cmF0aW9uVHlwZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgLi4udGhpcy5nZXRBZGhvY1ZhbGlkYXRpb24sCiAgICAgIC4uLnRoaXMuZ2V0RGFpbHlWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmdldFdlZWtseVZhbGlkYXRpb24sCiAgICAgIC4uLnRoaXMuZ2V0TW9udGhseVZhbGlkYXRpb24sCiAgICAgIC4uLnRoaXMuY3VzdG9tVmFsaWRhdGlvbnMsCiAgICAgIC4uLnRoaXMuYXNzaWduVmFsaWRhdGlvbnMsCiAgICAgIC4uLnRoaXMuY3VzdG9tT24sCiAgICAgIC4uLnRoaXMuc2VsZWN0ZWRUZW1wbGF0ZUZ1bmMsCiAgICAgIC4uLnRoaXMuZ2V0WWVhcmx5VmFsaWRhdGlvbgogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBnZXRZZWFybHlWYWxpZGF0aW9uKCkgewogICAgICBsZXQgdmFsaWRhdGlvbnMgPSB7fTsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgIT0gInllYXJseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsvLyBjdXN0b21WYWx1ZToge30sCiAgICAgICAgICAvLyBjdXN0b21XZWVrRGF5OiB7fSwKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRpb25zID0gey8vIGN1c3RvbVZhbHVlOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICAvLyBjdXN0b21XZWVrRGF5OiB7IHJlcXVpcmVkIH0sCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfSwKCiAgICBzZWxlY3RlZFRlbXBsYXRlRnVuYygpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy4kcm91dGUubmFtZSAhPSAic2NoZWR1bGVyIikgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgc2VsZWN0ZWRUZW1wbGF0ZToge30KICAgICAgICB9OwogICAgICB9IGVsc2UgaWYgKCF0aGlzLnRlbXBPYmouZWRpdEZsYWcpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIHNlbGVjdGVkVGVtcGxhdGU6IHt9CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIHNlbGVjdGVkVGVtcGxhdGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAoKICAgIGdldEFkaG9jVmFsaWRhdGlvbigpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJhZC1ob2MiKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBhZGhvY2RhdGU6IHt9LAogICAgICAgICAgYWRob2N0aW1lOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBhZGhvY2RhdGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBhZGhvY3RpbWU6IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAoKICAgIGdldERhaWx5VmFsaWRhdGlvbigpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJkYWlseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGRhaWx5RGVhZExpbmVUaW1lOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBkYWlseURlYWRMaW5lVGltZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0sCgogICAgZ2V0V2Vla2x5VmFsaWRhdGlvbigpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJ3ZWVrbHkiKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBjdXN0b21XZWVrRGF5OiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBjdXN0b21XZWVrRGF5OiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfSwKCiAgICBnZXRNb250aGx5VmFsaWRhdGlvbigpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJtb250aGx5IikgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgY3VzdG9tTW9udGhseToge30KICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgY3VzdG9tTW9udGhseTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0sCgogICAgY3VzdG9tVmFsaWRhdGlvbnMoKSB7CiAgICAgIGxldCB2YWxpZGF0aW9ucyA9IHt9OwoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSAhPSAiY3VzdG9tIikgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgY3VzdG9tV2Vlazoge30sCiAgICAgICAgICBjdXN0b21WYWx1ZToge30KICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgY3VzdG9tV2VlazogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIGN1c3RvbVZhbHVlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfSwKCiAgICBhc3NpZ25WYWxpZGF0aW9ucygpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5hc3NpZ25lZSAhPSAiIikgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgYXNzaWduZWU6IHt9LAogICAgICAgICAgYXNzaWduZWRVc2VyR3JvdXA6IHt9LAogICAgICAgICAgYXNzaWduZWRVc2VyOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBhc3NpZ25lZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfSwKICAgICAgICAgIGFzc2lnbmVkVXNlckdyb3VwOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9LAogICAgICAgICAgYXNzaWduZWRVc2VyOiB7CiAgICAgICAgICAgIHJlcXVpcmVkCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfSwKCiAgICBjdXN0b21PbigpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CgogICAgICBpZiAodGhpcy5vbiAhPSB0cnVlKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBvbjoge30sCiAgICAgICAgICBDdXN0b21Nb250aGx5RGF0ZToge30KICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgb246IHsKICAgICAgICAgICAgcmVxdWlyZWQKICAgICAgICAgIH0sCiAgICAgICAgICBDdXN0b21Nb250aGx5RGF0ZTogewogICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0KCiAgfQp9Ow=="},null]}