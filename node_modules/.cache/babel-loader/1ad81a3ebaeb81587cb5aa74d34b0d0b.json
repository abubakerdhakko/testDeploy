{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/inspection/InspectionDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/inspection/InspectionDetails.vue","mtime":1661968702436},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/babel.config.js","mtime":1661968702388},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":1662622637719},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1662622639723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFNpZGViYXIgZnJvbSAiLi4vaW5zcGVjdGlvbi9jb21wb25lbnRzL1NpZGViYXIiOwppbXBvcnQgSW5zcGVjdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZXMvSW5zcGVjdGlvblNlcnZpY2UiOwppbXBvcnQgUmVxdWVzdEluc3BlY3Rpb24gZnJvbSAiLi4vLi4vdmlld3MvaW5zcGVjdGlvbi9jb21wb25lbnRzL1JlcXVlc3RJbnNwZWN0aW9uIjsKaW1wb3J0IEFzc2V0TWFuYWdlbWVudFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZXMvQXNzZXRNYW5hZ2VtZW50U2VydmljZSI7CmltcG9ydCBBc3NldFBlcnNvbm5lbFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZXMvQXNzZXRQZXJzb25uZWxTZXJ2aWNlIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgSW5zcGVjdGlvbkl0ZW1zIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvSW5zcGVjdGlvbkl0ZW1zIjsKaW1wb3J0IGxvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvTG9hZGVyLnZ1ZSI7CnZhciBzdHJpbmdPcHRpb25zQXNzaWduVXNlcnMgPSBbXTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJJbnNwZWN0aW9uRGV0YWlscyIsCiAgY29tcG9uZW50czogewogICAgU2lkZWJhciwKICAgIFJlcXVlc3RJbnNwZWN0aW9uLAogICAgSW5zcGVjdGlvbkl0ZW1zLAogICAgbG9hZGVyCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwZGF0ZUNvbXA6IDAsCgogICAgICAvKiBUb2FzdCBQcm9wZXJ0aWVzICovCiAgICAgIHRvYXN0VGltZU91dDogMzAwMCwKICAgICAgdG9hc3RNZXNzYWdlOiAiIiwKICAgICAgdG9hc3RUeXBlOiAiIiwKICAgICAgdG9hc3RGbGFnOiAwLAoKICAgICAgLyogVG9hc3QgUHJvcGVydGllcyAqLwogICAgICBsb2FkZXJGbGFnOiBmYWxzZSwKICAgICAgYXNzZXRDYXRlZ29yeU9wdGlvbnM6IFtdLAogICAgICBhbGxBc3NldERhdGE6IFtdLAogICAgICBpbnNwZWN0aW9uRGV0YWlsOiB7fSwKICAgICAgcGFyZW50SW5zcGVjdGlvbkRldGFpbDoge30sCiAgICAgIGFzc2V0OiB7fSwKICAgICAgYWRkaXRpb25hbEluc3BlY3Rpb25zQWNjb3JkaW9uOiBmYWxzZSwKICAgICAgaW5zcGVjdGlvblJlcXVlc3Q6IGZhbHNlLAogICAgICBzZWxlY3RlZEluc3BlY3Rpb25JdGVtczogW10sCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBudW1iZXJPZlBhZ2VzOiAiIiwKICAgICAgZGF0YVBlbmRpbmc6IFtdLAogICAgICBpbnNwZWN0aW9uUmVwb3J0VVVJRDogIiIsCiAgICAgIGFsbFVzZXJzOiBbXSwKICAgICAgc3VibWl0dGVkSW5wZWN0aW9uOiBbXSwKICAgICAgaW1hZ2VWb2ljZXM6ICIiLAogICAgICBpbnNwZWN0aW9uUmVwb3J0SXRlbXM6ICIiLAogICAgICBhc3NldFVVSUQ6ICIiLAogICAgICB0ZW1wbGF0ZU5hbWU6ICIiLAogICAgICBpbnNwZWN0aW9uSXRlbXNsb2NhdGlvbnM6IFtdLAogICAgICBpbnNwZWN0aW9udXVpZDogIiIsCiAgICAgIFNlbGVjdGVkSXRlbXM6IHt9LAogICAgICB0eXBlOiAiQWQtaG9jIiwKICAgICAgcGFyZW50SW5zcGVjdGlvbjogIiIsCiAgICAgIFBhcmVudFVVSUQ6ICIiLAogICAgICBzZXJ2aWNlUmV1cWVzdERldGFpbDogIiIKICAgIH07CiAgfSwKCiAgcHJvcHM6IHsKICAgIGluc3BlY3Rpb25VVUlEOiB7fQogIH0sCiAgbWV0aG9kczogewogICAgY3JlYXRlQWRkaXRvbmFsSW5zcGVjdGlvbih2YWx1ZSkgewogICAgICBsZXQgY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpOwoKICAgICAgaWYgKHZhbHVlLmFzc2lnbmVkVG8gPT09ICJVc2VycyIpIHsKICAgICAgICB0aGlzLiR2LmFzc2lnbmVkVXNlci4kdG91Y2goKTsKCiAgICAgICAgaWYgKHRoaXMuJHYuYXNzaWduZWRVc2VyLiRlcnJvcikgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIlBsZWFzZSBTZWxlY3QgVXNlcnMiLCAiZXJyb3IiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh2YWx1ZS5zZWxlY3RlZFRlbXBsYXRlID09PSAiIikgewogICAgICAgIHRoaXMuc2hvd1RvYXN0KCJQbGVhc2UgU2VsZWN0IFRlbXBsYXRlIiwgImVycm9yIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBsZXQgYWRkSW5zcGVjdGlvblRlbXBsYXRlUmVxdWVzdCA9IHt9OwogICAgICBsZXQgaW5zcGVjdGlvblRlbXBsYXRlID0ge307CiAgICAgIGxldCBpbnNwZWN0aW9uSXRlbUNhdGVnb3JpZXMgPSBbXTsKICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLm5hbWUgPSB2YWx1ZS5uYW1lOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuZGVhZExpbmVEYXRlID0gbW9tZW50KHZhbHVlLmRlYWRsaW5lKS50b0lTT1N0cmluZygpOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuZGVhZExpbmVUaW1lID0gdmFsdWUuYWRob2NUaW1lOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuZGVzY3JpcHRpb24gPSBudWxsOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUudHlwZSA9IHRoaXMudHlwZSArICIgSW5zcGVjdGlvbiBSZXBvcnQiOwoKICAgICAgaWYgKHZhbHVlLmFzc2lnbmVkVXNlciA9PT0gIiIpIHsKICAgICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuY3JlYXRlZEZvclVzZXJVVUlEID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuY3JlYXRlZEZvclVzZXJVVUlEID0gdmFsdWUuYXNzaWduZWRVc2VyOwogICAgICB9CgogICAgICBpZiAodmFsdWUuYXNzaWduZWRVc2VyR3JvdXAgPT09ICIiKSB7CiAgICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuY3JlYXRlZEZvclVzZXJHcm91cFVVSUQgPSB2YWx1ZS5hc3NpZ25lZFVzZXJHcm91cDsKICAgICAgfQoKICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLm5ld0FkZGl0aW9uYWwgPSB0cnVlOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuc2VydmljZVJlcXVlc3RVVUlEID0gbnVsbDsKICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLnBhcmVudEluc3BlY3Rpb25VVUlEID0gdGhpcy4kcm91dGUucGFyYW1zLmluc3BlY3Rpb25VVUlEOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuY29tcGFueVVVSUQgPSBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZDsKICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLmFzc2V0Q2F0ZWdvcnlVVUlEID0gdGhpcy5hc3NldC5jYXRlZ29yeVVVSUQ7CiAgICAgIGluc3BlY3Rpb25UZW1wbGF0ZS5hc3NldFVVSUQgPSB0aGlzLmFzc2V0LnV1aWQ7CiAgICAgIGluc3BlY3Rpb25UZW1wbGF0ZS5mcmVxdWVuY3lUeXBlID0gImFkLWhvYyI7CiAgICAgIGluc3BlY3Rpb25UZW1wbGF0ZS5jcmVhdGVkQnlVc2VyVVVJRCA9IGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLnVzZXJpZDsKICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLmNyZWF0ZWRCeVVzZXJOYW1lID0gY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUuZmlyc3ROYW1lICsgIiAiICsgY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUubGFzdE5hbWU7CiAgICAgIGxldCByZW1pbmRlcmFycmF5ID0gW107CgogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdmFsdWUucmVtaW5kZXJBcnJheS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgcmVtaW5kZXI6IHZhbHVlLnJlbWluZGVyQXJyYXlbaW5kZXhdLnJlbWluZGVyLAogICAgICAgICAgZHVyYXRpb25WYWx1ZTogdmFsdWUucmVtaW5kZXJBcnJheVtpbmRleF0uZHVyYXRpb25WYWx1ZSwKICAgICAgICAgIGR1cmF0aW9uVHlwZTogdmFsdWUucmVtaW5kZXJBcnJheVtpbmRleF0uZHVyYXRpb25UeXBlCiAgICAgICAgfTsKICAgICAgICByZW1pbmRlcmFycmF5LnB1c2gob2JqKTsKICAgICAgICBpbnNwZWN0aW9uVGVtcGxhdGUucmVtaW5kZXIgPSBKU09OLnN0cmluZ2lmeShyZW1pbmRlcmFycmF5KTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHZhbHVlLnNlbGVjdGVkVGVtcGxhdGUubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgbGV0IGluc3BlY3Rpb25JdGVtQ2F0ZWdvcnkgPSB7fTsKICAgICAgICBsZXQgaW5zcGVjdGlvbkl0ZW1zID0gW107CiAgICAgICAgaW5zcGVjdGlvbkl0ZW1DYXRlZ29yeS5uYW1lID0gdmFsdWUuc2VsZWN0ZWRUZW1wbGF0ZVtpbmRleF0uaXRlbU5hbWUudmFsdWU7CiAgICAgICAgbGV0IGFuc3dlcnMgPSB2YWx1ZS5zZWxlY3RlZFRlbXBsYXRlW2luZGV4XS5hbnN3ZXJzLnZhbHVlOwogICAgICAgIGxldCBhbnN3ZXIgPSBbXTsKCiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGFuc3dlcnMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICBhbnN3ZXIucHVzaChhbnN3ZXJzW2luZGV4XS52YWx1ZSk7CiAgICAgICAgfQoKICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgbmFtZTogdmFsdWUuc2VsZWN0ZWRUZW1wbGF0ZVtpbmRleF0uaXRlbU5hbWUudmFsdWUsCiAgICAgICAgICAvLwlhbnN3ZXJzOiB2YWx1ZS5zZWxlY3RlZFRlbXBsYXRlW2luZGV4XS5hbnN3ZXJzLnZhbHVlLAogICAgICAgICAgdHlwZTogdmFsdWUuc2VsZWN0ZWRUZW1wbGF0ZVtpbmRleF0udHlwZS52YWx1ZSwKICAgICAgICAgIG1hbmRhdG9yeTogdmFsdWUuc2VsZWN0ZWRUZW1wbGF0ZVtpbmRleF0ubWFuZGF0b3J5LnZhbHVlLAogICAgICAgICAgZGVzY3JpcHRpb246ICIiCiAgICAgICAgfTsKICAgICAgICBvYmouYW5zd2VycyA9IGFuc3dlcjsKICAgICAgICBpbnNwZWN0aW9uSXRlbUNhdGVnb3JpZXMucHVzaChpbnNwZWN0aW9uSXRlbUNhdGVnb3J5KTsKICAgICAgICBpbnNwZWN0aW9uSXRlbXMucHVzaChvYmopOwogICAgICAgIGluc3BlY3Rpb25JdGVtQ2F0ZWdvcnkuaW5zcGVjdGlvbkl0ZW1zID0gaW5zcGVjdGlvbkl0ZW1zOwogICAgICB9CgogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuaW5zcGVjdGlvbkl0ZW1DYXRlZ29yaWVzID0gaW5zcGVjdGlvbkl0ZW1DYXRlZ29yaWVzOwogICAgICBhZGRJbnNwZWN0aW9uVGVtcGxhdGVSZXF1ZXN0Lmluc3BlY3Rpb25UZW1wbGF0ZSA9IGluc3BlY3Rpb25UZW1wbGF0ZTsgLy9yZXR1cm47CgogICAgICBJbnNwZWN0aW9uU2VydmljZS5hZGRJbnNwZWN0aW9uVGVtcGxhdGVPZkluc3BlY3Rpb25SZXF1ZXN0KGFkZEluc3BlY3Rpb25UZW1wbGF0ZVJlcXVlc3QpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiQWRkaXRvbmFsIFNjaGVkdWxlIENyZWF0ZWQgU3VjY2Vzc2Z1bHkiLCAic3VjY2VzcyIpOwogICAgICAgICAgdGhpcy5pbnNwZWN0aW9uUmVxdWVzdCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5zdWJtaXR0ZWRBbmRQZW5kaW5nSW5zcGVjdGlvbigpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNikgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIlJlcXVlc3QgRXJyb3IiLCAiZXJyb3IiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkFuIHVuZXhwZWN0ZWQgRXJyb3IgT2NjdXJyZWQiLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBzZWxlY3RlZFRlbXBsYXRlcyh2YWx1ZSkgewogICAgICB0aGlzLlNlbGVjdGVkSXRlbXMgPSB2YWx1ZTsKICAgIH0sCgogICAgcmVxdWVzdEFkZGl0aW9uYWwoKSB7CiAgICAgIHRoaXMuaW5zcGVjdGlvblJlcXVlc3QgPSB0cnVlOwogICAgfSwKCiAgICBvcGVuUG9wVXAoaXRlbSkgewogICAgICBpZiAoaXRlbS5zdGF0dXMgPT09ICJQZW5kaW5nIikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJ2aWV3LWFzc2lnbmVkLXRlbXBsYXRlIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICB0ZW1wbGF0ZVVVSUQ6IGl0ZW0udXVpZCwKICAgICAgICAgICAgYXNzZXRVVUlEOiB0aGlzLmFzc2V0VVVJRCwKICAgICAgICAgICAgVGVtcGxhdGVUeXBlOiAiVmlldyIsCiAgICAgICAgICAgIGZsYWc6IHRydWUKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICBuYW1lOiAiaW5zcGVjdGlvbi1kZXRhaWxzIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBpbnNwZWN0aW9uVVVJRDogaXRlbS51dWlkLAogICAgICAgICAgICBpbnNwZWN0aW9uQ2hpbGQ6IHRydWUsCiAgICAgICAgICAgIHBhcmVudFVVSUQ6IHRoaXMuaW5zcGVjdGlvbnV1aWQsCiAgICAgICAgICAgIHNlcnZpY2VSZXF1ZXN0Q2hpbGQ6IGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9CiAgICB9LAoKICAgIG9wZW5QYXJlbnRJbnNwZWN0aW9uKHV1aWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgIG5hbWU6ICJpbnNwZWN0aW9uLWRldGFpbHMiLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaW5zcGVjdGlvblVVSUQ6IHV1aWQsCiAgICAgICAgICBpbnNwZWN0aW9uQ2hpbGQ6IGZhbHNlLAogICAgICAgICAgcGFyZW50VVVJRDogdGhpcy5pbnNwZWN0aW9udXVpZCwKICAgICAgICAgIHNlcnZpY2VSZXF1ZXN0Q2hpbGQ6IGZhbHNlCiAgICAgICAgfQogICAgICB9KTsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSwKCiAgICBvcGVuUGFyZW50U2VydmljZVJlcXVlc3QodmFsKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAic2VydmljZS1yZXF1ZXN0cy1kZXRhaWxzIiwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHNlcnZpY2VSZXF1ZXN0VVVJRDogdmFsLnV1aWQsCiAgICAgICAgICBzZXJ2aWNlUmVxdWVzdENoaWxkOiBmYWxzZSwKICAgICAgICAgIGlzc3VldXVpZDogdmFsLnV1aWQsCiAgICAgICAgICBhc3NldFVVSUQ6IHZhbC5hc3NldFVVSUQsCiAgICAgICAgICBpc3N1ZW51bWJlcjogdmFsLmlzc3VlTnVtYmVyLAogICAgICAgICAgdGVtcGxhdGVUeXBlOiAidmlld0lzc3VlIiwKICAgICAgICAgIGZsYWc6IHRydWUsCiAgICAgICAgICB3b3JrT3JkZXJUeXBlOiB2YWwud29ya09yZGVyTnVtYmVyCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuaW5zcGVjdGlvblJlcXVlc3QgPSBmYWxzZTsKICAgIH0sCgogICAgZ2V0QWxsVXNlcnMoKSB7CiAgICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKSk7CiAgICAgIEFzc2V0UGVyc29ubmVsU2VydmljZS5nZXRBbGxVc2VycyhjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgc3RyaW5nT3B0aW9uc0Fzc2lnblVzZXJzID0gW107CgogICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCByZXNwb25zZS5kYXRhLnVzZXJzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgdGhpcy5hbGxVc2Vycy5wdXNoKHsKICAgICAgICAgICAgbGFiZWw6IHJlc3BvbnNlLmRhdGEudXNlcnNbaW5kZXhdLmZpcnN0TmFtZSArICIgIiArIHJlc3BvbnNlLmRhdGEudXNlcnNbaW5kZXhdLmxhc3ROYW1lLAogICAgICAgICAgICBmaXJzdE5hbWU6IHJlc3BvbnNlLmRhdGEudXNlcnNbaW5kZXhdLmZpcnN0TmFtZSwKICAgICAgICAgICAgbGFzdE5hbWU6IHJlc3BvbnNlLmRhdGEudXNlcnNbaW5kZXhdLmxhc3ROYW1lLAogICAgICAgICAgICBwcm9maWxlSW1hZ2U6IHJlc3BvbnNlLmRhdGEudXNlcnNbaW5kZXhdLmltYWdlVXJsLAogICAgICAgICAgICB1dWlkOiByZXNwb25zZS5kYXRhLnVzZXJzW2luZGV4XS51dWlkCiAgICAgICAgICB9KTsKICAgICAgICAgIHN0cmluZ09wdGlvbnNBc3NpZ25Vc2Vycy5wdXNoKHJlc3BvbnNlLmRhdGEudXNlcnNbaW5kZXhdLm5hbWUpOwogICAgICAgIH0KCiAgICAgICAgc3RyaW5nT3B0aW9uc0Fzc2lnblVzZXJzLnNvcnQoKTsKICAgICAgICB0aGlzLnVzZXJzID0gW107CiAgICAgICAgdGhpcy51c2VycyA9IHRoaXMuYWxsVXNlcnM7CiAgICAgICAgdGhpcy5hc3NpZ25Vc2VycyA9IHN0cmluZ09wdGlvbnNBc3NpZ25Vc2VyczsKICAgICAgICB0aGlzLmFzc2lnbk5vVXNlcnNHcm91cCA9IHRoaXMuYXNzaWduVXNlcnM7IC8vdGhpcy5nZXRJbnNwZWN0aW9uVGVtcGxhdGVzKCk7CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuc2hvd1RvYXN0KGUuZGF0YS5yZXNwb25zZSwgImVycm9yIik7CiAgICAgIH0pOwogICAgfSwKCiAgICBhbGxJdGVtc0FjY29yZGlvbkZ1bmN0aW9uKCkgewogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmluc3BlY3Rpb25DaGlsZCA9PT0gInRydWUiIHx8IHRoaXMuJHJvdXRlLnBhcmFtcy5zZXJ2aWNlUmVxdWVzdENoaWxkID09PSAidHJ1ZSIpIHsKICAgICAgICB0aGlzLiRyZWZzLmFkZGl0aW9uYWxJbnNwZWN0aW9uc1NvdXJjZUFjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIGFkZGl0aW9uYWxJbnNwZWN0aW9uc0FjY29yZGlvbkZ1bmN0aW9uKCkgewogICAgICB0aGlzLiRyZWZzLmFsbEl0ZW1zQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CgogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmluc3BlY3Rpb25DaGlsZCA9PT0gInRydWUiIHx8IHRoaXMuJHJvdXRlLnBhcmFtcy5zZXJ2aWNlUmVxdWVzdENoaWxkID09PSAidHJ1ZSIpIHsKICAgICAgICB0aGlzLiRyZWZzLmFkZGl0aW9uYWxJbnNwZWN0aW9uc1NvdXJjZUFjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIGFkZGl0aW9uYWxJbnNwZWN0aW9uc1NvdXJjZUFjY29yZGlvbkZ1bmN0aW9uKCkgewogICAgICB0aGlzLiRyZWZzLmFsbEl0ZW1zQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICB9LAoKICAgIGdldEluc3BlY3Rpb25SZXBvcnQoKSB7CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmdldEluc3BlY3Rpb25SZXBvcnRCeVVVSUQodGhpcy4kcm91dGUucGFyYW1zLmluc3BlY3Rpb25VVUlEKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgJiYgcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uUmVwb3J0KSB7CiAgICAgICAgICB0aGlzLmFzc2V0VVVJRCA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblJlcG9ydC5hc3NldFVVSUQ7CiAgICAgICAgICB0aGlzLmluc3BlY3Rpb25SZXBvcnRJdGVtcyA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblJlcG9ydDsKICAgICAgICAgIC8qIFJlbW92ZSBFbGVtZW50IHdpdGggMCBpbnNwZWN0aW9uUmVwb3J0RmllbGRzICovCgogICAgICAgICAgbGV0IGluc3BlY3Rpb25fcmVwb3J0ID0gdGhpcy5pbnNwZWN0aW9uUmVwb3J0SXRlbXMuaW5zcGVjdGlvblJlcG9ydENhdGVnb3JpZXMuZmlsdGVyKGVsZW1lbnQgPT4gewogICAgICAgICAgICBpZiAoZWxlbWVudC5pbnNwZWN0aW9uUmVwb3J0RmllbGRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmluc3BlY3Rpb25SZXBvcnRJdGVtcy5pbnNwZWN0aW9uUmVwb3J0Q2F0ZWdvcmllcyA9IFtdOwogICAgICAgICAgdGhpcy5pbnNwZWN0aW9uUmVwb3J0SXRlbXMuaW5zcGVjdGlvblJlcG9ydENhdGVnb3JpZXMgPSBpbnNwZWN0aW9uX3JlcG9ydDsKICAgICAgICAgIC8qIFJlbW92ZSBFbGVtZW50IHdpdGggMCBpbnNwZWN0aW9uUmVwb3J0RmllbGRzICovCgogICAgICAgICAgdGhpcy5pbWFnZVZvaWNlcyA9IHJlc3BvbnNlLmRhdGEuaW1hZ2VWb2ljZXNIYXNobWFwOwogICAgICAgICAgdGhpcy5pbnNwZWN0aW9uRGV0YWlsID0gcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uUmVwb3J0OwogICAgICAgICAgdGhpcy5wYXJlbnRJbnNwZWN0aW9uID0gcmVzcG9uc2UuZGF0YS5wYXJlbnRJbnNwZWN0aW9uOwogICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSB0aGlzLmluc3BlY3Rpb25EZXRhaWwuaW5zcGVjdGlvbk51bWJlciArICIgfCAiICsgIkVyb2hhbCI7CiAgICAgICAgICBsZXQgaW5zcGVjdGlvblJlcG9ydCA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblJlcG9ydDsKICAgICAgICAgIGxldCBsb2NhdGlvbnMgPSBbXTsKICAgICAgICAgIGxldCB0b3RhbEZpZWxkcyA9IDA7CiAgICAgICAgICBsZXQgaXNzdWVGaWVsZHMgPSAwOwoKICAgICAgICAgIGZvciAobGV0IGNhdGVnb3J5SW5kZXggPSAwOyBjYXRlZ29yeUluZGV4IDwgaW5zcGVjdGlvblJlcG9ydC5pbnNwZWN0aW9uUmVwb3J0Q2F0ZWdvcmllcy5sZW5ndGg7IGNhdGVnb3J5SW5kZXgrKykgewogICAgICAgICAgICBmb3IgKGxldCBmaWVsZEluZGV4ID0gMDsgZmllbGRJbmRleCA8IGluc3BlY3Rpb25SZXBvcnQuaW5zcGVjdGlvblJlcG9ydENhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF0uaW5zcGVjdGlvblJlcG9ydEZpZWxkcy5sZW5ndGg7IGZpZWxkSW5kZXgrKykgewogICAgICAgICAgICAgIHRvdGFsRmllbGRzKys7CgogICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uUmVwb3J0Lmluc3BlY3Rpb25SZXBvcnRDYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdLmluc3BlY3Rpb25SZXBvcnRGaWVsZHNbZmllbGRJbmRleF0ubGF0ICE9IG51bGwgJiYgaW5zcGVjdGlvblJlcG9ydC5pbnNwZWN0aW9uUmVwb3J0Q2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XS5pbnNwZWN0aW9uUmVwb3J0RmllbGRzW2ZpZWxkSW5kZXhdLmxuZyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBsZXQgbG9jYXRpb24gPSB7CiAgICAgICAgICAgICAgICAgIGxhdDogaW5zcGVjdGlvblJlcG9ydC5pbnNwZWN0aW9uUmVwb3J0Q2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XS5pbnNwZWN0aW9uUmVwb3J0RmllbGRzW2ZpZWxkSW5kZXhdLmxhdCwKICAgICAgICAgICAgICAgICAgbG5nOiBpbnNwZWN0aW9uUmVwb3J0Lmluc3BlY3Rpb25SZXBvcnRDYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdLmluc3BlY3Rpb25SZXBvcnRGaWVsZHNbZmllbGRJbmRleF0ubG5nCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbG9jYXRpb25zLnB1c2gobG9jYXRpb24pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25SZXBvcnQuaW5zcGVjdGlvblJlcG9ydENhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF0uaW5zcGVjdGlvblJlcG9ydEZpZWxkc1tmaWVsZEluZGV4XS5pc3N1ZVJlcG9ydGluZyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBpc3N1ZUZpZWxkcysrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGluc3BlY3Rpb25SZXBvcnQuY3JlYXRlZEF0ID0gbW9tZW50KGluc3BlY3Rpb25SZXBvcnQuY3JlYXRlZEF0KS5mb3JtYXQoIkREIE1NTSBZWVlZIGhoOm1tIGEiKTsKICAgICAgICAgIGluc3BlY3Rpb25SZXBvcnQubG9jYXRpb25zID0gbG9jYXRpb25zOwogICAgICAgICAgaW5zcGVjdGlvblJlcG9ydC5pc3N1ZUNvdW50ID0gaXNzdWVGaWVsZHMgKyAiLyIgKyB0b3RhbEZpZWxkczsKICAgICAgICAgIGluc3BlY3Rpb25SZXBvcnQucGFzc0ZpZWxkcyA9IHRvdGFsRmllbGRzIC0gaXNzdWVGaWVsZHM7CiAgICAgICAgICBpbnNwZWN0aW9uUmVwb3J0LnRvdGFsRmllbGRzID0gdG90YWxGaWVsZHM7CiAgICAgICAgICB0aGlzLmluc3BlY3Rpb25SZXBvcnQgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25SZXBvcnQsIHRoaXMuaW5zcGVjdGlvbkl0ZW1zbG9jYXRpb25zID0gbG9jYXRpb25zOwogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZSwgdGhpcy5wYXNzRmllbGRQZXJjZW50YWdlID0gdGhpcy5pbnNwZWN0aW9uUmVwb3J0LnBhc3NGaWVsZHMgLyB0aGlzLmluc3BlY3Rpb25SZXBvcnQudG90YWxGaWVsZHM7CiAgICAgICAgICB0aGlzLnRlbXBsYXRlTmFtZSA9IGluc3BlY3Rpb25SZXBvcnQubmFtZTsgLy90aGlzLmdldEFjdGl2aXR5V2FsbCgpOwoKICAgICAgICAgIGlmIChpbnNwZWN0aW9uUmVwb3J0LmFzc2V0VVVJRCAhPSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0QXNzZXQoaW5zcGVjdGlvblJlcG9ydC5hc3NldFVVSUQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy51cGRhdGVDb21wKys7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiRmFpbGVkIHRvIGxvYWQgSW5zcGVjdGlvbiBSZXBvcnQhIiwgImVycm9yIik7CiAgICAgIH0pOwogICAgfSwKCiAgICBnZXRBc3NldCh1dWlkKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0QXNzZXROYW1lQW5kTnVtYmVyQW5kQ2F0ZWdvcnlCeUFzc2V0VVVJRCh1dWlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmFzc2V0ID0gcmVzcG9uc2UuZGF0YS5hc3NldEluZm9EVE87CiAgICAgICAgdGhpcy5hc3NldEluZGV4Kys7CiAgICAgICAgdGhpcy5zaG93ID0gdHJ1ZTsKICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5hc3NldEVycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiRmFpbGVkIHRvIGxvYWQgYXNzZXQgaW5mb3JtYXRpb24hLiIsICJlcnJvciIpOwogICAgICB9KTsKICAgIH0sCgogICAgYWRkVGVtcGxhdGVJdGVtcygpIHsKICAgICAgdGhpcy5zZWxlY3RlZEluc3BlY3Rpb25JdGVtcyA9IFtdOwogICAgICBsZXQgYXJyYXkgPSBbXTsKCiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmluc3BlY3Rpb25JdGVtRm9ybS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBpZiAodGhpcy5pbnNwZWN0aW9uSXRlbUZvcm1baW5kZXhdLnZhbHVlID09PSB0cnVlKSB7CiAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICBhbnN3ZXJzOiB0aGlzLmluc3BlY3Rpb25JdGVtRm9ybVtpbmRleF0uYW5zd2VycywKICAgICAgICAgICAgYXNrUXVlc3Rpb246IHRoaXMuaW5zcGVjdGlvbkl0ZW1Gb3JtW2luZGV4XS5hc2tRdWVzdGlvbiwKICAgICAgICAgICAgaXRlbU5hbWU6IHRoaXMuaW5zcGVjdGlvbkl0ZW1Gb3JtW2luZGV4XS5pdGVtTmFtZSwKICAgICAgICAgICAgbWFuZGF0b3J5OiB0aGlzLmluc3BlY3Rpb25JdGVtRm9ybVtpbmRleF0ubWFuZGF0b3J5LAogICAgICAgICAgICB0eXBlOiB0aGlzLmluc3BlY3Rpb25JdGVtRm9ybVtpbmRleF0udHlwZQogICAgICAgICAgfTsKICAgICAgICAgIGFycmF5LnB1c2gob2JqKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuc2VsZWN0ZWRJbnNwZWN0aW9uSXRlbXMgPSBhcnJheTsKICAgICAgICB0aGlzLm1vZGVsSW5zcGVjdGlvbiA9IGFycmF5OwogICAgICAgIHRoaXMuYnRuTGFiZWwgPSAiQ0hBTkdFIElOU1BFQ1RJT04gVEVNUExBVEUiOwogICAgICB9CgogICAgICB0aGlzLmluc3BlY3Rpb25UZW1wRGlhbG9nID0gZmFsc2U7CiAgICB9LAoKICAgIC8vIGdldEluc3BlY3Rpb25UZW1wbGF0ZXMoKSB7CiAgICAvLyAJbGV0IGN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UoCiAgICAvLyAJCWxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKQogICAgLy8gCSk7CiAgICAvLyAJSW5zcGVjdGlvblNlcnZpY2UuZ2V0UGFnaW5hdGVkSW5zcGVjdGlvblRlbXBsYXRlc0Zvckluc3BlY3Rpb24oCiAgICAvLyAJCTAsCiAgICAvLyAJCTUsCiAgICAvLyAJCWN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgLy8gCQl0aGlzLmluc3BlY3Rpb25SZXBvcnRVVUlECiAgICAvLyAJKQogICAgLy8gCQkudGhlbigocmVzcG9uc2UpID0+IHsKICAgIC8vIAkJCXRoaXMuY3VycmVudFBhZ2UgPSAwOwogICAgLy8gCQkJdGhpcy5udW1iZXJPZlBhZ2VzID0gIHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblRlbXBsYXRlLnRvdGFsUGFnZXMKICAgIC8vIAkJCXJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblRlbXBsYXRlLmNvbnRlbnQubWFwKChyZXBvcnQpID0+IHsKICAgIC8vIAkJCQlyZXBvcnQuY3JlYXRlZEF0ID0gbW9tZW50KHJlcG9ydC5jcmVhdGVkQXQpLmZvcm1hdCgKICAgIC8vIAkJCQkJIkREIE1NTSBZWVlZIGhoOm1tIGEiCiAgICAvLyAJCQkJKTsKICAgIC8vIAkJCX0pOwogICAgLy8gCQkJdGhpcy5kYXRhUGVuZGluZyA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblRlbXBsYXRlLmNvbnRlbnQ7CiAgICAvLyAJCQlmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5hbGxVc2Vycy5sZW5ndGg7IGluZGV4KyspIHsKICAgIC8vIAkJCQlmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZGF0YVBlbmRpbmcubGVuZ3RoOyBqKyspIHsKICAgIC8vIAkJCQkJaWYgKAogICAgLy8gCQkJCQkJdGhpcy5hbGxVc2Vyc1tpbmRleF0udXVpZCA9PT0KICAgIC8vIAkJCQkJCXRoaXMuZGF0YVBlbmRpbmdbal0uY3JlYXRlZEZvclVzZXJVVUlECiAgICAvLyAJCQkJCSkgewogICAgLy8gCQkJCQkJdGhpcy5kYXRhUGVuZGluZ1tqXS5hc3NpZ25lZFRvID0gdGhpcy5hbGxVc2Vyc1tpbmRleF0ubGFiZWw7CiAgICAvLyAJCQkJCX0KICAgIC8vIAkJCQl9CiAgICAvLyAJCQl9CiAgICAvLyAJCX0pCiAgICAvLyAJCS5jYXRjaCgoZXJyb3IpID0+IHsKICAgIC8vIAkJCWNvbnNvbGUubG9nKCJGZXRjaCBQZW5kaW5nIEluc3BlY3Rpb25zIEVycm9yIiwgZXJyb3IpOwogICAgLy8gCQkJYWxlcnQoIkFuIEVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIFBlbmRpbmcgSW5zcGVjdGlvbnMiKTsKICAgIC8vIAkJfSk7CiAgICAvLyB9LAogICAgLy8gZ2V0QWRkaXRvbmFsSW5zcGVjdGlvbihjdXJyZW50VXNlckRldGFpbHMpIHsKICAgIC8vIAlJbnNwZWN0aW9uU2VydmljZS5nZXRQYWdpbmF0ZWRBZGRpdG9uYWxJbnNwZWN0aW9ucygKICAgIC8vIAkJMCwKICAgIC8vIAkJNTAsCiAgICAvLyAJCWN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgLy8gCQl0aGlzLmluc3BlY3Rpb25SZXBvcnRVVUlECiAgICAvLyAJKQogICAgLy8gCQkudGhlbigocmVzcG9uc2UpID0+IHsKICAgIC8vIAkJCXJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblJlcG9ydHMuY29udGVudC5tYXAoKHJlcG9ydCkgPT4gewogICAgLy8gCQkJCXJlcG9ydC5jcmVhdGVkQXQgPSBtb21lbnQocmVwb3J0LmNyZWF0ZWRBdCkuZm9ybWF0KAogICAgLy8gCQkJCQkiREQgTU1NIFlZWVkgaGg6bW0gYSIKICAgIC8vIAkJCQkpOwogICAgLy8gCQkJfSk7CiAgICAvLyAJCQl0aGlzLnN1Ym1pdHRlZElucGVjdGlvbiA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblJlcG9ydHMuY29udGVudDsKICAgIC8vIAkJfSkKICAgIC8vIAkJLmNhdGNoKChlcnJvcikgPT4gewogICAgLy8gCQkJY29uc29sZS5sb2coIkZldGNoIEFkZGl0aW9uYWwgSW5zcGVjdGlvbnMgRXJyb3IiLCBlcnJvcik7CiAgICAvLyAJCQlhbGVydCgiQW4gRXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgQWRkaXRpb25hbCBJbnNwZWN0aW9ucyIpOwogICAgLy8gCQl9KTsKICAgIC8vIH0sCiAgICBwYWdpbmF0aW9uKHZhbHVlKSB7CiAgICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKSk7CiAgICAgIGxldCBvYmogPSB7CiAgICAgICAgbGltaXQ6IDUsCiAgICAgICAgb2Zmc2V0OiB2YWx1ZSwKICAgICAgICB0ZW5hbnRVVUlEOiBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCwKICAgICAgICBwYXJlbnRJbnNwZWN0aW9uVVVJRDogdGhpcy5pbnNwZWN0aW9uUmVwb3J0VVVJRCwKICAgICAgICBuZXdBZGRpdGlvbmFsOiB0cnVlCiAgICAgIH07CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmdldEluc3BlY3Rpb25UZW1wbGF0ZXNQZW5kaW5nYW5kU3VibWl0dGVkKG9iaikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHZhbHVlOwogICAgICAgIHRoaXMubnVtYmVyT2ZQYWdlcyA9IHJlc3BvbnNlLmRhdGEuY29udGVudC50b3RhbFBhZ2VzOwogICAgICAgIHJlc3BvbnNlLmRhdGEuY29udGVudC5hZGRpdGlvbmFsSW5zcGVjdGlvbi5tYXAocmVwb3J0ID0+IHsKICAgICAgICAgIHJlcG9ydC5jcmVhdGVkQXQgPSBtb21lbnQocmVwb3J0LmNyZWF0ZWRBdCkuZm9ybWF0KCJERCBNTU0gWVlZWSBoaDptbSBhIik7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5kYXRhUGVuZGluZyA9IHJlc3BvbnNlLmRhdGEuY29udGVudC5hZGRpdGlvbmFsSW5zcGVjdGlvbjsKCiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuYWxsVXNlcnMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZGF0YVBlbmRpbmcubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuYWxsVXNlcnNbaW5kZXhdLnV1aWQgPT09IHRoaXMuZGF0YVBlbmRpbmdbal0uY3JlYXRlZEZvclVzZXJVVUlEKSB7CiAgICAgICAgICAgICAgdGhpcy5kYXRhUGVuZGluZ1tqXS5hc3NpZ25lZFRvID0gdGhpcy5hbGxVc2Vyc1tpbmRleF0ubGFiZWw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiQW4gRXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgUGVuZGluZyBJbnNwZWN0aW9ucyIsICJlcnJvciIpOwogICAgICB9KTsKICAgIH0sCgogICAgc3VibWl0dGVkQW5kUGVuZGluZ0luc3BlY3Rpb24oKSB7CiAgICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKSk7CiAgICAgIGxldCBvYmogPSB7CiAgICAgICAgbGltaXQ6IDUsCiAgICAgICAgb2Zmc2V0OiAwLAogICAgICAgIHRlbmFudFVVSUQ6IGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgICAgIHBhcmVudEluc3BlY3Rpb25VVUlEOiB0aGlzLmluc3BlY3Rpb25SZXBvcnRVVUlELAogICAgICAgIG5ld0FkZGl0aW9uYWw6IHRydWUKICAgICAgfTsKICAgICAgSW5zcGVjdGlvblNlcnZpY2UuZ2V0SW5zcGVjdGlvblRlbXBsYXRlc1BlbmRpbmdhbmRTdWJtaXR0ZWQob2JqKS50aGVuKHJlcyA9PiB7CiAgICAgICAgcmVzLmRhdGEuY29udGVudC5hZGRpdGlvbmFsSW5zcGVjdGlvbi5tYXAocmVwb3J0ID0+IHsKICAgICAgICAgIHJlcG9ydC5jcmVhdGVkQXQgPSBtb21lbnQocmVwb3J0LmNyZWF0ZWRBdCkuZm9ybWF0KCJERCBNTU0gWVlZWSBoaDptbSBhIik7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5kYXRhUGVuZGluZyA9IHJlcy5kYXRhLmNvbnRlbnQuYWRkaXRpb25hbEluc3BlY3Rpb247CiAgICAgICAgdGhpcy5udW1iZXJPZlBhZ2VzID0gcmVzLmRhdGEuY29udGVudC50b3RhbFBhZ2VzOwogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICB0aGlzLnNob3dUb2FzdChlLmRhdGEucmVzcG9uc2UsICJlcnJvciIpOwogICAgICB9KTsKICAgIH0sCgogICAgc2V0U2lkZWJhclBvc2l0aW9uKCkgewogICAgICBsZXQgc0IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicG9zaXRpb24tc2lkZWJhci1jb250YWluZXIiKTsKICAgICAgbGV0IHNpZGViYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicG9zaXRpb24tc2lkZWJhciIpOwogICAgICBzQi5zdHlsZS53aWR0aCA9IHNpZGViYXIub2Zmc2V0V2lkdGggKyAicHgiOwogICAgICBzQi5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CiAgICAgIHNCLnN0eWxlLnRvcCA9IHNpZGViYXIub2Zmc2V0TGVmdDsKICAgICAgc0Iuc3R5bGUubGVmdCA9IHNpZGViYXIub2Zmc2V0TGVmdDsKICAgIH0sCgogICAgZ2V0QWxsQXNzZXQoY3VycmVudFVzZXJEZXRhaWxzKSB7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0QWxsQXNzZXRzKGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJlcy5kYXRhLmFzc2V0cy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICAgIHV1aWQ6IHJlcy5kYXRhLmFzc2V0c1tpbmRleF0udXVpZCwKICAgICAgICAgICAgY2F0ZWdvcnlVVUlEOiByZXMuZGF0YS5hc3NldHNbaW5kZXhdLmNhdGVnb3J5VVVJRCwKICAgICAgICAgICAgbGFiZWw6IHJlcy5kYXRhLmFzc2V0c1tpbmRleF0ubmFtZSwKICAgICAgICAgICAgdHlwZTogcmVzLmRhdGEuYXNzZXRzW2luZGV4XS50eXBlCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5hbGxBc3NldERhdGEucHVzaChvYmopOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGdldEFsbENhdGVnb3JpZXMoY3VycmVudFVzZXJEZXRhaWxzKSB7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0QWxsQXNzZXRDYXRlZ29yaWVzKGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJlcy5kYXRhLmNhdGVnb3JpZXMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICBpZDogcmVzLmRhdGEuY2F0ZWdvcmllc1tpbmRleF0uaWQsCiAgICAgICAgICAgIGNhdGVnb3J5VVVJRDogcmVzLmRhdGEuY2F0ZWdvcmllc1tpbmRleF0udXVpZCwKICAgICAgICAgICAgbGFiZWw6IHJlcy5kYXRhLmNhdGVnb3JpZXNbaW5kZXhdLm5hbWUKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmFzc2V0Q2F0ZWdvcnlPcHRpb25zLnB1c2gob2JqKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuZ2V0QWxsQXNzZXQoY3VycmVudFVzZXJEZXRhaWxzKTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICB0aGlzLnNob3dUb2FzdChlcnIuZGF0YS5yZXNwb25zZSwgImVycm9yIik7CiAgICAgIH0pOwogICAgfSwKCiAgICBnZXRQYXJlbnRJbnNwZWN0aW9uUmVwb3J0KCkgewogICAgICBJbnNwZWN0aW9uU2VydmljZS5nZXRJbnNwZWN0aW9uUmVwb3J0QnlVVUlEKHRoaXMuJHJvdXRlLnBhcmFtcy5wYXJlbnRVVUlEKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgJiYgcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uUmVwb3J0KSB7CiAgICAgICAgICB0aGlzLnBhcmVudEluc3BlY3Rpb25EZXRhaWwgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25SZXBvcnQ7CiAgICAgICAgICBsZXQgaW5zcGVjdGlvblJlcG9ydCA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblJlcG9ydDsKICAgICAgICAgIHRoaXMuUGFyZW50VVVJRCA9IGluc3BlY3Rpb25SZXBvcnQudXVpZDsKICAgICAgICAgIGluc3BlY3Rpb25SZXBvcnQuY3JlYXRlZEF0ID0gbW9tZW50KGluc3BlY3Rpb25SZXBvcnQuY3JlYXRlZEF0KS5mb3JtYXQoIkREIE1NTSBZWVlZIGhoOm1tIGEiKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuc2hvd1RvYXN0KGUuZGF0YS5yZXNwb25zZSwgImVycm9yIik7CiAgICAgIH0pOwogICAgfSwKCiAgICBnZXRQYXJlbnRTZXJ2aWNlUmVxdWVzdEJ5VVVJRCgpIHsKICAgICAgSW5zcGVjdGlvblNlcnZpY2UuZ2V0U2VydmljZVJlcXVlc3RCeVVVSUQodGhpcy4kcm91dGUucGFyYW1zLnBhcmVudFVVSUQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5zZXJ2aWNlUmV1cWVzdERldGFpbCA9IHJlc3BvbnNlLmRhdGEuc2VydmljZVJlcXVlc3Q7CiAgICAgICAgICB0aGlzLnNlcnZpY2VSZXVxZXN0RGV0YWlsLnJlcG9ydGVkQXQgPSBtb21lbnQodGhpcy5zZXJ2aWNlUmV1cWVzdERldGFpbC5yZXBvcnRlZEF0KS5mb3JtYXQoIkREIE1NTSBZWVlZIGhoOm1tIGEiKTsKCiAgICAgICAgICBpZiAodGhpcy5zZXJ2aWNlUmV1cWVzdERldGFpbC5yZXNvbHZlZEF0ICE9PSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMuc2VydmljZVJldXFlc3REZXRhaWwucmVzb2x2ZWRBdCA9IG1vbWVudCh0aGlzLnNlcnZpY2VSZXVxZXN0RGV0YWlsLnJlc29sdmVkQXQpLmZvcm1hdCgiREQgTU1NIFlZWVkgaGg6bW0gYSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoZS5kYXRhLnJlc3BvbnNlLCAiZXJyb3IiKTsKICAgICAgfSk7CiAgICB9LAoKICAgIHNob3dUb2FzdChtZXNzYWdlLCB0eXBlKSB7CiAgICAgIHRoaXMudG9hc3RNZXNzYWdlID0gbWVzc2FnZTsKICAgICAgdGhpcy50b2FzdFR5cGUgPSB0eXBlOwogICAgICB0aGlzLnRvYXN0RmxhZysrOwogICAgfSwKCiAgICByZWZyZXNoSW5zcGVjdGlvblJlcG9ydCgpIHsKICAgICAgdGhpcy5nZXRJbnNwZWN0aW9uUmVwb3J0KCk7CiAgICB9LAoKICAgIHNldExvYWRpbmcodmFsdWUpIHsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdmFsdWU7CiAgICB9CgogIH0sCgogIHVwZGF0ZWQoKSB7CiAgICB0aGlzLnNldFNpZGViYXJQb3NpdGlvbigpOwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnNldFNpZGViYXJQb3NpdGlvbigpOwogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluc3BlY3Rpb251dWlkID0gdGhpcy4kcm91dGUucGFyYW1zLmluc3BlY3Rpb25VVUlEOwogICAgdGhpcy5pbnNwZWN0aW9uUmVwb3J0VVVJRCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pbnNwZWN0aW9uVVVJRDsKICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKSk7CgogICAgaWYgKGN1cnJlbnRVc2VyRGV0YWlscyA9PT0gbnVsbCkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZm9yY2VTaWdub3V0IiwgInllcyIpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgIHRoaXMuZ2V0QWxsVXNlcnMoKTsKICAgIHRoaXMuZ2V0SW5zcGVjdGlvblJlcG9ydCgpOwogICAgdGhpcy5nZXRBbGxDYXRlZ29yaWVzKGN1cnJlbnRVc2VyRGV0YWlscyk7CiAgICB0aGlzLnN1Ym1pdHRlZEFuZFBlbmRpbmdJbnNwZWN0aW9uKCk7CgogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pbnNwZWN0aW9uQ2hpbGQpIHsKICAgICAgdGhpcy5nZXRQYXJlbnRJbnNwZWN0aW9uUmVwb3J0KCk7CiAgICB9CgogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5zZXJ2aWNlUmVxdWVzdENoaWxkKSB7CiAgICAgIHRoaXMuZ2V0UGFyZW50U2VydmljZVJlcXVlc3RCeVVVSUQoKTsKICAgIH0KICB9LAoKICB2YWxpZGF0aW9uczogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgY29tcHV0ZWQ6IHt9Cn07"},null]}