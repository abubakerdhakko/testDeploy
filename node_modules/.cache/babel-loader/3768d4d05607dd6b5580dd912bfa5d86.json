{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/assets/Assets.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/assets/Assets.vue","mtime":1661968702424},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/babel.config.js","mtime":1661968702388},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1leGNlcHRpb24uc3RhY2suanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5hdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC50eXBlZC1hcnJheS5maW5kLWxhc3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQudHlwZWQtYXJyYXkuZmluZC1sYXN0LWluZGV4LmpzIjsKaW1wb3J0IEVuZHBvaW50cyBmcm9tICIuLi8uLi9zZXJ2aWNlcy9FbmRQb2ludHMiOwppbXBvcnQgYXNzZXRQZXJzb25uZWxTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL0Fzc2V0UGVyc29ubmVsU2VydmljZSI7CmltcG9ydCB7IEFzc2V0TWFuYWdlbWVudFNlcnZpY2UgfSBmcm9tICIuLi8uLi9zZXJ2aWNlcy9Bc3NldE1hbmFnZW1lbnRTZXJ2aWNlIjsKaW1wb3J0IEFzc2V0R3JvdXAgZnJvbSAiLi9Bc3NldEdyb3VwIjsKaW1wb3J0IENyZWF0ZUlzc3VlIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvQ3JlYXRlSXNzdWUiOwppbXBvcnQgRGVsZXRlRGlhbG9nIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvRGVsZXRlRGlhbG9nIjsKaW1wb3J0IEFyY2hpdmVEaWFsb2cgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9BcmNoaXZlRGlhbG9nIjsKaW1wb3J0IEFkZFNlcnZpY2VSZXF1ZXN0IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvQWRkU2VydmljZVJlcXVlc3QiOwppbXBvcnQgQXNzZXRJbXBvcnREaWFsb2cgZnJvbSAiLi4vYXNzZXRzL2NvbXBvbmVudHMvQXNzZXRJbXBvcnREaWFsb2cudnVlIjsKaW1wb3J0IEV4cG9ydEFzc2V0RGV0YWlsRGlhbG9nIGZyb20gIi4uL2Fzc2V0cy9jb21wb25lbnRzL0V4cG9ydEFzc2V0RGV0YWlsRGlhbG9nLnZ1ZSI7CmltcG9ydCBBcmNoaXZlZEFzc2V0cyBmcm9tICIuL0FyY2hpdmVkQXNzZXRzLnZ1ZSI7CmltcG9ydCBsb2FkZXIgZnJvbSAiQC9jb21wb25lbnRzL0xvYWRlci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFzc2V0cyIsCiAgY29tcG9uZW50czogewogICAgQXNzZXRHcm91cCwKICAgIENyZWF0ZUlzc3VlLAogICAgQWRkU2VydmljZVJlcXVlc3QsCiAgICBEZWxldGVEaWFsb2csCiAgICBBcmNoaXZlRGlhbG9nLAogICAgQXNzZXRJbXBvcnREaWFsb2csCiAgICBFeHBvcnRBc3NldERldGFpbERpYWxvZywKICAgIGxvYWRlciwKICAgIEFyY2hpdmVkQXNzZXRzCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvYXN0RmxhZzogMCwKICAgICAgdG9hc3RNZXNzYWdlOiAiIiwKICAgICAgdG9hc3RUeXBlOiAiIiwKICAgICAgbG9hZGVyRmxhZzogZmFsc2UsCiAgICAgIGRlbGV0ZUluc3BlY3Rpb25EaWFsb2c6IGZhbHNlLAogICAgICBhcmNoaXZlSW5zcGVjdGlvbkRpYWxvZzogZmFsc2UsCiAgICAgIG5ld0lzc3VlOiBmYWxzZSwKICAgICAgYWRkU2VydmljZURpYWxvZzogZmFsc2UsCiAgICAgIGFzc2V0VVVJRDogIiIsCiAgICAgIHJlc2V0VGFibGU6IDAsCiAgICAgIGFzc2V0T2JqOiAiIiwKICAgICAgLy8gLS0tLS0tLS0tLS0tLSBBc3NldHMgU0RUIERhdGEgU1RBUlQgLS0tLS0tLS0tLS0tLS0tLQogICAgICBzZHRfdG9rZW46IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKS5hY2Nlc3NfdG9rZW4sCiAgICAgIHVzZXI6ICIiLAogICAgICB1c2VybmFtZTogIiIsCiAgICAgIGlzTG9hZGluZ1BhZ2U6IGZhbHNlLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBwcm9tcHQ6IGZhbHNlLAogICAgICBwcm9tcHRWaWV3TmFtZTogIiIsCiAgICAgIHNlcnZlckRhdGE6ICIiLAogICAgICBmaWx0ZXJGaWVsZExpc3Q6IFtdLAogICAgICBldmVudERhdGE6ICIiLAogICAgICBpbmRleEtleTogMCwKICAgICAgcGFyZW50U3lzdGVtU2V0dGluZ3M6IHsKICAgICAgICBzZXJ2aWNlVVJMOiBFbmRwb2ludHMucHJlZmVyZW5jZVNlcnZpY2UucHJlZmVyZW5jZSwKICAgICAgICAvLyBzZXJ2aWNlVVJMOiAiaHR0cDovL2xvY2FsaG9zdDo4MDk5L3ByZWZlcmVuY2VzIiwKICAgICAgICBidXR0b25zOiBbXSwKICAgICAgICBzZWFyY2hWYWx1ZTogIiIsCiAgICAgICAgaGVpZ2h0OiAiOTUwcHgiLAogICAgICAgIHNlbGVjdGlvbkNvbHVtbjogdHJ1ZSwKICAgICAgICBzZWxlY3RUeXBlOiAiY2hlY2tib3giLAogICAgICAgIG1vcmVPcHRpb25zOiBbXSwKICAgICAgICBhY3Rpb25zT3B0aW9uczogWyJWaWV3IiwgIkVkaXQiLCAiQXJjaGl2ZSIsICJDcmVhdGUgSXNzdWUiLCAiQ3JlYXRlIFNSIiwgIkNyZWF0ZSBXTyIgLy8gIkRlbGV0ZSIsCiAgICAgICAgXSwKICAgICAgICBjb2x1bW5JY29uczogW10sCiAgICAgICAgcGlsbENvbmZpZzogW3sKICAgICAgICAgIGNvbHVtbjogIiIsCiAgICAgICAgICBzdGF0ZTogInN1Y2Nlc3MiLAogICAgICAgICAgZGF0YTogIiIKICAgICAgICB9LCB7CiAgICAgICAgICBjb2x1bW46ICIiLAogICAgICAgICAgc3RhdGU6ICJlcnJvciIsCiAgICAgICAgICBkYXRhOiAiIgogICAgICAgIH0sIHsKICAgICAgICAgIGNvbHVtbjogIiIsCiAgICAgICAgICBzdGF0ZTogIm5vcm1hbCIsCiAgICAgICAgICBkYXRhOiAiIgogICAgICAgIH1dLAogICAgICAgIHN0YXRpY0NvbHVtbnM6IFtdLAogICAgICAgIHVzZXI6ICIiLAogICAgICAgIHVwcGVyY2FzZUNvbHVtbnM6IFtdLAogICAgICAgIC8vIHBhc3MgY29sdW1uIG5hbWUgd2hvc2UgZGF0YSBzaG91bGQgYmUgc2hvd24gaW4gY2FwcwogICAgICAgIGRhdGVGb3JtYXQ6ICJERC9NTS95eXl5IGhoOm1tIGEiIC8vcGFzcyBhbnkgbW9tZW50IGRhdGUgZm9ybWF0IGhlcmUKCiAgICAgIH0sCiAgICAgIHBhcmVudERlZmF1bHRTeXN0ZW1WaWV3OiB7CiAgICAgICAgdmlld05hbWVzOiBbewogICAgICAgICAgbmFtZTogIkRlZmF1bHQgVmlldyIsCiAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAxLAogICAgICAgICAgcHJpdmFjeTogInByaXZhdGUiCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIkFkZCBBIFZpZXcgVGlsZSIsCiAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAwLAogICAgICAgICAgcHJpdmFjeTogInByaXZhdGUiCiAgICAgICAgfV0sCiAgICAgICAgZGVmYXVsdFRhYmxlOiB7CiAgICAgICAgICBpZDogbnVsbCwKICAgICAgICAgIHZpZXdOYW1lOiAiRGVmYXVsdCBWaWV3IiwKICAgICAgICAgIGRlbnNpdHk6ICJzbSIsCiAgICAgICAgICBwYWdlU2l6ZTogIjUwIiwKICAgICAgICAgIHBhZ2VOYW1lOiAiYXNzZXRzIiwKICAgICAgICAgIHVzZXI6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKS5wcm9maWxlLnVzZXJuYW1lLAogICAgICAgICAgZGVmYXVsdFZpZXdGbGFnOiB0cnVlLAogICAgICAgICAgc29ydEZpZWxkOiAiIiwKICAgICAgICAgIHNvcnREaXJlY3Rpb246ICIiLAogICAgICAgICAgdGlsZUZsYWc6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbjogMSwKICAgICAgICAgIC8vIGFsd2F5cyBwYXNzIDEKICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIGNvbHVtbnM6IFtdCiAgICAgICAgfQogICAgICB9LAogICAgICBwYXJlbnREYXRhOiBbXSwKICAgICAgZmlsdGVyQ291bnQ6ICIiLAogICAgICAvLyAtLS0tLS0tLS0tLS0tIEFzc2V0cyBTRFQgRGF0YSBFTkQgLS0tLS0tLS0tLS0tLS0tLQogICAgICBpbnNwZWN0aW9uczogW10sCiAgICAgIG9yZ0NvbmZpZ3NSZXNwb25zZTogbnVsbCwKICAgICAgYXNzZXRUeXBlOiAiYXNzZXQiLAogICAgICBhc3NldE9wdGlvbnM6IFt7CiAgICAgICAgbGFiZWw6ICJBc3NldHMiLAogICAgICAgIHZhbHVlOiAiYXNzZXQiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogIkFyY2hpdmVkIiwKICAgICAgICB2YWx1ZTogImFyY2hpdmVkQXNzZXRzIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICJBc3NldC1Hcm91cHMiLAogICAgICAgIHZhbHVlOiAiYXNzZXQtZ3JvdXAiCiAgICAgIH1dLAogICAgICBhc3NldE9wdGlvbjogImFzc2V0IiwKICAgICAgY3VycmVudFVzZXJEZXRhaWxzOiAiIiwKICAgICAgYXNzZXRDYXRlZ29yeU9wdGlvbnM6IFtdLAogICAgICB2aWV3QXNzZXRHcm91cERpYWxvZzogZmFsc2UsCiAgICAgIGFzc2V0R3JvdXBDb25maWdzOiAiIiwKICAgICAgYXJjaGl2ZWRBc3NldHNDb25maWdzOiAiIiwKICAgICAgdGFibGVDb25maWcyOiBudWxsLAogICAgICBjdXJyZW5jeTogIiIsCiAgICAgIHNkdERhdGE6ICIiLAogICAgICBvcGVuQWRkUG9wVXA6IGZhbHNlLAogICAgICBleHBvcnRGbGFnOiBmYWxzZSwKICAgICAgb3B0OiBbXSwKICAgICAgb3BlblVwZGF0ZVBvcFVwOiBmYWxzZSwKICAgICAgaW1wb3J0VHlwZTogIkFkZCIsCiAgICAgIGZpZWxkTmFtZXM6IFtdLAogICAgICBjb2x1bW5zOiBbXQogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBpbXBvcnRPcHRpb24odmFsKSB7CiAgICAgIGlmICh2YWwgPT09ICJhZGQiKSB7CiAgICAgICAgdGhpcy5vcGVuQWRkUG9wVXAgPSB0cnVlOwogICAgICAgIHRoaXMuaW1wb3J0VHlwZSA9ICJBZGQiOwogICAgICB9IGVsc2UgaWYgKHZhbCA9PT0gInVwZGF0ZSIpIHsKICAgICAgICB0aGlzLm9wZW5BZGRQb3BVcCA9IHRydWU7CiAgICAgICAgdGhpcy5pbXBvcnRUeXBlID0gIlVwZGF0ZSI7CiAgICAgIH0gZWxzZSBpZiAodmFsID09PSAiZXhpc3RpbmciKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogImV4aXN0aW5nLXRlbXBsYXRlcyIKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh2YWwgPT09ICJoaXN0b3J5IikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJsYXN0LWltcG9ydC1yZWNvcmRzIgogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIGNsb3NlQWRkUG9wdXAoKSB7CiAgICAgIHRoaXMub3BlbkFkZFBvcFVwID0gZmFsc2U7CiAgICB9LAoKICAgIHJlZnJlc2hUYWJsZSgpIHsKICAgICAgdGhpcy5vcGVuQWRkUG9wVXAgPSBmYWxzZTsKICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgIH0sCgogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuZGVsZXRlSW5zcGVjdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmFyY2hpdmVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuZXhwb3J0RmxhZyA9IGZhbHNlOwogICAgfSwKCiAgICBkaXNwbGF5TWVzc2FnZSgpIHsKICAgICAgdGhpcy5zaG93VG9hc3QoIklzc3VlIENyZWF0ZWQgU3VjY2Vzc2Z1bGx5LiIsICJzdWNjZXNzIik7CiAgICB9LAoKICAgIGRlbGV0ZURpYWxvZygpIHsKICAgICAgQXNzZXRNYW5hZ2VtZW50U2VydmljZS5hcmNoaXZlT3JEZWxldGVBc3NldCh0aGlzLmFzc2V0VVVJRCwgImRlbGV0ZSIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJBc3NldCBEZWxldGVkIFN1Y2Nlc3NmdWxseSIsICJzdWNjZXNzIik7CiAgICAgICAgICB0aGlzLmRlbGV0ZUluc3BlY3Rpb25EaWFsb2cgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvciwgImVycm9yIik7CiAgICAgIH0pOwogICAgfSwKCiAgICBhcmNoaXZlRGlhbG9nKCkgewogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmFyY2hpdmVPckRlbGV0ZUFzc2V0KHRoaXMuYXNzZXRVVUlELCAiYXJjaGl2ZSIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJBc3NldCBBcmNoaXZlZCBTdWNjZXNzZnVsbHkiLCAic3VjY2VzcyIpOwogICAgICAgICAgdGhpcy5hcmNoaXZlSW5zcGVjdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLCAiZXJyb3IiKTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIC0tLS0tLS0tLS0tLSBBc3NldHMgU0RUIEZ1bmN0aW9ucyBTVEFSVCAtLS0tLS0tLS0tLS0tLQogICAgZ2V0QWN0aW9uc09wdGlvbih2YWwpIHsKICAgICAgaWYgKHZhbC52YWx1ZSA9PSAiVmlldyIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAidmlldy1hc3NldCIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgYXNzZXRJRDogdmFsLnJvdy51dWlkCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09ICJFZGl0IikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJlZGl0LWFzc2V0IiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBhc3NldElEOiB2YWwucm93LnV1aWQKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh2YWwudmFsdWUgPT0gIkNyZWF0ZSBJc3N1ZSIpIHsKICAgICAgICB0aGlzLm5ld0lzc3VlID0gdHJ1ZTsKICAgICAgICB0aGlzLmFzc2V0T2JqID0gdmFsLnJvdzsKICAgICAgICB0aGlzLmFzc2V0T2JqLmFzc2V0RmxhZyA9IHRydWU7CiAgICAgICAgdGhpcy5pbmRleEtleSsrOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PSAiQ3JlYXRlIFdPIikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJjcmVhdGUtd29yay1vcmRlciIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgd29ya3V1aWQ6IHZhbC5yb3cudXVpZAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PSAiQ3JlYXRlIFNSIikgewogICAgICAgIHRoaXMuYWRkU2VydmljZURpYWxvZyA9IHRydWU7CiAgICAgICAgdGhpcy5hc3NldE9iaiA9IHZhbC5yb3c7CiAgICAgICAgdGhpcy5hc3NldE9iai5hc3NldE5hbWVEaXNhYmxlID0gdHJ1ZTsKICAgICAgICB0aGlzLmluZGV4S2V5Kys7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09ICJBcmNoaXZlIikgewogICAgICAgIHRoaXMuYXNzZXRVVUlEID0gdmFsLnJvdy51dWlkOwogICAgICAgIHRoaXMuYXJjaGl2ZUluc3BlY3Rpb25EaWFsb2cgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PSAiRGVsZXRlIikgewogICAgICAgIHRoaXMuYXNzZXRVVUlEID0gdmFsLnJvdy51dWlkOwogICAgICAgIHRoaXMuZGVsZXRlSW5zcGVjdGlvbkRpYWxvZyA9IHRydWU7CiAgICAgIH0KICAgIH0sCgogICAgY29udmVydFRvQ1NWKG9iakFycmF5KSB7CiAgICAgIHZhciBhcnJheSA9IHR5cGVvZiBvYmpBcnJheSAhPSAib2JqZWN0IiA/IEpTT04ucGFyc2Uob2JqQXJyYXkpIDogb2JqQXJyYXk7CiAgICAgIHZhciBzdHIgPSAiIjsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbGluZSA9ICIiOwoKICAgICAgICBmb3IgKHZhciBpbmRleCBpbiBhcnJheVtpXSkgewogICAgICAgICAgaWYgKGxpbmUgIT0gIiIpIGxpbmUgKz0gIiwiOwogICAgICAgICAgbGluZSArPSBhcnJheVtpXVtpbmRleF07CiAgICAgICAgfQoKICAgICAgICBzdHIgKz0gbGluZSArICJcclxuIjsKICAgICAgfQoKICAgICAgcmV0dXJuIHN0cjsKICAgIH0sCgogICAgZ2V0RG93bmxvYWRBc09wdGlvbihvcHQpIHsKICAgICAgaWYgKG9wdC5yb3dzID09ICIiKSB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIlBsZWFzZSBTZWxlY3QgUmVjb3JkKHMpIiwgIndhcm5pbmciKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAob3B0Lm9wdGlvbiA9PSAicGRmIikgewogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsgLy8gYWRkaW5nIGN1c3RvbWVyIGRldGFpbHMKCiAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICByb3dzOiBvcHQucm93cywKICAgICAgICAgICAgb3B0aW9uOiBvcHQub3B0aW9uLAogICAgICAgICAgICBvcmdhbml6YXRpb25JZDogdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCwKICAgICAgICAgICAgb3JnYW5pemF0aW9uTmFtZTogIkVyb2hhbCIsCiAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuY29sdW1ucwogICAgICAgICAgfTsKICAgICAgICAgIGxldCBvYmplY3QgPSBvYmoucm93czsKICAgICAgICAgIG9iai5yb3dzID0gb2JqZWN0OwogICAgICAgICAgQXNzZXRNYW5hZ2VtZW50U2VydmljZS5kb3dubG9hZFNlbGVjdGVkUERGKG9iaikudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgbGV0IGZpbGVDb250ZW50cyA9IG51bGw7CiAgICAgICAgICAgIGxldCBwb3B1cFdpbiA9IG51bGw7CiAgICAgICAgICAgIHBvcHVwV2luID0gd2luZG93Lm9wZW4oIiIsICJfYmxhbmsiLCAidG9wPTAsbGVmdD0wLGhlaWdodD03MDAsd2lkdGg9MTAwMDsiKTsKICAgICAgICAgICAgbGV0IGRvY3VtZW50ID0gewogICAgICAgICAgICAgIGRvY3VtZW50TmFtZTogIkFzc2V0cyIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZmlsZUNvbnRlbnRzID0gcmVzLmRhdGEudHlwZSArIHJlcy5kYXRhLmNvbnRlbnQ7CiAgICAgICAgICAgIHBvcHVwV2luLmRvY3VtZW50LndyaXRlKGAKICAgICAgICAgICAgPGh0bWw+CiAgICAgICAgICAgICAgICA8aGVhZD4KICAgICAgICAgICAgICAgICA8IS0tdGl0bGU+UHJpbnQgdGFiPC90aXRsZS0tPgogICAgICAgICAgICAgICAgICAgIDxzdHlsZT4KICAgICAgICAgICAgICAgICAgICAgICAgI2J1dHRvbnN7ZGlzcGxheTpub25lO30KICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICJPcGVuIFNhbnMiLCAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsIEV1Y2xpZCBDaXJjdWxhciBCLCAiSGVsdmV0aWNhIE5ldWUiLCBBcmlhbCwgc2Fucy1zZXJpZiwgIkFwcGxlIENvbG9yIEVtb2ppIiwgIlNlZ29lIFVJIEVtb2ppIiwgIlNlZ29lIFVJIFN5bWJvbCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMjEyNTI5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLCBtZXRlciwgcHJvZ3Jlc3MgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC13cml0aW5nLW1vZGU6IGhvcml6b250YWwtdGIgIWltcG9ydGFudDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgYnV0dG9uIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtcmVuZGVyaW5nOiBhdXRvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGluaXRpYWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogbm9ybWFsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZC1zcGFjaW5nOiBub3JtYWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtaW5kZW50OiAwcHg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LXNoYWRvdzogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IHN0YXJ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwZW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiA0MDAgMTMuMzMzM3B4IEFyaWFsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0W3R5cGU9ImJ1dHRvbiIgaV0sIGlucHV0W3R5cGU9InN1Ym1pdCIgaV0sIGlucHV0W3R5cGU9InJlc2V0IiBpXSwgaW5wdXRbdHlwZT0iZmlsZSIgaV06Oi13ZWJraXQtZmlsZS11cGxvYWQtYnV0dG9uLCBidXR0b24gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogYnV0dG9udGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGJ1dHRvbmZhY2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMnB4IDZweCAzcHg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItd2lkdGg6IDJweDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1zdHlsZTogb3V0c2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiBidXR0b25mYWNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWltYWdlOiBpbml0aWFsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LCBidXR0b24sIHNlbGVjdCwgb3B0Z3JvdXAsIHRleHRhcmVhIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiBpbmhlcml0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLCBzZWxlY3QgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLmJ0biB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjM3NXJlbSAwLjc1cmVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3JkZXItY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJveC1zaGFkb3cgMC4xNXMgZWFzZS1pbi1vdXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLmJ0bi1vdXRsaW5lLXByaW1hcnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMDdiZmY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICMwMDdiZmY7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLmJ0bi1vdXRsaW5lLXByaW1hcnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICNkMDMyMzI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDAzMjMyOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUgewogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZT4uZmEgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDogbm9ybWFsIG5vcm1hbCBub3JtYWwgMTRweC8xIEZvbnRBd2Vzb21lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiBpbmhlcml0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1yZW5kZXJpbmc6IGF1dG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgICAgICAgICAgICAgICAgICAgICAgIH08L3N0eWxlPgogICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGU+KiwgKjo6YmVmb3JlLCAqOjphZnRlciB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIFN0eWxlIEF0dHJpYnV0ZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLmJ0biwgLmZvcm0tY29udHJvbCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjI1cmVtIDAuNXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4zcmVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxNXB4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyM3B4OwogICAgICAgICAgICAgICAgICAgICAgICB9PC9zdHlsZT4KICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPgogICAgICAgICAgICAgICAgPC9oZWFkPgogICAgICAgICAgICAgICAgPGJvZHkgb25sb2FkPSIiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IiA+CiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9IiR7ZmlsZUNvbnRlbnRzfSIgZG93bmxvYWQ9IiR7ZG9jdW1lbnQuZG9jdW1lbnROYW1lfSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1wcmltYXJ5Ij5Eb3dubG9hZDwvYnV0dG9uPjwvYT4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICAgICAgPGlmcmFtZSBzcmM9JyR7ZmlsZUNvbnRlbnRzfScgIHN0eWxlPSJtaW4td2lkdGg6IDEwMCU7aGVpZ2h0OiAxMDAlOyIgPjwvaWZyYW1lPgogICAgICAgICAgICAgICAgPC9ib2R5PgogICAgICAgICAgICA8L2h0bWw+YCk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKG9wdC5vcHRpb24gPT0gImNzdiIpIHsKICAgICAgICAgIGlmICh0aGlzLm9wdC5sZW5ndGggPD0gMCkgewogICAgICAgICAgICB0aGlzLnRvYXN0TWVzc2FnZSA9ICJLaW5kbHkgU2VsZWN0IEFzc2V0cyB0byBFeHBvcnQuIjsKICAgICAgICAgICAgdGhpcy50b2FzdFR5cGUgPSAid2FybmluZyI7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLnRvYXN0RmxhZysrOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5leHBvcnRGbGFnID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQpIHsKICAgICAgdmFyIGJpbmFyeVN0cmluZyA9IHdpbmRvdy5hdG9iKGJhc2U2NCk7CiAgICAgIHZhciBiaW5hcnlMZW4gPSBiaW5hcnlTdHJpbmcubGVuZ3RoOwogICAgICB2YXIgYnl0ZXMgPSBuZXcgVWludDhBcnJheShiaW5hcnlMZW4pOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaW5hcnlMZW47IGkrKykgewogICAgICAgIHZhciBhc2NpaSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpOwogICAgICAgIGJ5dGVzW2ldID0gYXNjaWk7CiAgICAgIH0KCiAgICAgIHJldHVybiBieXRlczsKICAgIH0sCgogICAgZXhwb3J0RGF0YSh2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gInRhYmxlIikgewogICAgICAgIHRoaXMuc2ltcGxlRXhwb3J0KHRoaXMub3B0KTsKICAgICAgICB0aGlzLmV4cG9ydEZsYWcgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRvd25Mb2FkRGV0YWlsZWRDc3YodGhpcy5vcHQpOwogICAgICAgIHRoaXMuZXhwb3J0RmxhZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIGRvd25Mb2FkRGV0YWlsZWRDc3Yob3B0KSB7CiAgICAgIGxldCBhc3NldFVVSURTID0gW107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdC5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGFzc2V0ID0gb3B0W2ldOwogICAgICAgIGFzc2V0VVVJRFMucHVzaChhc3NldC51dWlkKTsKICAgICAgfQoKICAgICAgbGV0IHJlcXVlc3QgPSB7CiAgICAgICAgYXNzZXRVVUlEUzogYXNzZXRVVUlEUywKICAgICAgICB0ZW5hbnRVVUlEOiB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkCiAgICAgIH07CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZXhwb3J0QXNzZXRzSW5CdWxrKHJlcXVlc3QpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhLnJlc3BvbnNlSWRlbnRpZmllciA9PT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgIHZhciBzYW1wbGVBcnJheSA9IHRoaXMuYmFzZTY0VG9BcnJheUJ1ZmZlcihyZXMuZGF0YS5jb250ZW50KTsKICAgICAgICAgIGxldCBmaWxlVXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3NhbXBsZUFycmF5XSwgewogICAgICAgICAgICB0eXBlOiAidGV4dC9jc3Y7Y2hhcnNldD11dGYtODsiCiAgICAgICAgICB9KSk7CiAgICAgICAgICB2YXIgZmlsZUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICBmaWxlTGluay5ocmVmID0gZmlsZVVybDsKICAgICAgICAgIGZpbGVMaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCByZXMuZGF0YS5maWxlTmFtZSk7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZpbGVMaW5rKTsKICAgICAgICAgIGZpbGVMaW5rLmNsaWNrKCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIkFuIFVuZXhwZWN0ZWQgRXJyb3Igb2NjdXJyZWQgd2hpbGUgZG93bmxvYWRpbmcgaW1wb3J0IHRlbXBsYXRlcy4iLCAiZXJyb3IiKTsKICAgICAgfSk7CiAgICB9LAoKICAgIHNpbXBsZUV4cG9ydChvcHQpIHsKICAgICAgbGV0IGZpbGVUaXRsZSA9ICJBc3NldHMiOwogICAgICBsZXQgaGVhZGVycyA9IHsKICAgICAgICAvLyBjcmVhdGVkRGF0ZTogJ1JlcXVlc3RlZCBPbicucmVwbGFjZSgvLC9nLCAnJyksIC8vIHJlbW92ZSBjb21tYXMgdG8gYXZvaWQgZXJyb3JzCiAgICAgICAgYXNzZXROdW1iZXI6ICJBc3NldCBOdW1iZXIiLAogICAgICAgIG5hbWU6ICJOYW1lIiwKICAgICAgICBjYXRlZ29yeTogIkNhdGVnb3J5IiwKICAgICAgICBhc3NpZ25lZXM6ICJBc3NpZ25lZCBUbyIsCiAgICAgICAgc3RhdHVzOiAiU3RhdHVzIiwKICAgICAgICBjb3N0OiAiTWFpbnRhaW5lbmNlIENvc3QiICsgIiAoIiArIHRoaXMuY3VycmVuY3kgKyAiKSIsCiAgICAgICAgb3Blbklzc3VlczogIk9wZW4gSXNzdWVzIiwKICAgICAgICBhc3NpZ25lZElzc3VlczogIkFzc2lnbmVkIElzc3VlcyIsCiAgICAgICAgcmVwYWlyczogIlJlcGFpcnMiLAogICAgICAgIHdvcmtPcmRlcnM6ICJXb3JrIE9yZGVycyIKICAgICAgfTsKICAgICAgbGV0IGRhdGFPYmogPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYXNzZXQgPSBvcHRbaV07CiAgICAgICAgZGF0YU9iai5wdXNoKHsKICAgICAgICAgIGFzc2V0TnVtYmVyOiBhc3NldC5hc3NldE51bWJlciAhPT0gbnVsbCAmJiBhc3NldC5hc3NldE51bWJlciAhPT0gIiIgPyBhc3NldC5hc3NldE51bWJlciA6ICIiLAogICAgICAgICAgbmFtZTogYXNzZXQubmFtZSAhPT0gbnVsbCAmJiBhc3NldC5uYW1lICE9PSAiIiA/IGFzc2V0Lm5hbWUgOiAiIiwKICAgICAgICAgIGNhdGVnb3J5OiBhc3NldC5jYXRlZ29yeU5hbWUgIT09IG51bGwgJiYgYXNzZXQuY2F0ZWdvcnlOYW1lICE9PSAiIiA/IGFzc2V0LmNhdGVnb3J5TmFtZSA6ICIiLAogICAgICAgICAgYXNzaWduZWVzOiBhc3NldC5hc3NpZ25lZFRvICE9PSBudWxsICYmIGFzc2V0LmFzc2lnbmVkVG8gIT09ICIiID8gYXNzZXQuYXNzaWduZWRUby5yZXBsYWNlKC8sL2csICIgIikgOiAiIiwKICAgICAgICAgIHN0YXR1czogYXNzZXQuc3RhdHVzICE9PSBudWxsICYmIGFzc2V0LnN0YXR1cyAhPT0gIiIgPyBhc3NldC5zdGF0dXMgOiAiIiwKICAgICAgICAgIGNvc3Q6IGFzc2V0Lm1haW50ZW5hbmNlQ29zdCAhPT0gbnVsbCAmJiBhc3NldC5tYWludGVuYW5jZUNvc3QgIT09ICIiID8gYXNzZXQubWFpbnRlbmFuY2VDb3N0IDogMCwKICAgICAgICAgIG9wZW5Jc3N1ZXM6IGFzc2V0Lm9wZW5Jc3N1ZXMgIT09IG51bGwgJiYgYXNzZXQub3Blbklzc3VlcyAhPT0gIiIgPyBhc3NldC5vcGVuSXNzdWVzIDogMCwKICAgICAgICAgIGFzc2lnbmVkSXNzdWVzOiBhc3NldC5hc3NpZ25lZElzc3VlcyAhPT0gbnVsbCAmJiBhc3NldC5hc3NpZ25lZElzc3VlcyAhPT0gIiIgPyBhc3NldC5hc3NpZ25lZElzc3VlcyA6IDAsCiAgICAgICAgICByZXBhaXJzOiBhc3NldC5yZXBhaXJzICE9PSBudWxsICYmIGFzc2V0LnJlcGFpcnMgIT09ICIiID8gYXNzZXQucmVwYWlycyA6IDAsCiAgICAgICAgICB3b3JrT3JkZXJzOiBhc3NldC53b3Jrb3JkZXJzICE9PSBudWxsICYmIGFzc2V0LndvcmtvcmRlcnMgIT09ICIiID8gYXNzZXQud29ya29yZGVycyA6IDAKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy5leHBvcnRDU1ZGaWxlKGhlYWRlcnMsIGRhdGFPYmosIGZpbGVUaXRsZSk7CiAgICB9LAoKICAgIGV4cG9ydENTVkZpbGUoaGVhZGVycywgYXNzZXREYXRhLCBmaWxlVGl0bGUpIHsKICAgICAgaWYgKGhlYWRlcnMpIHsKICAgICAgICBhc3NldERhdGEudW5zaGlmdChoZWFkZXJzKTsKICAgICAgfSAvLyBDb252ZXJ0IE9iamVjdCB0byBKU09OCgoKICAgICAgdmFyIGpzb25PYmplY3QgPSBKU09OLnN0cmluZ2lmeShhc3NldERhdGEpOwogICAgICB2YXIgY3N2ID0gdGhpcy5jb252ZXJ0VG9DU1YoanNvbk9iamVjdCk7CiAgICAgIHZhciBleHBvcnRlZEZpbGVubWFlID0gZmlsZVRpdGxlICsgIi5jc3YiIHx8ICJleHBvcnQuY3N2IjsKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbY3N2XSwgewogICAgICAgIHR5cGU6ICJ0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04OyIKICAgICAgfSk7CgogICAgICBpZiAobmF2aWdhdG9yLm1zU2F2ZUJsb2IpIHsKICAgICAgICAvLyBJRSAxMCsKICAgICAgICBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBleHBvcnRlZEZpbGVubWFlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKCiAgICAgICAgaWYgKGxpbmsuZG93bmxvYWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgLy8gZmVhdHVyZSBkZXRlY3Rpb24KICAgICAgICAgIC8vIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCBIVE1MNSBkb3dubG9hZCBhdHRyaWJ1dGUKICAgICAgICAgIHZhciB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoImhyZWYiLCB1cmwpOwogICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoImRvd25sb2FkIiwgZXhwb3J0ZWRGaWxlbm1hZSk7CiAgICAgICAgICBsaW5rLnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBzZXRUYWJsZUNvbmZpZ3MoKSB7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLmRlbnNpdHkgPSB0aGlzLnRhYmxlQ29uZmlnLmRlbnNpdHk7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnBhZ2VTaXplID0gdGhpcy50YWJsZUNvbmZpZy5wYWdlU2l6ZTsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUucGFnZU5hbWUgPSB0aGlzLnRhYmxlQ29uZmlnLnBhZ2VOYW1lOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5zb3J0RmllbGQgPSB0aGlzLnRhYmxlQ29uZmlnLnNvcnRGaWVsZDsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuc29ydERpcmVjdGlvbiA9IHRoaXMudGFibGVDb25maWcuc29ydERpcmVjdGlvbjsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuY29sdW1ucyA9IHRoaXMudGFibGVDb25maWcuY29sdW1uczsKICAgIH0sCgogICAgZXh0cmFjdEZpZWxkTmFtZXNGb3JTZWFyY2hRdWVyeShjb25maWcpIHsKICAgICAgZm9yIChsZXQgY29sdW1uIG9mIGNvbmZpZy5jb2x1bW5zKSB7CiAgICAgICAgdGhpcy5maWVsZE5hbWVzLnB1c2goY29sdW1uLmZpZWxkTmFtZSk7CiAgICAgICAgdGhpcy5jb2x1bW5zLnB1c2goY29sdW1uLmxhYmVsTmFtZSk7CiAgICAgIH0KICAgIH0sCgogICAgY2F0Y2hEZXBhcnR1cmU6IGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHRoaXMuc2R0RGF0YSA9IGRhdGE7CgogICAgICBpZiAoZGF0YS5zdGF0dXMgPT0gMSB8fCBkYXRhLnN0YXR1cyA9PSAzKSB7CiAgICAgICAgdGhpcy5sb2FkVGFibGUoZGF0YSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5zdGF0dXMgPT0gNCkgewogICAgICAgIHRoaXMubG9hZFRhYmxlKGRhdGEpOwogICAgICB9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDEwKSB7CiAgICAgICAgaWYgKGRhdGEubWVzc2FnZS5jaGVja2JveCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBsZXQgYXNzZXQgPSBkYXRhLm1lc3NhZ2U7CgogICAgICAgICAgaWYgKGFzc2V0LmNoZWNrYm94LmNoZWNrZWQpIHsKICAgICAgICAgICAgdGhpcy5vcHQucHVzaChhc3NldCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLm9wdC5maW5kSW5kZXgoYSA9PiBhLnV1aWQgPT09IGFzc2V0LnV1aWQpOwoKICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICAgICAgICB0aGlzLm9wdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxldCBhc3NldHMgPSBkYXRhLm1lc3NhZ2U7CiAgICAgICAgICBhc3NldHMubWFwKGFzc2V0ID0+IHsKICAgICAgICAgICAgaWYgKGFzc2V0LmNoZWNrYm94LmNoZWNrZWQpIHsKICAgICAgICAgICAgICB0aGlzLm9wdC5wdXNoKGFzc2V0KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLm9wdC5maW5kSW5kZXgoYSA9PiBhLnV1aWQgPT09IGFzc2V0LnV1aWQpOwoKICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICAgICAgICAgICAgdGhpcy5vcHQuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBsb2FkVGFibGUoc2R0RGF0YSkgewogICAgICBsZXQgZmlsdGVycyA9IFtdOwogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwoKICAgICAgZm9yIChsZXQgc2R0X2RhdGEgb2Ygc2R0RGF0YS5tZXNzYWdlKSB7CiAgICAgICAgaWYgKHNkdF9kYXRhLmZpZWxkTmFtZSAhPT0gImFjdGlvbnMiKSB7CiAgICAgICAgICBsZXQgbmV3RGF0ZSA9ICIiOwoKICAgICAgICAgIGlmIChzZHRfZGF0YS5maWVsZFR5cGUgPT09ICJkYXRlIiAmJiBzZHRfZGF0YS5maWx0ZXJWYWx1ZSAhPT0gIiIpIHsKICAgICAgICAgICAgbGV0IGRhdGUgPSBzZHRfZGF0YS5maWx0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBkYXRlID0gZGF0ZS5zcGxpdCgiLyIpOwogICAgICAgICAgICBuZXdEYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVsxXX0vJHtkYXRlWzBdfS8ke2RhdGVbMl19YCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHNkdF9kYXRhLmZpbHRlclZhbHVlID09PSBudWxsKSB7CiAgICAgICAgICAgIHNkdF9kYXRhLmZpbHRlclZhbHVlID0gIiI7CiAgICAgICAgICB9CgogICAgICAgICAgZmlsdGVycy5wdXNoKHsKICAgICAgICAgICAgZmllbGROYW1lOiBzZHRfZGF0YS5maWVsZE5hbWUsCiAgICAgICAgICAgIGZpZWxkVHlwZTogc2R0X2RhdGEuZmllbGRUeXBlLAogICAgICAgICAgICBmaWx0ZXJWYWx1ZTogbmV3RGF0ZSA9PT0gbnVsbCB8fCBuZXdEYXRlID09PSAiIiA/IHNkdF9kYXRhLmZpbHRlclZhbHVlIDogbmV3RGF0ZS5nZXRUaW1lKCksCiAgICAgICAgICAgIHNlY29uZFZhbHVlOiBzZHRfZGF0YS5zZWNvbmRWYWx1ZSwKICAgICAgICAgICAgY29tcGFyaXNvblR5cGU6IHNkdF9kYXRhLmNvbXBhcmlzb25UeXBlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZ2V0UGFnaW5hdGVkQXNzZXRzKGZpbHRlcnMsIHNkdERhdGEuZGF0YS5zb3J0RmllbGQsIHNkdERhdGEuZGF0YS5zb3J0RGlyZWN0aW9uLCBzZHREYXRhLmRhdGEub2Zmc2V0LCBzZHREYXRhLmRhdGEubGltaXQsIHNkdERhdGEuZGF0YS5zZWFyY2hRdWVyeSk7CiAgICB9LAoKICAgIGxvYWRTRFQocmVzcG9uc2UsIGRhdGEpIHsKICAgICAgdGhpcy5wYXJlbnREYXRhID0gZGF0YTsKICAgICAgbGV0IGV2ZW50RGF0YSA9IHsKICAgICAgICBkYXRhOiB0aGlzLnBhcmVudERhdGEsCiAgICAgICAgdG90YWxFbGVtZW50czogcmVzcG9uc2UuZGF0YS50b3RhbEVsZW1lbnRzLAogICAgICAgIHRvdGFsUGFnZXM6IHJlc3BvbnNlLmRhdGEudG90YWxQYWdlcywKICAgICAgICBwYWdlTnVtYmVyOiByZXNwb25zZS5kYXRhLm9mZnNldAogICAgICB9OwogICAgICB0aGlzLiRyZWZzLnRlc3QuZGF0YUxvYWRFdmVudChldmVudERhdGEpOwogICAgfSwKCiAgICBnZXRQYWdpbmF0ZWRBc3NldHMoZmlsdGVycywgc29ydEZpZWxkLCBzb3J0RGlyZWN0aW9uLCBvZmZzZXQsIGxpbWl0LCBzZWFyY2hRdWVyeSkgewogICAgICBsZXQgY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpOwogICAgICBsZXQgcmVxdWVzdE9iaiA9IHsKICAgICAgICBmaWx0ZXJzOiBmaWx0ZXJzLAogICAgICAgIHNvcnRGaWVsZDogc29ydEZpZWxkLAogICAgICAgIHNvcnREaXJlY3Rpb246IHNvcnREaXJlY3Rpb24sCiAgICAgICAgb2Zmc2V0OiBvZmZzZXQsCiAgICAgICAgbGltaXQ6IGxpbWl0LAogICAgICAgIHRlbmFudFVVSUQ6IGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgICAgIHNlYXJjaFF1ZXJ5OiBzZWFyY2hRdWVyeSwKICAgICAgICBmaWVsZE5hbWVzOiB0aGlzLmZpZWxkTmFtZXMsCiAgICAgICAgYXJjaGl2ZWQ6IGZhbHNlCiAgICAgIH07CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0UGFnaW5hdGVkQXNzZXRzRm9yU0RUKHJlcXVlc3RPYmopLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgcmVzcG9uc2UuZGF0YS5vZmZzZXQgPSBvZmZzZXQgKyAxOwogICAgICAgICAgdGhpcy5sb2FkU0RUKHJlc3BvbnNlLCByZXNwb25zZS5kYXRhLmFzc2V0TWFwcGVycyk7CiAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIHdoaWxlIGdldHRpbmcgYXNzZXRzLiBQbGVhc2UgdHJ5IGFnYWluIiwgImVycm9yIik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA2KSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5yZXNwb25zZS5kYXRhLmRlc2NyaXB0aW9uLCAiZXJyb3IiKTsKICAgICAgICB9IGVsc2Ugey8vIHRoaXMuc2hvd1RvYXN0KCJPb3BzIGl0cyBsb29rIGxpa2Ugb3VyIHNlcnZlciBpcyBvZmZsaW5lIik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlICE9PSB1bmRlZmluZWQgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDYpIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLnJlc3BvbnNlLmRhdGEuZGVzY3JpcHRpb24sICJlcnJvciIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIHNldFN0YXRpY0NvbHVtbigpIHsKICAgICAgbGV0IHN0YXRpY0NvbCA9IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5maWx0ZXIoY29sID0+IGNvbC5sYWJlbE5hbWUgPT0gIkFzc2V0IE51bWJlciIpWzBdOwogICAgICB0aGlzLnBhcmVudFN5c3RlbVNldHRpbmdzLnN0YXRpY0NvbHVtbnMucHVzaChzdGF0aWNDb2wpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zW2ldLmxhYmVsTmFtZSA9PSBzdGF0aWNDb2wubGFiZWxOYW1lKSB7CiAgICAgICAgICB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnMuc3BsaWNlKGksIDEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMudGFibGVDb25maWcuY29sdW1uc1tpXS5sYWJlbE5hbWUgPT0gIk1haW50ZW5hbmNlIENvc3QiKSB7CiAgICAgICAgICB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnNbaV0ubGFiZWxOYW1lID0gdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zW2ldLmxhYmVsTmFtZSArICIgKCIgKyB0aGlzLmN1cnJlbmN5ICsgIikiOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvLyAtLS0tLS0tLS0tLS1Bc3NldHMgU0RUIEZ1bmN0aW9ucyBFTkQgLS0tLS0tLS0tLS0tLS0KICAgIGFzc2V0RGlhbG9nKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogImNyZWF0ZS1hc3NldCIKICAgICAgfSk7CiAgICB9LAoKICAgIGFzc2V0R3JvdXBEaWFsb2coKSB7CiAgICAgIHRoaXMudmlld0Fzc2V0R3JvdXBEaWFsb2cgPSB0cnVlOwogICAgfSwKCiAgICBzZWxlY3RBc3NldFR5cGUob2JqKSB7CiAgICAgIHRoaXMuYXNzZXRPcHRpb24gPSBvYmoudmFsdWU7CiAgICB9LAoKICAgIGNsb3NlQXNzZXRHcm91cERpYWxvZygpIHsKICAgICAgdGhpcy52aWV3QXNzZXRHcm91cERpYWxvZyA9IGZhbHNlOwogICAgfSwKCiAgICBzYXZlU2VydmljZVJlcXVlc3REaWFsb2coKSB7CiAgICAgIHRoaXMuYWRkU2VydmljZURpYWxvZyA9IGZhbHNlOwogICAgfSwKCiAgICBjbG9zZVNlcnZpY2VEaWFsb2coKSB7CiAgICAgIHRoaXMuYWRkU2VydmljZURpYWxvZyA9IGZhbHNlOwogICAgfSwKCiAgICBjbG9zZUlzc3VlRGlhbG9nKCkgewogICAgICB0aGlzLm5ld0lzc3VlID0gZmFsc2U7CiAgICB9LAoKICAgIHNob3dUb2FzdChtZXNzYWdlLCB0eXBlKSB7CiAgICAgIHRoaXMudG9hc3RNZXNzYWdlID0gbWVzc2FnZTsKICAgICAgdGhpcy50b2FzdFR5cGUgPSB0eXBlOwogICAgICB0aGlzLnRvYXN0RmxhZysrOwogICAgICB0aGlzLmNsb3NlSXNzdWVEaWFsb2coKTsKICAgIH0KCiAgfSwKICB3YXRjaDogewogICAgYXNzZXRPcHRpb246IGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAobmV3VmFsID09ICJhc3NldC1ncm91cCIpIHsKICAgICAgICBsZXQgYWxsQ29uZmlncyA9IEpTT04ucGFyc2UodGhpcy5vcmdDb25maWdzUmVzcG9uc2UuZGF0YS50YWJsZUNvbmZpZ3MpOwogICAgICAgIGFsbENvbmZpZ3MgPSBhbGxDb25maWdzLmZpbHRlcihkYXRhID0+IGRhdGEucGFnZU5hbWUgPT09ICJhc3NldGdyb3VwcyIpWzBdOwogICAgICAgIHRoaXMuYXNzZXRHcm91cENvbmZpZ3MgPSBhbGxDb25maWdzOwogICAgICB9IGVsc2UgaWYgKG5ld1ZhbCA9PT0gImFyY2hpdmVkQXNzZXRzIikgewogICAgICAgIGxldCBhbGxDb25maWdzID0gSlNPTi5wYXJzZSh0aGlzLm9yZ0NvbmZpZ3NSZXNwb25zZS5kYXRhLnRhYmxlQ29uZmlncyk7CiAgICAgICAgYWxsQ29uZmlncyA9IGFsbENvbmZpZ3MuZmlsdGVyKGRhdGEgPT4gZGF0YS5wYWdlTmFtZSA9PT0gImFyY2hpdmVkQXNzZXRzIilbMF07CiAgICAgICAgdGhpcy5hcmNoaXZlZEFzc2V0c0NvbmZpZ3MgPSBhbGxDb25maWdzOwogICAgICB9CiAgICB9CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMudG9hc3RGbGFnID09PSB0cnVlKSB7CiAgICAgIHRoaXMuc2hvd1RvYXN0KHRoaXMuJHJvdXRlLnBhcmFtcy50b2Fzc3RNZXNzYWdlLCB0aGlzLiRyb3V0ZS5wYXJhbXMudG9hc3RUeXBlKTsKICAgIH0KCiAgICBkb2N1bWVudC50aXRsZSA9IHRoaXMuJHJvdXRlLm1ldGEudGl0bGU7CiAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKTsgLy8gc2VuZGluZyBvbmx5IGZpcnN0IGFuZCBsYXN0IG5hbWUgZm9yIFNEVAoKICAgIGxldCBuYW1lID0gdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS51c2VybmFtZTsKCiAgICBpZiAobmFtZS5pbmNsdWRlcygiQCIpKSB7CiAgICAgIG5hbWUgPSBuYW1lLnNwbGl0KCJAIik7CiAgICAgIG5hbWUgPSBuYW1lWzBdOwogICAgfQoKICAgIHRoaXMucGFyZW50U3lzdGVtU2V0dGluZ3MudXNlciA9IG5hbWU7CiAgICBsZXQgdXVpZCA9IHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQ7CiAgICBhc3NldFBlcnNvbm5lbFNlcnZpY2UuZ2V0Q29tcGFueUN1cnJlbmN5KHV1aWQpLnRoZW4oY3VycmVuY3lSZXNwb25zZSA9PiB7CiAgICAgIHRoaXMuY3VycmVuY3kgPSBjdXJyZW5jeVJlc3BvbnNlLmRhdGEuY3VycmVuY3k7CiAgICAgIGFzc2V0UGVyc29ubmVsU2VydmljZS5nZXRPcmdDb25maWdzKHV1aWQsICJ0YWJsZUNvbmZpZ3MiKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLm9yZ0NvbmZpZ3NSZXNwb25zZSA9IHJlc3BvbnNlOwogICAgICAgIGxldCBhbGxDb25maWdzID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhLnRhYmxlQ29uZmlncyk7CiAgICAgICAgYWxsQ29uZmlncyA9IGFsbENvbmZpZ3MuZmlsdGVyKGRhdGEgPT4gZGF0YS5wYWdlTmFtZSA9PT0gIkFzc2V0cyIpWzBdOwogICAgICAgIHRoaXMudGFibGVDb25maWcgPSBhbGxDb25maWdzOwogICAgICAgIHRoaXMuZXh0cmFjdEZpZWxkTmFtZXNGb3JTZWFyY2hRdWVyeSh0aGlzLnRhYmxlQ29uZmlnKTsKICAgICAgICB0aGlzLnNldFN0YXRpY0NvbHVtbigpOwogICAgICAgIHRoaXMuc2V0VGFibGVDb25maWdzKCk7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiRXJyb3IgZmV0Y2hpbmcgY29uZmlncyIsICJlcnJvciIpOwogICAgICB9KTsKICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIGZldGNoaW5nIGNvbXBhbnkgY3VycmVuY3kiLCAiZXJyb3IiKTsKICAgIH0pOwogIH0sCgogIHZhbGlkYXRpb25zOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBjb21wdXRlZDoge30KfTs="},null]}