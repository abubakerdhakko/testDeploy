{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/issues/IssuesDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/issues/IssuesDetail.vue","mtime":1661968702436},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL0Fzc2V0TWFuYWdlbWVudFNlcnZpY2UiOwppbXBvcnQgQXNzZXRQZXJzb25uZWxTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL0Fzc2V0UGVyc29ubmVsU2VydmljZSI7CmltcG9ydCBXb3JrT3JkZXJTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL1dvcmtPcmRlclNlcnZpY2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCBBZGRQYXJ0IGZyb20gIi4uL2lzc3Vlcy9jb21wb25lbnRzL0FkZFBhcnQiOwppbXBvcnQgQWRkQ29zdCBmcm9tICIuLi9pc3N1ZXMvY29tcG9uZW50cy9BZGRDb3N0IjsKaW1wb3J0IEluc3BlY3Rpb25TZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL0luc3BlY3Rpb25TZXJ2aWNlIjsKaW1wb3J0IFNpZGVCYXIgZnJvbSAiLi4vaXNzdWVzL2NvbXBvbmVudHMvU2lkZUJhciI7CmltcG9ydCB7IEZ1bmN0aW9ucyB9IGZyb20gIkAvc2hhcmVkL0Z1bmN0aW9ucyI7CmltcG9ydCB7IHJlcXVpcmVkLCBtYXhMZW5ndGggfSBmcm9tICJ2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMiOwppbXBvcnQgYXJjaGl2ZURpYWxvZyBmcm9tICIuLi8uLi9jb21wb25lbnRzL0FyY2hpdmVEaWFsb2cudnVlIjsKaW1wb3J0IGxvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvTG9hZGVyLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSXNzdWVEZXRhaWwiLAoKICBjb21wb25lbnRzOiB7CiAgICBTaWRlQmFyLAogICAgQWRkUGFydCwKICAgIGFyY2hpdmVEaWFsb2csCiAgICBBZGRDb3N0LAogICAgbG9hZGVyLAogIH0sCiAgcHJvcHM6IHsKICAgIGlzc3VlVVVJRDoge30sCiAgICB3b3JrT3JkZXI6IHt9LAogICAgd29ya09yZGVyaW5kZXg6IHt9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRlckZsYWc6IGZhbHNlLAogICAgICB0b2FzdEZsYWc6IDAsCiAgICAgIHRvYXN0TWVzc2FnZTogIiIsCiAgICAgIHRvYXN0VHlwZTogIiIsCiAgICAgIHRvYXN0VGltZU91dDogMzAwMCwKICAgICAgcG9wdXBJbWFnZTogIiIsCiAgICAgIGN1cnJlbnRQYWdlT2ZBc3NldFJlbGF0ZWRJc3N1ZXM6IDEsCiAgICAgIG51bWJlck9mcGFnZU9mQXNzZXRSZWxhdGVkSXNzdWVzOiAiIiwKICAgICAgcm93c1BlclBhZ2VPZkFzc2V0UmVsdGVkSXNzdWU6IDUsCiAgICAgIGN1cnJlbnRQYWdlT2ZJc3N1ZUNhdGVnb3J5UmVsYXRlZElzc3VlczogMSwKICAgICAgbnVtYmVyT2ZwYWdlT2ZJc3N1ZUNhdGVnb3J5UmVsYXRlZElzc3VlczogIiIsCiAgICAgIHJvd3NQZXJQYWdlT2ZJc3N1ZUNhdGVnb3J5UmVsdGVkSXNzdWU6IDUsCiAgICAgIG9wZW5GbGFnOiB0cnVlLAogICAgICBpbWFnZURpYWxvZzogZmFsc2UsCiAgICAgIHVwZGF0ZVNpZGU6IDAsCiAgICAgIGN1cnJlbnRVc2VyRGV0YWlsczogIiIsCiAgICAgIGZpbGVSZWNvcmQ6IG51bGwsCiAgICAgIGluc3BlY3Rpb25JRDogIiIsCiAgICAgIGFyY2hpdmVJbnNwZWN0aW9uRGlhbG9nOiBmYWxzZSwKICAgICAgc2VsZWN0ZWRUYWI6ICJwYXJ0cyIsCiAgICAgIGNvc3RzOiBbXSwKICAgICAgY29zdDogIiIsCiAgICAgIGlzc3VlczogewogICAgICAgIGlzc3VlTmFtZTogIiIsCiAgICAgICAgcHJpb3JpdHk6ICIiLAogICAgICAgIGlzc3VlQ2F0ZWdvcnk6ICIiLAogICAgICAgIGlzc3VlVHlwZTogIiIsCiAgICAgICAgYXNzZXRDYXRlZ29yeTogIiIsCiAgICAgICAgYXNzZXROYW1lOiAiIiwKICAgICAgICBhc3NldFVVSUQ6ICIiLAogICAgICAgIHN1Ym1pdHRlZEJ5VXNlck5hbWU6ICIiLAogICAgICAgIHJlcG9ydGVkQXQ6ICIiLAogICAgICAgIGlzc3VlRGVzY3JpcHRpb246ICIiLAogICAgICAgIGRlc2NyaXB0aW9uOiAiIiwKICAgICAgICBpZ25vcmVDb21tZW50czogIiIsCiAgICAgICAgc3RhdHVzOiAiIiwKICAgICAgfSwKICAgICAgc3VibWl0dGVkYnlVc2VyVVVJRDogIiIsCiAgICAgIHBhcnRzOiBbXSwKICAgICAgc2VydmljZVJlcXVlc3Q6ICIiLAogICAgICBpbnNwZWN0aW9uUmVwb3J0OiAiIiwKICAgICAgaXNzdWVJbmRleDogMCwKICAgICAgc2VydmljZUluZGV4OiAwLAogICAgICBpbnNwZWN0aW9uSW5kZXg6IDAsCiAgICAgIHBhcnRUYWJsZTogMCwKICAgICAgcHJpb3JpdHlPcHRpb25zOiBbCiAgICAgICAgeyBsYWJlbDogImxvdyIgfSwKICAgICAgICB7IGxhYmVsOiAiTWVkaXVtIiB9LAogICAgICAgIHsgbGFiZWw6ICJIaWdoIiB9LAogICAgICBdLAogICAgICBzdGF0dXNPcHRpb25zOiBbCiAgICAgICAgeyBsYWJlbDogIlJlcG9ydGVkIiwgdmFsdWU6ICJyZXBvcnRlZCIgfSwKICAgICAgICB7IGxhYmVsOiAiSW5wcm9ncmVzcyIsIHZhbHVlOiAiaW5wcm9ncmVzcyIgfSwKICAgICAgICB7IGxhYmVsOiAiUmVzb2x2ZWQiLCB2YWx1ZTogIlJlc29sdmVkIiB9LAogICAgICAgIHsgbGFiZWw6ICJJZ25vcmUiLCB2YWx1ZTogImlnbm9yZWQiIH0sCiAgICAgIF0sCiAgICAgIGFkZFBhcnRzRGlhbG9nOiBmYWxzZSwKICAgICAgYWRkQ29zdHNEaWFsb2c6IGZhbHNlLAogICAgICBjb3N0VG90YWw6IDAsCiAgICAgIGNvc3RUYWJsZTogMCwKICAgICAgY29zdFR5cGU6IGZhbHNlLAogICAgICB0b3RhbFdvcmtPcmRlckNvc3RzOiAwLAogICAgICB2YWx1ZTogIiIsCiAgICAgIGNhdGVnb3J5T3B0aW9uczogW10sCiAgICAgIHR5cGVPcHRpb25zOiBbXSwKICAgICAgYXNzZXROYW1lOiAiIiwKICAgICAgYXNzZXRDYXRlZ29yeU9wdGlvbnM6IFtdLAogICAgICBhbGxBc3NldERhdGE6IFtdLAogICAgICBhc3NldE5hbWVzOiBbXSwKICAgICAgY2F0ZWdvcnlJbmRleDogMCwKICAgICAgYXNzZXRJbmRleDogMCwKICAgICAgcGFydFR5cGU6IGZhbHNlLAogICAgICBwYXJ0OiAiIiwKICAgICAgY3VycmVuY3k6ICIiLAogICAgICBhc3NldElzc3VlczogIiIsCiAgICAgIElzc3VlQ2F0Z29yeVJlbGF0ZWRJc3N1ZXM6ICIiLAogICAgICBpc3N1ZVdvcmtPcmRlcjogIiIsCiAgICAgIGluc3BlY3Rpb25Jc3N1ZTogIiIsCiAgICAgIGltYWdlVm9pY2VzOiBbXSwKICAgICAgZmllbGRzRGlzYWJsZTogIiIsCiAgICAgIGFzc2V0UmVsYXRlZElzc3VlczogIiIsCiAgICAgIGlzc3VlQ2F0ZWdvcnk6ICIiLAogICAgICBpc3N1ZXNPYmo6IFtdLAogICAgICBpc3N1ZVN0YXR1czogIiIsCiAgICAgIGFzc2V0RmllbGRzRGlzYWJsZTogIiIsCiAgICAgIG1hbnVmYWN0dXJlOiAiIiwKICAgICAgb2JqQXNzZXROYW1lOiAiIiwKICAgICAgb2JqQXNzZXRVVUlEOiAiIiwKICAgICAgdXVpZDogIiIsCiAgICAgIHVwZGF0ZUNvc3RJbmRleDogMCwKICAgICAgZmlsZVVwbG9hZDogW10sCiAgICAgIGlzc3VlQ2F0ZWdvcnlJbmRleDogMCwKICAgICAgYXNzZXRJbmZvOiB7fSwKICAgICAgY2F0ZWdvcnlMaXN0OiAiIiwKICAgICAgY2F0ZU9wdGlvbnM6IFtdLAogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBjbGVhclNlbGVjdGVkUHJpb3JpdHkoKSB7CiAgICAgIHRoaXMuaXNzdWVzLnByaW9yaXR5ID0gIiI7CiAgICAgIHRoaXMuaXNzdWVDYXRlZ29yeUluZGV4Kys7CiAgICB9LAoKICAgIGNsZWFyU2VsZWN0ZWRDYXRlZ29yeSgpIHsKICAgICAgdGhpcy5pc3N1ZXMuaXNzdWVDYXRlZ29yeSA9ICIiOwogICAgICB0aGlzLmlzc3Vlcy5pc3N1ZVR5cGUgPSAiIjsKICAgICAgdGhpcy50eXBlT3B0aW9ucyA9IFtdOwogICAgICB0aGlzLmlzc3VlQ2F0ZWdvcnlJbmRleCsrOwogICAgfSwKCiAgICBjbGVhclNlbGVjdGVkQ2F0ZWdvcnRUeXBlKCkgewogICAgICB0aGlzLmlzc3Vlcy5pc3N1ZVR5cGUgPSAiIjsKICAgICAgdGhpcy5pc3N1ZUNhdGVnb3J5SW5kZXgrKzsKICAgIH0sCgogICAgdGVzdENvc3QodmFsdWUpIHsKICAgICAgdGhpcy50b3RhbFdvcmtPcmRlckNvc3RzID0gdmFsdWU7CiAgICAgIHRoaXMudXBkYXRlQ29zdEluZGV4Kys7CiAgICB9LAogICAgZ2V0UGFydHNCeVVVSWQodXVpZCkgewogICAgICBXb3JrT3JkZXJTZXJ2aWNlLmdldFBhcnRzQnlJc3N1ZVVVSUQodXVpZCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgIGxldCBpbmRleCA9IDA7CiAgICAgICAgICAgICAgaW5kZXggPCByZXNwb25zZS5kYXRhLnBhcnRVc2VkLmxlbmd0aDsKICAgICAgICAgICAgICBpbmRleCsrCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMudG90YWxXb3JrT3JkZXJDb3N0cyArPQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5wYXJ0VXNlZFtpbmRleF0ucXVhbnRpdHkgKgogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnBhcnRVc2VkW2luZGV4XS5jb3N0LmFtb3VudCArCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnBhcnRVc2VkW2luZGV4XS5jb3N0LnRheEFtb3VudDsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnVwZGF0ZVNpZGUrKzsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHt9KTsKICAgIH0sCiAgICByZWNlaXZlRG9jdW1lbnQoZmlsZSkgewogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLnVwbG9hZEZpbGVUb3MzKHRoaXMuZmlsZVJlY29yZCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEucmVzcG9uc2VJZGVudGlmaWVyID09PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgbGV0IGltYWdlVm9pY2UgPSB7CiAgICAgICAgICAgICAgY29udGVudFVybDogcmVzLmRhdGEuZmlsZVVybCwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5maWxlVXBsb2FkID0gW107CiAgICAgICAgICAgIHRoaXMuZmlsZVVwbG9hZC5wdXNoKGltYWdlVm9pY2UpOwogICAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkltYWdlIGFkZGVkIFN1Y2N1c3NmdWxseS4iLCAic3VjY2VzcyIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJQbGVhc2UgdXBsb2FkIGltYWdlIGFnYWluLiIsICJlcnJvciIpOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldENvc3RCeVVVSUQodXVpZCkgewogICAgICBXb3JrT3JkZXJTZXJ2aWNlLmdldENvc3RzQnlJc3N1ZVVVSUQodXVpZCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcmVzcG9uc2UuZGF0YS5jb3N0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgIHRoaXMudG90YWxXb3JrT3JkZXJDb3N0cyArPQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5jb3N0W2luZGV4XS5jb3N0UXVhbnRpdHkgKgogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmNvc3RbaW5kZXhdLmFtb3VudCArCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmNvc3RbaW5kZXhdLnRheEFtb3VudDsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnVwZGF0ZVNpZGUrKzsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHt9KTsKICAgIH0sCiAgICB1cGRhdGVDb3N0KCkgewogICAgICB0aGlzLmFkZENvc3RzRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuY29zdFR5cGUgPSBmYWxzZTsKICAgICAgdGhpcy5nZXRDb3N0cyh0aGlzLnV1aWQpOwogICAgICB0aGlzLiRlbWl0KCJzaWRlQmFySW5kZXgiKTsKICAgIH0sCgogICAgY3JlYXRlQ29zdCgpIHsKICAgICAgdGhpcy5hZGRDb3N0c0RpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmdldENvc3RzKHRoaXMudXVpZCk7CiAgICAgIHRoaXMuJGVtaXQoInNpZGVCYXJJbmRleCIpOwogICAgfSwKICAgIGVkaXRDb3N0KGNvc3QpIHsKICAgICAgdGhpcy5jb3N0ID0gY29zdDsKICAgICAgdGhpcy5jb3N0VHlwZSA9IHRydWU7CiAgICAgIHRoaXMuYWRkQ29zdHNEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIGRlbGV0ZUNvc3QoY29zdCkgewogICAgICBXb3JrT3JkZXJTZXJ2aWNlLmRlbGV0ZUNvc3QoY29zdC51dWlkKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJDb3N0IERlbGV0ZSBTdWNjZXNzZnVsbHkiLCAic3VjY2VzcyIpOwogICAgICAgICAgICB0aGlzLmNvc3RUYWJsZSsrOwogICAgICAgICAgICB0aGlzLnVwZGF0ZVNpZGUrKzsKICAgICAgICAgICAgdGhpcy5nZXRDb3N0cyh0aGlzLnV1aWQpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge30pOwogICAgfSwKICAgIGdldENvc3RzKHV1aWQpIHsKICAgICAgV29ya09yZGVyU2VydmljZS5nZXRDb3N0c0J5SXNzdWVVVUlEKHV1aWQpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5jb3N0cyA9IHJlcy5kYXRhLmNvc3Q7CiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5jb3N0cy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgdGhpcy5jb3N0VG90YWwgPQogICAgICAgICAgICAgIHRoaXMuY29zdHNbaW5kZXhdLmFtb3VudCAqIHRoaXMuY29zdHNbaW5kZXhdLmNvc3RRdWFudGl0eSArCiAgICAgICAgICAgICAgdGhpcy5jb3N0c1tpbmRleF0udGF4QW1vdW50OwogICAgICAgICAgfQogICAgICAgICAgdGhpcy50b3RhbFdvcmtPcmRlckNvc3QgKz0gdGhpcy5jb3N0VG90YWw7CiAgICAgICAgICB0aGlzLnRvdGFsSW5kZXgrKzsKICAgICAgICAgIHRoaXMudXBkYXRlU2lkZSsrOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0SW5zcGVjdGlvbmJ5SXNzdWVVVUlEKHV1aWQpIHsKICAgICAgSW5zcGVjdGlvblNlcnZpY2UuZ2V0SW5zcGVjdGlvbmJ5SXNzdWVVVUlEKHV1aWQpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5pbnNwZWN0aW9uSXNzdWUgPSByZXMuZGF0YS5pbnNwZWN0aW9uUmVwb3J0czsKICAgICAgICAgIHRoaXMucGFydFRhYmxlKys7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJFcnJvciIsICJlcnJvciIpOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldFdvcmtPcmRlckJ5aXNzdWVVVUlEKHV1aWQpIHsKICAgICAgV29ya09yZGVyU2VydmljZS5nZXRXb3JrT3JkZXJCeWlzc3VlVVVJRCh1dWlkKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuaXNzdWVXb3JrT3JkZXIgPSByZXMuZGF0YS53b3JrT3JkZXI7CiAgICAgICAgICB0aGlzLnBhcnRUYWJsZSsrOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiRXJyb3IiLCAiZXJyb3IiKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRDdXJyZW5jeSgpIHsKICAgICAgQXNzZXRQZXJzb25uZWxTZXJ2aWNlLmdldENvbXBhbnlDdXJyZW5jeSgKICAgICAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkCiAgICAgICkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmN1cnJlbmN5ID0gcmVzcG9uc2UuZGF0YS5jdXJyZW5jeTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0UGFydHModXVpZCkgewogICAgICBXb3JrT3JkZXJTZXJ2aWNlLmdldFBhcnRzQnlJc3N1ZVVVSUQodXVpZCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnBhcnRzID0gcmVzLmRhdGEucGFydFVzZWQ7CgogICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucGFydHMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgIHRoaXMucGFydHNUb3RhbCA9CiAgICAgICAgICAgICAgdGhpcy5wYXJ0c1tpbmRleF0ucXVhbnRpdHkgKiB0aGlzLnBhcnRzW2luZGV4XS5jb3N0LmFtb3VudCArCiAgICAgICAgICAgICAgdGhpcy5wYXJ0c1tpbmRleF0uY29zdC50YXhBbW91bnQ7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnRvdGFsV29ya09yZGVyQ29zdCArPSB0aGlzLnBhcnRzVG90YWw7CiAgICAgICAgICB0aGlzLnRvdGFsSW5kZXgrKzsKICAgICAgICAgIHRoaXMudXBkYXRlU2lkZSsrOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICB9LAogICAgYWRkRnVuY3Rpb24oKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkVGFiID09PSAicGFydHMiKSB7CiAgICAgICAgdGhpcy5hZGRQYXJ0c0RpYWxvZyA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZFRhYiA9PT0gImNvc3RzIikgewogICAgICAgIHRoaXMuYWRkQ29zdHNEaWFsb2cgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgZWRpdFBhcnQocGFydCkgewogICAgICB0aGlzLnBhcnQgPSBwYXJ0OwogICAgICB0aGlzLnBhcnRUeXBlID0gdHJ1ZTsKICAgICAgdGhpcy5hZGRQYXJ0c0RpYWxvZyA9IHRydWU7CiAgICB9LAogICAgVXBkYXRlUGFydCgpIHsKICAgICAgdGhpcy5hZGRQYXJ0c0RpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnBhcnRUeXBlID0gZmFsc2U7CiAgICAgIHRoaXMuZ2V0UGFydHModGhpcy51dWlkKTsKICAgIH0sCiAgICBjcmVhdGVQYXJ0KCkgewogICAgICB0aGlzLmFkZFBhcnRzRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuZ2V0UGFydHModGhpcy51dWlkKTsKICAgICAgdGhpcy51cGRhdGVTaWRlKys7CiAgICB9LAogICAgZnVsbHNjcmVlbkltYWdlKHZhbHVlKSB7CiAgICAgIHRoaXMucG9wdXBJbWFnZSA9IHZhbHVlOwogICAgICB0aGlzLmltYWdlRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5pbWFnZURpYWxvZyA9IGZhbHNlOwogICAgfSwKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLmFkZFBhcnRzRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMucGFydFR5cGUgPSBmYWxzZTsKICAgICAgdGhpcy5hcmNoaXZlSW5zcGVjdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmFkZENvc3RzRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuY29zdFR5cGUgPSBmYWxzZTsKICAgIH0sCiAgICBhcmNoaXZlRGlhbG9nKCkgewogICAgICBJbnNwZWN0aW9uU2VydmljZS5kZWxldGVJbnNwZWN0aW9uQnlVVUlEKHRoaXMuaW5zcGVjdGlvbklELCAiYXJjaGl2ZSIpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5yZXNldFRhYmxlKys7CgogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiSW5zcGVjdGlvbiBBcmNoaXZlZCBTdWNjZXNzZnVsbHkiLCAic3VjY2VzcyIpOwogICAgICAgICAgICB0aGlzLmFyY2hpdmVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7CiAgICB9LAogICAgZGVsZXRlUGFydChwYXJ0KSB7CiAgICAgIFdvcmtPcmRlclNlcnZpY2UuZGVsZXRlUGFydChwYXJ0LnV1aWQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIlBhcnQgRGVsZXRlIFN1Y2Nlc3NmdWxseSIsICJzdWNjZXNzIik7CiAgICAgICAgICAgIHRoaXMucGFydFRhYmxlKys7CiAgICAgICAgICAgIHRoaXMudXBkYXRlU2lkZSsrOwogICAgICAgICAgICB0aGlzLmdldFBhcnRzKHRoaXMudXVpZCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7CiAgICB9LAogICAgc2VsZWN0TWFuYWdlbWVudFR5cGUob2JqKSB7CiAgICAgIHRoaXMubWFuYWdlT3B0aW9uID0gb2JqLnZhbHVlOwogICAgfSwKICAgIG9uU2VsZWN0ZWRBc3NldE5hbWUodmFsdWUpIHsKICAgICAgdGhpcy5hc3NldFV1aWQgPSB2YWx1ZS5zZWxlY3RlZE9iamVjdC51dWlkOwogICAgICB0aGlzLm9iakFzc2V0TmFtZSA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0LmxhYmVsOwogICAgICB0aGlzLm9iakFzc2V0VVVJRCA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0LnV1aWQ7CiAgICAgIHRoaXMuY3VycmVudFBhZ2VPZkFzc2V0UmVsYXRlZElzc3VlcyA9IDE7CiAgICAgIHRoaXMuYXNzZXRJbmZvID0gdmFsdWUuc2VsZWN0ZWRPYmplY3Q7CiAgICAgIHRoaXMuZ2V0UGFnaW5hdGVkQXNzZXRSZWxhdGVkSXNzdWVzKAogICAgICAgIHRoaXMuY3VycmVudFBhZ2VPZkFzc2V0UmVsYXRlZElzc3VlcywKICAgICAgICB0aGlzLmFzc2V0VXVpZAogICAgICApOwogICAgfSwKCiAgICBwYWdpbmF0aW9uT2ZBc3NldFJlbGF0ZWRJc3N1ZSh2YWwpIHsKICAgICAgdGhpcy5nZXRQYWdpbmF0ZWRBc3NldFJlbGF0ZWRJc3N1ZXModmFsLCB0aGlzLmlzc3Vlcy5hc3NldFVVSUQpOwogICAgfSwKCiAgICBnZXRQYWdpbmF0ZWRBc3NldFJlbGF0ZWRJc3N1ZXModmFsLCBhc3NldFVVSUQpIHsKICAgICAgbGV0IHJlcXVlc3QgPSB7CiAgICAgICAgb2Zmc2V0OiB2YWwgLSAxLAogICAgICAgIGxpbWl0OiB0aGlzLnJvd3NQZXJQYWdlT2ZBc3NldFJlbHRlZElzc3VlLAogICAgICAgIGFzc2V0VVVJRDogYXNzZXRVVUlELAogICAgICAgIHN0YXR1czogInJlcG9ydGVkIiwKICAgICAgICB0ZW5hbnRVVUlEOiB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgICAgIGlzc3VlVVVJRDogdGhpcy4kcm91dGUucGFyYW1zLmlzc3VlSUQsCiAgICAgIH07CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmdldFBhZ2luYXRlZEFzc2V0UmVsYXRlZElzc3VlcyhyZXF1ZXN0KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMubnVtYmVyT2ZwYWdlT2ZBc3NldFJlbGF0ZWRJc3N1ZXMgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmdzLnRvdGFsUGFnZXM7CiAgICAgICAgICAgIHRoaXMuYXNzZXRJc3N1ZXMgPSByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy5jb250ZW50OwogICAgICAgICAgICB0aGlzLmFzc2V0SXNzdWVzLm1hcCgoaXNzdWUpID0+IHsKICAgICAgICAgICAgICBpc3N1ZS5yZXBvcnRlZEF0ID0gbW9tZW50KGlzc3VlLnJlcG9ydGVkQXQpLmZvcm1hdCgKICAgICAgICAgICAgICAgICJERCBNTU0gWVlZWSBoaDptbSBhIgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOyAvLyBubyBzbmFja2FiYXIgY29tcG9uZW50IHNvIGNvbnNvbGUgdGhlIGVycm9yCiAgICAgICAgfSk7CiAgICB9LAogICAgb25TZWxlY3RlZEFzc2V0Q2F0ZWdvcnkodmFsdWUpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ3ZhbHVlJyx2YWx1ZSkKICAgICAgdGhpcy5hc3NldE5hbWVzID0gW107CiAgICAgIHRoaXMuaXNzdWVzLmFzc2V0TmFtZSA9ICIiOwogICAgICAgICAgICB0aGlzLmFzc2V0TmFtZSA9ICIiOwogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5hbGxBc3NldERhdGEubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5hbGxBc3NldERhdGFbaW5kZXhdLmNhdGVnb3J5VVVJRCA9PT0KICAgICAgICAgIHZhbHVlLnNlbGVjdGVkT2JqZWN0LmNhdGVnb3J5VVVJRAogICAgICAgICkgewogICAgICAgICAgdGhpcy5hc3NldE5hbWVzLnB1c2godGhpcy5hbGxBc3NldERhdGFbaW5kZXhdKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmNhdGVnb3J5TGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBpZiAodGhpcy5jYXRlZ29yeUxpc3RbaW5kZXhdLm5hbWUgPT09IHZhbHVlLnZhbHVlKSB7CiAgICAgICAgICBmb3IgKAogICAgICAgICAgICBsZXQgaW5kZXgxID0gMDsKICAgICAgICAgICAgaW5kZXgxIDwgdGhpcy5jYXRlZ29yeUxpc3RbaW5kZXhdLmlzc3Vlc0NhdGVnb3J5LmZpZWxkcy5sZW5ndGg7CiAgICAgICAgICAgIGluZGV4MSsrCiAgICAgICAgICApIHsKICAgICAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgICAgICBsYWJlbDoKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0W2luZGV4XS5pc3N1ZXNDYXRlZ29yeS5maWVsZHNbaW5kZXgxXS5sYWJlbCwKICAgICAgICAgICAgICB2YWx1ZToKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0W2luZGV4XS5pc3N1ZXNDYXRlZ29yeS5maWVsZHNbaW5kZXgxXS5sYWJlbCwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jYXRlT3B0aW9ucy5wdXNoKAogICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0W2luZGV4XS5pc3N1ZXNDYXRlZ29yeS5maWVsZHNbaW5kZXgxXQogICAgICAgICAgICApOwogICAgICAgICAgICB0aGlzLmNhdGVnb3J5T3B0aW9ucy5wdXNoKG9iaik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmlzc3Vlcy5hc3NldE5hbWUgPSAiIjsKICAgICAgdGhpcy5jYXRlZ29yeUluZGV4Kys7CiAgICAgIHRoaXMuYXNzZXRJbmRleCsrOwogICAgICB0aGlzLnVwZGF0ZVNpZGUrKzsKICAgICAgLy8gdGhpcy5nZXRJbnNwZWN0aW9uVGVtYXBsYXRlc0J5QXNzZXRDYXRlZ29yeSgKICAgICAgLy8gICB2YWx1ZS5zZWxlY3RlZE9iamVjdC5jYXRlZ29yeVVVSUQKICAgICAgLy8gKTsKICAgICAgLy8gdGhpcy53b3JrT3JkZXJTdW1hcnkubmFtZSA9ICIiOwogICAgICAvLwl0aGlzLmFzc2V0SW5kZXgrKzsKICAgIH0sCgogICAgb25DbGVhckFzc2V0Q2F0ZSgpIHsKCiAgICAgIC8vIHRoaXMuaXNzdWVzLmFzc2V0Q2F0ZWdvcnkgPSAiIjsKICAgICAgLy8gdGhpcy5pc3N1ZXMuYXNzZXROYW1lID0gIiI7CiAgICAgIC8vIHRoaXMuYXNzZXROYW1lID0gIiI7CiAgICAgIC8vIHRoaXMuaXNzdWVzLmlzc3VlQ2F0ZWdvcnkgPSAiIjsKICAgICAgLy8gdGhpcy5pc3N1ZXMuaXNzdWVUeXBlID0gIiI7CiAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLmlzc3Vlcy5hc3NldE5hbWUnLHRoaXMuaXNzdWVzLmFzc2V0TmFtZSx0aGlzLmFzc2V0TmFtZSkKCn0sCiAgICBvbkNsZWFyQXNzZXQoKSB7CiAgICAgIHRoaXMuaXNzdWVzLmFzc2V0TmFtZSA9ICIiOwogICAgICB0aGlzLmlzc3Vlcy5pc3N1ZUNhdGVnb3J5ID0gIiI7CiAgICAgIHRoaXMuaXNzdWVzLmlzc3VlVHlwZSA9ICIiOwogICAgfSwKCiAgICBpc3N1ZURldGFpbHNBY2NvcmRpb25GdW5jdGlvbih2YWx1ZSkgewogICAgICBpZiAodGhpcy4kcmVmcy5pc3N1ZURldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPT09IHRydWUpIHsKICAgICAgICB0aGlzLiRyZWZzLmFzc2V0RGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIGlmICgKICAgICAgICAgIHRoaXMuaXNzdWVzLnN0YXR1cyA9PSAicmVwb3J0ZWQiICYmCiAgICAgICAgICB0aGlzLmlzc3Vlcy5pbnBlY3Rpb25JdGVtc1VVSUQgIT09IG51bGwKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuJHJlZnMuaW5zcGVjdGlvbkRldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuaXNzdWVzLnN0YXR1cyA9PSAiUmVzb2x2ZWQiKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLnBhcnRzRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICB0aGlzLiRyZWZzLmF0dGFjaG1lbnRzRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIGlmICgKICAgICAgICAgIHRoaXMuaXNzdWVXb3JrT3JkZXIud29ya09yZGVyTnVtYmVyICE9PSBudWxsICYmCiAgICAgICAgICB0aGlzLmlzc3VlV29ya09yZGVyLnN0YXR1cyAhPT0gImlnbm9yZWQiCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLnJlbGF0ZWRXb3JrT3JkZXJEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHRoaXMuJHJlZnMucmVsYXRlZElzc3VlRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIGFzc2V0RGV0YWlsQWNjb3JkaW9uRnVuY3Rpb24odmFsdWUpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuYXNzZXREZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy4kcmVmcy5pc3N1ZURldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICBpZiAoCiAgICAgICAgICB0aGlzLmlzc3Vlcy5zdGF0dXMgPT0gInJlcG9ydGVkIiAmJgogICAgICAgICAgdGhpcy5pc3N1ZXMuaW5wZWN0aW9uSXRlbXNVVUlEICE9PSBudWxsCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmluc3BlY3Rpb25EZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmlzc3Vlcy5zdGF0dXMgPT0gIlJlc29sdmVkIikgewogICAgICAgICAgdGhpcy4kcmVmcy5wYXJ0c0RldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kcmVmcy5hdHRhY2htZW50c0RldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICBpZiAoCiAgICAgICAgICB0aGlzLmlzc3VlV29ya09yZGVyLndvcmtPcmRlck51bWJlciAhPT0gbnVsbCAmJgogICAgICAgICAgdGhpcy5pc3N1ZVdvcmtPcmRlci5zdGF0dXMgIT09ICJpZ25vcmVkIgogICAgICAgICkgewogICAgICAgICAgdGhpcy4kcmVmcy5yZWxhdGVkV29ya09yZGVyRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICB0aGlzLiRyZWZzLnJlbGF0ZWRJc3N1ZURldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIHBhcnRzRGV0YWlsc0FjY29yZGlvbkZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLnBhcnRzRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuJHJlZnMuYXNzZXREZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5pc3N1ZXMuc3RhdHVzID09ICJyZXBvcnRlZCIgJiYKICAgICAgICAgIHRoaXMuaXNzdWVzLmlucGVjdGlvbkl0ZW1zVVVJRCAhPT0gbnVsbAogICAgICAgICkgewogICAgICAgICAgdGhpcy4kcmVmcy5pbnNwZWN0aW9uRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICB0aGlzLiRyZWZzLmlzc3VlRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJHJlZnMuYXR0YWNobWVudHNEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5pc3N1ZVdvcmtPcmRlci53b3JrT3JkZXJOdW1iZXIgIT09IG51bGwgJiYKICAgICAgICAgIHRoaXMuaXNzdWVXb3JrT3JkZXIuc3RhdHVzICE9PSAiaWdub3JlZCIKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuJHJlZnMucmVsYXRlZFdvcmtPcmRlckRldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kcmVmcy5yZWxhdGVkSXNzdWVEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgaW5zcGVjdGlvbkRldGFpbHNBY2NvcmRpb25GdW5jdGlvbih2YWx1ZSkgewogICAgICBpZiAodGhpcy4kcmVmcy5pbnNwZWN0aW9uRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuJHJlZnMuYXNzZXREZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcmVmcy5pc3N1ZURldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICBpZiAodGhpcy5pc3N1ZXMuc3RhdHVzID09ICJSZXNvbHZlZCIpIHsKICAgICAgICAgIHRoaXMuJHJlZnMucGFydHNEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHRoaXMuJHJlZnMuYXR0YWNobWVudHNEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5pc3N1ZVdvcmtPcmRlci53b3JrT3JkZXJOdW1iZXIgIT09IG51bGwgJiYKICAgICAgICAgIHRoaXMuaXNzdWVXb3JrT3JkZXIuc3RhdHVzICE9PSAiaWdub3JlZCIKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuJHJlZnMucmVsYXRlZFdvcmtPcmRlckRldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kcmVmcy5yZWxhdGVkSXNzdWVEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgYXR0YWNobWVudHNEZXRhaWxzQWNjb3JkaW9uRnVuY3Rpb24odmFsdWUpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuYXR0YWNobWVudHNEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy4kcmVmcy5hc3NldERldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICBpZiAoCiAgICAgICAgICB0aGlzLmlzc3Vlcy5zdGF0dXMgPT0gInJlcG9ydGVkIiAmJgogICAgICAgICAgdGhpcy5pc3N1ZXMuaW5wZWN0aW9uSXRlbXNVVUlEICE9PSBudWxsCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmluc3BlY3Rpb25EZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmlzc3Vlcy5zdGF0dXMgPT0gIlJlc29sdmVkIikgewogICAgICAgICAgdGhpcy4kcmVmcy5wYXJ0c0RldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHRoaXMuJHJlZnMuaXNzdWVEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5pc3N1ZVdvcmtPcmRlci53b3JrT3JkZXJOdW1iZXIgIT09IG51bGwgJiYKICAgICAgICAgIHRoaXMuaXNzdWVXb3JrT3JkZXIuc3RhdHVzICE9PSAiaWdub3JlZCIKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuJHJlZnMucmVsYXRlZFdvcmtPcmRlckRldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kcmVmcy5yZWxhdGVkSXNzdWVEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICByZWxhdGVkV29ya09yZGVyRGV0YWlsc0FjY29yZGlvbkZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLnJlbGF0ZWRXb3JrT3JkZXJEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy4kcmVmcy5hc3NldERldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICBpZiAoCiAgICAgICAgICB0aGlzLmlzc3Vlcy5zdGF0dXMgPT0gInJlcG9ydGVkIiAmJgogICAgICAgICAgdGhpcy5pc3N1ZXMuaW5wZWN0aW9uSXRlbXNVVUlEICE9PSBudWxsCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmluc3BlY3Rpb25EZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmlzc3Vlcy5zdGF0dXMgPT0gIlJlc29sdmVkIikgewogICAgICAgICAgdGhpcy4kcmVmcy5wYXJ0c0RldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kcmVmcy5hdHRhY2htZW50c0RldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB0aGlzLiRyZWZzLmlzc3VlRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJHJlZnMucmVsYXRlZElzc3VlRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgcmVsYXRlZElzc3VlRGV0YWlsc0FjY29yZGlvbkZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLnJlbGF0ZWRJc3N1ZURldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPT09IHRydWUpIHsKICAgICAgICB0aGlzLiRyZWZzLmFzc2V0RGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIGlmICgKICAgICAgICAgIHRoaXMuaXNzdWVzLnN0YXR1cyA9PSAicmVwb3J0ZWQiICYmCiAgICAgICAgICB0aGlzLmlzc3Vlcy5pbnBlY3Rpb25JdGVtc1VVSUQgIT09IG51bGwKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuJHJlZnMuaW5zcGVjdGlvbkRldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuaXNzdWVzLnN0YXR1cyA9PSAiUmVzb2x2ZWQiKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLnBhcnRzRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICB0aGlzLiRyZWZzLmF0dGFjaG1lbnRzRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIGlmICgKICAgICAgICAgIHRoaXMuaXNzdWVXb3JrT3JkZXIud29ya09yZGVyTnVtYmVyICE9PSBudWxsICYmCiAgICAgICAgICB0aGlzLmlzc3VlV29ya09yZGVyLnN0YXR1cyAhPT0gImlnbm9yZWQiCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLnJlbGF0ZWRXb3JrT3JkZXJEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHRoaXMuJHJlZnMuaXNzdWVEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgZ2V0Rm9ybUVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pIHsKICAgICAgaWYgKGZpZWxkVmFsaWRhdGlvbi4kZGlydHkpIHsKICAgICAgICByZXR1cm4gRnVuY3Rpb25zLmdldEZvcm1GaWVsZEVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pOwogICAgICB9CiAgICB9LAogICAgZ2V0VXNlck5hbWUodXNlclVVSUQpIHsKICAgICAgQXNzZXRQZXJzb25uZWxTZXJ2aWNlLmdldE5hbWVPZlVzZXJzQnlVVUlEUyh7IHV1aWRzOiB1c2VyVVVJRCB9KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuaXNzdWVzLnN1Ym1pdHRlZEJ5VXNlck5hbWUgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudXNlcnNbdGhpcy5pc3N1ZXMuc3VibWl0dGVkQnlVc2VyVVVJRF0ubmFtZTsKICAgICAgICAgICAgdGhpcy5pc3N1ZUluZGV4Kys7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7CiAgICB9LAogICAgVmlld0lzc3VlKHV1aWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgIG5hbWU6ICJpc3N1ZS1kZXRhaWwiLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaXNzdWVJRDogdXVpZCwKICAgICAgICB9LAogICAgICB9KTsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSwKICAgIHZpZXdXb3JrT3JkZXIodXVpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogIndvcmstb3JkZXItZGV0YWlscyIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICB3b3JrdXVpZDogdXVpZCwKICAgICAgICB9LAogICAgICB9KTsKICAgIH0sCiAgICBWaWV3SW5zcGVjdGlvbih1dWlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbyh7CiAgICAgICAgbmFtZTogImluc3BlY3Rpb24tZGV0YWlscyIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBpbnNwZWN0aW9uVVVJRDogdXVpZCwKICAgICAgICB9LAogICAgICB9KTsKICAgIH0sCiAgICBhcmNoaXZlSW5zcGVjdGlvbih1dWlkKSB7CiAgICAgIHRoaXMuaW5zcGVjdGlvbklEID0gdXVpZDsKICAgICAgdGhpcy5hcmNoaXZlSW5zcGVjdGlvbkRpYWxvZyA9IHRydWU7CiAgICB9LAogICAgZ2V0QXNzZXQoYXNzZXRVVUlEKSB7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0QXNzZXRXaXRoRGV0YWlscyhhc3NldFVVSUQsIGZhbHNlLCB0cnVlKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuaXNzdWVzLmFzc2V0TmFtZSA9IHJlc3BvbnNlLmRhdGEuYXNzZXREZXRhaWwuYXNzZXREZXRhaWwubmFtZTsKICAgICAgICAgICAgdGhpcy5hc3NldE5hbWUgPSByZXNwb25zZS5kYXRhLmFzc2V0RGV0YWlsLmFzc2V0RGV0YWlsLm5hbWU7CiAgICAgICAgICAgIHRoaXMubWFudWZhY3R1cmUgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuYXNzZXREZXRhaWwuYXNzZXREZXRhaWwubWFudWZhY3R1cmU7CiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlJbmRleCsrOwogICAgICAgICAgICB0aGlzLnVwZGF0ZVNpZGUrKzsKICAgICAgICAgICAgdGhpcy5pc3N1ZXMuYXNzZXRDYXRlZ29yeSA9IHJlc3BvbnNlLmRhdGEuYXNzZXREZXRhaWwuY2F0ZWdvcnkubmFtZTsKICAgICAgICAgICAgdGhpcy5pc3N1ZXMuaXNzdWVJbmRleCA9IHRoaXMuaXNzdWVJbmRleCsrOwogICAgICAgICAgICAvLyB0aGlzLmdldElzc3Vlc0J5QXNzZXRVVUlEKHJlc3BvbnNlLmRhdGEuYXNzZXQuYXNzZXREZXRhaWwudXVpZCk7CiAgICAgICAgICAgIHRoaXMuZ2V0UGFnaW5hdGVkQXNzZXRSZWxhdGVkSXNzdWVzKAogICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2VPZkFzc2V0UmVsYXRlZElzc3VlcywKICAgICAgICAgICAgICBhc3NldFVVSUQKICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUluZGV4Kys7CiAgICAgICAgICAgIHRoaXMudXBkYXRlU2lkZSsrOwogICAgICAgICAgICB0aGlzLm9wZW5GbGFnID0gdHJ1ZTsKICAgICAgICAgICAgLy8JdGhpcy5pc3N1ZUluZGV4Kys7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7CiAgICB9LAogICAgc2VsZWN0Q2F0ZSh2YWx1ZSkgewogICAgICAvLyB0aGlzLnR5cGVPcHRpb25zID0gW107CiAgICAgIC8vIHRoaXMuaXNzdWVUeXBlID0gIiI7CiAgICAgIC8vIGZvciAoCiAgICAgIC8vICAgbGV0IGluZGV4ID0gMDsKICAgICAgLy8gICBpbmRleCA8IHRoaXMuZHJvcERvd25Db25maWdzLmlzc3VlQ2F0ZWdvcmllcy5sZW5ndGg7CiAgICAgIC8vICAgaW5kZXgrKwogICAgICAvLyApIHsKICAgICAgLy8gICBpZiAodmFsdWUudmFsdWUgPT09IHRoaXMuZHJvcERvd25Db25maWdzLmlzc3VlQ2F0ZWdvcmllc1tpbmRleF0udmFsdWUpIHsKICAgICAgLy8gICAgIGZvciAoCiAgICAgIC8vICAgICAgIGxldCBpbmRleDEgPSAwOwogICAgICAvLyAgICAgICBpbmRleDEgPCB0aGlzLmRyb3BEb3duQ29uZmlncy5pc3N1ZUNhdGVnb3JpZXNbaW5kZXhdLnR5cGVzLmxlbmd0aDsKICAgICAgLy8gICAgICAgaW5kZXgxKysKICAgICAgLy8gICAgICkgewogICAgICAvLyAgICAgICBsZXQgb2JqID0gewogICAgICAvLyAgICAgICAgIGxhYmVsOiB0aGlzLmRyb3BEb3duQ29uZmlncy5pc3N1ZUNhdGVnb3JpZXNbaW5kZXhdLnR5cGVzW2luZGV4MV0KICAgICAgLy8gICAgICAgICAgIC5sYWJlbCwKICAgICAgLy8gICAgICAgICB2YWx1ZTogdGhpcy5kcm9wRG93bkNvbmZpZ3MuaXNzdWVDYXRlZ29yaWVzW2luZGV4XS50eXBlc1tpbmRleDFdCiAgICAgIC8vICAgICAgICAgICAudmFsdWUsCiAgICAgIC8vICAgICAgIH07CiAgICAgIC8vICAgICAgIHRoaXMudHlwZU9wdGlvbnMucHVzaChvYmopOwogICAgICAvLyAgICAgfQogICAgICAvLyAgIH0KICAgICAgLy8gfQoKICAgICAgdGhpcy50eXBlT3B0aW9ucyA9IFtdOwogICAgICB0aGlzLmlzc3VlVHlwZSA9ICIiOwogICAgICBmb3IgKGxldCB4IGluIHRoaXMuY2F0ZU9wdGlvbnMpIHsKICAgICAgICBpZiAoCiAgICAgICAgICB2YWx1ZS52YWx1ZSA9PT0gdGhpcy5jYXRlT3B0aW9uc1t4XS5sYWJlbCAmJgogICAgICAgICAgdGhpcy5jYXRlT3B0aW9uc1t4XS5vcHRpb25zICE9PSAiIgogICAgICAgICkgewogICAgICAgICAgdmFyIHNwbGl0VmFscyA9IHRoaXMuY2F0ZU9wdGlvbnNbeF0ub3B0aW9ucy5zcGxpdCgiLCIpOwogICAgICAgICAgZm9yIChsZXQgeSBpbiBzcGxpdFZhbHMpIHsKICAgICAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgICAgICBsYWJlbDogc3BsaXRWYWxzW3ldLAogICAgICAgICAgICAgIHZhbHVlOiBzcGxpdFZhbHNbeV0sCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMudHlwZU9wdGlvbnMucHVzaChvYmopOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGdldFNlcnZpY2VSZXF1ZXN0KHNlcnZpY2VVVUlEKSB7CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmdldFNlcnZpY2VSZXF1ZXN0QnlVVUlEKHNlcnZpY2VVVUlEKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuc2VydmljZVJlcXVlc3QgPSByZXNwb25zZS5kYXRhLnNlcnZpY2VSZXF1ZXN0OwogICAgICAgICAgICB0aGlzLnNlcnZpY2VJbmRleCsrOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge30pOwogICAgfSwKCiAgICBnZXRJbnNwZWN0aW9uKGluc3BlY3Rpb25VVUlEKSB7CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmdldEluc3BlY3Rpb25SZXBvcnRCeVVVSUQoaW5zcGVjdGlvblVVSUQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5pbnNwZWN0aW9uUmVwb3J0ID0gcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uUmVwb3J0OwogICAgICAgICAgICB0aGlzLmluc3BlY3Rpb25JbmRleCsrOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge30pOwogICAgfSwKICAgIGdldEFsbENhdGVnb3JpZXMoY3VycmVudFVzZXJEZXRhaWxzKSB7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0QWxsQXNzZXRDYXRlZ29yaWVzKAogICAgICAgIGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkCiAgICAgICkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmNhdGVnb3J5TGlzdCA9IHJlcy5kYXRhLmNhdGVnb3JpZXM7CiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcmVzLmRhdGEuY2F0ZWdvcmllcy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgICAgICBpZDogcmVzLmRhdGEuY2F0ZWdvcmllc1tpbmRleF0uaWQsCiAgICAgICAgICAgICAgY2F0ZWdvcnlVVUlEOiByZXMuZGF0YS5jYXRlZ29yaWVzW2luZGV4XS51dWlkLAogICAgICAgICAgICAgIGxhYmVsOiByZXMuZGF0YS5jYXRlZ29yaWVzW2luZGV4XS5uYW1lLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmFzc2V0Q2F0ZWdvcnlPcHRpb25zLnB1c2gob2JqKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZ2V0QWxsQXNzZXQoY3VycmVudFVzZXJEZXRhaWxzKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldEFsbEFzc2V0KGN1cnJlbnRVc2VyRGV0YWlscykgewogICAgICBsZXQgY2F0ZWdvcnlVVUlEID0gIiI7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0QWxsQXNzZXRzKAogICAgICAgIGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkCiAgICAgICkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcmVzLmRhdGEuYXNzZXRzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICAgIHV1aWQ6IHJlcy5kYXRhLmFzc2V0c1tpbmRleF0udXVpZCwKICAgICAgICAgICAgICBjYXRlZ29yeVVVSUQ6IHJlcy5kYXRhLmFzc2V0c1tpbmRleF0uY2F0ZWdvcnlVVUlELAogICAgICAgICAgICAgIGxhYmVsOiByZXMuZGF0YS5hc3NldHNbaW5kZXhdLm5hbWUsCiAgICAgICAgICAgICAgdHlwZTogcmVzLmRhdGEuYXNzZXRzW2luZGV4XS50eXBlLAogICAgICAgICAgICAgIGFzc2V0TnVtYmVyOiByZXMuZGF0YS5hc3NldHNbaW5kZXhdLmFzc2V0TnVtYmVyLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmFsbEFzc2V0RGF0YS5wdXNoKG9iaik7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5jcmVhdGVXb3JrT3JkZXIgPT09IHRydWUpIHsKICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuYWxsQXNzZXREYXRhLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlLnBhcmFtcy5hc3NldFVVSUQgPT09IHRoaXMuYWxsQXNzZXREYXRhW2luZGV4XS51dWlkCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBjYXRlZ29yeVVVSUQgPSB0aGlzLmFsbEFzc2V0RGF0YVtpbmRleF0uY2F0ZWdvcnlVVUlEOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICBsZXQgaW5keCA9IDA7CiAgICAgICAgICAgICAgaW5keCA8IHRoaXMuYXNzZXRDYXRlZ29yeU9wdGlvbnMubGVuZ3RoOwogICAgICAgICAgICAgIGluZHgrKwogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICB0aGlzLmFzc2V0Q2F0ZWdvcnlPcHRpb25zW2luZHhdLmNhdGVnb3J5VVVJRCA9PT0gY2F0ZWdvcnlVVUlECiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB0aGlzLndvcmtPcmRlclN1bWFyeS5jYXRlZ29yeSA9CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRDYXRlZ29yeU9wdGlvbnNbaW5keF0ubGFiZWw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuYWxsQXNzZXREYXRhLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuYWxsQXNzZXREYXRhW2pdLmNhdGVnb3J5VVVJRCA9PT0gY2F0ZWdvcnlVVUlEKSB7CiAgICAgICAgICAgICAgICB0aGlzLndvcmtPcmRlclN1bWFyeS5uYW1lID0gdGhpcy5hbGxBc3NldERhdGFbal0ubGFiZWw7CiAgICAgICAgICAgICAgICB0aGlzLmFzc2V0TmFtZXMucHVzaCh0aGlzLmFsbEFzc2V0RGF0YVtqXSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmNhdGVnb3J5SW5kZXgrKzsKICAgICAgICAgICAgdGhpcy5hc3NldEluZGV4Kys7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgZGVsZXRlSXNzdWVJbWFnZSh1dWlkKSB7CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmRlbGV0ZUlzc3VlSW1hZ2UodXVpZCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJJbWFnZSByZW1vdmVkIHN1Y2Nlc3NmdWxseSIsICJzdWNjZXNzIik7CiAgICAgICAgICAgIHRoaXMuZ2V0SXNzdWVEZXRhaWxzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHt9KTsKICAgIH0sCgogICAgdXBkYXRlSXNzdWUoKSB7CiAgICAgIHRoaXMuJHYuJHRvdWNoKCk7CiAgICAgIGlmICh0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIlBsZWFzZSBmaWxsIGFsbCByZXF1aXJlZCBmaWVsZHMiLCAid2FybmluZyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICB0aGlzLmlzc3Vlcy5yZXBvcnRlZEF0ID0gbW9tZW50KHRoaXMuaXNzdWVzLnJlcG9ydGVkQXQpLnRvSVNPU3RyaW5nKCk7CiAgICAgIHRoaXMuaXNzdWVzLmFzc2V0Q2F0ZWdvcnkgPSB0aGlzLmFzc2V0SW5mby50eXBlOwogICAgICB0aGlzLmlzc3Vlcy5hc3NldE51bWJlciA9IHRoaXMuYXNzZXRJbmZvLmFzc2V0TnVtYmVyOwogICAgICB0aGlzLmlzc3Vlcy5hc3NldE5hbWUgPSB0aGlzLmFzc2V0SW5mby5sYWJlbDsKICAgICAgdGhpcy5pc3N1ZXMuYXNzZXRVVUlEID0gdGhpcy5vYmpBc3NldFVVSUQ7CiAgICAgIGxldCB1cGRhdGVJc3N1ZVJlcXVlc3QgPSB7CiAgICAgICAgaXNzdWVSZXBvcnRpbmc6IHRoaXMuaXNzdWVzLAogICAgICAgIGltYWdlVm9pY2VzOiBbXSwKICAgICAgfTsKICAgICAgaWYgKHRoaXMuZmlsZVJlY29yZCAhPT0gbnVsbCkgewogICAgICAgIC8vbWVhbnMgZmlsZSBpcyBhdHRhY2hlZCB0byBpdAogICAgICAgIHVwZGF0ZUlzc3VlUmVxdWVzdC5pbWFnZVZvaWNlcyA9IHRoaXMuZmlsZVVwbG9hZDsKICAgICAgICBJbnNwZWN0aW9uU2VydmljZS51cGRhdGVJc3N1ZSh1cGRhdGVJc3N1ZVJlcXVlc3QpCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogImlzc3VlcyIsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgdG9hc3RGbGFnOiB0cnVlLAogICAgICAgICAgICAgICAgICB0b2Fzc3RNZXNzYWdlOiAiSXNzdWUgVXBkYXRlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICB0b2FzdFR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLmRhdGEucmVzcG9uc2UsICJlcnJvciIpOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5maWxlUmVjb3JkID09IG51bGwpIHsKICAgICAgICBJbnNwZWN0aW9uU2VydmljZS51cGRhdGVJc3N1ZSh1cGRhdGVJc3N1ZVJlcXVlc3QpCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogImlzc3VlcyIsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgdG9hc3RGbGFnOiB0cnVlLAogICAgICAgICAgICAgICAgICB0b2Fzc3RNZXNzYWdlOiAiSXNzdWUgVXBkYXRlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICB0b2FzdFR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLmRhdGEucmVzcG9uc2UsICJlcnJvciIpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgcGFnaW5hdGlvbk9mSXNzdWVDYXRlZ29yeVJlbGF0ZWRJc3N1ZSh2YWwpIHsKICAgICAgdGhpcy5nZXRQYWdpbmF0ZWRJc3N1ZUNhdGVnb3J5UmVsYXRlZElzc3Vlcyh2YWwsIHRoaXMuaXNzdWVDYXRlZ29yeSk7CiAgICB9LAoKICAgIGdldFBhZ2luYXRlZElzc3VlQ2F0ZWdvcnlSZWxhdGVkSXNzdWVzKHZhbCwgaXNzdWVDYXRlZ29yeSkgewogICAgICBsZXQgcmVxdWVzdCA9IHsKICAgICAgICBpc3N1ZUNhdGVnb3J5OiBpc3N1ZUNhdGVnb3J5LAogICAgICAgIG9mZnNldDogdmFsIC0gMSwKICAgICAgICBsaW1pdDogdGhpcy5yb3dzUGVyUGFnZU9mSXNzdWVDYXRlZ29yeVJlbHRlZElzc3VlLAogICAgICAgIHRlbmFudFVVSUQ6IHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQsCiAgICAgICAgaXNzdWVVVUlEOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaXNzdWVJRCwKICAgICAgfTsKCiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmdldFBhZ2luYXRlZElzc3VlQ2F0ZWdvcnlSZWxhdGVkSXNzdWVzKHJlcXVlc3QpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5udW1iZXJPZnBhZ2VPZklzc3VlQ2F0ZWdvcnlSZWxhdGVkSXNzdWVzID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy50b3RhbFBhZ2VzOwogICAgICAgICAgICB0aGlzLmlzc3Vlc09iaiA9IHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmdzLmNvbnRlbnQ7CiAgICAgICAgICAgIHRoaXMuaXNzdWVzT2JqLm1hcCgob2JqKSA9PiB7CiAgICAgICAgICAgICAgb2JqLnJlcG9ydGVkQXQgPSBtb21lbnQob2JqLnJlcG9ydGVkQXQpLmZvcm1hdCgKICAgICAgICAgICAgICAgICJERCBNTU0gWVlZWSAgaGg6bW0gYSIKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsgLy8gYXMgbm8gc25hY2sgYmFyIGNvbXBvbmVudCBpcyBtYWRlIHNvIHVzaW5nIGNvbnNvbGUgZm9yIHRoaXMuCiAgICAgICAgfSk7CiAgICB9LAoKICAgIGdldElzc3VlRGV0YWlscygpIHsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgSW5zcGVjdGlvblNlcnZpY2UuZ2V0SXNzdWVCeVVVSUQodGhpcy4kcm91dGUucGFyYW1zLmlzc3VlSUQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmltYWdlVm9pY2VzID0gcmVzcG9uc2UuZGF0YS5pbWFnZVZvaWNlczsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmVzcG9uc2UnLHJlc3BvbnNlKQogICAgICAgICAgICB0aGlzLmlzc3VlcyA9IHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmc7CiAgICAgICAgICAgIHRoaXMuc3VibWl0dGVkYnlVc2VyVVVJRCA9IHRoaXMuaXNzdWVzLnN1Ym1pdHRlZEJ5VXNlclVVSUQ7CiAgICAgICAgICAgIHRoaXMuaXNzdWVDYXRlZ29yeSA9IHRoaXMuaXNzdWVzLmlzc3VlQ2F0ZWdvcnk7CiAgICAgICAgICAgIHRoaXMuaXNzdWVTdGF0dXMgPSB0aGlzLmlzc3Vlcy5zdGF0dXM7CgogICAgICAgICAgICBpZiAodGhpcy5pc3N1ZVN0YXR1cyA9PSAicmVwb3J0ZWQiKSB7CiAgICAgICAgICAgICAgdGhpcy5hc3NldEZpZWxkc0Rpc2FibGUgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmdldFVzZXJOYW1lKFt0aGlzLmlzc3Vlcy5zdWJtaXR0ZWRCeVVzZXJVVUlEXSk7CiAgICAgICAgICAgIHRoaXMuZ2V0QXNzZXQodGhpcy5pc3N1ZXMuYXNzZXRVVUlEKTsKICAgICAgICAgICAgdGhpcy5pc3N1ZXMucmVwb3J0ZWRBdCA9IG1vbWVudCh0aGlzLmlzc3Vlcy5yZXBvcnRlZEF0KS5mb3JtYXQoCiAgICAgICAgICAgICAgIkREIE1NTSBZWVlZIgogICAgICAgICAgICApOwogICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRoaXMuaXNzdWVzLmlzc3VlTnVtYmVyICsgIiB8ICIgKyAiRXJvaGFsIjsKICAgICAgICAgICAgdGhpcy5nZXRQYWdpbmF0ZWRJc3N1ZUNhdGVnb3J5UmVsYXRlZElzc3VlcygKICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlT2ZJc3N1ZUNhdGVnb3J5UmVsYXRlZElzc3VlcywKICAgICAgICAgICAgICB0aGlzLmlzc3VlQ2F0ZWdvcnkKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIHRoaXMuaXNzdWVTdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gImlucHJvZ3Jlc3MiIHx8CiAgICAgICAgICAgICAgdGhpcy5pc3N1ZVN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAicmVzb2x2ZWQiCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuZmllbGRzRGlzYWJsZSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gSW5zcGVjdGlvblNlcnZpY2UuZ2V0UGFnaW5hdGVkSXNzdWVzKAogICAgICAgICAgICAvLyAJW10sCiAgICAgICAgICAgIC8vIAkicmVwb3J0ZWRBdCIsCiAgICAgICAgICAgIC8vIAkiZGVzYyIsCiAgICAgICAgICAgIC8vIAkwLAogICAgICAgICAgICAvLyAJMTAwMDAsCiAgICAgICAgICAgIC8vIAl0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkCiAgICAgICAgICAgIC8vICkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIC8vIAlmb3IgKAogICAgICAgICAgICAvLyAJCWxldCBpbmRleCA9IDA7CiAgICAgICAgICAgIC8vIAkJaW5kZXggPCByZXMuZGF0YS5pc3N1ZVJlcG9ydGluZ3MuY29udGVudC5sZW5ndGg7CiAgICAgICAgICAgIC8vIAkJaW5kZXgrKwogICAgICAgICAgICAvLyAJKSB7CiAgICAgICAgICAgIC8vIAkJaWYgKAogICAgICAgICAgICAvLyAJCQl0aGlzLmlzc3VlQ2F0ZWdvcnkgPT09CiAgICAgICAgICAgIC8vIAkJCXJlcy5kYXRhLmlzc3VlUmVwb3J0aW5ncy5jb250ZW50W2luZGV4XS5pc3N1ZUNhdGVnb3J5CiAgICAgICAgICAgIC8vIAkJKSB7CiAgICAgICAgICAgIC8vIAkJCXJlcy5kYXRhLmlzc3VlUmVwb3J0aW5ncy5jb250ZW50W2luZGV4XS5yZXBvcnRlZEF0ID0gbW9tZW50KAogICAgICAgICAgICAvLyAJCQkJcmVzLmRhdGEuaXNzdWVSZXBvcnRpbmdzLmNvbnRlbnRbaW5kZXhdLnJlcG9ydGVkQXQKICAgICAgICAgICAgLy8gCQkJKS5mb3JtYXQoIkREIE1NTSBZWVlZICBoaDptbSBhIik7CiAgICAgICAgICAgIC8vIAkJCXRoaXMuaXNzdWVzT2JqLnB1c2gocmVzLmRhdGEuaXNzdWVSZXBvcnRpbmdzLmNvbnRlbnRbaW5kZXhdKTsKICAgICAgICAgICAgLy8gCQl9CiAgICAgICAgICAgIC8vIAl9CiAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAvLwljb25zb2xlLmxvZygic2VydmljZSByZXF1ZXN0IiwgdGhpcy5pc3N1ZXMuc2VydmljZVVVSUQpOwoKICAgICAgICAgICAgaWYgKHRoaXMuaXNzdWVzLnNlcnZpY2VVVUlEICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgdGhpcy5nZXRTZXJ2aWNlUmVxdWVzdCh0aGlzLmlzc3Vlcy5zZXJ2aWNlVVVJRCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRoaXMuaXNzdWVzLmluc3BlY3Rpb25VVUlEICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgdGhpcy5nZXRJbnNwZWN0aW9uKHRoaXMuaXNzdWVzLmluc3BlY3Rpb25VVUlEKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge30pOwogICAgfSwKICAgIG9wZW5DcmVhdGVJbnNwZWN0aW9uVGVtcGxhdGUoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiY3JlYXRlLWluc3BlY3Rpb24tdGVtcGxhdGUiLAogICAgICB9KTsKICAgIH0sCgogICAgc2hvd1RvYXN0KG1lc3NhZ2UsIHR5cGUpIHsKICAgICAgdGhpcy50b2FzdE1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICB0aGlzLnRvYXN0VHlwZSA9IHR5cGU7CiAgICAgIHRoaXMudG9hc3RGbGFnKys7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHt9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldElzc3VlRGV0YWlscygpOwogICAgdGhpcy51dWlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlzc3VlSUQ7CiAgICB0aGlzLmZpZWxkc0Rpc2FibGUgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuZmxhZzsKICAgIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZSgKICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpCiAgICApOwoKICAgIHRoaXMuZ2V0QWxsQ2F0ZWdvcmllcyh0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyk7CiAgICAvLyB0aGlzLmdldEFsbEFzc2V0KHRoaXMuY3VycmVudFVzZXJEZXRhaWxzKTsKICAgIHRoaXMuZ2V0Q3VycmVuY3koKTsKICAgIHRoaXMuZ2V0UGFydHNCeVVVSWQodGhpcy4kcm91dGUucGFyYW1zLmlzc3VlSUQpOwogICAgdGhpcy5nZXRDb3N0QnlVVUlEKHRoaXMuJHJvdXRlLnBhcmFtcy5pc3N1ZUlEKTsKICAgIHRoaXMuZ2V0SW5zcGVjdGlvbmJ5SXNzdWVVVUlEKHRoaXMuJHJvdXRlLnBhcmFtcy5pc3N1ZUlEKTsKICAgIHRoaXMuZ2V0V29ya09yZGVyQnlpc3N1ZVVVSUQodGhpcy4kcm91dGUucGFyYW1zLmlzc3VlSUQpOwogICAgLy8gdGhpcy5kcm9wRG93bkNvbmZpZ3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJkcm9wRG93bkNvbmZpZ3MiKSk7CgogICAgLy8gZm9yICgKICAgIC8vICAgbGV0IGluZGV4ID0gMDsKICAgIC8vICAgaW5kZXggPCB0aGlzLmRyb3BEb3duQ29uZmlncy5pc3N1ZUNhdGVnb3JpZXMubGVuZ3RoOwogICAgLy8gICBpbmRleCsrCiAgICAvLyApIHsKICAgIC8vICAgbGV0IG9iaiA9IHsKICAgIC8vICAgICBsYWJlbDogdGhpcy5kcm9wRG93bkNvbmZpZ3MuaXNzdWVDYXRlZ29yaWVzW2luZGV4XS5sYWJlbCwKICAgIC8vICAgICB2YWx1ZTogdGhpcy5kcm9wRG93bkNvbmZpZ3MuaXNzdWVDYXRlZ29yaWVzW2luZGV4XS52YWx1ZSwKICAgIC8vICAgfTsKICAgIC8vICAgdGhpcy5jYXRlZ29yeU9wdGlvbnMucHVzaChvYmopOwogICAgLy8gfQogICAgdGhpcy5nZXRQYXJ0cyh0aGlzLiRyb3V0ZS5wYXJhbXMuaXNzdWVJRCk7CiAgICB0aGlzLmdldENvc3RzKHRoaXMuJHJvdXRlLnBhcmFtcy5pc3N1ZUlEKTsKICAgIC8vCXRoaXMuJHJlZnMuaXNzdWVEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID09PSB0cnVlOwogIH0sCgogIHZhbGlkYXRpb25zOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBpc3N1ZXM6IHsKICAgICAgICBpc3N1ZU5hbWU6IHsgcmVxdWlyZWQsIG1heExlbmd0aDogbWF4TGVuZ3RoKDE5MCkgfSwKICAgICAgICBpc3N1ZVR5cGU6IHsgcmVxdWlyZWQgfSwKICAgICAgICBpc3N1ZUNhdGVnb3J5OiB7IHJlcXVpcmVkIH0sCiAgICAgICAgcHJpb3JpdHk6IHsgcmVxdWlyZWQgfSwKICAgICAgICBpc3N1ZURlc2NyaXB0aW9uOiB7IG1heExlbmd0aDogbWF4TGVuZ3RoKDUwMCkgfSwKICAgICAgICBpZ25vcmVDb21tZW50czogeyBtYXhMZW5ndGg6IG1heExlbmd0aCg1MDApIH0sCiAgICAgIH0sCiAgICB9OwogIH0sCn07Cg=="},null]}