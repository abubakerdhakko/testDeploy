{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/calendar/components/WorkOrderAssignment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/calendar/components/WorkOrderAssignment.vue","mtime":1661968702432},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgkvL2ltcG9ydCBXb3JrT3JkZXJTaWRlYmFyIGZyb20gIi4uL3dvcmstb3JkZXJzL2NvbXBvbmVudHMvV29ya09yZGVyU2lkZWJhciI7CglpbXBvcnQgQXNzZXRQZXJzb25uZWxTZXJ2aWNlIGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL0Fzc2V0UGVyc29ubmVsU2VydmljZSI7CglpbXBvcnQgSW5zcGVjdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvSW5zcGVjdGlvblNlcnZpY2UiOwoJaW1wb3J0IEFzc2V0TWFuYWdlbWVudFNlcnZpY2UgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvQXNzZXRNYW5hZ2VtZW50U2VydmljZSI7CglpbXBvcnQgV29ya09yZGVyU2VydmljZSBmcm9tICIuLi8uLi8uLi9zZXJ2aWNlcy9Xb3JrT3JkZXJTZXJ2aWNlIjsKCWltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKCWltcG9ydCB7IEZ1bmN0aW9ucyB9IGZyb20gIkAvc2hhcmVkL0Z1bmN0aW9ucyI7CglpbXBvcnQgeyByZXF1aXJlZCB9IGZyb20gInZ1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyI7CgoJaW1wb3J0IGxvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvTG9hZGVyLnZ1ZSI7CglleHBvcnQgZGVmYXVsdCB7CgkJbmFtZTogIkNyZWF0ZVdvcmtPcmRlciIsCgoJCWNvbXBvbmVudHM6IHsKCQkJLy8gV29ya09yZGVyU2lkZWJhciwKCQkJbG9hZGVyLAoJCX0sCgoJCWRhdGEoKSB7CgkJCXJldHVybiB7CgkJCQlsb2FkZXJGbGFnOiBmYWxzZSwKCQkJCS8qIFRvYXN0IFByb3BlcnRpZXMgKi8KCQkJCXRvYXN0VGltZU91dDogMzAwMCwKCQkJCXRvYXN0TWVzc2FnZTogIiIsCgkJCQl0b2FzdFR5cGU6ICIiLAoJCQkJdG9hc3RGbGFnOiAwLAoJCQkJLyogVG9hc3QgUHJvcGVydGllcyAqLwoJCQkJdXBkYXRlU2VsZWN0Q29tcDogMCwKCQkJCXRvdGFsQ29zdDogMCwKCQkJCXNhbWU6IHRydWUsCgkJCQl3b3JrT3JkZXJTdW1tYXJ5SW5kZXg6IDAsCgkJCQlpbml0aWFsQXNzZXRJbmRleDogMCwKCQkJCWluc3BlY3Rpb25SZXNldDogMCwKCQkJCWZpbmFsSW5zcGVjdGlvblJlc2V0OiAwLAoJCQkJdXNlclJlc2V0OiAwLAoJCQkJY2F0ZWdvcnlJbmRleDogMCwKCQkJCWFzc2V0SW5kZXg6IDAsCgkJCQlpc3N1ZUluZGV4OiAwLAoJCQkJY3VycmVudFVzZXJEZXRhaWxzOiBudWxsLAoJCQkJZGlzYmFibGVmaWVsZDogZmFsc2UsCgoJCQkJcHJpb3JpdHlPcHRpb25zOiBbCgkJCQkJeyBsYWJlbDogIkxvdyIgfSwKCQkJCQl7IGxhYmVsOiAiTWVkaXVtIiB9LAoJCQkJCXsgbGFiZWw6ICJIaWdoIiB9LAoJCQkJXSwKCQkJCXNoaWZ0T3B0aW9uczogWwoJCQkJCXsgbGFiZWw6ICJNb3JuaW5nIiB9LAoJCQkJCXsgbGFiZWw6ICJBZnRlcm5vb24iIH0sCgkJCQkJeyBsYWJlbDogIkV2ZW5pbmciIH0sCgkJCQldLAoJCQkJc2VsZWN0ZWRVc2VyR3JvdXA6ICIiLAoJCQkJdXNlckdyb3VwT3B0aW9uczogW10sCgoJCQkJc2VsZWN0ZWRVc2VyOiAiIiwKCQkJCXVzZXJPcHRpb25zOiBbXSwKCQkJCWFsbFVzZXJzOiBbXSwKCQkJCWFzc2V0czogbnVsbCwKCQkJCXdvcmtPcmRlclN1bW1hcnk6IHsKCQkJCQlwcmlvcml0eTogIiIsCgkJCQkJc2hpZnQ6ICIiLAoJCQkJCXNoZWR1bGU6ICIiLAoJCQkJCXVzZXJHcm91cDogIiIsCgkJCQkJdXNlcjogIiIsCgkJCQkJaXNzdWVzOiBbXSwKCQkJCQlpbml0aWFsSW5zcGVjdGlvblRpdGxlOiAiIiwKCQkJCQlmaW5hbEluc3BlY3Rpb25UaXRsZTogIiIsCgkJCQkJY2F0ZWdvcnk6ICIiLAoJCQkJCW5hbWU6ICIiLAoJCQkJCXNlbGVjdGVkSW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnk6ICIiLAoJCQkJCXNlbGVjdGVkRmluYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5OiAiIiwKCQkJCX0sCgoJCQkJY2hlY2tFeGlzdGluZ0luaXRpYWxJbnNwZWN0aW9uOiBmYWxzZSwKCQkJCWNoZWNrRXhpc3RpbmdGaW5hbEluc3BlY3Rpb246IGZhbHNlLAoJCQkJc2FtZUFzSW5pdGlhbEluc3BlY3Rpb246IHRydWUsCgkJCQlpbml0aWFsSW5zcGVjdGlvbkJ5QXNzZXQ6ICIiLAoJCQkJaW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnk6ICIiLAoJCQkJaW5pdGlhbEluc3BlY3Rpb25CeVdvcmtPcmRlcjogIiIsCgkJCQlmaW5hbEluc3BlY3Rpb25CeUFzc2V0OiAiIiwKCQkJCWZpbmFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeTogIiIsCgkJCQlmaW5hbEluc3BlY3Rpb25CeVdvcmtPcmRlcjogIiIsCgkJCQlzZWxlY3RlZEluaXRpYWxJbnNwZWN0aW9uQnlBc3NldDogIiIsCgkJCQlzZWxlY3RlZEluaXRpYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5OiAiIiwKCQkJCXNlbGVjdGVkSW5pdGlhbEluc3BlY3Rpb25CeVdvcmtPcmRlcjogIiIsCgkJCQlzZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5QXNzZXQ6ICIiLAoJCQkJc2VsZWN0ZWRGaW5hbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnk6ICIiLAoJCQkJc2VsZWN0ZWRGaW5hbEluc3BlY3Rpb25CeVdvcmtPcmRlcjogIiIsCgkJCQlpbnNwZWN0aW9uQnlBc3NldE9wdGlvbnM6IFtdLAoJCQkJaW5wc2VjdGlvbkJ5QXNzZXRDYXRlZ29yeU9wdGlvbnM6IFtdLAoJCQkJaW5wc2VjdGlvbkJ5V29ya09yZGVyT3B0aW9uczogW10sCgkJCQlpbml0aWFsSW5zcGVjdGlvblRlbXA6ICIiLAoJCQkJZmluYWxJbnNwZWN0aW9uVGl0bGU6ICIiLAoJCQkJYW5zd2VyVHlwZU9wdGlvbnM6IFsKCQkJCQl7IGxhYmVsOiAiVGV4dC9JbWFnZS9BdWRpbyIsIHZhbHVlOiAiaW5wdXQiIH0sCgkJCQkJeyBsYWJlbDogIlllcy9ObyIsIHZhbHVlOiAiYm9vbGVhbiIgfSwKCQkJCQl7IGxhYmVsOiAiTXVsdGlwbGUgQ2hvaWNlIiwgdmFsdWU6ICJtdWx0aXBsZSIgfSwKCQkJCV0sCgkJCQlxdWVzdGlvblR5cGVGb3JtSW5pdGlhbDogW10sCgkJCQlxdWVzdGlvblR5cGVGb3JtRmluYWw6IFtdLAoJCQkJb3JkZXJJbnN0cnVjdGlvbnM6IFsKCQkJCQl7CgkJCQkJCXZhbHVlOiAiIiwKCQkJCQl9LAoJCQkJXSwKCQkJCWFzc2V0Q2F0ZWdvcnlPcHRpb25zOiBbXSwKCQkJCWFsbEFzc2V0RGF0YTogW10sCgkJCQlhc3NldE5hbWVzOiBbXSwKCQkJCWFzc2V0VVVJRDogIiIsCgkJCQlpc3N1ZXNBcnJheUxpc3Q6IFtdLAoJCQkJaXNzdWVzU2VsZWN0ZWQ6IFtdLAoJCQkJZmluYWxJbnNwZWN0aW9uT3B0aW9uczogWwoJCQkJCXsgbGFiZWw6ICJTYW1lIEFzIEluaXRpYWwiLCB2YWx1ZTogInNhbWUiIH0sCgkJCQkJeyBsYWJlbDogIlNlbGVjdCBFeGlzdGluZyIsIHZhbHVlOiAiZXhpc3RpbmciIH0sCgkJCQkJeyBsYWJlbDogIkNyZWF0ZSBOZXcgSW5zcGVjdGlvbiBUZW1wbGF0ZSIsIHZhbHVlOiAiY3JlYXRlTmV3IiB9LAoJCQkJXSwKCQkJCWZpbmFsSW5zcGVjdGlvblNlbGVjdGlvbjogIlNhbWUgQXMgSW5pdGlhbCIsCgkJCX07CgkJfSwKCgkJbWV0aG9kczogewoJCQkvLyB2YWxkaWF0ZURhdGUoKSB7CgkJCS8vICAgbGV0IGN1cnJlbnREYXRlID0gYCR7bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpfS0kewoJCQkvLyAgICAgbmV3IERhdGUoKS5nZXRNb250aCgpICsgMQoJCQkvLyAgIH0tJHtuZXcgRGF0ZSgpLmdldERhdGUoKX1gOwoKCQkJLy8gICBpZiAoIW1vbWVudCh0aGlzLndvcmtPcmRlclN1bW1hcnkuc2hlZHVsZSkuaXNTYW1lT3JBZnRlcihjdXJyZW50RGF0ZSkpIHsKCQkJLy8gICAgIHRoaXMuc2hvd1RvYXN0KCJQbGVhc2Ugc2VsZWN0IGN1cnJlbnQgb3IgZnV0dXJlIGRhdGUiLCAiZXJyb3IiKTsKCQkJLy8gICAgIHJldHVybiBmYWxzZTsKCQkJLy8gICB9CgkJCS8vIH0sCgkJCXdvcmtPcmRlckFzc2lnbm1lbnQoKSB7fSwKCQkJaW5pdGlhbEluc3BlY3Rpb25GdW5jKHZhbHVlKSB7CgkJCQlpZiAodGhpcy5zYW1lID09PSB0cnVlKSB7CgkJCQkJaWYgKHRoaXMuY2hlY2tFeGlzdGluZ0luaXRpYWxJbnNwZWN0aW9uID09PSBmYWxzZSkgewoJCQkJCQl0aGlzLndvcmtPcmRlclN1bW1hcnkuZmluYWxJbnNwZWN0aW9uVGl0bGUgPSB2YWx1ZTsKCQkJCQl9CgkJCQl9CgkJCQl0aGlzLndvcmtPcmRlclN1bW1hcnlJbmRleCsrOwoJCQl9LAoKCQkJZXhpc3RpbmdGdW5jdGlvbih2YWx1ZSkgewoJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5LmluaXRpYWxJbnNwZWN0aW9uVGl0bGUgPSAiIjsKCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5zZWxlY3RlZEluaXRpYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5ID0gIiI7CgoJCQkJaWYgKHRoaXMuc2FtZSA9PT0gdHJ1ZSkgewoJCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5maW5hbEluc3BlY3Rpb25UaXRsZSA9ICIiOwoJCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeSA9ICIiOwoJCQkJfQoJCQkJaWYgKHZhbHVlID09PSB0cnVlKSB7CgkJCQkJdGhpcy5xdWVzdGlvblR5cGVGb3JtSW5pdGlhbCA9IFtdOwoJCQkJCXRoaXMuYWRkSW5wdXRGaWVsZHNJbml0aWFsKCk7CgkJCQl9IGVsc2UgewoJCQkJCXRoaXMuaW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnkgPSAiIjsKCQkJCQl0aGlzLnNlbGVjdGVkSW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnkgPSAiIjsKCQkJCQl0aGlzLmluaXRpYWxBc3NldEluZGV4Kys7CgkJCQl9CgkJCQl0aGlzLndvcmtPcmRlclN1bW1hcnlJbmRleCsrOwoJCQl9LAoKCQkJZ2V0Q3VycmVuY3koKSB7CgkJCQlBc3NldFBlcnNvbm5lbFNlcnZpY2UuZ2V0Q29tcGFueUN1cnJlbmN5KAoJCQkJCXRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQKCQkJCSkudGhlbigocmVzcG9uc2UpID0+IHsKCQkJCQl0aGlzLmN1cnJlbmN5ID0gcmVzcG9uc2UuZGF0YS5jdXJyZW5jeTsKCQkJCX0pOwoJCQl9LAoKCQkJZmluYWxJbnNwZWN0aW9uT3B0aW9uU2VsZWN0ZWQodmFsdWUpIHsKCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5maW5hbEluc3BlY3Rpb25UaXRsZSA9ICIiOwoJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5LnNlbGVjdGVkRmluYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5ID0gIiI7CgkJCQl0aGlzLnF1ZXN0aW9uVHlwZUZvcm1GaW5hbCA9IFtdOwoJCQkJdGhpcy5hZGRJbnB1dEZpZWxkc0ZpbmFsKCk7CgkJCQl0aGlzLmZpbmFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeSA9IFtdOwoJCQkJdGhpcy5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeSA9ICIiOwoJCQkJaWYgKHZhbHVlLnZhbHVlID09PSAiU2FtZSBBcyBJbml0aWFsIikgewoJCQkJCXRoaXMuc2FtZSA9IHRydWU7CgkJCQkJaWYgKHRoaXMuY2hlY2tFeGlzdGluZ0luaXRpYWxJbnNwZWN0aW9uKSB7CgkJCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeSA9CgkJCQkJCQl0aGlzLndvcmtPcmRlclN1bW1hcnkuc2VsZWN0ZWRJbml0aWFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeTsKCQkJCQl9IGVsc2UgewoJCQkJCQl0aGlzLndvcmtPcmRlclN1bW1hcnkuZmluYWxJbnNwZWN0aW9uVGl0bGUgPQoJCQkJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5LmluaXRpYWxJbnNwZWN0aW9uVGl0bGU7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQl0aGlzLnNhbWUgPSBmYWxzZTsKCQkJCX0KCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeUluZGV4Kys7CgkJCX0sCgoJCQljbGVhclNlbGVjdGVkRmluYWxJbnNwZWN0aW9uT3B0aW9uKCkgewoJCQkJdGhpcy5maW5hbEluc3BlY3Rpb25TZWxlY3Rpb24gPSAiIjsKCQkJCXRoaXMuZmluYWxJbnNwZWN0aW9uUmVzZXQrKzsKCQkJfSwKCgkJCW9uSXNzdWVOdW1iZXJTZWxlY3QodmFsdWUpIHsKCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5pc3N1ZXMgPSBbXTsKCQkJCWlmICh2YWx1ZS5sZW5ndGggPiAwKSB7CgkJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5Lmlzc3VlcyA9IHZhbHVlOwoJCQkJfQoJCQl9LAoJCQlnZXRJc3N1ZXNCeUFzc2V0VVVJRChBc3NldFVVSUQpIHsKCQkJCXRoaXMuaXNzdWVzQXJyYXlMaXN0ID0gW107CgkJCQlJbnNwZWN0aW9uU2VydmljZS5maWx0ZXJJc3N1ZXNCeUFzc2V0VVVJRChBc3NldFVVSUQsICJyZXBvcnRlZCIpCgkJCQkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkJCWlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewoJCQkJCQkJZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJlc3BvbnNlLmRhdGEuaXNzdWVzLmxlbmd0aDsgaW5kZXgrKykgewoJCQkJCQkJCWxldCBwYXJ0ID0gewoJCQkJCQkJCQluYW1lOiAiIiwKCQkJCQkJCQkJdXVpZDogdGhpcy5nZW5lcmF0ZVVVSUQoKSwKCQkJCQkJCQkJcXVhbnRpdHk6ICIiLAoJCQkJCQkJCQljb3N0OiB7CgkJCQkJCQkJCQljYXRlZ29yeTogInBhcnQtY29zdCIsCgkJCQkJCQkJCQlhbW91bnQ6ICIiLAoJCQkJCQkJCQkJcmVwb3J0YWJsZTogdHJ1ZSwKCQkJCQkJCQkJfSwKCQkJCQkJCQkJZXh0cmFDb3N0OiBbCgkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJY2F0ZWdvcnk6ICJ0YXgtY29zdCIsCgkJCQkJCQkJCQkJYW1vdW50OiAiIiwKCQkJCQkJCQkJCQlyZXBvcnRhYmxlOiB0cnVlLAoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJXSwKCQkJCQkJCQl9OwoKCQkJCQkJCQlyZXNwb25zZS5kYXRhLmlzc3Vlc1tpbmRleF0uaW5zdHJ1Y3Rpb25DaGVja2xpc3QgPSBKU09OLnBhcnNlKAoJCQkJCQkJCQlyZXNwb25zZS5kYXRhLmlzc3Vlc1tpbmRleF0uaW5zdHJ1Y3Rpb25DaGVja2xpc3QKCQkJCQkJCQkpOwoJCQkJCQkJCWlmIChyZXNwb25zZS5kYXRhLmlzc3Vlc1tpbmRleF0uaW5zdHJ1Y3Rpb25DaGVja2xpc3QgPT09IG51bGwpIHsKCQkJCQkJCQkJcmVzcG9uc2UuZGF0YS5pc3N1ZXNbaW5kZXhdLmluc3RydWN0aW9uQ2hlY2tsaXN0ID0gW107CgkJCQkJCQkJCXJlc3BvbnNlLmRhdGEuaXNzdWVzW2luZGV4XS5pbnN0cnVjdGlvbkNoZWNrbGlzdC5wdXNoKHsKCQkJCQkJCQkJCXZhbHVlOiAiIiwKCQkJCQkJCQkJfSk7CgkJCQkJCQkJfQoJCQkJCQkJCXJlc3BvbnNlLmRhdGEuaXNzdWVzW2luZGV4XS5wYXJ0cyA9IFtdOwoJCQkJCQkJCXJlc3BvbnNlLmRhdGEuaXNzdWVzW2luZGV4XS5wYXJ0cy5wdXNoKHBhcnQpOwoJCQkJCQkJCXJlc3BvbnNlLmRhdGEuaXNzdWVzW2luZGV4XS5yZXBvcnRlZEF0ID0gbW9tZW50KAoJCQkJCQkJCQlyZXNwb25zZS5kYXRhLmlzc3Vlc1tpbmRleF0ucmVwb3J0ZWRBdAoJCQkJCQkJCSkuZm9ybWF0KCJERCBNTU0gWVlZWSIpOwoJCQkJCQkJCXJlc3BvbnNlLmRhdGEuaXNzdWVzW2luZGV4XS5uYW1lID0KCQkJCQkJCQkJcmVzcG9uc2UuZGF0YS5pc3N1ZXNbaW5kZXhdLmlzc3VlTmFtZSArCgkJCQkJCQkJCSIgLSAiICsKCQkJCQkJCQkJcmVzcG9uc2UuZGF0YS5pc3N1ZXNbaW5kZXhdLmlzc3VlTnVtYmVyOwoJCQkJCQkJCXRoaXMuaXNzdWVzQXJyYXlMaXN0LnB1c2gocmVzcG9uc2UuZGF0YS5pc3N1ZXNbaW5kZXhdKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0pCgkJCQkJLmNhdGNoKChlcnJvcikgPT4gewoJCQkJCQl0aGlzLnNob3dUb2FzdChlcnJvci5kYXRhLnJlc3BvbnNlLCAiZXJyb3IiKTsKCQkJCQl9KTsKCQkJfSwKCgkJCW9uU2VsZWN0ZWRBc3NldENhdGVnb3J5KHZhbHVlKSB7CgkJCQl0aGlzLmFzc2V0TmFtZXMgPSBbXTsKCQkJCWZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmFsbEFzc2V0RGF0YS5sZW5ndGg7IGluZGV4KyspIHsKCQkJCQlpZiAoCgkJCQkJCXRoaXMuYWxsQXNzZXREYXRhW2luZGV4XS5jYXRlZ29yeVVVSUQgPT09CgkJCQkJCXZhbHVlLnNlbGVjdGVkT2JqZWN0LmNhdGVnb3J5VVVJRAoJCQkJCSkgewoJCQkJCQl0aGlzLmFzc2V0TmFtZXMucHVzaCh0aGlzLmFsbEFzc2V0RGF0YVtpbmRleF0pOwoJCQkJCX0KCQkJCX0KCQkJCXRoaXMuZ2V0SW5zcGVjdGlvblRlbWFwbGF0ZXNCeUFzc2V0Q2F0ZWdvcnkoCgkJCQkJdmFsdWUuc2VsZWN0ZWRPYmplY3QuY2F0ZWdvcnlVVUlECgkJCQkpOwoJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5Lm5hbWUgPSAiIjsKCQkJCXRoaXMuYXNzZXRJbmRleCsrOwoJCQl9LAoKCQkJY2xlYXJTZWxlY3RlZEFzc2V0Q2F0ZWdvcnkoKSB7CgkJCQl0aGlzLmFzc2V0TmFtZXMgPSBbXTsKCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5jYXRlZ29yeSA9ICIiOwoJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5Lm5hbWUgPSAiIjsKCQkJCXRoaXMuY2F0ZWdvcnlJbmRleCsrOwoJCQkJdGhpcy5hc3NldEluZGV4Kys7CgkJCX0sCgoJCQlvblNlbGVjdGVkQXNzZXROYW1lKHZhbHVlKSB7CgkJCQl0aGlzLmFzc2V0VVVJRCA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0LnV1aWQ7CgkJCQl0aGlzLmdldElzc3Vlc0J5QXNzZXRVVUlEKHRoaXMuYXNzZXRVVUlEKTsKCQkJfSwKCgkJCWNsZWFyU2VsZWN0ZWRBc3NldE5hbWUoKSB7CgkJCQl0aGlzLmFzc2V0VVVJRCA9ICIiOwoJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5Lm5hbWUgPSAiIjsKCQkJCXRoaXMuZ2V0SXNzdWVzQnlBc3NldFVVSUQodGhpcy5hc3NldFVVSUQpOwoJCQkJdGhpcy5hc3NldEluZGV4Kys7CgkJCX0sCgoJCQljbGVhclNlbGVjdGVkUHJpb3JpdHkoKSB7CgkJCQl0aGlzLndvcmtPcmRlclN1bW1hcnkucHJpb3JpdHkgPSAiIjsKCQkJCXRoaXMuYXNzZXRJbmRleCsrOwoJCQl9LAoKCQkJY2xlYXJTZWxlY3RlZFNoaWZ0KCkgewoJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5LnNoaWZ0ID0gIiI7CgkJCQl0aGlzLmFzc2V0SW5kZXgrKzsKCQkJfSwKCgkJCWdldEFsbENhdGVnb3JpZXMoY3VycmVudFVzZXJEZXRhaWxzKSB7CgkJCQlBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldEFsbEFzc2V0Q2F0ZWdvcmllcygKCQkJCQljdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZAoJCQkJKQoJCQkJCS50aGVuKChyZXMpID0+IHsKCQkJCQkJZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJlcy5kYXRhLmNhdGVnb3JpZXMubGVuZ3RoOyBpbmRleCsrKSB7CgkJCQkJCQlsZXQgb2JqID0gewoJCQkJCQkJCWlkOiByZXMuZGF0YS5jYXRlZ29yaWVzW2luZGV4XS5pZCwKCQkJCQkJCQljYXRlZ29yeVVVSUQ6IHJlcy5kYXRhLmNhdGVnb3JpZXNbaW5kZXhdLnV1aWQsCgkJCQkJCQkJbGFiZWw6IHJlcy5kYXRhLmNhdGVnb3JpZXNbaW5kZXhdLm5hbWUsCgkJCQkJCQl9OwoJCQkJCQkJdGhpcy5hc3NldENhdGVnb3J5T3B0aW9ucy5wdXNoKG9iaik7CgkJCQkJCX0KCQkJCQkJdGhpcy5nZXRBbGxBc3NldChjdXJyZW50VXNlckRldGFpbHMpOwoJCQkJCX0pCgkJCQkJLmNhdGNoKChlcnIpID0+IHsKCQkJCQkJdGhpcy5zaG93VG9hc3QoZXJyLmRhdGEucmVzcG9uc2UsICJlcnJvciIpOwoJCQkJCX0pOwoJCQl9LAoKCQkJZ2V0QWxsQXNzZXQoY3VycmVudFVzZXJEZXRhaWxzKSB7CgkJCQlsZXQgY2F0ZWdvcnlVVUlEID0gIiI7CgkJCQlBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldEFsbEFzc2V0cygKCQkJCQljdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZAoJCQkJKQoJCQkJCS50aGVuKChyZXMpID0+IHsKCQkJCQkJZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJlcy5kYXRhLmFzc2V0cy5sZW5ndGg7IGluZGV4KyspIHsKCQkJCQkJCWxldCBvYmogPSB7CgkJCQkJCQkJdXVpZDogcmVzLmRhdGEuYXNzZXRzW2luZGV4XS51dWlkLAoJCQkJCQkJCWNhdGVnb3J5VVVJRDogcmVzLmRhdGEuYXNzZXRzW2luZGV4XS5jYXRlZ29yeVVVSUQsCgkJCQkJCQkJbGFiZWw6IHJlcy5kYXRhLmFzc2V0c1tpbmRleF0ubmFtZSwKCQkJCQkJCQl0eXBlOiByZXMuZGF0YS5hc3NldHNbaW5kZXhdLnR5cGUsCgkJCQkJCQl9OwoJCQkJCQkJdGhpcy5hbGxBc3NldERhdGEucHVzaChvYmopOwoJCQkJCQl9CgoJCQkJCQlpZiAodGhpcy4kcm91dGUucGFyYW1zLmNyZWF0ZVdvcmtPcmRlciA9PT0gdHJ1ZSkgewoJCQkJCQkJZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuYWxsQXNzZXREYXRhLmxlbmd0aDsgaW5kZXgrKykgewoJCQkJCQkJCWlmICgKCQkJCQkJCQkJdGhpcy4kcm91dGUucGFyYW1zLmFzc2V0VVVJRCA9PT0gdGhpcy5hbGxBc3NldERhdGFbaW5kZXhdLnV1aWQKCQkJCQkJCQkpIHsKCQkJCQkJCQkJY2F0ZWdvcnlVVUlEID0gdGhpcy5hbGxBc3NldERhdGFbaW5kZXhdLmNhdGVnb3J5VVVJRDsKCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJZm9yICgKCQkJCQkJCQlsZXQgaW5keCA9IDA7CgkJCQkJCQkJaW5keCA8IHRoaXMuYXNzZXRDYXRlZ29yeU9wdGlvbnMubGVuZ3RoOwoJCQkJCQkJCWluZHgrKwoJCQkJCQkJKSB7CgkJCQkJCQkJaWYgKAoJCQkJCQkJCQl0aGlzLmFzc2V0Q2F0ZWdvcnlPcHRpb25zW2luZHhdLmNhdGVnb3J5VVVJRCA9PT0gY2F0ZWdvcnlVVUlECgkJCQkJCQkJKSB7CgkJCQkJCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5jYXRlZ29yeSA9CgkJCQkJCQkJCQl0aGlzLmFzc2V0Q2F0ZWdvcnlPcHRpb25zW2luZHhdLmxhYmVsOwoJCQkJCQkJCX0KCQkJCQkJCX0KCgkJCQkJCQlmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuYWxsQXNzZXREYXRhLmxlbmd0aDsgaisrKSB7CgkJCQkJCQkJaWYgKHRoaXMuYWxsQXNzZXREYXRhW2pdLmNhdGVnb3J5VVVJRCA9PT0gY2F0ZWdvcnlVVUlEKSB7CgkJCQkJCQkJCXRoaXMuYXNzZXROYW1lcy5wdXNoKHRoaXMuYWxsQXNzZXREYXRhW2pdKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQlmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5hc3NldE5hbWVzLmxlbmd0aDsgaW5kZXgrKykgewoJCQkJCQkJCWlmICgKCQkJCQkJCQkJdGhpcy5hc3NldE5hbWVzW2luZGV4XS51dWlkID09PSB0aGlzLiRyb3V0ZS5wYXJhbXMuYXNzZXRVVUlECgkJCQkJCQkJKSB7CgkJCQkJCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5uYW1lID0gdGhpcy5hc3NldE5hbWVzW2luZGV4XS5sYWJlbDsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQl0aGlzLmNhdGVnb3J5SW5kZXgrKzsKCQkJCQkJCXRoaXMuYXNzZXRJbmRleCsrOwoJCQkJCQl9CgkJCQkJfSkKCQkJCQkuY2F0Y2goKGVycikgPT4gewoJCQkJCQl0aGlzLnNob3dUb2FzdChlcnIuZGF0YS5yZXNwb25zZSwgImVycm9yIik7CgkJCQkJfSk7CgkJCX0sCgoJCQliYXNpY0RldGFpbHNBY2NvcmRpb25GdW5jdGlvbigpIHsKCQkJCWlmICh0aGlzLiRyZWZzLmJhc2ljRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9PT0gdHJ1ZSkgewoJCQkJCXRoaXMuJHJlZnMuZmluYWxJbnNwZWN0aW9uc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwoJCQkJCXRoaXMuJHJlZnMudXNlckFzc2lnbm1lbnRBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKCQkJCQl0aGlzLiRyZWZzLmlzc3Vlc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwoJCQkJCXRoaXMuJHJlZnMuaW5zcGVjdGlvbnNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKCQkJCX0KCQkJfSwKCQkJdXNlckFzc2lnbm1lbnRBY2NvcmRpb25GdW5jdGlvbigpIHsKCQkJCWlmICh0aGlzLiRyZWZzLnVzZXJBc3NpZ25tZW50QWNjb3JkaW9uLm9wZW5GbGFnID09PSB0cnVlKSB7CgkJCQkJdGhpcy4kcmVmcy5iYXNpY0RldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKCQkJCQl0aGlzLiRyZWZzLmlzc3Vlc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwoJCQkJCXRoaXMuJHJlZnMuaW5zcGVjdGlvbnNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKCQkJCQl0aGlzLiRyZWZzLmZpbmFsSW5zcGVjdGlvbnNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKCQkJCX0KCQkJfSwKCQkJaXNzdWVzQWNjb3JkaW9uRnVuY3Rpb24oKSB7CgkJCQlpZiAodGhpcy4kcmVmcy5pc3N1ZXNBY2NvcmRpb24ub3BlbkZsYWcgPT09IHRydWUpIHsKCQkJCQl0aGlzLiRyZWZzLmJhc2ljRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwoJCQkJCXRoaXMuJHJlZnMudXNlckFzc2lnbm1lbnRBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKCQkJCQl0aGlzLiRyZWZzLmluc3BlY3Rpb25zQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CgkJCQkJdGhpcy4kcmVmcy5maW5hbEluc3BlY3Rpb25zQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CgkJCQl9CgkJCX0sCgkJCWluc3BlY3Rpb25zQWNjb3JkaW9uRnVuY3Rpb24oKSB7CgkJCQlpZiAodGhpcy4kcmVmcy5pbnNwZWN0aW9uc0FjY29yZGlvbi5vcGVuRmxhZyA9PT0gdHJ1ZSkgewoJCQkJCXRoaXMuJHJlZnMuYmFzaWNEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CgkJCQkJdGhpcy4kcmVmcy51c2VyQXNzaWdubWVudEFjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwoJCQkJCXRoaXMuJHJlZnMuaXNzdWVzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CgkJCQkJdGhpcy4kcmVmcy5maW5hbEluc3BlY3Rpb25zQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CgkJCQkJdGhpcy4kcmVmcy51c2VyQXNzaWdubWVudEFjY29yZGlvbi5vcGVuRmxhZyA9PT0gZmFsc2U7CgkJCQl9CgkJCX0sCgkJCWZpbmFsSW5zcGVjdGlvbnNBY2NvcmRpb25GdW5jdGlvbigpIHsKCQkJCWlmICh0aGlzLiRyZWZzLmZpbmFsSW5zcGVjdGlvbnNBY2NvcmRpb24ub3BlbkZsYWcgPT09IHRydWUpIHsKCQkJCQl0aGlzLiRyZWZzLmJhc2ljRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwoJCQkJCXRoaXMuJHJlZnMudXNlckFzc2lnbm1lbnRBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKCQkJCQl0aGlzLiRyZWZzLmlzc3Vlc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwoJCQkJCXRoaXMuJHJlZnMuaW5zcGVjdGlvbnNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKCQkJCX0KCQkJfSwKCQkJY3JlYXRlV29ya09yZGVyKCkgewoJCQkJICB0aGlzLiR2LiR0b3VjaCgpOwoJCQkJICBpZiAodGhpcy4kdi4kaW52YWxpZCkgewoJCQkJICAgIHRoaXMuc2hvd1RvYXN0KCJQbGVhc2UgZmlsbCBhbGwgcmVxdWlyZWQgZmllbGRzIiwgIndhcm5pbmciKTsKCQkJCSAgICByZXR1cm47CgkJCQkgIH0KCQkJCXRoaXMubG9hZGVyRmxhZyA9IHRydWU7CgkJCQlsZXQgd29ya09yZGVyID0ge307CgkJCQlsZXQgcmVzb2x1dGlvbnMgPSBbXTsKCQkJCWxldCBpc3N1ZXMgPSBbXTsKCQkJCWxldCB0ZW1wT3JkZXIgPSBbXTsKCQkJCWxldCBvcmRlckpzb24gPSBudWxsOwoJCQkJbGV0IGluaXRpYWxJbnNwZWN0aW9uVGVtcGxhdGUgPSBudWxsOwoJCQkJbGV0IGZpbmFsSW5zcGVjdGlvblRlbXBsYXRlID0gbnVsbDsKCQkJCWxldCBmcm9tSW5zcGVjdGlvbkluaXRpYWwgPSBmYWxzZTsKCQkJCWxldCBmcm9tSW5zcGVjdGlvbkZpbmFsID0gZmFsc2U7CgoJCQkJbGV0IGluaXRpYWxJbnNwZWN0aW9uT3B0aW9uID0gbnVsbDsKCQkJCWxldCBmaW5hbEluc3BlY3Rpb25PcHRpb24gPSBudWxsOwoKCQkJCXZhciBpbml0aWFsSW5zcGVjdGlvblRlbXBsYXRlTGlua2luZ1VVSUQgPSBudWxsOwoJCQkJbGV0IGZpbmFsSW5zcGVjdGlvblRlbXBsYXRlTGlua2luZ1VVSUQgPSBudWxsOwoJCQkJbGV0IGluaXRpYWxMaW5rSW5zcGVjdGlvblR5cGUgPSBudWxsOwoJCQkJbGV0IGZpbmFsTGlua0luc3BlY3Rpb25UeXBlID0gbnVsbDsKCQkJCWxldCBjcmVhdGVXb3JrT3JkZXJSZXF1ZXN0ID0ge307CgoJCQkJLy8gaWYgKHRoaXMuY2hlY2tFeGlzdGluZ0luaXRpYWxJbnNwZWN0aW9uID09PSB0cnVlKSB7CgkJCQkvLyAJaW5pdGlhbEluc3BlY3Rpb25PcHRpb24gPSAibGluayI7CgoJCQkJLy8gCWluaXRpYWxJbnNwZWN0aW9uVGVtcGxhdGVMaW5raW5nVVVJRCA9CgkJCQkvLyAJCXRoaXMuc2VsZWN0ZWRJbml0aWFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeS52YWx1ZTsKCQkJCS8vIH0gZWxzZSB7CgkJCQkvLyAJaW5pdGlhbEluc3BlY3Rpb25PcHRpb24gPSAic2F2ZSI7CgkJCQkvLyB9CgoJCQkJLy8gaWYgKHRoaXMuZmluYWxJbnNwZWN0aW9uU2VsZWN0aW9uID09PSAiU2VsZWN0IEV4aXN0aW5nIikgewoJCQkJLy8gCWZpbmFsSW5zcGVjdGlvbk9wdGlvbiA9ICJsaW5rIjsKCQkJCS8vIAlmaW5hbEluc3BlY3Rpb25UZW1wbGF0ZUxpbmtpbmdVVUlEID0KCQkJCS8vIAkJdGhpcy5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeS52YWx1ZTsKCQkJCS8vIH0gZWxzZSB7CgkJCQkvLyAJZmluYWxJbnNwZWN0aW9uT3B0aW9uID0gInNhdmUiOwoJCQkJLy8gfQoJCQkJZm9yICgKCQkJCQlsZXQgaW5kZXggPSAwOwoJCQkJCWluZGV4IDwgdGhpcy53b3JrT3JkZXJTdW1tYXJ5Lmlzc3Vlcy5sZW5ndGg7CgkJCQkJaW5kZXgrKwoJCQkJKSB7CgkJCQkJbGV0IGlzc3VlID0ge307CgkJCQkJbGV0IHJlc29sdXRpb24gPSB7fTsKCQkJCQlyZXNvbHV0aW9uLnV1aWQgPSB0aGlzLmdlbmVyYXRlVVVJRCgpOwoJCQkJCXJlc29sdXRpb24ucGFydHNVc2VkID0gW107CgkJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5Lmlzc3Vlc1tpbmRleF0ucGFydHMubWFwKChwYXJ0KSA9PiB7CgkJCQkJCWxldCBwYXJ0T2JqZWN0ID0gcGFydDsKCQkJCQkJcGFydE9iamVjdC5wYXJ0TmFtZSA9IHBhcnQubmFtZTsKCQkJCQkJcGFydE9iamVjdC5pc3N1ZVVVSUQgPSB0aGlzLndvcmtPcmRlclN1bW1hcnkuaXNzdWVzW2luZGV4XS51dWlkOwoJCQkJCQlwYXJ0T2JqZWN0LnBhcnRVVUlEID0gImR1bW15LXBhcnQtdXVpZC1saW5rLXdpdGgtaW52ZW50b3J5IjsKCQkJCQkJcGFydE9iamVjdC5hZGRlZEJ5VXNlck5hbWUgPQoJCQkJCQkJdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5maXJzdE5hbWUgKwoJCQkJCQkJIiAiICsKCQkJCQkJCXRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUubGFzdE5hbWU7CgkJCQkJCXBhcnRPYmplY3QuYWRkZWRCeVVzZXJVVUlEID0gdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS51c2VyaWQ7CgkJCQkJCXBhcnRPYmplY3QuY29zdC5hZGVkQnlVc2VyTmFtZSA9IHBhcnRPYmplY3QuYWRkZWRCeVVzZXJOYW1lOwoJCQkJCQlwYXJ0T2JqZWN0LmNvc3QuYWRkZWRCeVVzZXJVVUlEID0gcGFydE9iamVjdC5hZGRlZEJ5VXNlclVVSUQ7CgkJCQkJCXBhcnRPYmplY3QuY29zdC5pc3N1ZVVVSUQgPSB0aGlzLndvcmtPcmRlclN1bW1hcnkuaXNzdWVzW2luZGV4XS51dWlkOwoJCQkJCQlyZXNvbHV0aW9uLnBhcnRzVXNlZC5wdXNoKHBhcnRPYmplY3QpOwoJCQkJCQlyZXR1cm4gcGFydDsKCQkJCQl9KTsKCgkJCQkJcmVzb2x1dGlvbnMucHVzaChyZXNvbHV0aW9uKTsKCQkJCQlpc3N1ZS5pc3N1ZU51bWJlciA9IHRoaXMud29ya09yZGVyU3VtbWFyeS5pc3N1ZXNbaW5kZXhdLmlzc3VlTnVtYmVyOwoJCQkJCWlzc3VlLmlzc3VlVVVJRCA9IHRoaXMud29ya09yZGVyU3VtbWFyeS5pc3N1ZXNbaW5kZXhdLnV1aWQ7CgkJCQkJaXNzdWUucmVzb2x2ZWQgPSBmYWxzZTsKCQkJCQlpc3N1ZS5pbnNwZWN0aW9uVVVJRCA9CgkJCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5pc3N1ZXNbaW5kZXhdLmluc3BlY3Rpb25VVUlEOwoJCQkJCWlzc3VlLnNlcnZpY2VVVUlEID0gdGhpcy53b3JrT3JkZXJTdW1tYXJ5Lmlzc3Vlc1tpbmRleF0uc2VydmljZVVVSUQ7CgkJCQkJaXNzdWUuaW5zdHJ1Y3Rpb25zID0KCQkJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5Lmlzc3Vlc1tpbmRleF0uaXNzdWVEZXNjcmlwdGlvbjsKCQkJCQlpc3N1ZS5yZXNvbHV0aW9uVVVJRCA9IHJlc29sdXRpb24udXVpZDsKCQkJCQlpc3N1ZS5zdGF0dXMgPSB0aGlzLndvcmtPcmRlclN1bW1hcnkuaXNzdWVzW2luZGV4XS5zdGF0dXM7CgkJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5Lmlzc3Vlc1tpbmRleF0uaW5zdHJ1Y3Rpb25DaGVja2xpc3QubWFwKAoJCQkJCQkoZWxlbWVudCkgPT4gewoJCQkJCQkJdGVtcE9yZGVyLnB1c2goeyBuYW1lOiBlbGVtZW50LnZhbHVlLCBjaGVja2VkOiBmYWxzZSB9KTsKCQkJCQkJCW9yZGVySnNvbiA9IEpTT04uc3RyaW5naWZ5KHRlbXBPcmRlcik7CgkJCQkJCQlpc3N1ZS5vcmRlckluc3RydWN0aW9ucyA9IG9yZGVySnNvbjsKCQkJCQkJfQoJCQkJCSk7CgkJCQkJaXNzdWVzLnB1c2goaXNzdWUpOwoJCQkJCW9yZGVySnNvbiA9IG51bGw7CgkJCQkJdGVtcE9yZGVyID0gW107CgkJCQl9CgoJCQkJaWYgKHRoaXMuY2hlY2tFeGlzdGluZ0luaXRpYWxJbnNwZWN0aW9uID09PSB0cnVlKSB7CgkJCQkJaWYgKHRoaXMuc2VsZWN0ZWRJbml0aWFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeSAhPT0gIiIpIHsKCQkJCQkJaW5pdGlhbExpbmtJbnNwZWN0aW9uVHlwZSA9ICJpbnNwZWN0aW9uIjsKCQkJCQl9CgkJCQl9CgkJCQlpZiAodGhpcy5maW5hbEluc3BlY3Rpb25TZWxlY3Rpb24gPT09ICJTZWxlY3QgRXhpc3RpbmciKSB7CgkJCQkJaWYgKHRoaXMuc2VsZWN0ZWRGaW5hbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnkgIT09ICIiKSB7CgkJCQkJCWZpbmFsTGlua0luc3BlY3Rpb25UeXBlID0gImluc3BlY3Rpb24iOwoJCQkJCX0KCQkJCX0KCgkJCQlpZiAodGhpcy5xdWVzdGlvblR5cGVGb3JtSW5pdGlhbC5sZW5ndGggPiAwKSB7CgkJCQkJaW5pdGlhbEluc3BlY3Rpb25UZW1wbGF0ZSA9IHsKCQkJCQkJbmFtZTogdGhpcy53b3JrT3JkZXJTdW1tYXJ5LmluaXRpYWxJbnNwZWN0aW9uVGl0bGUsCgkJCQkJCWluc3BlY3Rpb25JdGVtczogdGhpcy5xdWVzdGlvblR5cGVGb3JtSW5pdGlhbCwKCQkJCQl9OwoJCQkJCWluaXRpYWxJbnNwZWN0aW9uT3B0aW9uID0gInNhdmUiOwoJCQkJCWZyb21JbnNwZWN0aW9uSW5pdGlhbCA9IGZhbHNlOwoJCQkJfSBlbHNlIHsKCQkJCQlmcm9tSW5zcGVjdGlvbkluaXRpYWwgPSB0cnVlOwoJCQkJfQoKCQkJCS8vIGlmIChpbml0aWFsSW5zcGVjdGlvblRlbXBsYXRlKSB7CgkJCQkvLyAJLy8JZmluYWxJbnNwZWN0aW9uVGVtcGxhdGUgPSBpbml0aWFsSW5zcGVjdGlvblRlbXBsYXRlOwoJCQkJLy8gfSBlbHNlIHsKCQkJCS8vIAlmcm9tSW5zcGVjdGlvbkZpbmFsID0gZnJvbUluc3BlY3Rpb25Jbml0aWFsOwoJCQkJLy8gfQoKCQkJCS8vIGZpbmFsSW5zcGVjdGlvbk9wdGlvbiA9IGluaXRpYWxJbnNwZWN0aW9uT3B0aW9uOwoKCQkJCWlmICh0aGlzLnF1ZXN0aW9uVHlwZUZvcm1GaW5hbC5sZW5ndGggPiAwKSB7CgkJCQkJZmluYWxJbnNwZWN0aW9uVGVtcGxhdGUgPSB7CgkJCQkJCW5hbWU6IHRoaXMud29ya09yZGVyU3VtbWFyeS5maW5hbEluc3BlY3Rpb25UaXRsZSwKCQkJCQkJaW5zcGVjdGlvbkl0ZW1zOiB0aGlzLnF1ZXN0aW9uVHlwZUZvcm1GaW5hbCwKCQkJCQl9OwoJCQkJCWZpbmFsSW5zcGVjdGlvbk9wdGlvbiA9ICJzYXZlIjsKCQkJCQlmcm9tSW5zcGVjdGlvbkZpbmFsID0gZmFsc2U7CgkJCQl9IGVsc2UgewoJCQkJCWZyb21JbnNwZWN0aW9uRmluYWwgPSB0cnVlOwoJCQkJfQoKCQkJCXdvcmtPcmRlci5wbGFubmluZyA9IHsKCQkJCQl1c2VyR3JvdXBVVUlEOiB0aGlzLnNlbGVjdGVkVXNlckdyb3VwCgkJCQkJCT8gdGhpcy5zZWxlY3RlZFVzZXJHcm91cC5ncm91cFVVSUQKCQkJCQkJOiBudWxsLAoJCQkJCXVzZXJHcm91cE5hbWU6IHRoaXMuc2VsZWN0ZWRVc2VyR3JvdXAKCQkJCQkJPyB0aGlzLnNlbGVjdGVkVXNlckdyb3VwLmdyb3VwTmFtZQoJCQkJCQk6IG51bGwsCgkJCQkJZnJvbUluc3BlY3Rpb25Jbml0aWFsOiBmcm9tSW5zcGVjdGlvbkluaXRpYWwsCgkJCQkJZnJvbUluc3BlY3Rpb25GaW5hbDogZnJvbUluc3BlY3Rpb25GaW5hbCwKCQkJCX07CgkJCQlpZiAodGhpcy5zYW1lQXNJbml0aWFsSW5zcGVjdGlvbikgewoJCQkJCXdvcmtPcmRlci5wbGFubmluZy5zYW1lSW5zcGVjdGlvbiA9IHRydWU7CgkJCQl9CgoJCQkJaWYgKHdvcmtPcmRlci5wbGFubmluZy5mcm9tSW5zcGVjdGlvbkluaXRpYWwpIHsKCQkJCQlpZiAodGhpcy5zZWxlY3RlZEluaXRpYWxJbnNwZWN0aW9uQnlBc3NldCAhPT0gbnVsbCkgewoJCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuaW5pdGlhbEluc3BlY3Rpb25VVUlEID0KCQkJCQkJCXRoaXMuc2VsZWN0ZWRJbml0aWFsSW5zcGVjdGlvbkJ5QXNzZXQudmFsdWU7CgkJCQkJfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkSW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnkgIT09IG51bGwpIHsKCQkJCQkJd29ya09yZGVyLnBsYW5uaW5nLmluaXRpYWxJbnNwZWN0aW9uVVVJRCA9CgkJCQkJCQl0aGlzLnNlbGVjdGVkSW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnkudmFsdWU7CgkJCQkJfSBlbHNlIHsKCQkJCQkJd29ya09yZGVyLnBsYW5uaW5nLmluaXRpYWxJbnNwZWN0aW9uVVVJRCA9CgkJCQkJCQl0aGlzLnNlbGVjdGVkRmluYWxJbnNwZWN0aW9uQnlXb3JrT3JkZXIudmFsdWU7CgkJCQkJfQoJCQkJfQoKCQkJCWlmICh3b3JrT3JkZXIucGxhbm5pbmcuZnJvbUluc3BlY3Rpb25GaW5hbCkgewoJCQkJCWlmICh0aGlzLnNhbWVBc0luaXRpYWxJbnNwZWN0aW9uKSB7CgkJCQkJCXdvcmtPcmRlci5wbGFubmluZy5maW5hbEluc3BlY3Rpb25VVUlEID0KCQkJCQkJCXdvcmtPcmRlci5wbGFubmluZy5pbml0aWFsSW5zcGVjdGlvblVVSUQ7CgkJCQkJfSBlbHNlIHsKCQkJCQkJaWYgKHRoaXMuc2VsZWN0ZWRGaW5hbEluc3BlY3Rpb25CeUFzc2V0ICE9PSBudWxsKSB7CgkJCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuZmluYWxJbnNwZWN0aW9uVVVJRCA9CgkJCQkJCQkJdGhpcy5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5QXNzZXQudmFsdWU7CgkJCQkJCX0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeSAhPT0gbnVsbCkgewoJCQkJCQkJd29ya09yZGVyLnBsYW5uaW5nLmZpbmFsSW5zcGVjdGlvblVVSUQgPQoJCQkJCQkJCXRoaXMuc2VsZWN0ZWRGaW5hbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnkudmFsdWU7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuZmluYWxJbnNwZWN0aW9uVVVJRCA9CgkJCQkJCQkJdGhpcy5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5V29ya09yZGVyLnZhbHVlOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoKCQkJCWlmICh0aGlzLmNoZWNrRXhpc3RpbmdJbml0aWFsSW5zcGVjdGlvbikgewoJCQkJCXdvcmtPcmRlci5wbGFubmluZy5mcm9tRXhpc3RpbmdJbml0aWFsID0gdHJ1ZTsKCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuZnJvbUluc3BlY3Rpb25Jbml0aWFsID0gZmFsc2U7CgkJCQkJd29ya09yZGVyLnBsYW5uaW5nLmluaXRpYWxJbnNwZWN0aW9uVVVJRCA9CgkJCQkJCXRoaXMuaW5pdGlhbEluc3BlY3Rpb25UZW1wLnV1aWQ7CgkJCQl9IGVsc2UgewoJCQkJCXdvcmtPcmRlci5wbGFubmluZy5pbml0aWFsSW5zcGVjdGlvblVVSUQgPSBudWxsOwoJCQkJfQoKCQkJCWlmICh0aGlzLmZpbmFsSW5zcGVjdGlvblNlbGVjdGlvbiA9PT0gIlNlbGVjdCBFeGlzdGluZyIpIHsKCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuZnJvbUV4aXN0aW5nRmluYWwgPSB0cnVlOwoJCQkJCXdvcmtPcmRlci5wbGFubmluZy5mcm9tSW5zcGVjdGlvbkluaXRpYWwgPSBmYWxzZTsKCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuZmluYWxJbnNwZWN0aW9uVVVJRCA9CgkJCQkJCXRoaXMuc2VsZWN0ZWRGaW5hbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnkudXVpZDsKCQkJCX0gZWxzZSB7CgkJCQkJd29ya09yZGVyLnBsYW5uaW5nLmZpbmFsSW5zcGVjdGlvblVVSUQgPSBudWxsOwoJCQkJfQoKCQkJCWlmICgKCQkJCQl0aGlzLmZpbmFsSW5zcGVjdGlvblNlbGVjdGlvbiA9PT0gIlNhbWUgQXMgSW5pdGlhbCIgJiYKCQkJCQl0aGlzLmNoZWNrRXhpc3RpbmdJbml0aWFsSW5zcGVjdGlvbiA9PSB0cnVlCgkJCQkpIHsKCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuZmluYWxJbnNwZWN0aW9uVVVJRCA9CgkJCQkJCXRoaXMuaW5pdGlhbEluc3BlY3Rpb25UZW1wLnV1aWQ7CgkJCQkJd29ya09yZGVyLnBsYW5uaW5nLmZyb21FeGlzdGluZ0ZpbmFsID0gdHJ1ZTsKCQkJCX0KCgkJCQlpZiAoCgkJCQkJd29ya09yZGVyLnBsYW5uaW5nLmluaXRpYWxJbnNwZWN0aW9uVVVJRCA9PT0KCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuZmluYWxJbnNwZWN0aW9uVVVJRAoJCQkJKSB7CgkJCQkJd29ya09yZGVyLnBsYW5uaW5nLnNhbWVJbnNwZWN0aW9uID0gdHJ1ZTsKCQkJCX0gZWxzZSBpZiAoCgkJCQkJd29ya09yZGVyLnBsYW5uaW5nLmluaXRpYWxJbnNwZWN0aW9uVVVJRCA9PSBudWxsIHx8CgkJCQkJd29ya09yZGVyLnBsYW5uaW5nLmZpbmFsSW5zcGVjdGlvblVVSUQgPT0gbnVsbAoJCQkJKSB7CgkJCQkJd29ya09yZGVyLnBsYW5uaW5nLnNhbWVJbnNwZWN0aW9uID0gZmFsc2U7CgkJCQl9CgkJCQlpZiAodGhpcy5zZWxlY3RlZFVzZXIpIHsKCQkJCQl3b3JrT3JkZXIuYXNzaWduZWRUb1VzZXJOYW1lID0gdGhpcy5zZWxlY3RlZFVzZXIubmFtZTsKCQkJCQl3b3JrT3JkZXIuYXNzaWduZWRUb1VzZXJVVUlEID0gdGhpcy5zZWxlY3RlZFVzZXIudXVpZDsKCQkJCX0KCQkJCWlmICh3b3JrT3JkZXIuYXNzaWduZWRUb1VzZXJOYW1lKSB7CgkJCQkJd29ya09yZGVyLmFzc2lnbmVlcyA9IFsKCQkJCQkJewoJCQkJCQkJdXVpZDogd29ya09yZGVyLmFzc2lnbmVkVG9Vc2VyVVVJRCwKCQkJCQkJCW5hbWU6IHdvcmtPcmRlci5hc3NpZ25lZFRvVXNlck5hbWUsCgkJCQkJCX0sCgkJCQkJXTsKCQkJCX0gZWxzZSB7CgkJCQkJbGV0IHJlc3BvbnNlID0gQXNzZXRQZXJzb25uZWxTZXJ2aWNlLmdldFVzZXJHcm91cEJ5VVVJRCgKCQkJCQkJdGhpcy5zZWxlY3RlZFVzZXJHcm91cC5zZWxlY3RlZE9iamVjdC5ncm91cFVVSUQKCQkJCQkpOwoJCQkJCWlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewoJCQkJCQl3b3JrT3JkZXIuYXNzaWduZWVzID0gW107CgkJCQkJCXJlc3BvbnNlLmRhdGEudXNlckdyb3VwLnVzZXJzLm1hcCgodXNlcikgPT4gewoJCQkJCQkJd29ya09yZGVyLmFzc2lnbmVlcy5wdXNoKHsKCQkJCQkJCQl1dWlkOiB1c2VyLnV1aWQsCgkJCQkJCQkJbmFtZTogdXNlci5maXJzdE5hbWUgKyAiICIgKyB1c2VyLmxhc3ROYW1lLAoJCQkJCQkJfSk7CgkJCQkJCQlyZXR1cm4gdXNlcjsKCQkJCQkJfSk7CgkJCQkJfQoJCQkJfQoJCQkJd29ya09yZGVyLnByaW9yaXR5ID0gdGhpcy53b3JrT3JkZXJTdW1tYXJ5LnByaW9yaXR5OwoJCQkJd29ya09yZGVyLnNjaGVkdWxlID0gbW9tZW50KHRoaXMud29ya09yZGVyU3VtbWFyeS5zaGVkdWxlKTsKCQkJCXdvcmtPcmRlci5hc3NldFVVSUQgPSB0aGlzLndvcmtPcmRlclN1bW1hcnkuaXNzdWVzWzBdLmFzc2V0VVVJRDsKCQkJCXdvcmtPcmRlci50ZW5hbnRVVUlEID0gdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZDsKCQkJCXdvcmtPcmRlci5zdGF0dXMgPSB0aGlzLndvcmtPcmRlclN1bW1hcnkuaXNzdWVzWzBdLnN0YXR1czsKCQkJCXdvcmtPcmRlci5zaGlmdCA9IHRoaXMud29ya09yZGVyU3VtbWFyeS5zaGlmdDsKCgkJCQl3b3JrT3JkZXIuaXNzdWVzID0gaXNzdWVzOwoJCQkJY3JlYXRlV29ya09yZGVyUmVxdWVzdC53b3JrT3JkZXIgPSB3b3JrT3JkZXI7CgoJCQkJaWYgKHRoaXMuY2hlY2tFeGlzdGluZ0luaXRpYWxJbnNwZWN0aW9uID09PSB0cnVlKSB7CgkJCQkJY3JlYXRlV29ya09yZGVyUmVxdWVzdC5pbml0aWFsSW5zcGVjdGlvblRlbXBsYXRlID0gbnVsbDsKCQkJCX0gZWxzZSB7CgkJCQkJY3JlYXRlV29ya09yZGVyUmVxdWVzdC5pbml0aWFsSW5zcGVjdGlvblRlbXBsYXRlID0KCQkJCQkJaW5pdGlhbEluc3BlY3Rpb25UZW1wbGF0ZTsKCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuZnJvbUV4aXN0aW5nSW5pdGlhbCA9IGZhbHNlOwoJCQkJCXdvcmtPcmRlci5wbGFubmluZy5mcm9tSW5zcGVjdGlvbkluaXRpYWwgPSBmYWxzZTsKCQkJCX0KCgkJCQlpZiAodGhpcy5maW5hbEluc3BlY3Rpb25TZWxlY3Rpb24gPT09ICJDcmVhdGUgTmV3IEluc3BlY3Rpb24gVGVtcGxhdGUiKSB7CgkJCQkJY3JlYXRlV29ya09yZGVyUmVxdWVzdC5maW5hbEluc3BlY3Rpb25UZW1wbGF0ZSA9CgkJCQkJCWZpbmFsSW5zcGVjdGlvblRlbXBsYXRlOwoJCQkJCXdvcmtPcmRlci5wbGFubmluZy5mcm9tRXhpc3RpbmdGaW5hbCA9IGZhbHNlOwoJCQkJCXdvcmtPcmRlci5wbGFubmluZy5mcm9tSW5zcGVjdGlvbkZpbmFsID0gZmFsc2U7CgkJCQkJd29ya09yZGVyLnBsYW5uaW5nLnNhbWVJbnNwZWN0aW9uID0gZmFsc2U7CgkJCQl9IGVsc2UgaWYgKAoJCQkJCXRoaXMuZmluYWxJbnNwZWN0aW9uU2VsZWN0aW9uID09PSAiU2FtZSBBcyBJbml0aWFsIiAmJgoJCQkJCXRoaXMuY2hlY2tFeGlzdGluZ0luaXRpYWxJbnNwZWN0aW9uICE9PSB0cnVlCgkJCQkpIHsKCQkJCQljcmVhdGVXb3JrT3JkZXJSZXF1ZXN0LmZpbmFsSW5zcGVjdGlvblRlbXBsYXRlID0KCQkJCQkJaW5pdGlhbEluc3BlY3Rpb25UZW1wbGF0ZTsKCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuZnJvbUV4aXN0aW5nRmluYWwgPQoJCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuZnJvbUV4aXN0aW5nSW5pdGlhbDsKCQkJCQl3b3JrT3JkZXIucGxhbm5pbmcuZnJvbUluc3BlY3Rpb25GaW5hbCA9CgkJCQkJCXdvcmtPcmRlci5wbGFubmluZy5mcm9tSW5zcGVjdGlvbkluaXRpYWw7CgkJCQl9IGVsc2UgaWYgKHRoaXMuZmluYWxJbnNwZWN0aW9uU2VsZWN0aW9uID09PSAiU2VsZWN0IEV4aXN0aW5nIikgewoJCQkJCWNyZWF0ZVdvcmtPcmRlclJlcXVlc3QuZmluYWxJbnNwZWN0aW9uVGVtcGxhdGUgPSBudWxsOwoJCQkJCXdvcmtPcmRlci5wbGFubmluZy5zYW1lSW5zcGVjdGlvbiA9IGZhbHNlOwoJCQkJfSBlbHNlIHsKCQkJCQljcmVhdGVXb3JrT3JkZXJSZXF1ZXN0LmZpbmFsSW5zcGVjdGlvblRlbXBsYXRlID0gbnVsbDsKCQkJCX0KCQkJCS8vCWNyZWF0ZVdvcmtPcmRlclJlcXVlc3QuaW5pdGlhbEluc3BlY3Rpb25UZW1wbGF0ZSA9IGluaXRpYWxJbnNwZWN0aW9uVGVtcGxhdGU7CgkJCQkvLwljcmVhdGVXb3JrT3JkZXJSZXF1ZXN0LmZpbmFsSW5zcGVjdGlvblRlbXBsYXRlID0gZmluYWxJbnNwZWN0aW9uVGVtcGxhdGU7CgkJCQljcmVhdGVXb3JrT3JkZXJSZXF1ZXN0LmluaXRpYWxJbnNwZWN0aW9uT3B0aW9uID0gaW5pdGlhbEluc3BlY3Rpb25PcHRpb247CgkJCQljcmVhdGVXb3JrT3JkZXJSZXF1ZXN0LmZpbmFsSW5zcGVjdGlvbk9wdGlvbiA9IGZpbmFsSW5zcGVjdGlvbk9wdGlvbjsKCQkJCWNyZWF0ZVdvcmtPcmRlclJlcXVlc3QuaW5pdGlhbEluc3BlY3Rpb25UZW1wbGF0ZUxpbmtpbmdVVUlEID0KCQkJCQlpbml0aWFsSW5zcGVjdGlvblRlbXBsYXRlTGlua2luZ1VVSUQ7CgkJCQljcmVhdGVXb3JrT3JkZXJSZXF1ZXN0LmZpbmFsSW5zcGVjdGlvblRlbXBsYXRlTGlua2luZ1VVSUQgPQoJCQkJCWZpbmFsSW5zcGVjdGlvblRlbXBsYXRlTGlua2luZ1VVSUQ7CgkJCQljcmVhdGVXb3JrT3JkZXJSZXF1ZXN0LmluaXRpYWxMaW5rSW5zcGVjdGlvblR5cGUgPQoJCQkJCWluaXRpYWxMaW5rSW5zcGVjdGlvblR5cGU7CgkJCQljcmVhdGVXb3JrT3JkZXJSZXF1ZXN0LmZpbmFsTGlua0luc3BlY3Rpb25UeXBlID0gZmluYWxMaW5rSW5zcGVjdGlvblR5cGU7CgkJCQljcmVhdGVXb3JrT3JkZXJSZXF1ZXN0LnJlc29sdXRpb25zID0gcmVzb2x1dGlvbnM7CgogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgicmVxdWVzdE9iamVjdCIsY3JlYXRlV29ya09yZGVyUmVxdWVzdCkKCQkJCgkJCX0sCgoJCQlnZXRGb3JtRXJyb3JNZXNzYWdlKGZpZWxkVmFsaWRhdGlvbikgewoJCQkJaWYgKGZpZWxkVmFsaWRhdGlvbi4kZGlydHkpIHsKCQkJCQlyZXR1cm4gRnVuY3Rpb25zLmdldEZvcm1GaWVsZEVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pOwoJCQkJfQoJCQl9LAoKCQkJYWRkSW5zdHJ1Y3Rpb24oaW5kZXgpIHsKCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5pc3N1ZXNbaW5kZXhdLmluc3RydWN0aW9uQ2hlY2tsaXN0LnB1c2goewoJCQkJCXZhbHVlOiAiIiwKCQkJCX0pOwoJCQl9LAoKCQkJc3ViSW5zdHJ1Y3Rpb24oaW5kZXgsIGluc3RydWN0aW9uSW5kZXgpIHsKCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5pc3N1ZXNbaW5kZXhdLmluc3RydWN0aW9uQ2hlY2tsaXN0LnNwbGljZSgKCQkJCQlpbnN0cnVjdGlvbkluZGV4LAoJCQkJCTEKCQkJCSk7CgkJCX0sCgoJCQl1c2Vyc1NlbGVjdGVkKHZhbHVlKSB7CgkJCQl0aGlzLnNlbGVjdGVkVXNlciA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0OwoJCQl9LAoKCQkJY2xlYXJTZWxlY3RlZFVzZXIoKSB7CgkJCQl0aGlzLndvcmtPcmRlclN1bW1hcnkudXNlciA9ICIiOwoJCQkJdGhpcy5zZWxlY3RlZFVzZXIgPSAiIjsKCQkJCXRoaXMudXNlclJlc2V0Kys7CgkJCX0sCgoJCQlmaW5hbEluc3BlY3Rpb25CeUFzc2V0U2VsZWN0ZWQodmFsdWUpIHsKCQkJCXRoaXMuc2VsZWN0ZWRGaW5hbEluc3BlY3Rpb25CeUFzc2V0ID0gdmFsdWUuc2VsZWN0ZWRPYmplY3Q7CgkJCQl0aGlzLmZpbmFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeSA9ICIiOwoJCQkJdGhpcy5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeSA9ICIiOwoJCQkJdGhpcy5maW5hbEluc3BlY3Rpb25CeVdvcmtPcmRlciA9ICIiOwoJCQkJdGhpcy5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5V29ya09yZGVyID0gIiI7CgkJCQl0aGlzLmZpbmFsSW5zcGVjdGlvblJlc2V0Kys7CgkJCX0sCgoJCQlmaW5hbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnlTZWxlY3RlZCh2YWx1ZSkgewoJCQkJdGhpcy5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeSA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0OwoJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5LnNlbGVjdGVkRmluYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5ID0KCQkJCQl0aGlzLnNlbGVjdGVkRmluYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5OwoJCQkJdGhpcy5maW5hbEluc3BlY3Rpb25CeUFzc2V0ID0gIiI7CgkJCQl0aGlzLnNlbGVjdGVkRmluYWxJbnNwZWN0aW9uQnlBc3NldCA9ICIiOwoJCQkJdGhpcy5maW5hbEluc3BlY3Rpb25CeVdvcmtPcmRlciA9ICIiOwoJCQkJdGhpcy5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5V29ya09yZGVyID0gIiI7CgkJCQl0aGlzLmZpbmFsSW5zcGVjdGlvblJlc2V0Kys7CgkJCX0sCgoJCQljbGVhclNlbGVjdGVkRmluYWxJbnNwZWN0aW9uQnlBc3NldCgpIHsKCQkJCXRoaXMuZmluYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5ID0gIiI7CgkJCQl0aGlzLmZpbmFsSW5zcGVjdGlvblJlc2V0Kys7CgkJCX0sCgoJCQlmaW5hbEluc3BlY3Rpb25CeVdvcmtPcmRlclNlbGVjdGVkKHZhbHVlKSB7CgkJCQl0aGlzLnNlbGVjdGVkRmluYWxJbnNwZWN0aW9uQnlXb3JrT3JkZXIgPSB2YWx1ZS5zZWxlY3RlZE9iamVjdDsKCQkJCXRoaXMuZmluYWxJbnNwZWN0aW9uQnlBc3NldCA9ICIiOwoJCQkJdGhpcy5zZWxlY3RlZEZpbmFsSW5zcGVjdGlvbkJ5QXNzZXQgPSAiIjsKCQkJCXRoaXMuZmluYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5ID0gIiI7CgkJCQl0aGlzLnNlbGVjdGVkRmluYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5ID0gIiI7CgkJCQl0aGlzLmZpbmFsSW5zcGVjdGlvblJlc2V0Kys7CgkJCX0sCgoJCQlpbml0aWFsSW5zcGVjdGlvbkJ5QXNzZXRTZWxlY3RlZCh2YWx1ZSkgewoJCQkJdGhpcy5zZWxlY3RlZEluaXRpYWxJbnNwZWN0aW9uQnlBc3NldCA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0OwoJCQkJdGhpcy5pbml0aWFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeSA9ICIiOwoJCQkJdGhpcy5zZWxlY3RlZEluaXRpYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5ID0gIiI7CgkJCQl0aGlzLmluaXRpYWxJbnNwZWN0aW9uQnlXb3JrT3JkZXIgPSAiIjsKCQkJCXRoaXMuc2VsZWN0ZWRJbml0aWFsSW5zcGVjdGlvbkJ5V29ya09yZGVyID0gIiI7CgkJCQl0aGlzLmluc3BlY3Rpb25SZXNldCsrOwoJCQl9LAoKCQkJaW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnlTZWxlY3RlZCh2YWx1ZSkgewoJCQkJdGhpcy5pbml0aWFsSW5zcGVjdGlvblRlbXAgPSB2YWx1ZS5zZWxlY3RlZE9iamVjdDsKCQkJCWlmICh0aGlzLnNhbWUgPT09IHRydWUpIHsKCQkJCQlpZiAodGhpcy5jaGVja0V4aXN0aW5nSW5pdGlhbEluc3BlY3Rpb24gPT09IHRydWUpIHsKCQkJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5LnNlbGVjdGVkRmluYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5ID0KCQkJCQkJCXZhbHVlLnNlbGVjdGVkT2JqZWN0OwoJCQkJCQl0aGlzLndvcmtPcmRlclN1bW1hcnlJbmRleCsrOwoJCQkJCX0KCQkJCX0KCgkJCQl0aGlzLnNlbGVjdGVkSW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnkgPSB2YWx1ZS5zZWxlY3RlZE9iamVjdDsKCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5zZWxlY3RlZEluaXRpYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5ID0KCQkJCQl0aGlzLnNlbGVjdGVkSW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnk7CgkJCQl0aGlzLmluaXRpYWxJbnNwZWN0aW9uQnlBc3NldCA9ICIiOwoJCQkJdGhpcy5zZWxlY3RlZEluaXRpYWxJbnNwZWN0aW9uQnlBc3NldCA9ICIiOwoJCQkJdGhpcy5pbml0aWFsSW5zcGVjdGlvbkJ5V29ya09yZGVyID0gIiI7CgkJCQl0aGlzLnNlbGVjdGVkSW5pdGlhbEluc3BlY3Rpb25CeVdvcmtPcmRlciA9ICIiOwoJCQkJdGhpcy5pbnNwZWN0aW9uUmVzZXQrKzsKCQkJfSwKCgkJCWluaXRpYWxJbnNwZWN0aW9uQnlXb3JrT3JkZXJTZWxlY3RlZCh2YWx1ZSkgewoJCQkJdGhpcy5zZWxlY3RlZEluaXRpYWxJbnNwZWN0aW9uQnlXb3JrT3JkZXIgPSB2YWx1ZS5zZWxlY3RlZE9iamVjdDsKCQkJCXRoaXMuaW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0ID0gIiI7CgkJCQl0aGlzLnNlbGVjdGVkSW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0ID0gIiI7CgkJCQl0aGlzLmluaXRpYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5ID0gIiI7CgkJCQl0aGlzLnNlbGVjdGVkSW5pdGlhbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnkgPSAiIjsKCQkJCXRoaXMuaW5zcGVjdGlvblJlc2V0Kys7CgkJCX0sCgoJCQlnZXRJc3N1ZUJ5VVVJRChpc3N1ZVVVSURTKSB7CgkJCQlpc3N1ZVVVSURTLm1hcCgoaXNzdWV1dWlkLCBpbmRleCkgPT4gewoJCQkJCUluc3BlY3Rpb25TZXJ2aWNlLmdldElzc3VlQnlVVUlEKGlzc3VldXVpZCkKCQkJCQkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkJCQlpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKCQkJCQkJCQlsZXQgcGFydCA9IHsKCQkJCQkJCQkJbmFtZTogIiIsCgkJCQkJCQkJCXV1aWQ6IHRoaXMuZ2VuZXJhdGVVVUlEKCksCgkJCQkJCQkJCXF1YW50aXR5OiAiIiwKCQkJCQkJCQkJY29zdDogewoJCQkJCQkJCQkJY2F0ZWdvcnk6ICJwYXJ0LWNvc3QiLAoJCQkJCQkJCQkJYW1vdW50OiAiIiwKCQkJCQkJCQkJCXJlcG9ydGFibGU6IHRydWUsCgkJCQkJCQkJCX0sCgkJCQkJCQkJCWV4dHJhQ29zdDogWwoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCWNhdGVnb3J5OiAidGF4LWNvc3QiLAoJCQkJCQkJCQkJCWFtb3VudDogIiIsCgkJCQkJCQkJCQkJcmVwb3J0YWJsZTogdHJ1ZSwKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCV0sCgkJCQkJCQkJfTsKCQkJCQkJCQlyZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5nLmluc3RydWN0aW9uQ2hlY2tsaXN0ID0gSlNPTi5wYXJzZSgKCQkJCQkJCQkJcmVzcG9uc2UuZGF0YS5pc3N1ZVJlcG9ydGluZy5pbnN0cnVjdGlvbkNoZWNrbGlzdAoJCQkJCQkJCSk7CgkJCQkJCQkJaWYgKHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmcuaW5zdHJ1Y3Rpb25DaGVja2xpc3QgPT09IG51bGwpIHsKCQkJCQkJCQkJcmVzcG9uc2UuZGF0YS5pc3N1ZVJlcG9ydGluZy5pbnN0cnVjdGlvbkNoZWNrbGlzdCA9IFtdOwoJCQkJCQkJCQlyZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5nLmluc3RydWN0aW9uQ2hlY2tsaXN0LnB1c2goewoJCQkJCQkJCQkJdmFsdWU6ICIiLAoJCQkJCQkJCQl9KTsKCQkJCQkJCQl9CgoJCQkJCQkJCXJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmcucGFydHMgPSBbXTsKCQkJCQkJCQlyZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5nLnBhcnRzLnB1c2gocGFydCk7CgkJCQkJCQkJcmVzcG9uc2UuZGF0YS5pc3N1ZVJlcG9ydGluZy5yZXBvcnRlZEF0ID0gbW9tZW50KAoJCQkJCQkJCQlyZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5nLnJlcG9ydGVkQXQKCQkJCQkJCQkpLmZvcm1hdCgiREQgTU1NIFlZWVkiKTsKCgkJCQkJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5Lmlzc3Vlcy5wdXNoKHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmcpOwoJCQkJCQkJCWlmIChpbmRleCA9PT0gMCkgewoJCQkJCQkJCQl0aGlzLmdldEFzc2V0KHRoaXMud29ya09yZGVyU3VtbWFyeS5pc3N1ZXNbaW5kZXhdLmFzc2V0VVVJRCk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9KQoJCQkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJCQl0aGlzLnNob3dUb2FzdChlcnJvci5kYXRhLnJlc3BvbnNlLCAiZXJyb3IiKTsKCQkJCQkJfSk7CgkJCQl9KTsKCQkJfSwKCgkJCWdldEFzc2V0KHV1aWQpIHsKCQkJCUFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0QXNzZXRXaXRoRGV0YWlscyh1dWlkLCB0cnVlLCB0cnVlKS50aGVuKAoJCQkJCShyZXNwb25zZSkgPT4gewoJCQkJCQl0aGlzLmFzc2V0cyA9IHJlc3BvbnNlLmRhdGEuYXNzZXREZXRhaWw7CgkJCQkJCXRoaXMuZ2V0SW5zcGVjdGlvblRlbXBsYXRlcygKCQkJCQkJCXV1aWQsCgkJCQkJCQl0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkCgkJCQkJCSk7CgkJCQkJCXRoaXMuZ2V0SW5zcGVjdGlvblRlbXBsYXRlRnJvbVdvcmtPcmRlcigKCQkJCQkJCXRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQKCQkJCQkJKTsKCQkJCQkJdGhpcy5nZXRJbnNwZWN0aW9uVGVtYXBsYXRlc0J5QXNzZXRDYXRlZ29yeSgKCQkJCQkJCXRoaXMuYXNzZXRzLmNhdGVnb3J5LnV1aWQKCQkJCQkJKTsKCQkJCQl9CgkJCQkpOwoJCQl9LAoKCQkJZ2V0VXNlcnNHcm91cCh0ZW5hbnRVVUlEKSB7CgkJCQlBc3NldFBlcnNvbm5lbFNlcnZpY2UuZ2V0QWxsVXNlckdyb3VwKHRlbmFudFVVSUQpCgkJCQkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkJCWlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewoJCQkJCQkJdGhpcy51c2VyR3JvdXBPcHRpb25zID0gcmVzcG9uc2UuZGF0YS5ncm91cHM7CgkJCQkJCQl0aGlzLnVzZXJHcm91cE9wdGlvbnMucHVzaCh7CgkJCQkJCQkJZ3JvdXBVVUlEOiAiQWxsIiwKCQkJCQkJCQlncm91cE5hbWU6ICJBbGwiLAoJCQkJCQkJfSk7CgkJCQkJCX0KCQkJCQl9KQoJCQkJCS5jYXRjaCgoZXJyb3IpID0+IHsKCQkJCQkJaWYgKGVycm9yKSB7CgkJCQkJCQl0aGlzLnNob3dUb2FzdChlcnJvci5kYXRhLnJlc3BvbnNlLCAiZXJyb3IiKTsKCQkJCQkJfQoJCQkJCX0pOwoJCQl9LAoKCQkJZ2V0QWxsVXNlcnModGVuYW50VVVJRCkgewoJCQkJQXNzZXRQZXJzb25uZWxTZXJ2aWNlLmdldEFsbFVzZXJzKHRlbmFudFVVSUQpCgkJCQkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkJCWlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewoJCQkJCQkJdGhpcy5hbGxVc2VycyA9IHJlc3BvbnNlLmRhdGEudXNlcnM7CgkJCQkJCQl0aGlzLnVzZXJPcHRpb25zID0gcmVzcG9uc2UuZGF0YS51c2VyczsKCQkJCQkJfQoJCQkJCX0pCgkJCQkJLmNhdGNoKChlcnJvcikgPT4gewoJCQkJCQlpZiAoZXJyb3IpIHsKCQkJCQkJfQoJCQkJCX0pOwoJCQl9LAoKCQkJdXNlckdyb3Vwc0hhbmRsZXIoZGF0YSkgewoJCQkJdGhpcy5zZWxlY3RlZFVzZXJHcm91cCA9IGRhdGEuc2VsZWN0ZWRPYmplY3Q7CgkJCQlpZiAoZGF0YS5zZWxlY3RlZE9iamVjdC5ncm91cE5hbWUgPT09ICJBbGwiKSB7CgkJCQkJdGhpcy51c2VyT3B0aW9ucyA9IHRoaXMuYWxsVXNlcnM7CgkJCQl9IGVsc2UgewoJCQkJCXRoaXMudXNlciA9ICIiOwoJCQkJCUFzc2V0UGVyc29ubmVsU2VydmljZS5nZXRVc2VyR3JvdXBCeVVVSUQoCgkJCQkJCWRhdGEuc2VsZWN0ZWRPYmplY3QuZ3JvdXBVVUlECgkJCQkJKS50aGVuKChyZXNwb25zZSkgPT4gewoJCQkJCQl0aGlzLnVzZXJPcHRpb25zID0gW107CgkJCQkJCXRoaXMudXNlciA9ICIiOwoJCQkJCQl0aGlzLnVzZXJPcHRpb25zID0gcmVzcG9uc2UuZGF0YS51c2VyR3JvdXAudXNlcnM7CgkJCQkJfSk7CgkJCQl9CgkJCQl0aGlzLnVzZXIgPSAiIjsKCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS51c2VyID0gIiI7CgkJCQl0aGlzLnVzZXJSZXNldCsrOwoJCQl9LAoKCQkJY2xlYXJTZWxlY3RlZFVzZXJHcm91cCgpIHsKCQkJCXRoaXMud29ya09yZGVyU3VtbWFyeS51c2VyR3JvdXAgPSAiIjsKCQkJCXRoaXMudXNlck9wdGlvbnMgPSB0aGlzLmFsbFVzZXJzOwoJCQkJdGhpcy51c2VyUmVzZXQrKzsKCQkJfSwKCgkJCWdldEluc3BlY3Rpb25UZW1wbGF0ZXMoYXNzZXRVVUlELCB0ZW5hbnRVVUlEKSB7CgkJCQlJbnNwZWN0aW9uU2VydmljZS5nZXRJbnNwZWN0aW9uVGVtcGxhdGVOYW1lQW5kVVVJRChhc3NldFVVSUQsIHRlbmFudFVVSUQpCgkJCQkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkJCWlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewoJCQkJCQkJdGhpcy5pbnNwZWN0aW9uQnlBc3NldE9wdGlvbnMgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25zOwoJCQkJCQl9CgkJCQkJfSkKCQkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJCXRoaXMuc2hvd1RvYXN0KGVycm9yLmRhdGEucmVzcG9uc2UsICJlcnJvciIpOwoJCQkJCX0pOwoJCQl9LAoKCQkJZ2V0SW5zcGVjdGlvblRlbXBsYXRlRnJvbVdvcmtPcmRlcih0ZW5hbnRVVUlEKSB7CgkJCQlXb3JrT3JkZXJTZXJ2aWNlLmdldFdvcmtPcmRlckluc3BlY3Rpb25UZW1wbGF0ZXModGVuYW50VVVJRCkKCQkJCQkudGhlbigocmVzcG9uc2UpID0+IHsKCQkJCQkJaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CgkJCQkJCQl0aGlzLmlucHNlY3Rpb25CeVdvcmtPcmRlck9wdGlvbnMgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25zOwoJCQkJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmlucHNlY3Rpb25CeVdvcmtPcmRlck9wdGlvbnMubGVuZ3RoOyBpKyspIHsKCQkJCQkJCQlpZiAoCgkJCQkJCQkJCXRoaXMuaW5wc2VjdGlvbkJ5V29ya09yZGVyT3B0aW9uc1tpXS5uYW1lID09PSAiIiB8fAoJCQkJCQkJCQkhdGhpcy5pbnBzZWN0aW9uQnlXb3JrT3JkZXJPcHRpb25zW2ldLm5hbWUKCQkJCQkJCQkpIHsKCQkJCQkJCQkJdGhpcy5pbnBzZWN0aW9uQnlXb3JrT3JkZXJPcHRpb25zW2ldLm5hbWUgPSAiLSI7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSkKCQkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJCXRoaXMuc2hvd1RvYXN0KGVycm9yLmRhdGEucmVzcG9uc2UsICJlcnJvciIpOwoJCQkJCX0pOwoJCQl9LAoKCQkJZ2V0SW5zcGVjdGlvblRlbWFwbGF0ZXNCeUFzc2V0Q2F0ZWdvcnkoY2F0ZWdvcnlVVUlEKSB7CgkJCQlJbnNwZWN0aW9uU2VydmljZS5nZXRJbnNwZWN0aW9uVGVtcGxhdGVOYW1lQW5kVVVJREJ5Q2F0ZWdvcnlVVUlEKAoJCQkJCWNhdGVnb3J5VVVJRAoJCQkJKQoJCQkJCS50aGVuKChyZXNwb25zZSkgPT4gewoJCQkJCQlpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKCQkJCQkJCXRoaXMuaW5wc2VjdGlvbkJ5QXNzZXRDYXRlZ29yeU9wdGlvbnMgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25zOwoJCQkJCQl9CgkJCQkJfSkKCQkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJCXRoaXMuc2hvd1RvYXN0KGVycm9yLmRhdGEucmVzcG9uc2UsICJlcnJvciIpOwoJCQkJCX0pOwoJCQl9LAoKCQkJcmVtb3ZlTXVsdGlwbGVDaG9pY2VJbml0aWFsKGluZGV4LCBtKSB7CgkJCQl0aGlzLnF1ZXN0aW9uVHlwZUZvcm1Jbml0aWFsW2luZGV4XS5hbnN3ZXJzLnNwbGljZShtLCAxKTsKCQkJfSwKCQkJcmVtb3ZlTXVsdGlwbGVDaG9pY2VGaW5hbChpbmRleCwgbSkgewoJCQkJdGhpcy5xdWVzdGlvblR5cGVGb3JtRmluYWxbaW5kZXhdLmFuc3dlcnMuc3BsaWNlKG0sIDEpOwoJCQl9LAoJCQlhZGRBbnN3ZXJzQXJyYXkodmFsdWUsIGluZGV4KSB7CgkJCQl0aGlzLnF1ZXN0aW9uVHlwZUZvcm1Jbml0aWFsW2luZGV4XS50eXBlID0gdmFsdWUuc2VsZWN0ZWRPYmplY3QudmFsdWU7CgkJCQlpZiAodmFsdWUudmFsdWUgPT09ICJNdWx0aXBsZSBDaG9pY2UiKSB7CgkJCQkJdGhpcy5xdWVzdGlvblR5cGVGb3JtSW5pdGlhbFtpbmRleF0uYW5zd2Vycy5wdXNoKCIiLCAiIik7CgkJCQl9IGVsc2UgewoJCQkJCXRoaXMucXVlc3Rpb25UeXBlRm9ybUluaXRpYWxbaW5kZXhdLmFuc3dlcnMgPSBbXTsKCQkJCX0KCQkJfSwKCgkJCWNsZWFyU2VsZWN0ZWRBbnN3ZXIoaW5kZXgpIHsKCQkJCXRoaXMucXVlc3Rpb25UeXBlRm9ybUluaXRpYWxbaW5kZXhdLnR5cGVMYWJlbCA9ICIiOwoJCQkJdGhpcy51cGRhdGVTZWxlY3RDb21wKys7CgkJCX0sCgoJCQlhZGRBbnN3ZXJzQXJyYXlGaW5hbCh2YWx1ZSwgaW5kZXgpIHsKCQkJCXRoaXMucXVlc3Rpb25UeXBlRm9ybUZpbmFsW2luZGV4XS50eXBlID0gdmFsdWUuc2VsZWN0ZWRPYmplY3QudmFsdWU7CgkJCQlpZiAodmFsdWUudmFsdWUgPT09ICJNdWx0aXBsZSBDaG9pY2UiKSB7CgkJCQkJdGhpcy5xdWVzdGlvblR5cGVGb3JtRmluYWxbaW5kZXhdLmFuc3dlcnMucHVzaCgiIiwgIiIpOwoJCQkJfSBlbHNlIHsKCQkJCQl0aGlzLnF1ZXN0aW9uVHlwZUZvcm1GaW5hbFtpbmRleF0uYW5zd2VycyA9IFtdOwoJCQkJfQoJCQl9LAoJCQlhZGRNdWx0aXBsZUNob2ljZUluaXRpYWwoaW5kZXgpIHsKCQkJCXRoaXMucXVlc3Rpb25UeXBlRm9ybUluaXRpYWxbaW5kZXhdLmFuc3dlcnMucHVzaCgiIik7CgkJCX0sCgkJCWFkZE11bHRpcGxlQ2hvaWNlRmluYWwoaW5kZXgpIHsKCQkJCXRoaXMucXVlc3Rpb25UeXBlRm9ybUZpbmFsW2luZGV4XS5hbnN3ZXJzLnB1c2goIiIpOwoJCQl9LAoKCQkJcmVtb3ZlSW5wdXRGaWVsZHNJbml0aWFsKGluZGV4KSB7CgkJCQl0aGlzLnF1ZXN0aW9uVHlwZUZvcm1Jbml0aWFsLnNwbGljZShpbmRleCwgMSk7CgkJCX0sCgkJCXJlbW92ZUlucHV0RmllbGRzRmluYWwoaW5kZXgpIHsKCQkJCXRoaXMucXVlc3Rpb25UeXBlRm9ybUZpbmFsLnNwbGljZShpbmRleCwgMSk7CgkJCX0sCgkJCWFkZElucHV0RmllbGRzSW5pdGlhbCgpIHsKCQkJCXRoaXMucXVlc3Rpb25UeXBlRm9ybUluaXRpYWwucHVzaCh7CgkJCQkJbmFtZTogIiIsCgkJCQkJdHlwZTogIiIsCgkJCQkJcXVlc3Rpb246ICIiLAoJCQkJCWFuc3dlcnM6IFtdLAoJCQkJCW1hbmRhdG9yeTogdHJ1ZSwKCQkJCX0pOwoJCQl9LAoKCQkJYWRkSW5wdXRGaWVsZHNGaW5hbCgpIHsKCQkJCXRoaXMucXVlc3Rpb25UeXBlRm9ybUZpbmFsLnB1c2goewoJCQkJCW5hbWU6ICIiLAoJCQkJCXR5cGU6ICIiLAoJCQkJCXF1ZXN0aW9uOiAiIiwKCQkJCQlhbnN3ZXJzOiBbXSwKCQkJCQltYW5kYXRvcnk6IHRydWUsCgkJCQl9KTsKCQkJfSwKCQkJZ2VuZXJhdGVVVUlEKCkgewoJCQkJbGV0IGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCQkJCWlmIChEYXRlLm5vdygpKSB7CgkJCQkJZCA9IERhdGUubm93KCk7CgkJCQl9CgoJCQkJbGV0IHV1aWQgPSAieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Ii5yZXBsYWNlKAoJCQkJCS9beHldL2csCgkJCQkJKGMpID0+IHsKCQkJCQkJbGV0IHIgPSAoZCArIE1hdGgucmFuZG9tKCkgKiAxNikgJSAxNiB8IDA7CgkJCQkJCWQgPSBNYXRoLmZsb29yKGQgLyAxNik7CgkJCQkJCXJldHVybiAoYyA9PT0gIngiID8gciA6IChyICYgMHgzKSB8IDB4OCkudG9TdHJpbmcoMTYpOwoJCQkJCX0KCQkJCSk7CgkJCQlyZXR1cm4gdXVpZDsKCQkJfSwKCQkJYWRkUGFydChpbmRleCkgewoJCQkJbGV0IGlzc3VlcyA9IHRoaXMud29ya09yZGVyU3VtbWFyeS5pc3N1ZXM7CgkJCQlsZXQgcGFydCA9IHsKCQkJCQluYW1lOiAiIiwKCQkJCQl1dWlkOiB0aGlzLmdlbmVyYXRlVVVJRCgpLAoJCQkJCXF1YW50aXR5OiAiIiwKCQkJCQljb3N0OiB7CgkJCQkJCWNhdGVnb3J5OiAicGFydC1jb3N0IiwKCQkJCQkJYW1vdW50OiAiIiwKCQkJCQkJcmVwb3J0YWJsZTogdHJ1ZSwKCQkJCQl9LAoJCQkJCWV4dHJhQ29zdDogWwoJCQkJCQl7CgkJCQkJCQljYXRlZ29yeTogInRheC1jb3N0IiwKCQkJCQkJCWFtb3VudDogIiIsCgkJCQkJCQlyZXBvcnRhYmxlOiB0cnVlLAoJCQkJCQl9LAoJCQkJCV0sCgkJCQl9OwoKCQkJCWlzc3Vlc1tpbmRleF0ucGFydHMucHVzaChwYXJ0KTsKCgkJCQl0aGlzLndvcmtPcmRlclN1bW1hcnkuaXNzdWVzID0gaXNzdWVzOwoJCQl9LAoKCQkJcmVtb3ZlUGFydHMoaW5kZXgsIGspIHsKCQkJCXsKCQkJCQlsZXQgcGFydCA9IHRoaXMud29ya09yZGVyU3VtbWFyeS5pc3N1ZXNbaW5kZXhdLnBhcnRzOwoJCQkJCXBhcnQuc3BsaWNlKGssIDEpOwoJCQkJfQoJCQl9LAoJCQlhc3NldERldGFpbHNmcm9tU3RkKHV1aWQpIHsKCQkJCWlmICh1dWlkICE9PSB1bmRlZmluZWQpIHsKCQkJCQlBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldEFzc2V0KHV1aWQpLnRoZW4oKHJlcykgPT4gewoJCQkJCQl0aGlzLndvcmtPcmRlclN1bW1hcnkubmFtZSA9IHJlcy5kYXRhLmFzc2V0Lm5hbWU7CgoJCQkJCQlpZiAodGhpcy5hc3NldENhdGVnb3J5T3B0aW9ucyAhPT0gIiIpIHsKCQkJCQkJCS8vICBkZWJ1Z2dlcgoJCQkJCQkJZm9yICgKCQkJCQkJCQlsZXQgaW5kZXggPSAwOwoJCQkJCQkJCWluZGV4IDwgdGhpcy5hc3NldENhdGVnb3J5T3B0aW9ucy5sZW5ndGg7CgkJCQkJCQkJaW5kZXgrKwoJCQkJCQkJKSB7CgkJCQkJCQkJaWYgKAoJCQkJCQkJCQl0aGlzLmFzc2V0Q2F0ZWdvcnlPcHRpb25zW2luZGV4XS5jYXRlZ29yeVVVSUQgPT09CgkJCQkJCQkJCXJlcy5kYXRhLmNhdGVnb3J5SWQKCQkJCQkJCQkpIHsKCQkJCQkJCQkJdGhpcy53b3JrT3JkZXJTdW1tYXJ5LmNhdGVnb3J5ID0KCQkJCQkJCQkJCXRoaXMuYXNzZXRDYXRlZ29yeU9wdGlvbnNbaW5kZXhdLmxhYmVsOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQl0aGlzLmdldElzc3Vlc0J5QXNzZXRVVUlEKHJlcy5kYXRhLmFzc2V0LnV1aWQpOwoJCQkJCQl0aGlzLmFzc2V0SW5kZXgrKzsKCQkJCQkJdGhpcy5jYXRlZ29yeUluZGV4Kys7CgkJCQkJfSk7CgkJCQl9CgkJCX0sCgoJCQlpbml0aWFsSW5zcGVjdGlvblZhbGlkYXRpb24oKSB7CgkJCQlsZXQgdmFsaWRhdGlvbnMgPSB7fTsKCQkJCWlmICh0aGlzLmNoZWNrRXhpc3RpbmdJbml0aWFsSW5zcGVjdGlvbikgewoJCQkJCXZhbGlkYXRpb25zID0gewoJCQkJCQlpbml0aWFsSW5zcGVjdGlvbkJ5QXNzZXRDYXRlZ29yeTogeyByZXF1aXJlZCB9LAoJCQkJCQlxdWVzdGlvblR5cGVGb3JtSW5pdGlhbDogewoJCQkJCQkJJGVhY2g6IHsKCQkJCQkJCQluYW1lOiB7fSwKCQkJCQkJCQlxdWVzdGlvbjoge30sCgkJCQkJCQkJdHlwZUxhYmVsOiB7fSwKCQkJCQkJCX0sCgkJCQkJCX0sCgkJCQkJfTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFsaWRhdGlvbnMgPSB7CgkJCQkJCWluaXRpYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5OiB7fSwKCQkJCQkJcXVlc3Rpb25UeXBlRm9ybUluaXRpYWw6IHsKCQkJCQkJCSRlYWNoOiB7CgkJCQkJCQkJbmFtZTogeyByZXF1aXJlZCB9LAoJCQkJCQkJCXF1ZXN0aW9uOiB7IHJlcXVpcmVkIH0sCgkJCQkJCQkJdHlwZUxhYmVsOiB7IHJlcXVpcmVkIH0sCgkJCQkJCQl9LAoJCQkJCQl9LAoJCQkJCX07CgkJCQl9CgkJCQlyZXR1cm4gdmFsaWRhdGlvbnM7CgkJCX0sCgoJCQl3b3JrT3JkZXJWYWxpZGF0aW9uKCkgewoJCQkJbGV0IHZhbGlkYXRpb25zID0ge307CgkJCQlpZiAoCgkJCQkJIXRoaXMuY2hlY2tFeGlzdGluZ0luaXRpYWxJbnNwZWN0aW9uICYmCgkJCQkJdGhpcy5maW5hbEluc3BlY3Rpb25TZWxlY3Rpb24gPT0gIkNyZWF0ZSBOZXcgSW5zcGVjdGlvbiBUZW1wbGF0ZSIKCQkJCSkgewoJCQkJCXZhbGlkYXRpb25zID0gewoJCQkJCQl3b3JrT3JkZXJTdW1tYXJ5OiB7CgkJCQkJCQlwcmlvcml0eTogeyByZXF1aXJlZCB9LAoJCQkJCQkJc2hpZnQ6IHsgcmVxdWlyZWQgfSwKCQkJCQkJCXNoZWR1bGU6IHsgcmVxdWlyZWQgfSwKCQkJCQkJCXVzZXI6IHsgcmVxdWlyZWQgfSwKCQkJCQkJCWNhdGVnb3J5OiB7IHJlcXVpcmVkIH0sCgkJCQkJCQluYW1lOiB7IHJlcXVpcmVkIH0sCgkJCQkJCQlpbml0aWFsSW5zcGVjdGlvblRpdGxlOiB7IHJlcXVpcmVkIH0sCgkJCQkJCQlmaW5hbEluc3BlY3Rpb25UaXRsZTogeyByZXF1aXJlZCB9LAoJCQkJCQl9LAoJCQkJCX07CgkJCQl9IGVsc2UgaWYgKAoJCQkJCXRoaXMuY2hlY2tFeGlzdGluZ0luaXRpYWxJbnNwZWN0aW9uICYmCgkJCQkJdGhpcy5maW5hbEluc3BlY3Rpb25TZWxlY3Rpb24gPT0gIkNyZWF0ZSBOZXcgSW5zcGVjdGlvbiBUZW1wbGF0ZSIKCQkJCSkgewoJCQkJCXZhbGlkYXRpb25zID0gewoJCQkJCQl3b3JrT3JkZXJTdW1tYXJ5OiB7CgkJCQkJCQlwcmlvcml0eTogeyByZXF1aXJlZCB9LAoJCQkJCQkJc2hpZnQ6IHsgcmVxdWlyZWQgfSwKCQkJCQkJCXNoZWR1bGU6IHsgcmVxdWlyZWQgfSwKCQkJCQkJCXVzZXI6IHsgcmVxdWlyZWQgfSwKCQkJCQkJCWNhdGVnb3J5OiB7IHJlcXVpcmVkIH0sCgkJCQkJCQluYW1lOiB7IHJlcXVpcmVkIH0sCgkJCQkJCQlpbml0aWFsSW5zcGVjdGlvblRpdGxlOiB7fSwKCQkJCQkJCWZpbmFsSW5zcGVjdGlvblRpdGxlOiB7IHJlcXVpcmVkIH0sCgkJCQkJCX0sCgkJCQkJfTsKCQkJCX0gZWxzZSBpZiAoCgkJCQkJIXRoaXMuY2hlY2tFeGlzdGluZ0luaXRpYWxJbnNwZWN0aW9uICYmCgkJCQkJdGhpcy5maW5hbEluc3BlY3Rpb25TZWxlY3Rpb24gIT09ICJDcmVhdGUgTmV3IEluc3BlY3Rpb24gVGVtcGxhdGUiCgkJCQkpIHsKCQkJCQl2YWxpZGF0aW9ucyA9IHsKCQkJCQkJd29ya09yZGVyU3VtbWFyeTogewoJCQkJCQkJcHJpb3JpdHk6IHsgcmVxdWlyZWQgfSwKCQkJCQkJCXNoaWZ0OiB7IHJlcXVpcmVkIH0sCgkJCQkJCQlzaGVkdWxlOiB7IHJlcXVpcmVkIH0sCgkJCQkJCQl1c2VyOiB7IHJlcXVpcmVkIH0sCgkJCQkJCQljYXRlZ29yeTogeyByZXF1aXJlZCB9LAoJCQkJCQkJbmFtZTogeyByZXF1aXJlZCB9LAoJCQkJCQkJaW5pdGlhbEluc3BlY3Rpb25UaXRsZTogeyByZXF1aXJlZCB9LAoJCQkJCQkJZmluYWxJbnNwZWN0aW9uVGl0bGU6IHt9LAoJCQkJCQl9LAoJCQkJCX07CgkJCQl9IGVsc2UgewoJCQkJCXZhbGlkYXRpb25zID0gewoJCQkJCQl3b3JrT3JkZXJTdW1tYXJ5OiB7CgkJCQkJCQlwcmlvcml0eTogeyByZXF1aXJlZCB9LAoJCQkJCQkJc2hpZnQ6IHsgcmVxdWlyZWQgfSwKCQkJCQkJCXNoZWR1bGU6IHsgcmVxdWlyZWQgfSwKCQkJCQkJCXVzZXI6IHsgcmVxdWlyZWQgfSwKCQkJCQkJCWNhdGVnb3J5OiB7IHJlcXVpcmVkIH0sCgkJCQkJCQluYW1lOiB7IHJlcXVpcmVkIH0sCgkJCQkJCQlpbml0aWFsSW5zcGVjdGlvblRpdGxlOiB7fSwKCQkJCQkJCWZpbmFsSW5zcGVjdGlvblRpdGxlOiB7fSwKCQkJCQkJfSwKCQkJCQl9OwoJCQkJfQoJCQkJcmV0dXJuIHZhbGlkYXRpb25zOwoJCQl9LAoKCQkJZmluYWxJbnNwZWN0aW9uVmFsaWRhdGlvbigpIHsKCQkJCWxldCB2YWxkaWF0aW9ucyA9IHt9OwoJCQkJaWYgKHRoaXMuZmluYWxJbnNwZWN0aW9uU2VsZWN0aW9uID09ICJDcmVhdGUgTmV3IEluc3BlY3Rpb24gVGVtcGxhdGUiKSB7CgkJCQkJdmFsZGlhdGlvbnMgPSB7CgkJCQkJCXF1ZXN0aW9uVHlwZUZvcm1GaW5hbDogewoJCQkJCQkJJGVhY2g6IHsKCQkJCQkJCQluYW1lOiB7IHJlcXVpcmVkIH0sCgkJCQkJCQkJcXVlc3Rpb246IHsgcmVxdWlyZWQgfSwKCQkJCQkJCQl0eXBlTGFiZWw6IHsgcmVxdWlyZWQgfSwKCQkJCQkJCX0sCgkJCQkJCX0sCgkJCQkJfTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFsZGlhdGlvbnMgPSB7CgkJCQkJCXF1ZXN0aW9uVHlwZUZvcm1GaW5hbDogewoJCQkJCQkJJGVhY2g6IHsKCQkJCQkJCQluYW1lOiB7fSwKCQkJCQkJCQlxdWVzdGlvbjoge30sCgkJCQkJCQkJdHlwZUxhYmVsOiB7fSwKCQkJCQkJCX0sCgkJCQkJCX0sCgkJCQkJfTsKCQkJCX0KCgkJCQlpZiAodGhpcy5maW5hbEluc3BlY3Rpb25TZWxlY3Rpb24gPT09ICJTZWxlY3QgRXhpc3RpbmciKSB7CgkJCQkJdmFsZGlhdGlvbnMuZmluYWxJbnNwZWN0aW9uQnlBc3NldENhdGVnb3J5ID0geyByZXF1aXJlZCB9OwoJCQkJfSBlbHNlIHsKCQkJCQl2YWxkaWF0aW9ucy5maW5hbEluc3BlY3Rpb25CeUFzc2V0Q2F0ZWdvcnkgPSB7fTsKCQkJCX0KCgkJCQlyZXR1cm4gdmFsZGlhdGlvbnM7CgkJCX0sCgoJCQlzaG93VG9hc3QobWVzc2FnZSwgdHlwZSkgewoJCQkJdGhpcy50b2FzdE1lc3NhZ2UgPSBtZXNzYWdlOwoJCQkJdGhpcy50b2FzdFR5cGUgPSB0eXBlOwoJCQkJdGhpcy50b2FzdEZsYWcrKzsKCQkJfSwKCQl9LAoJCXByb3BzOiB7CgkJCWNhbGVuZGVyRGF0ZU9iajoge30sCgkJfSwKCQltb3VudGVkKCkgewoJCQl0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UoCgkJCQlsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKCQkJKTsKCQkJdGhpcy5nZXRDdXJyZW5jeSgpOwoJCQl0aGlzLmdldEFsbENhdGVnb3JpZXModGhpcy5jdXJyZW50VXNlckRldGFpbHMpOwoJCQl0aGlzLmdldFVzZXJzR3JvdXAodGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCk7CgkJCXRoaXMuZ2V0QWxsVXNlcnModGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCk7CgkJCWNvbnNvbGUubG9nKCJjYWxlbmRlckRhdGVPYmoiLCB0aGlzLmNhbGVuZGVyRGF0ZU9iaik7CgkJCWxldCBzdGFydERhdGUgPSBtb21lbnQodGhpcy5jYWxlbmRlckRhdGVPYmouc3RhcnRUaW1lKS5mb3JtYXQoIkREIE1NTSBZWVlZIik7CgkJCXRoaXMud29ya09yZGVyU3VtbWFyeS5zaGVkdWxlID0gc3RhcnREYXRlOwoJCQl0aGlzLmFzc2V0SW5kZXgrKzsKCQkJdGhpcy5hZGRJbnB1dEZpZWxkc0luaXRpYWwoKTsKCQkJdGhpcy5hZGRJbnB1dEZpZWxkc0ZpbmFsKCk7CgkJfSwKCgkJdmFsaWRhdGlvbnM6IGZ1bmN0aW9uICgpIHsKCQkJcmV0dXJuIHsKCQkJCS4uLnRoaXMud29ya09yZGVyVmFsaWRhdGlvbigpLAoJCQkJLi4udGhpcy5pbml0aWFsSW5zcGVjdGlvblZhbGlkYXRpb24oKSwKCQkJCS4uLnRoaXMuZmluYWxJbnNwZWN0aW9uVmFsaWRhdGlvbigpLAoJCQkJZmluYWxJbnNwZWN0aW9uU2VsZWN0aW9uOiB7IHJlcXVpcmVkIH0sCgkJCQlpc3N1ZXNTZWxlY3RlZDogeyByZXF1aXJlZCB9LAoKCQkJCS8qIGlzc3Vlczp7CgkJCQkkZWFjaDp7CgkJCQkJaXNzdWVOYW1lOntyZXF1aXJlZH0sCgkJCQl9LAoJCQl9LCovCgkJCX07CgkJfSwKCX07Cg=="},null]}