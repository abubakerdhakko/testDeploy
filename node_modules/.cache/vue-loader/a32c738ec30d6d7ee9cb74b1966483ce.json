{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/issues/Issues.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/issues/Issues.vue","mtime":1661968702436},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":1662622637719},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1662622639723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBhc3NldE1hbmFnZW1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL0Fzc2V0TWFuYWdlbWVudFNlcnZpY2UiOwppbXBvcnQgYXNzZXRQZXJzb25uZWxTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL0Fzc2V0UGVyc29ubmVsU2VydmljZSI7CmltcG9ydCBJbnNwZWN0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlcy9JbnNwZWN0aW9uU2VydmljZSI7CmltcG9ydCB3b3JrT3JkZXJTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL1dvcmtPcmRlclNlcnZpY2UiOwppbXBvcnQgeyByZXF1aXJlZCB9IGZyb20gInZ1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyI7CmltcG9ydCBFbmRwb2ludHMgZnJvbSAiLi4vLi4vc2VydmljZXMvRW5kUG9pbnRzIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgQXJjaGl2ZWRJc3N1ZXMgZnJvbSAiLi8uLi9pc3N1ZXMvYXJjaGl2ZWRJc3N1ZXMudnVlIjsKaW1wb3J0IFZpZXdJc3N1ZSBmcm9tICIuLi8uLi92aWV3cy9pc3N1ZXMvY29tcG9uZW50cy9WaWV3SXNzdWUiOwppbXBvcnQgSWdub3JlUmVxdWVzdCBmcm9tICIuLi8uLi9jb21wb25lbnRzL0lnbm9yZVJlcXVlc3QiOwppbXBvcnQgQ3JlYXRlSXNzdWUgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9DcmVhdGVJc3N1ZSI7CmltcG9ydCBEZWxldGVEaWFsb2cgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9EZWxldGVEaWFsb2ciOwppbXBvcnQgQXJjaGl2ZURpYWxvZyBmcm9tICIuLi8uLi9jb21wb25lbnRzL0FyY2hpdmVEaWFsb2ciOwppbXBvcnQgeyBGdW5jdGlvbnMgfSBmcm9tICJAL3NoYXJlZC9GdW5jdGlvbnMiOwoKaW1wb3J0IGxvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvTG9hZGVyLnZ1ZSI7CmxldCBzdHJpbmdPcHRpb25Xb3JrT3JkZXJVVUlEID0gW107CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSXNzdWVzIiwKICBjb21wb25lbnRzOiB7CiAgICBWaWV3SXNzdWUsCiAgICBJZ25vcmVSZXF1ZXN0LAogICAgQ3JlYXRlSXNzdWUsCiAgICBEZWxldGVEaWFsb2csCiAgICBBcmNoaXZlRGlhbG9nLAogICAgQXJjaGl2ZWRJc3N1ZXMsCiAgICBsb2FkZXIsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXBkYXRlQ29tcDogMCwKICAgICAgY3JlYXRlSXNzdWVDb21wOiAwLAogICAgICB0b2FzdEZsYWc6IDAsCiAgICAgIHRvYXN0TWVzc2FnZTogIiIsCiAgICAgIHRvYXN0VHlwZTogIiIsCiAgICAgIHRvYXN0VGltZU91dDogMzAwMCwKICAgICAgbG9hZGVyRmxhZzogZmFsc2UsCiAgICAgIGlzc3VlVGFiOiAiaXNzdWVzIiwKICAgICAgaXNzdWVUYWJPcHRpb25zOiBbCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJJc3N1ZXMiLAogICAgICAgICAgdmFsdWU6ICJpc3N1ZXMiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJBcmNoaXZlZCIsCiAgICAgICAgICB2YWx1ZTogImFyY2hpdmVkIiwKICAgICAgICB9LAogICAgICBdLAogICAgICBmaWx0ZXJDb3VudDogIiIsCiAgICAgIGN1cnJlbnRVc2VyRGV0YWlsczogIiIsCiAgICAgIGlzc3VlSUQ6ICIiLAogICAgICBhcmNoaXZlSXNzdWVEaWFsb2c6IGZhbHNlLAogICAgICBkZWxldGVJc3N1ZURpYWxvZzogZmFsc2UsCiAgICAgIGNyZWF0ZUlzc3VlczogZmFsc2UsCiAgICAgIHZpZXdJc3N1ZTogZmFsc2UsCiAgICAgIGVkaXRJc3N1ZTogZmFsc2UsCiAgICAgIGlnbm9yZUlzc3VlOiBmYWxzZSwKICAgICAgdXNlcjogIiIsCiAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgaXNMb2FkaW5nUGFnZTogZmFsc2UsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIHByb21wdDogZmFsc2UsCiAgICAgIHByb21wdFZpZXdOYW1lOiAiIiwKICAgICAgc2VydmVyRGF0YTogIiIsCiAgICAgIGZpbHRlckZpZWxkTGlzdDogW10sCiAgICAgIGlzc3VlOiAiIiwKICAgICAgZXZlbnREYXRhOiAiIiwKICAgICAgc2R0X3Rva2VuOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKSkKICAgICAgICAuYWNjZXNzX3Rva2VuLAogICAgICBwYXJlbnRTeXN0ZW1TZXR0aW5nczogewogICAgICAgIHNlcnZpY2VVUkw6IEVuZHBvaW50cy5wcmVmZXJlbmNlU2VydmljZS5wcmVmZXJlbmNlLAogICAgICAgIC8vIHNlcnZpY2VVUkw6ICdodHRwOi8vbG9jYWxob3N0OjgwOTkvcHJlZmVyZW5jZXMnLAogICAgICAgIGJ1dHRvbnM6IFtdLAogICAgICAgIHNlYXJjaFZhbHVlOiAiIiwKICAgICAgICBoZWlnaHQ6ICI5NTBweCIsCiAgICAgICAgc2VsZWN0aW9uQ29sdW1uOiB0cnVlLAogICAgICAgIHNlbGVjdFR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgbW9yZU9wdGlvbnM6IFtdLAogICAgICAgIGFjdGlvbnNPcHRpb25zOiBbIlZpZXciLCAiRWRpdCIsICJBcmNoaXZlIiwgIklnbm9yZSJdLAogICAgICAgIGNvbHVtbkljb25zOiBbCiAgICAgICAgICB7IGZpZWxkOiAiIiwgaWNvbjogInBvcnQiIH0sCiAgICAgICAgICB7IGZpZWxkOiAiIiwgaWNvbjogInBvcnQiIH0sCiAgICAgICAgXSwKICAgICAgICBwaWxsQ29uZmlnOiBbCiAgICAgICAgICB7IGNvbHVtbjogIiIsIHN0YXRlOiAic3VjY2VzcyIsIGRhdGE6ICIiIH0sCiAgICAgICAgICB7IGNvbHVtbjogIiIsIHN0YXRlOiAiZXJyb3IiLCBkYXRhOiAiIiB9LAogICAgICAgICAgeyBjb2x1bW46ICIiLCBzdGF0ZTogIm5vcm1hbCIsIGRhdGE6ICIiIH0sCiAgICAgICAgXSwKICAgICAgICBzdGF0aWNDb2x1bW5zOiBbXSwKICAgICAgICB1c2VyOiAiIiwKICAgICAgICB1cHBlcmNhc2VDb2x1bW5zOiBbXSwgLy8gcGFzcyBjb2x1bW4gbmFtZSB3aG9zZSBkYXRhIHNob3VsZCBiZSBzaG93biBpbiBjYXBzCiAgICAgICAgZGF0ZUZvcm1hdDogIkREL01NL3l5eXkgaGg6bW0gYSIsIC8vcGFzcyBhbnkgbW9tZW50IGRhdGUgZm9ybWF0IGhlcmUKICAgICAgfSwKCiAgICAgIHBhcmVudERlZmF1bHRTeXN0ZW1WaWV3OiB7CiAgICAgICAgdmlld05hbWVzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJEZWZhdWx0IFZpZXciLAogICAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgICAgcG9zaXRpb246IDEsCiAgICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJBZGQgQSBWaWV3IFRpbGUiLAogICAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgICAgcG9zaXRpb246IDAsCiAgICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKCiAgICAgICAgZGVmYXVsdFRhYmxlOiB7CiAgICAgICAgICBpZDogbnVsbCwKICAgICAgICAgIHZpZXdOYW1lOiAiRGVmYXVsdCBWaWV3IiwKICAgICAgICAgIGRlbnNpdHk6ICIiLAogICAgICAgICAgcGFnZVNpemU6ICIiLAogICAgICAgICAgcGFnZU5hbWU6ICIiLAogICAgICAgICAgdXNlcjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpLnByb2ZpbGUKICAgICAgICAgICAgLnVzZXJuYW1lLAogICAgICAgICAgZGVmYXVsdFZpZXdGbGFnOiB0cnVlLAogICAgICAgICAgc29ydEZpZWxkOiAiIiwKICAgICAgICAgIHNvcnREaXJlY3Rpb246ICIiLAogICAgICAgICAgdGlsZUZsYWc6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbjogMSwgLy8gYWx3YXlzIHBhc3MgMQogICAgICAgICAgcHJpdmFjeTogInByaXZhdGUiLAogICAgICAgICAgY29sdW1uczogW10sCiAgICAgICAgfSwKICAgICAgfSwKICAgICAgcGFyZW50RGF0YTogW10sCiAgICAgIGlzc3Vlc1VVSUQ6IFtdLAogICAgICBpc3N1ZXNOdW1iZXI6IFtdLAogICAgICBpc3N1ZXNBc3NldE9iajogW10sCiAgICAgIGlzc3Vlc1N0YXR1czogW10sCiAgICAgIGlzc3Vlc1dvcmtvYmo6IFtdLAogICAgICBhc3NldFVVSUQ6IFtdLAogICAgICBpc3N1ZVJlc29sdmVkOiBbXSwKICAgICAgd29ya09yZGVyT3B0OiBzdHJpbmdPcHRpb25Xb3JrT3JkZXJVVUlELAogICAgICBleGlzdGluZzogZmFsc2UsCiAgICAgIHdvcmtPcmRlck51bWJlcjogIiIsCiAgICAgIHRhYmxlQ29uZmlnOiAiIiwKICAgICAgc2hvd0NyZWF0ZU9yZGVyOiBmYWxzZSwKICAgICAgc2R0RGF0YTogIiIsCiAgICAgIGZpZWxkTmFtZXM6W10KICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgZ2V0Rm9ybUVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pIHsKICAgICAgaWYgKGZpZWxkVmFsaWRhdGlvbi4kZGlydHkpIHsKICAgICAgICByZXR1cm4gRnVuY3Rpb25zLmdldEZvcm1GaWVsZEVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pOwogICAgICB9CiAgICB9LAogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuZGVsZXRlSXNzdWVEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5hcmNoaXZlSXNzdWVEaWFsb2cgPSBmYWxzZTsKICAgIH0sCiAgICBzZWxlY3RUYWIoKSB7fSwKICAgIGRpc3BsYXlNZXNzYWdlKCkgewogICAgICB0aGlzLnNob3dUb2FzdCgiSXNzdWUgQ3JlYXRlZCBTdWNjdXNzZnVsbHkuIiwgInN1Y2Nlc3MiKTsKICAgIH0sCiAgICBkZWxldGVEaWFsb2coKSB7CiAgICAgIHRoaXMuZGVsZXRlSXNzdWVEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5kZWxldGVJc3N1ZXModGhpcy5pc3N1ZUlELCAiRGVsZXRlIik7CiAgICB9LAogICAgYXJjaGl2ZURpYWxvZygpIHsKICAgICAgdGhpcy5hcmNoaXZlSXNzdWVEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5kZWxldGVJc3N1ZXModGhpcy5pc3N1ZUlELCAiQXJjaGl2ZSIpOwogICAgfSwKICAgIGNyZWF0ZUlzc3VlKCkgewogICAgICB0aGlzLmNyZWF0ZUlzc3VlcyA9IHRydWU7CiAgICB9LAogICAgY2xvc2VJc3N1ZSgpIHsKICAgICAgdGhpcy5jcmVhdGVJc3N1ZXMgPSBmYWxzZTsKICAgICAgdGhpcy5jcmVhdGVJc3N1ZUNvbXArKzsKICAgIH0sCiAgICBzYXZlKCkgewogICAgICB0aGlzLmNyZWF0ZUlzc3VlcyA9IGZhbHNlOwogICAgICB0aGlzLmNyZWF0ZUlzc3VlQ29tcCsrOwogICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgfSwKICAgIGlnbm9yZVJlcXVlc3QodmFsdWUpIHsKICAgICAgbGV0IGlzc3VlSWdub3JlUmVxdWVzdCA9IHt9OwogICAgICB0aGlzLmlzc3VlLmlnbm9yZUNvbW1lbnRzID0gdmFsdWUudmFsdWU7CiAgICAgIGlzc3VlSWdub3JlUmVxdWVzdC5pc3N1ZVJlcG9ydGluZyA9IHsKICAgICAgICBpZDogdGhpcy5pc3N1ZS5pZCwKICAgICAgICB1dWlkOiB0aGlzLmlzc3VlLnV1aWQsCiAgICAgICAgc3RhdHVzOiAiSWdub3JlZCIsCiAgICAgICAgdGVuYW50VVVJRDogdGhpcy5pc3N1ZS50ZW5hbnRVVUlELAogICAgICAgIGlzc3VlRmxhZzogdGhpcy5pc3N1ZS5pc3N1ZUZsYWcsCiAgICAgICAgaWdub3JlQ29tbWVudHM6IHZhbHVlLnZhbHVlLAogICAgICAgIGlnbm9yZWRCeTogdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS51c2VybmFtZSwKICAgICAgfTsKICAgICAgaXNzdWVJZ25vcmVSZXF1ZXN0LmltYWdlVm9pY2VzID0gW107CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLnVwZGF0ZUlzc3VlKGlzc3VlSWdub3JlUmVxdWVzdCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiSXNzdWUgSWdub3JlZCBTdWNjZXNzZnVsbHkiLCAic3VjY2VzcyIpOwogICAgICAgICAgICB0aGlzLmlnbm9yZUlzc3VlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMubG9hZFRhYmxlKHRoaXMuc2R0RGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5kYXRhLnJlc3BvbnNlLCAiZXJyb3IiKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5pZ25vcmVJc3N1ZSA9IGZhbHNlOwogICAgfSwKICAgIGRlbGV0ZUlzc3Vlcyh1dWlkLCB0eXBlKSB7CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmRlbGV0ZUlzc3Vlcyh1dWlkLCB0eXBlKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIGlmICh0eXBlID09PSAiRGVsZXRlIikgewogICAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJJc3N1ZSBEZWxldGVkIFN1Y2Nlc3NmdWxseSIsICJzdWNjZXNzIik7CiAgICAgICAgICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiSXNzdWUgQXJjaGl2ZWQgU3VjY2Vzc2Z1bGx5IiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5kYXRhLnJlc3BvbnNlLCAiZXJyb3IiKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjbG9zZUlzc3VlRGlhbG9nKCkgewogICAgICB0aGlzLmVkaXRJc3N1ZSA9IGZhbHNlOwogICAgICB0aGlzLnZpZXdJc3N1ZSA9IGZhbHNlOwogICAgfSwKICAgIC8vIFNEVCBmdW5jdGlvbnMgc3RhcnQgaGVyZQogICAgY2F0Y2hEZXBhcnR1cmU6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgLy8gY29uc29sZS5sb2coImRhdGEiLCBkYXRhKTsKICAgICAgdGhpcy5zZHREYXRhID0gZGF0YTsKICAgICAgaWYgKGRhdGEuc3RhdHVzID09IDEgfHwgZGF0YS5zdGF0dXMgPT0gMykgewogICAgICAgIHRoaXMubG9hZFRhYmxlKGRhdGEpOwogICAgICB9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDQpIHsKICAgICAgICB0aGlzLmxvYWRUYWJsZShkYXRhKTsKICAgICAgfSBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PSAxMCkgewogICAgICAgIHZhciBpID0gW107CiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS5tZXNzYWdlKTsKICAgICAgICBpZiAoZGF0YS5tZXNzYWdlLmNoZWNrYm94LmNoZWNrZWQgPT09IGZhbHNlKSB7CiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5pc3N1ZXNVVUlELmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICBpZiAodGhpcy5pc3N1ZXNVVUlEW2luZGV4XSAhPT0gZGF0YS5tZXNzYWdlLnV1aWQpIHsKICAgICAgICAgICAgICBpLnB1c2goaW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmlzc3Vlc1VVSUQgPSB0aGlzLmlzc3Vlc1VVSUQuZmlsdGVyKChpc3N1ZSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgaWYgKGlbal0gPT09IGluZGV4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXNzdWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICB0aGlzLmlzc3Vlc051bWJlciA9IHRoaXMuaXNzdWVzTnVtYmVyLmZpbHRlcigoaXNzdWUsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGlmIChpW2pdID09PSBpbmRleCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmlzc3Vlc0Fzc2V0T2JqID0gdGhpcy5pc3N1ZXNBc3NldE9iai5maWx0ZXIoKGlzc3VlLCBpbmRleCkgPT4gewogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGkubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBpZiAoaVtqXSA9PT0gaW5kZXgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5pc3N1ZXNXb3Jrb2JqID0gdGhpcy5pc3N1ZXNXb3Jrb2JqLmZpbHRlcigoaXNzdWUsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGlmIChpW2pdID09PSBpbmRleCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmFzc2V0VVVJRCA9IHRoaXMuYXNzZXRVVUlELmZpbHRlcigoaXNzdWUsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGlmIChpW2pdID09PSBpbmRleCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmlzc3VlUmVzb2x2ZWQgPSB0aGlzLmlzc3VlUmVzb2x2ZWQuZmlsdGVyKChpc3N1ZSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgaWYgKGlbal0gPT09IGluZGV4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXNzdWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICB0aGlzLmlzc3Vlc1N0YXR1cyA9IHRoaXMuaXNzdWVzU3RhdHVzLmZpbHRlcigoaXNzdWUsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGlmIChpW2pdID09PSBpbmRleCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaXNzdWVzQXNzZXRPYmoucHVzaChkYXRhLm1lc3NhZ2UuYXNzZXROYW1lKTsKICAgICAgICAgIHRoaXMuaXNzdWVzU3RhdHVzLnB1c2goZGF0YS5tZXNzYWdlLnN0YXR1cyk7CiAgICAgICAgICB0aGlzLmlzc3Vlc1dvcmtvYmoucHVzaChkYXRhLm1lc3NhZ2Uud29ya09yZGVyTnVtYmVyKTsKICAgICAgICAgIHRoaXMuaXNzdWVzVVVJRC5wdXNoKGRhdGEubWVzc2FnZS51dWlkKTsKICAgICAgICAgIHRoaXMuaXNzdWVzTnVtYmVyLnB1c2goZGF0YS5tZXNzYWdlLmlzc3VlTnVtYmVyKTsKICAgICAgICAgIHRoaXMuYXNzZXRVVUlELnB1c2goZGF0YS5tZXNzYWdlLmFzc2V0VVVJRCk7CiAgICAgICAgICB0aGlzLmlzc3VlUmVzb2x2ZWQucHVzaChkYXRhLm1lc3NhZ2UucmVzb2x2ZWQpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBsb2FkVGFibGUoc2R0RGF0YSkgewogICAgICBsZXQgZmlsdGVycyA9IFtdOwogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBsZXQgZmlsdGVyRmxhZyA9IGZhbHNlOwogICAgICBmb3IgKGxldCBzZHRfZGF0YSBvZiBzZHREYXRhLm1lc3NhZ2UpIHsKICAgICAgICBpZihzZHRfZGF0YS5maWVsZE5hbWUgIT09ICJhY3Rpb25zIiApewogICAgICAgICAgbGV0IG5ld0RhdGUgPSAiIjsKICAgICAgICAgIGlmKHNkdF9kYXRhLmZpZWxkVHlwZSA9PT0gImRhdGUiICYmIHNkdF9kYXRhLmZpbHRlclZhbHVlICE9PSAiIil7CiAgICAgICAgICAgIGxldCBkYXRlID0gc2R0X2RhdGEuZmlsdGVyVmFsdWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgZGF0ZSA9IGRhdGUuc3BsaXQoIi8iKTsKICAgICAgICAgICAgbmV3RGF0ZSA9IG5ldyBEYXRlKGAke2RhdGVbMV19LyR7ZGF0ZVswXX0vJHtkYXRlWzJdfWApCiAgICAgICAgICB9CiAgICAgICAgICBpZihzZHRfZGF0YS5maWx0ZXJWYWx1ZSA9PT0gbnVsbCl7CiAgICAgICAgICAgIHNkdF9kYXRhLmZpbHRlclZhbHVlID0gIiIKICAgICAgICAgIH0KICAgICAgICAgIGZpbHRlcnMucHVzaCh7CiAgICAgICAgICAgIGZpZWxkTmFtZTogc2R0X2RhdGEuZmllbGROYW1lLAogICAgICAgICAgICBmaWVsZFR5cGU6IHNkdF9kYXRhLmZpZWxkVHlwZSwKICAgICAgICAgICAgZmlsdGVyVmFsdWU6bmV3RGF0ZSA9PT0gbnVsbCB8fCBuZXdEYXRlID09PSAiIiA/IHNkdF9kYXRhLmZpbHRlclZhbHVlOiBuZXdEYXRlLmdldFRpbWUoKSwKICAgICAgICAgICAgc2Vjb25kVmFsdWU6IHNkdF9kYXRhLnNlY29uZFZhbHVlLAogICAgICAgICAgICBjb21wYXJpc29uVHlwZTogc2R0X2RhdGEuY29tcGFyaXNvblR5cGUsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5nZXRQYWdpbmF0ZWRJc3N1ZXMoCiAgICAgICAgZmlsdGVycywKICAgICAgICBzZHREYXRhLmRhdGEuc29ydEZpZWxkLAogICAgICAgIHNkdERhdGEuZGF0YS5zb3J0RGlyZWN0aW9uLAogICAgICAgIHNkdERhdGEuZGF0YS5vZmZzZXQsCiAgICAgICAgc2R0RGF0YS5kYXRhLmxpbWl0LAogICAgICAgIHNkdERhdGEuZGF0YS5zZWFyY2hRdWVyeQogICAgICApOwogICAgfSwKCiAgICBsb2FkU0RUKHJlc3BvbnNlLCBkYXRhKSB7CiAgICAgIHRoaXMucGFyZW50RGF0YSA9IGRhdGE7CiAgICAgIGxldCBldmVudERhdGEgPSB7CiAgICAgICAgZGF0YTogdGhpcy5wYXJlbnREYXRhLAogICAgICAgIHRvdGFsRWxlbWVudHM6IHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmdzLnRvdGFsRWxlbWVudHMsCiAgICAgICAgdG90YWxQYWdlczogcmVzcG9uc2UuZGF0YS5pc3N1ZVJlcG9ydGluZ3MudG90YWxQYWdlcywKICAgICAgICBwYWdlTnVtYmVyOiByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy5vZmZzZXQsCiAgICAgIH07CiAgICAgIHRoaXMuJHJlZnMudGVzdC5kYXRhTG9hZEV2ZW50KGV2ZW50RGF0YSk7CiAgICB9LAoKICAgIGdldFBhZ2luYXRlZElzc3VlcyhmaWx0ZXJzLCBzb3J0RmllbGQsIHNvcnREaXJlY3Rpb24sIG9mZnNldCwgbGltaXQsc2VhcmNoUXVlcnkpIHsKICAgICAgbGV0IGN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UoCiAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpCiAgICAgICk7CgogICAgICBsZXQgcmVxdWVzdE9iaiA9IHsKICAgICAgICBzZWFyY2hRdWVyeTogc2VhcmNoUXVlcnksCiAgICAgICAgLy8gc2VhcmNoQ29sdW1uczogc2VhcmNoQ29sdW1ucywKICAgICAgICBmaWx0ZXJzOiBmaWx0ZXJzLAogICAgICAgIHNvcnRGaWVsZDogc29ydEZpZWxkLAogICAgICAgIHNvcnREaXJlY3Rpb246IHNvcnREaXJlY3Rpb24sCiAgICAgICAgb2Zmc2V0OiBvZmZzZXQsCiAgICAgICAgbGltaXQ6IGxpbWl0LAogICAgICAgIHRlbmFudFVVSUQ6IGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgICAgIGZpZWxkTmFtZXM6dGhpcy5maWVsZE5hbWVzCiAgICAgIH07CgoKICAgICAgSW5zcGVjdGlvblNlcnZpY2UuZ2V0UGFnaW5hdGVkSXNzdWVzKAogICAgICAgIHJlcXVlc3RPYmoKICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmdzLm9mZnNldCA9IG9mZnNldDsKICAgICAgICAgICAgbGV0IGlzc3VlcyA9IHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmdzLmNvbnRlbnQ7CiAgICAgICAgICAgIHRoaXMuZmlsdGVyQ291bnQgPSByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy50b3RhbEVsZW1lbnRzOwogICAgICAgICAgICBpZiAoaXNzdWVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHRoaXMubG9hZFNEVChyZXNwb25zZSwgaXNzdWVzKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpc3N1ZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgdGhpcy5jb3VudE9mVG90YWxJc3N1ZXMgPQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5pc3N1ZVJlcG9ydGluZ3MudG90YWxFbGVtZW50czsKICAgICAgICAgICAgICB0aGlzLmlzc3VlcyA9IGlzc3VlczsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpc3N1ZXMubWFwKChpc3N1ZSkgPT4gewogICAgICAgICAgICAgICAgaWYgKGlzc3VlLnJlc29sdmVkID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgIGlzc3VlLnJlc29sdmVkID0gIlllcyI7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpc3N1ZS5yZXNvbHZlZCA9ICJObyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoaXNzdWUubGlua2VkID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgIGlzc3VlLmxpbmtlZCA9ICJZZXMiOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgaXNzdWUubGlua2VkID0gIk5vIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghaXNzdWUud29ya09yZGVyQXNzaWduZWQpIHsKICAgICAgICAgICAgICAgICAgaXNzdWUud29ya09yZGVyTnVtYmVyID0gIk5vdCBBc3NpZ25lZCI7CiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgaWYgKGlzc3VlLndvcmtPcmRlckFzc2lnbmVkID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgIGlzc3VlLndvcmtPcmRlckFzc2lnbmVkID0gIlllcyI7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpc3N1ZS53b3JrT3JkZXJBc3NpZ25lZCA9ICJObyI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaXNzdWUucmVwb3J0ZWRBdCA9IG1vbWVudAogICAgICAgICAgICAgICAgICAudXRjKGlzc3VlLnJlcG9ydGVkQXQpCiAgICAgICAgICAgICAgICAgIC5sb2NhbCgpCiAgICAgICAgICAgICAgICAgIC5mb3JtYXQoJ0REL01NL1lZWVkgaGg6bW0gYScpOwogICAgICAgICAgICAgICAgaXNzdWUuY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgaXNzdWVzLnRpdGxlID0gaXNzdWVzLnRpdGxlID8gaXNzdWUudGl0bGUgOiBpc3N1ZS5pc3N1ZU5hbWU7CiAgICAgICAgICAgICAgICBpZiAoIWlzc3VlLnRpdGxlKSB7CiAgICAgICAgICAgICAgICAgIGlzc3VlLnRpdGxlID0gaXNzdWUuaXNzdWVEZXNjcmlwdGlvbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy5vZmZzZXQgPSBvZmZzZXQgKyAxOwogICAgICAgICAgICB0aGlzLmxvYWRTRFQocmVzcG9uc2UsIGlzc3Vlcyk7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmlzc3VlcyA9IGlzc3VlczsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KAogICAgICAgICAgICAgICJFcnJvciB3aGlsZSBnZXR0aW5nIGlzc3Vlcy5QbGVhc2UgdHJ5IGFnYWluIiwKICAgICAgICAgICAgICAiZXJyb3IiCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgIT09IHVuZGVmaW5lZCAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNikgewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5yZXNwb25zZS5kYXRhLmRlc2NyaXB0aW9uLCAiZXJyb3IiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KAogICAgICAgICAgICAgICJBbiBFcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIElzc3Vlcy4gUGxlYXNlIHRyeSBhZ2Fpbi4iLAogICAgICAgICAgICAgICJlcnJvciIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgZ2V0QWN0aW9uc09wdGlvbih2YWwpIHsKICAgICAgaWYgKHZhbC52YWx1ZSA9PSAiVmlldyIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiaXNzdWUtZGV0YWlsIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBpc3N1ZUlEOiB2YWwucm93LnV1aWQsCiAgICAgICAgICAgIGZsYWc6IHRydWUsCiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAodmFsLnZhbHVlID09ICJFZGl0IikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJlZGl0LWlzc3VlIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBpc3N1ZUlEOiB2YWwucm93LnV1aWQsCiAgICAgICAgICAgIGZsYWc6CiAgICAgICAgICAgICAgdmFsLnJvdy5zdGF0dXMgPT09ICJJbiBwcm9ncmVzcyIgfHwgdmFsLnJvdy5zdGF0dXMgPT09ICJSZXNvbHZlZCIKICAgICAgICAgICAgICAgID8gdHJ1ZQogICAgICAgICAgICAgICAgOiBmYWxzZSwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh2YWwudmFsdWUgPT0gIkFyY2hpdmUiKSB7CiAgICAgICAgdGhpcy5pc3N1ZUlEID0gdmFsLnJvdy51dWlkOwogICAgICAgIGlmICh2YWwucm93LnN0YXR1cyA9PSAiSW4gcHJvZ3Jlc3MiKSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiSW5wcm9ncmVzcyBpc3N1ZSBjYW4ndCBiZSBhcmNoaXZlIiwgImVycm9yIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuYXJjaGl2ZUlzc3VlRGlhbG9nID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHZhbC52YWx1ZSA9PSAiRGVsZXRlIikgewogICAgICAgIHRoaXMuaXNzdWVJRCA9IHZhbC5yb3cudXVpZDsKICAgICAgICB0aGlzLmRlbGV0ZUlzc3VlRGlhbG9nID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAodmFsLnZhbHVlID09ICJJZ25vcmUiKSB7CiAgICAgICAgdGhpcy5pc3N1ZSA9IHZhbC5yb3c7CiAgICAgICAgaWYgKHRoaXMuaXNzdWUud29ya09yZGVyTnVtYmVyICE9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiSW5wcm9ncmVzcyBpc3N1ZSBjYW4ndCBiZSBpZ25vcmUiLCAiZXJyb3IiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5pZ25vcmVJc3N1ZSA9IHRydWU7CiAgICAgIH0KICAgIH0sCgogICAgZ2V0RG93bmxvYWRBc09wdGlvbihvcHQpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ2Rvd25sb2FkIGFzIG9wdGlvbicsb3B0KTsKICAgICAgaWYgKG9wdC5vcHRpb24gPT0gInBkZiIpIHsKICAgICAgICAvLyBub3RpZmljYXRpb25BbmRDb21tdW5pY2F0aW9uU2VydmljZS5kb3dubG9hZFNlbGVjdGVkUERGKG9iaikKICAgICAgICAvLyAudGhlbigocmVzKSA9PiB7CiAgICAgICAgLy8gLy8gY29uc29sZS5sb2cocmVzKQogICAgICAgIC8vIGxldCBmaWxlQ29udGVudHMgPSBudWxsOwogICAgICAgIC8vICAgICBsZXQgcG9wdXBXaW49bnVsbDsKICAgICAgICAvLyAgICAgcG9wdXBXaW4gPSB3aW5kb3cub3BlbignJywgJ19ibGFuaycsICd0b3A9MCxsZWZ0PTAsaGVpZ2h0PTcwMCx3aWR0aD0xMDAwOycpOwogICAgICAgIC8vICAgICBsZXQgZG9jdW1lbnQgPSB7CiAgICAgICAgLy8gICAgICAgICAnZG9jdW1lbnROYW1lJzogJ0JpbGxpbmcnCiAgICAgICAgLy8gICAgIH07CiAgICAgICAgLy8gZmlsZUNvbnRlbnRzID0gcmVzLmRhdGEudHlwZSArIHJlcy5kYXRhLmNvbnRlbnQ7CiAgICAgICAgLy8gICBwb3B1cFdpbi5kb2N1bWVudC53cml0ZShgCiAgICAgICAgLy8gICAgIDxodG1sPgogICAgICAgIC8vICAgICAgICAgPGhlYWQ+CiAgICAgICAgLy8gICAgICAgICAgPCEtLXRpdGxlPlByaW50IHRhYjwvdGl0bGUtLT4KICAgICAgICAvLyAgICAgICAgICAgICA8c3R5bGU+CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICNidXR0b25ze2Rpc3BsYXk6bm9uZTt9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICBib2R5IHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAiT3BlbiBTYW5zIiwgLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBFdWNsaWQgQ2lyY3VsYXIgQiwgIkhlbHZldGljYSBOZXVlIiwgQXJpYWwsIHNhbnMtc2VyaWYsICJBcHBsZSBDb2xvciBFbW9qaSIsICJTZWdvZSBVSSBFbW9qaSIsICJTZWdvZSBVSSBTeW1ib2wiOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzIxMjUyOTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGJ1dHRvbiwgbWV0ZXIsIHByb2dyZXNzIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtd3JpdGluZy1tb2RlOiBob3Jpem9udGFsLXRiICFpbXBvcnRhbnQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QsIGJ1dHRvbiB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LXJlbmRlcmluZzogYXV0bzsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBpbml0aWFsOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHdvcmQtc3BhY2luZzogbm9ybWFsOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LWluZGVudDogMHB4OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1zaGFkb3c6IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBzdGFydDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMGVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udDogNDAwIDEzLjMzMzNweCBBcmlhbDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICBpbnB1dFt0eXBlPSJidXR0b24iIGldLCBpbnB1dFt0eXBlPSJzdWJtaXQiIGldLCBpbnB1dFt0eXBlPSJyZXNldCIgaV0sIGlucHV0W3R5cGU9ImZpbGUiIGldOjotd2Via2l0LWZpbGUtdXBsb2FkLWJ1dHRvbiwgYnV0dG9uIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBkZWZhdWx0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGJ1dHRvbnRleHQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBidXR0b25mYWNlOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDJweCA2cHggM3B4OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiAycHg7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItc3R5bGU6IG91dHNldDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogYnV0dG9uZmFjZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1pbWFnZTogaW5pdGlhbDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICBpbnB1dCwgYnV0dG9uLCBzZWxlY3QsIG9wdGdyb3VwLCB0ZXh0YXJlYSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogaW5oZXJpdDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogaW5oZXJpdDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiBpbmhlcml0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGJ1dHRvbiwgc2VsZWN0IHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC5idG4gewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMC4zNzVyZW0gMC43NXJlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm9yZGVyLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3gtc2hhZG93IDAuMTVzIGVhc2UtaW4tb3V0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC5idG4tb3V0bGluZS1wcmltYXJ5IHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMDA3YmZmOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjMDA3YmZmOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC5idG4tb3V0bGluZS1wcmltYXJ5IHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjZDAzMjMyOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2QwMzIzMjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICA8c3R5bGU+LmZhIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IG5vcm1hbCBub3JtYWwgbm9ybWFsIDE0cHgvMSBGb250QXdlc29tZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogaW5oZXJpdDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtcmVuZGVyaW5nOiBhdXRvOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9PC9zdHlsZT4KICAgICAgICAvLyAgICAgICAgICAgICAgICAgPHN0eWxlPiosICo6OmJlZm9yZSwgKjo6YWZ0ZXIgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICBTdHlsZSBBdHRyaWJ1dGUgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC5idG4sIC5mb3JtLWNvbnRyb2wgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMC4yNXJlbSAwLjVyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAuM3JlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMTVweDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMjNweDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfTwvc3R5bGU+CiAgICAgICAgLy8gICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAvLyAgICAgICAgIDwvaGVhZD4KICAgICAgICAvLyAgICAgICAgIDxib2R5IG9ubG9hZD0iIj4KICAgICAgICAvLyAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyIgPgogICAgICAgIC8vICAgICAgICAgICAgICAgICA8YSBocmVmPSIke2ZpbGVDb250ZW50c30iIGRvd25sb2FkPSIke2RvY3VtZW50LmRvY3VtZW50TmFtZX0iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tc20gYnRuLW91dGxpbmUtcHJpbWFyeSI+RG93bmxvYWQ8L2J1dHRvbj48L2E+CiAgICAgICAgLy8gICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgLy8gICAgICAgICAgICAgPGJyPgogICAgICAgIC8vICAgICAgICAgICAgIDxpZnJhbWUgc3JjPScke2ZpbGVDb250ZW50c30nICBzdHlsZT0ibWluLXdpZHRoOiAxMDAlO2hlaWdodDogMTAwJTsiID48L2lmcmFtZT4KICAgICAgICAvLyAgICAgICAgIDwvYm9keT4KICAgICAgICAvLyAgICAgPC9odG1sPmAKICAgICAgICAvLyApOwogICAgICAgIC8vIH0pCiAgICAgICAgLy8gLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpOwogICAgICB9IGVsc2UgaWYgKG9wdC5vcHRpb24gPT0gImNzdiIpIHsKICAgICAgICAvLyAJbGV0IGZpbGVUaXRsZSA9ICdCaWxsaW5ncyc7CiAgICAgICAgLy8gCWxldCBoZWFkZXJzID0gewogICAgICAgIC8vICAgICAgIGNyZWF0ZWREYXRlOiAnUmVxdWVzdGVkIE9uJy5yZXBsYWNlKC8sL2csICcnKSwgLy8gcmVtb3ZlIGNvbW1hcyB0byBhdm9pZCBlcnJvcnMKICAgICAgICAvLyAgICAgICBkdWVEYXRlOiAiRHVlIERhdGUiLAogICAgICAgIC8vICAgICAgIHNoaXBtZW50TnVtYmVyOiAiU2hpcG1lbnQgIyIsCiAgICAgICAgLy8gCQkgIHBvcnRPZkxvYWRpbmc6ICJQb3J0IG9mIExvYWQiLAogICAgICAgIC8vIAkJICBwb3J0T2ZEaXNjaGFyZ2U6ICJQb3J0IE9mIERpc2NoYXJnZSIsCiAgICAgICAgLy8gCQkgIGFtb3VudDogIkFtb3VudCIsCiAgICAgICAgLy8gCQkgIGJhbGFuY2U6ICJCYWxhbmNlIiwKICAgICAgICAvLyAJCSAgbmV0c3VpdGVTdGF0dXM6ICJTdGF0dXMiCiAgICAgICAgLy8gCX07CiAgICAgICAgLy8gCWxldCBkYXRhT2JqID0gW107CiAgICAgICAgLy8gCWZvciAobGV0IGkgPSAwOyBpIDwgb3B0LnJvd3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyAJCWNvbnN0IGJpbGwgPSBvcHQucm93c1tpXTsKICAgICAgICAvLyAJCWRhdGFPYmoucHVzaCh7CiAgICAgICAgLy8gCQkJY3JlYXRlZERhdGU6IGJpbGwuY3JlYXRlZERhdGUsCiAgICAgICAgLy8gCQkJZHVlRGF0ZTogYmlsbC5kdWVEYXRlLAogICAgICAgIC8vIAkJCXNoaXBtZW50TnVtYmVyOiBiaWxsLnNoaXBtZW50TnVtYmVyLAogICAgICAgIC8vIAkJCXBvcnRPZkxvYWRpbmc6IGJpbGwucG9ydE9mTG9hZGluZywKICAgICAgICAvLyAJCQlwb3J0T2ZEaXNjaGFyZ2U6IGJpbGwucG9ydE9mRGlzY2hhcmdlLAogICAgICAgIC8vIAkJCWFtb3VudDogYmlsbC5hbW91bnQsCiAgICAgICAgLy8gCQkJYmFsYW5jZTogYmlsbC5iYWxhbmNlLAogICAgICAgIC8vIAkJCW5ldHN1aXRlU3RhdHVzOiBiaWxsLm5ldHN1aXRlU3RhdHVzCiAgICAgICAgLy8gCQl9KTsKICAgICAgICAvLyAJfQogICAgICAgIC8vIAl0aGlzLmV4cG9ydENTVkZpbGUoaGVhZGVycywgZGF0YU9iaiwgZmlsZVRpdGxlKTsKICAgICAgfQogICAgfSwKCiAgICBleHBvcnRDU1ZGaWxlKGhlYWRlcnMsIGJpbGxpbmdEYXRhLCBmaWxlVGl0bGUpIHsKICAgICAgLy8gaWYgKGhlYWRlcnMpIHsKICAgICAgLy8gICAgIGJpbGxpbmdEYXRhLnVuc2hpZnQoaGVhZGVycyk7CiAgICAgIC8vIH0KICAgICAgLy8gLy8gQ29udmVydCBPYmplY3QgdG8gSlNPTgogICAgICAvLyB2YXIganNvbk9iamVjdCA9IEpTT04uc3RyaW5naWZ5KGJpbGxpbmdEYXRhKTsKICAgICAgLy8gdmFyIGNzdiA9IHRoaXMuY29udmVydFRvQ1NWKGpzb25PYmplY3QpOwogICAgICAvLyB2YXIgZXhwb3J0ZWRGaWxlbm1hZSA9IGZpbGVUaXRsZSArICcuY3N2JyB8fCAnZXhwb3J0LmNzdic7CiAgICAgIC8vIHZhciBibG9iID0gbmV3IEJsb2IoW2Nzdl0sIHsgdHlwZTogJ3RleHQvY3N2O2NoYXJzZXQ9dXRmLTg7JyB9KTsKICAgICAgLy8gaWYgKG5hdmlnYXRvci5tc1NhdmVCbG9iKSB7IC8vIElFIDEwKwogICAgICAvLyAgICAgbmF2aWdhdG9yLm1zU2F2ZUJsb2IoYmxvYiwgZXhwb3J0ZWRGaWxlbm1hZSk7CiAgICAgIC8vIH0gZWxzZSB7CiAgICAgIC8vICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgLy8gICAgIGlmIChsaW5rLmRvd25sb2FkICE9PSB1bmRlZmluZWQpIHsgLy8gZmVhdHVyZSBkZXRlY3Rpb24KICAgICAgLy8gICAgICAgICAvLyBCcm93c2VycyB0aGF0IHN1cHBvcnQgSFRNTDUgZG93bmxvYWQgYXR0cmlidXRlCiAgICAgIC8vICAgICAgICAgdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgIC8vICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoImhyZWYiLCB1cmwpOwogICAgICAvLyAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsIGV4cG9ydGVkRmlsZW5tYWUpOwogICAgICAvLyAgICAgICAgIGxpbmsuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nOwogICAgICAvLyAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgIC8vICAgICAgICAgbGluay5jbGljaygpOwogICAgICAvLyAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vIH0KICAgIH0sCgogICAgY29udmVydFRvQ1NWKG9iakFycmF5KSB7CiAgICAgIHZhciBhcnJheSA9IHR5cGVvZiBvYmpBcnJheSAhPSAib2JqZWN0IiA/IEpTT04ucGFyc2Uob2JqQXJyYXkpIDogb2JqQXJyYXk7CiAgICAgIHZhciBzdHIgPSAiIjsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbGluZSA9ICIiOwogICAgICAgIGZvciAodmFyIGluZGV4IGluIGFycmF5W2ldKSB7CiAgICAgICAgICBpZiAobGluZSAhPSAiIikgbGluZSArPSAiLCI7CgogICAgICAgICAgbGluZSArPSBhcnJheVtpXVtpbmRleF07CiAgICAgICAgfQoKICAgICAgICBzdHIgKz0gbGluZSArICJcclxuIjsKICAgICAgfQoKICAgICAgcmV0dXJuIHN0cjsKICAgIH0sCgogICAgc2V0VGFibGVDb25maWdzKCkgewogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5kZW5zaXR5ID0gdGhpcy50YWJsZUNvbmZpZy5kZW5zaXR5OwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5wYWdlU2l6ZSA9IHRoaXMudGFibGVDb25maWcucGFnZVNpemU7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnBhZ2VOYW1lID0gdGhpcy50YWJsZUNvbmZpZy5wYWdlTmFtZTsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuc29ydEZpZWxkID0gdGhpcy50YWJsZUNvbmZpZy5zb3J0RmllbGQ7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnNvcnREaXJlY3Rpb24gPSB0aGlzLnRhYmxlQ29uZmlnLnNvcnREaXJlY3Rpb247CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLmNvbHVtbnMgPSB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnM7CiAgICB9LAoKICAgIGV4dHJhY3RGaWVsZE5hbWVzRm9yU2VhcmNoUXVlcnkoY29uZmlnKXsKICAgICAgZm9yKGxldCBjb2x1bW4gb2YgY29uZmlnLmNvbHVtbnMpewogICAgICAgIHRoaXMuZmllbGROYW1lcy5wdXNoKGNvbHVtbi5maWVsZE5hbWUpCiAgICAgIH0KICAgIH0sCgogICAgLy8gU0RUIGZ1bmN0aW9ucyBlbmQgaGVyZQoKICAgIGNyZWF0ZVdvcmtPcmRlcigpIHsKICAgICAgbGV0IGlzc3VlID0gW107CiAgICAgIGlmICgobmV3IFNldCh0aGlzLmlzc3Vlc0Fzc2V0T2JqKS5zaXplID09PSAxKSA9PT0gZmFsc2UpIHsKCiAgICAgICAgdGhpcy5zaG93VG9hc3QoIlBsZWFzZSBzZWxlY3QgaXNzdWUgb2YgU2FtZSBBc3NldCBOYW1lISIsICJlcnJvciIpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNzdWVzV29ya29iai5sZW5ndGggPiAwKSB7CiAgICAgICAgbGV0IHdvcmtPcmRlciA9IHRoaXMuaXNzdWVzV29ya29iai5tYXAoKGlzc3VlKSA9PiB7CiAgICAgICAgICBpZiAoaXNzdWUgPT09ICJOb3QgQXNzaWduZWQiKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgaWYgKHRoaXMuaXNzdWVzU3RhdHVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGlzc3VlID0gdGhpcy5pc3N1ZXNTdGF0dXMubWFwKChpc3N1ZSkgPT4gewogICAgICAgICAgICBpZiAoaXNzdWUgPT09ICJJZ25vcmVkIikgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICh3b3JrT3JkZXJbMF0gIT09IHRydWUpIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KAogICAgICAgICAgICAiUGxlYXNlIHNlbGVjdCBpc3N1ZXMgdGhhdCBkbyBub3QgaGF2ZSBhIHdvcmsgb3JkZXIgYXNzaWduZWQgdG8gdGhlbSEiLAogICAgICAgICAgICAiZXJyb3IiCiAgICAgICAgICApOwogICAgICAgIH0gZWxzZSBpZiAoaXNzdWVbMF0gPT09IHRydWUpIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJTZWxlY3RlZCBJc3N1ZSBTdGF0dXMgaXMgaWdub3JlZCIsICJzdWNjZXNzIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZ2V0V29ya09yZGVycyh0aGlzLmFzc2V0VVVJRFswXSk7CiAgICAgICAgICB0aGlzLnNob3dDcmVhdGVPcmRlciA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGdldFdvcmtPcmRlcnMoYXNzZXRVVUlEKSB7CiAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlCiAgICAgIHdvcmtPcmRlclNlcnZpY2UKICAgICAgICAuZ2V0QWxsV29ya09yZGVyc0J5QXNzZXQoYXNzZXRVVUlEKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnPSBmYWxzZQogICAgICAgICAgICBsZXQgd29ya09yZGVycyA9IFtdOwogICAgICAgICAgICBzdHJpbmdPcHRpb25Xb3JrT3JkZXJVVUlEID0gW107CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMDsKICAgICAgICAgICAgICBpbmRleCA8IHJlc3BvbnNlLmRhdGEud29ya09yZGVycy5sZW5ndGg7CiAgICAgICAgICAgICAgaW5kZXgrKwogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBsZXQgd29ya09yZGVyID0ge307CiAgICAgICAgICAgICAgd29ya09yZGVyLmxhYmVsID0gcmVzcG9uc2UuZGF0YS53b3JrT3JkZXJzW2luZGV4XS53b3JrT3JkZXJOdW1iZXI7CiAgICAgICAgICAgICAgd29ya09yZGVyLnZhbHVlID0gcmVzcG9uc2UuZGF0YS53b3JrT3JkZXJzW2luZGV4XS53b3JrT3JkZXJOdW1iZXI7CiAgICAgICAgICAgICAgd29ya09yZGVyLnV1aWQgPSByZXNwb25zZS5kYXRhLndvcmtPcmRlcnNbaW5kZXhdLnV1aWQ7CiAgICAgICAgICAgICAgd29ya09yZGVycy5wdXNoKHdvcmtPcmRlcik7CiAgICAgICAgICAgICAgc3RyaW5nT3B0aW9uV29ya09yZGVyVVVJRC5wdXNoKHsgbGFiZWw6IHdvcmtPcmRlci52YWx1ZSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLndvcmtPcmRlcnMgPSB3b3JrT3JkZXJzOwogICAgICAgICAgICB0aGlzLndvcmtPcmRlck9wdCA9IHN0cmluZ09wdGlvbldvcmtPcmRlclVVSUQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiRXJyb3Igd2hpbGUgZ2V0dGluZyB3b3JrIG9yZGVycyIsICJlcnJvciIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA2KSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLnJlc3BvbnNlLmRhdGEuZGVzY3JpcHRpb24sICJlcnJvciIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIHdoaWxlIGdldHRpbmcgd29yayBvcmRlcnMiLCAiZXJyb3IiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgZXhpc3RpbmdXb3JrT3JkZXIoKSB7CiAgICAgIHRoaXMuZXhpc3RpbmcgPSB0cnVlOwogICAgICB0aGlzLmdldFdvcmtPcmRlcnModGhpcy5hc3NldFVVSURbMF0pOwogICAgfSwKCiAgICBuZXdXb3JrT3JkZXIoKSB7CiAgICAgIHRoaXMuZXhpc3RpbmcgPSBmYWxzZTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJjcmVhdGUtd29yay1vcmRlciIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBpc3N1ZXV1aWQ6IHRoaXMuaXNzdWVzVVVJRCwKICAgICAgICAgIGlzc3VlbnVtYmVyOiB0aGlzLmlzc3Vlc051bWJlciwKICAgICAgICAgIGFzc2V0VVVJRDogdGhpcy5hc3NldFVVSURbMF0sCiAgICAgICAgICBjcmVhdGVXb3JrT3JkZXI6IHRydWUsCiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9LAoKICAgIGV4aXN0aW5nQWRkV29ya09yZGVyKCkgewogICAgICB0aGlzLiR2LiR0b3VjaCgpOwogICAgICBpZiAodGhpcy4kdi4kaW52YWxpZCkgewogICAgICAgIHRoaXMuc2hvd1RvYXN0KCJQbGVhc2UgU2VsZWN0IFdvcmsgT3JkZXIgTnVtYmVyIiwgImVycm9yIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hZGRJc3N1ZXNJbldvcmtPcmRlcigpOwogICAgICB9CiAgICB9LAoKICAgIG9uQ2xlYXJTZWxlY3RlZFdvcmtPcmRlcigpIHsKICAgICAgdGhpcy53b3JrT3JkZXJOdW1iZXIgPSAiIjsKICAgICAgdGhpcy51cGRhdGVDb21wKys7CiAgICB9LAoKICAgIGFkZElzc3Vlc0luV29ya09yZGVyKCkgewogICAgICAvL2NyZWF0ZSBhbiBhcnJheSBvZiBzZWxlY3RlZCBpc3N1ZXMKICAgICAgbGV0IGluZGV4ID0gc3RyaW5nT3B0aW9uV29ya09yZGVyVVVJRC5maW5kSW5kZXgoCiAgICAgICAgKHdvcmtPcmRlcikgPT4gd29ya09yZGVyLmxhYmVsID09PSB0aGlzLndvcmtPcmRlck51bWJlcgogICAgICApOwogICAgICBsZXQgd29ya09yZGVyVVVJRCA9IHRoaXMud29ya09yZGVyc1tpbmRleF07CiAgICAgIGxldCBhZGRJc3N1ZUluV29ya09yZGVyUmVxdWVzdCA9IHt9OwogICAgICBsZXQgaXNzdWVzID0gW107CiAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IHRoaXMuaXNzdWVzVVVJRC5sZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgbGV0IGlzc3VlID0ge307CiAgICAgICAgaXNzdWUuaXNzdWVOdW1iZXIgPSB0aGlzLmlzc3Vlc051bWJlcltpZHhdOwogICAgICAgIGlzc3VlLmlzc3VlVVVJRCA9IHRoaXMuaXNzdWVzVVVJRFtpZHhdOwogICAgICAgIGlzc3VlLnJlc29sdmVkID0gZmFsc2U7CiAgICAgICAgaXNzdWUucmVjb21tZW5kZWRBY3Rpb24gPSBudWxsOwogICAgICAgIGlzc3Vlcy5wdXNoKGlzc3VlKTsKICAgICAgfQogICAgICBhZGRJc3N1ZUluV29ya09yZGVyUmVxdWVzdC5pc3N1ZXMgPSBpc3N1ZXM7CiAgICAgIGFkZElzc3VlSW5Xb3JrT3JkZXJSZXF1ZXN0LndvcmtPcmRlclVVSUQgPSB3b3JrT3JkZXJVVUlELnV1aWQ7CiAgICAgIHdvcmtPcmRlclNlcnZpY2UKICAgICAgICAuYWRkSXNzdWVzSW5Xb3JrT3JkZXIoYWRkSXNzdWVJbldvcmtPcmRlclJlcXVlc3QpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICJ3b3JrLW9yZGVyIiwKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIHRvYXN0RmxhZzogdHJ1ZSwKICAgICAgICAgICAgICAgIHRvYXN0VHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgbWVzc2FnZTogIldvcmtPcmRlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiRXJyb3Igd2hpbGUgYWRkaW5nIGlzc3VlcyBpbiB3b3JrIG9yZGVyIiwgImVycm9yIik7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDYpIHsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIHdoaWxlIGFkZGluZyBpc3N1ZXMgaW4gd29yayBvcmRlciIsICJlcnJvciIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkFuIHVuZXhwZWN0ZWQgRXJyb3IgT2NjdXJyZWQiLCAiZXJyb3IiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgY2FuY2VsKCkgewogICAgICB0aGlzLnNob3dDcmVhdGVPcmRlciA9IGZhbHNlOwogICAgICB0aGlzLmV4aXN0aW5nID0gZmFsc2U7CiAgICB9LAoKICAgIGNsb3NlTW9kYWwoKSB7CiAgICAgIHRoaXMuc2hvd0NyZWF0ZU9yZGVyID0gZmFsc2U7CiAgICAgIHRoaXMuZXhpc3RpbmcgPSBmYWxzZTsKICAgIH0sCgogICAgc2V0U3RhdGljQ29sdW1uKCkgewogICAgICBsZXQgc3RhdGljQ29sID0gdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zLmZpbHRlcigKICAgICAgICAoY29sKSA9PiBjb2wubGFiZWxOYW1lID09ICJJc3N1ZSBOdW1iZXIiCiAgICAgIClbMF07CiAgICAgIHRoaXMucGFyZW50U3lzdGVtU2V0dGluZ3Muc3RhdGljQ29sdW1ucy5wdXNoKHN0YXRpY0NvbCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnNbaV0ubGFiZWxOYW1lID09IHN0YXRpY0NvbC5sYWJlbE5hbWUpIHsKICAgICAgICAgIHRoaXMudGFibGVDb25maWcuY29sdW1ucy5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIHNob3dUb2FzdChtZXNzYWdlLCB0eXBlKSB7CiAgICAgIHRoaXMudG9hc3RNZXNzYWdlID0gbWVzc2FnZTsKICAgICAgdGhpcy50b2FzdFR5cGUgPSB0eXBlOwogICAgICB0aGlzLnRvYXN0RmxhZysrOwogICAgfSwKICB9LAoKICBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy50b2FzdEZsYWcgPT09IHRydWUpIHsKICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLnRvYXNzdE1lc3NhZ2UsCiAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLnRvYXN0VHlwZQogICAgICApOwogICAgfQogICAgbGV0IGQgPSBuZXcgRGF0ZSgpOwogICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgMSAqIDI0ICogNjAgKiA2MCAqIDEwMDApOwogICAgbGV0IGV4cGlyZXMgPSAiZXhwaXJlcz0iICsgZC50b1VUQ1N0cmluZygpOwoKICAgIHRoaXMuJGNvb2tpZS5zZXQoInVzZXJJZCIsICJhbmVlcyIsIGV4cGlyZXMpOwogICAgZG9jdW1lbnQudGl0bGUgPSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlOwogICAgbGV0IGN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UoCiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKQogICAgKTsKICAgIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzID0gY3VycmVudFVzZXJEZXRhaWxzOwogICAgLy8gc2VuZGluZyBvbmx5IGZpcnN0IGFuZCBsYXN0IG5hbWUgZm9yIFNEVAogICAgbGV0IG5hbWUgPSBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS51c2VybmFtZTsKICAgIGlmIChuYW1lLmluY2x1ZGVzKCJAIikpIHsKICAgICAgbmFtZSA9IG5hbWUuc3BsaXQoIkAiKTsKICAgICAgbmFtZSA9IG5hbWVbMF07CiAgICB9CiAgICB0aGlzLnBhcmVudFN5c3RlbVNldHRpbmdzLnVzZXIgPSBuYW1lOwoKICAgIGlmIChjdXJyZW50VXNlckRldGFpbHMgPT09IG51bGwpIHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImZvcmNlU2lnbm91dCIsICJ5ZXMiKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIGZldGNoaW5nIGNvbmZpZ3MKICAgIGxldCB1dWlkID0gY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQ7CgogICAgYXNzZXRQZXJzb25uZWxTZXJ2aWNlCiAgICAgIC5nZXRPcmdDb25maWdzKHV1aWQsICJ0YWJsZUNvbmZpZ3MiKQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKQogICAgICAgIGxldCBhbGxDb25maWdzID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhLnRhYmxlQ29uZmlncyk7CiAgICAgICAgYWxsQ29uZmlncyA9IGFsbENvbmZpZ3MuZmlsdGVyKAogICAgICAgICAgKGRhdGEpID0+IGRhdGEucGFnZU5hbWUgPT09ICJWaWV3SXNzdWUiCiAgICAgICAgKVswXTsKICAgICAgICAvLyBjY2NjY2NjCiAgICAgICAgdGhpcy50YWJsZUNvbmZpZyA9IGFsbENvbmZpZ3M7CiAgICAgICAgdGhpcy5leHRyYWN0RmllbGROYW1lc0ZvclNlYXJjaFF1ZXJ5KHRoaXMudGFibGVDb25maWcpCiAgICAgICAgdGhpcy5zZXRTdGF0aWNDb2x1bW4oKTsKICAgICAgICB0aGlzLnNldFRhYmxlQ29uZmlncygpOwogICAgICB9KQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoZXJyb3IuZGF0YS5yZXNwb25zZSwgImVycm9yIik7CiAgICAgIH0pOwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBjc3NWYXJzKCkgewogICAgICByZXR1cm4gewogICAgICAgICItLXRoLXByaW1hcnkiOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0aGVtZUNvbmZpZ3MiKSkKICAgICAgICAgIC5wcmltYXJ5LAogICAgICAgICItLXRoLXByaW1hcnlUZXh0IjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidGhlbWVDb25maWdzIikpCiAgICAgICAgICAucHJpbWFyeVRleHQsCiAgICAgICAgIi0tdGgtc2Vjb25kYXJ5IjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidGhlbWVDb25maWdzIikpCiAgICAgICAgICAuc2Vjb25kYXJ5LAogICAgICAgICItLXRoLXNlY29uZGFyeVRleHQiOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0aGVtZUNvbmZpZ3MiKSkKICAgICAgICAgIC5zZWNvbmRhcnlUZXh0LAogICAgICAgICItLXRoLWZvbmQtZmFtaWx5IjogIkhlZWJvIiwKICAgICAgfTsKICAgIH0sCiAgICBxQnRuU3R5bGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYmFja2dyb3VuZDogInZhcigtLXRoLXNlY29uZGFyeSkiLAogICAgICAgIGNvbG9yOiAidmFyKC0tdGgtc2Vjb25kYXJ5VGV4dCkiLAogICAgICAgICJ0ZXh0LXRyYW5zZm9ybSI6ICJpbml0aWFsIiwKICAgICAgICAvLyAid2lkdGgiOiIxMDAlIiwKICAgICAgICBmbG9hdDogInJpZ2h0IiwKICAgICAgfTsKICAgIH0sCiAgfSwKCiAgdmFsaWRhdGlvbnM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgd29ya09yZGVyTnVtYmVyOiB7IHJlcXVpcmVkIH0sCiAgICB9OwogIH0sCn07Cg=="},null]}