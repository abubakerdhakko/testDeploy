{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/usage/components/CreateUsages.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/usage/components/CreateUsages.vue","mtime":1661968702448},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL0Fzc2V0TWFuYWdlbWVudFNlcnZpY2UiOwppbXBvcnQgU2lkZUJhciBmcm9tICIuL1NpZGVCYXIiOwppbXBvcnQgeyBGdW5jdGlvbnMgfSBmcm9tICJAL3NoYXJlZC9GdW5jdGlvbnMiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7CiAgcmVxdWlyZWQsCiAgcmVxdWlyZWRJZiwKICBtaW5WYWx1ZSwKICBtYXhMZW5ndGgsCn0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKCmltcG9ydCBsb2FkZXIgZnJvbSAiQC9jb21wb25lbnRzL0xvYWRlci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNyZWF0ZVVzYWdlcyIsCgogIGNvbXBvbmVudHM6IHsKICAgIFNpZGVCYXIsCiAgICBsb2FkZXIsCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXRlRGlzYWJsZTogZmFsc2UsCiAgICAgIHVzYWdlX2xvYWRlckZsYWc6IGZhbHNlLAogICAgICBsb2NhdGlvbl9sb2FkZXJGbGFnOiBmYWxzZSwKICAgICAgdG9hc3RGbGFnOiAwLAogICAgICB0b2FzdE1lc3NhZ2U6ICIiLAogICAgICB0b2FzdFR5cGU6ICIiLAogICAgICBpbmRleEtleTogMCwKICAgICAgbG9hZGVyRmxhZzogZmFsc2UsCiAgICAgIGN1cnJlbnRVc2VyRGV0YWlsczogIiIsCiAgICAgIGFzc2V0Q2F0ZWdvcmllczogIiIsCiAgICAgIGFzc2V0Q2F0ZWdvcnk6ICIiLAogICAgICBhc3NldENhdGVnb3J5TGFiZWw6ICIiLAogICAgICBhc3NldHNOYW1lczogW10sCiAgICAgIHRvdGFsQXNzZXROYW1lczogIiIsCiAgICAgIGFzc2V0TmFtZTogIiIsCiAgICAgIGFzc2V0TmFtZUxhYmVsOiAiIiwKICAgICAgZmllbGRDYXRlZ29yeTogIiIsCiAgICAgIGZpZWxkQ2F0ZWdvcnlMYWJlbDogIiIsCiAgICAgIGFzc2V0czoge30sCiAgICAgIGFzc2V0TnVtYmVyOiAiIiwKICAgICAgZmllbGRDYXRlZ29yaWVzOiBbCiAgICAgICAgeyBuYW1lOiAiVHJpcCIsIHZhbHVlOiAidHJpcCIgfSwKICAgICAgICB7IG5hbWU6ICJSZWd1bGFyIiwgdmFsdWU6ICJub3JtYWwiIH0sCiAgICAgIF0sCiAgICAgIGFzc2V0OiAiIiwKICAgICAgbG9jYXRpb25EaWFsb2c6IGZhbHNlLAogICAgICBzZWNvbmRhcnlMb2NhdGlvbkRpYWxvZzogZmFsc2UsCgogICAgICAvKk1hcCBCb3ggRGF0YSovCiAgICAgIHN1Z2dlc3Rpb25Tb3VyY2U6IFtdLAogICAgICBtYXBTZWFyY2hPYmo6IHt9LAogICAgICBhY2Nlc3NUb2tlbjoKICAgICAgICAicGsuZXlKMUlqb2liWFZvWVcxdFlXUXRjMkZoWkNJc0ltRWlPaUpqYXpWak5YazBlRE14YVdkb00yNXdjM2h3ZDJ0ak5uSjBJbjAua3YwSlpURVpoLWhnRDZqTW5WMXp3ZyIsCiAgICAgIGRlZmF1bHRfbG9jYXRpb246IFtdLAogICAgICAvKk1hcCBCb3ggRGF0YSovCiAgICAgIG1hcmtlcnM6IFtdLAogICAgICBsYXQ6ICIiLAogICAgICBsb25nOiAiIiwKICAgICAgcHJpbWFyeVVzYWdlVW5pdDogIiIsCiAgICAgIHNlY29uZGFyeVVzYWdlVW5pdDogIiIsCiAgICAgIHN0YXJ0RGF0ZTogIiIsCiAgICAgIGVuZERhdGU6ICIiLAogICAgICBhc3NldFByaW1hcnlWYWx1ZTogIiIsCiAgICAgIGFzc2V0U2Vjb25kYXJ5VmFsdWU6ICIiLAogICAgICB0eXBlT3B0aW9uczogWwogICAgICAgIHsgbGFiZWw6ICJQcmltYXJ5IExvY2F0aW9uIiwgdmFsdWU6ICJwcmltYXJ5IiB9LAogICAgICAgIHsgbGFiZWw6ICJTZWNvbmRhcnkgTG9jYXRpb24iLCB2YWx1ZTogInNlY29uZGFyeSIgfSwKICAgICAgXSwKICAgICAgdXNhZ2VzOiB7CiAgICAgICAgcHJpbWFyeVVzYWdlVmFsdWU6ICIiLAogICAgICAgIHNlY29uZGFyeVVzYWdlVmFsdWU6ICIiLAogICAgICAgIHByaW1hcnlVc2FnZVRpbWU6ICIiLAogICAgICAgIHByaW1hcnlVc2FnZUxhdDogIiIsCiAgICAgICAgcHJpbWFyeVVzYWdlTG5nOiAiIiwKICAgICAgICBzZWNvbmRhcnlVc2FnZVRpbWU6ICIiLAogICAgICAgIHNlY29uZGFyeVVzYWdlTGF0OiAiIiwKICAgICAgICBzZWNvbmRhcnlVc2FnZUxuZzogIiIsCiAgICAgICAgY2F0ZWdvcnk6ICIiLAogICAgICAgIHN0YXJ0VGltZTogIiIsCiAgICAgICAgc3RvcFRpbWU6ICIiLAogICAgICAgIHRyaXBFbmRVc2FnZVZhbHVlOiAiIiwKICAgICAgICBjcmVhdGVkQXQ6ICIiLAogICAgICAgIGFzc2V0VVVJRDogIiIsCiAgICAgICAgdGVuYW50VVVJRDogIiIsCiAgICAgICAgbG9jYXRpb246ICIiLAogICAgICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgIH0sCiAgICAgIGZvcm1UaXRsZTogIkFkZCIsCiAgICB9OwogIH0sCiAgcHJvcHM6IHt9LAogIG1ldGhvZHM6IHsKICAgIGdldFN1Z2dlc3Rpb25zKG9ianMpIHsKICAgICAgdGhpcy5zdWdnZXN0aW9uU291cmNlID0gb2JqczsKICAgIH0sCgogICAgYXN5bmMgZ2V0TG9jYXRpb25zKHNlYXJjaElucHV0KSB7CiAgICAgIGNvbnN0IHVybCA9CiAgICAgICAgImh0dHBzOi8vYXBpLm1hcGJveC5jb20vZ2VvY29kaW5nL3Y1L21hcGJveC5wbGFjZXMvIiArCiAgICAgICAgc2VhcmNoSW5wdXQgKwogICAgICAgICIuanNvbj9hY2Nlc3NfdG9rZW49IiArCiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbjsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gYXdhaXQgYXhpb3MKICAgICAgICAgIC5nZXQodXJsKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlSnNvbikgPT4gewogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uLmRhdGE7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgKICAgICAgICAgICAgICAiVW5hYmxlIHRvIGZldGNoIGxvY2F0aW9uLiBFbmFibGUgbG9jYXRpb24gYW5kIHRyeSByZWxvYWRpbmcgdGhlIHBhZ2UiLAogICAgICAgICAgICAgICJlcnJvckkiCiAgICAgICAgICAgICk7CiAgICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKCJNYXAuZ2V0TG9jYXRpb25zX291dGVyIiwgZSk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgZ2V0RGVmYXVsdExvY2F0aW9uT2JqKGxuZywgbGF0KSB7CiAgICAgIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5tYXBib3guY29tL2dlb2NvZGluZy92NS9tYXBib3gucGxhY2VzLyR7bG5nfSwke2xhdH0uanNvbj90eXBlPWFkZHJlc3MmYWNjZXNzX3Rva2VuPSR7dGhpcy5hY2Nlc3NUb2tlbn1gOwogICAgICB0cnkgewogICAgICAgIHJldHVybiBhd2FpdCBheGlvcwogICAgICAgICAgLmdldCh1cmwpCiAgICAgICAgICAudGhlbigocmVzcG9uc2VKc29uKSA9PiB7CiAgICAgICAgICAgIGxldCBsb2NhdGlvbiA9IHJlc3BvbnNlSnNvbi5kYXRhOwogICAgICAgICAgICBsZXQgY3VycmVudExvY2F0aW9uID0ge307CiAgICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbi5zZWxlY3RlZE9iamVjdCA9IGxvY2F0aW9uLmZlYXR1cmVzWzFdOwogICAgICAgICAgICB0aGlzLm9uU2VsZWN0ZWQoY3VycmVudExvY2F0aW9uKTsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZExvYyhsb2NhdGlvbi5mZWF0dXJlc1sxXSk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZygiTWFwLmdldExvY2F0aW9uc19pbm5kZXIiLCBlcnJvcik7CiAgICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKCJNYXAuZ2V0TG9jYXRpb25zX291dGVyIiwgZSk7CiAgICAgIH0KICAgIH0sCgogICAgc2VsZWN0ZWRMb2Mob2JqKSB7CiAgICAgIHRoaXMudXNhZ2VzWyJsb2NhdGlvbiJdID0gb2JqLnBsYWNlX25hbWU7CiAgICAgIGlmICh0aGlzLnVzYWdlcy50eXBlID09ICJwcmltYXJ5IikgewogICAgICAgIHRoaXMudXNhZ2VzLnByaW1hcnlVc2FnZUxuZyA9IG9iai5nZW9tZXRyeS5jb29yZGluYXRlc1swXTsKICAgICAgICB0aGlzLnVzYWdlcy5wcmltYXJ5VXNhZ2VMYXQgPSBvYmouZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VMbmcgPSBvYmouZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF07CiAgICAgICAgdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VMYXQgPSBvYmouZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV07CiAgICAgIH0KICAgIH0sCgogICAgb25TZWxlY3RlZCh2YWwpIHsKICAgICAgdGhpcy5tYXBTZWFyY2hPYmogPSB2YWwuc2VsZWN0ZWRPYmplY3Q7CiAgICB9LAogICAgb25JbnB1dCh2YWwpIHsKICAgICAgdGhpcy51c2FnZXMubG9jYXRpb24gPSB2YWw7CiAgICB9LAogICAgY2xlYXJTZWxlY3RlZExvY2F0aW9uKCkgewogICAgICB0aGlzLnVzYWdlcy5sb2NhdGlvbiA9ICIiOwogICAgICB0aGlzLmRlZmF1bHRMb2NhdGlvbiA9IFtdOwogICAgICB0aGlzLm1hcFNlYXJjaE9iaiA9IHt9OwogICAgICB0aGlzLmluZGV4S2V5Kys7CiAgICB9LAoKICAgIGRhdGVIYW5kbGVyKGRhdGUsIGtleSkgewogICAgICBsZXQgY3VycmVudERhdGUgPSBtb21lbnQoKQogICAgICAgIC5mb3JtYXQoKQogICAgICAgIC5zcGxpdCgiVCIpOwogICAgICBjdXJyZW50RGF0ZSA9IGN1cnJlbnREYXRlWzBdOwogICAgICBpZiAoa2V5ID09PSAic3RhcnRfZGF0ZSIpIHsKICAgICAgICBpZiAoCiAgICAgICAgICBtb21lbnQoZGF0ZSkuaXNCZWZvcmUoY3VycmVudERhdGUpIHx8CiAgICAgICAgICBtb21lbnQodGhpcy5lbmREYXRlKS5pc0JlZm9yZShkYXRlKQogICAgICAgICkgewogICAgICAgICAgdGhpcy5zdGFydERhdGUgPSAiIjsKICAgICAgICAgIHJldHVybiB0aGlzLnNob3dUb2FzdCgKICAgICAgICAgICAgIlN0YXJ0IERhdGUgbXVzdCBiZSBjdXJyZW50IERhdGUgJiBMZXNzIHRoYW4gRW5kIERhdGUiLAogICAgICAgICAgICAiZXJyb3IiCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5zdGFydERhdGUgJiYgbW9tZW50KGRhdGUpLmlzQmVmb3JlKHRoaXMuc3RhcnREYXRlKSkgewogICAgICAgICAgdGhpcy5lbmREYXRlID0gIiI7CiAgICAgICAgICByZXR1cm4gdGhpcy5zaG93VG9hc3QoCiAgICAgICAgICAgICJFbmQgRGF0ZSBtdXN0IGJlIHNhbWUgYXMgU3RhcnQgRGF0ZSBvciBncmVhdGVyIHRoYW4gdGhlIFN0YXJ0IERhdGUiLAogICAgICAgICAgICAiZXJyb3IiCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNoZWNrVmFsaWRhdGlvbihmaWVsZCkgewogICAgICB0aGlzLiR2LnVzYWdlc1tmaWVsZF0uJHRvdWNoKCk7CiAgICB9LAoKICAgIGRlZmF1bHRMb2NhdGlvbigpIHsKICAgICAgdGhpcy5sb2NhdGlvbl9sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbigKICAgICAgICAocG9zaXRpb24pID0+IHsKICAgICAgICAgIHRoaXMuZGVmYXVsdF9sb2NhdGlvbi5wdXNoKHsKICAgICAgICAgICAgbGF0OiBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUsCiAgICAgICAgICAgIGxuZzogcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSwKICAgICAgICAgICAgdHlwZTogImxvY2F0aW9uIiwKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5nZXREZWZhdWx0TG9jYXRpb25PYmooCiAgICAgICAgICAgIHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUsCiAgICAgICAgICAgIHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZQogICAgICAgICAgKTsKICAgICAgICAgIHRoaXMubG9jYXRpb25fbG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLmxvY2F0aW9uX2xvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgKTsKICAgIH0sCgogICAgY3JlYXRlVXNhZ2UoKSB7CiAgICAgIHRoaXMuJHYuJHRvdWNoKCk7CiAgICAgIGlmICh0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIlBsZWFzZSBmaWxsIGFsbCByZXF1aXJlZCBmaWVsZHMiLCAid2FybmluZyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoCiAgICAgICAgdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlVmFsdWUgJiYKICAgICAgICB0aGlzLnVzYWdlcy5wcmltYXJ5VXNhZ2VWYWx1ZSA8PSB0aGlzLmFzc2V0UHJpbWFyeVZhbHVlCiAgICAgICkgewogICAgICAgIHRoaXMuc2hvd1RvYXN0KAogICAgICAgICAgIlByaW1hcnkgVXNhZ2UgdmFsdWUgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiAiICsKICAgICAgICAgICAgdGhpcy5hc3NldFByaW1hcnlWYWx1ZSArCiAgICAgICAgICAgICIuIiwKICAgICAgICAgICJ3YXJuaW5nIgogICAgICAgICk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICgKICAgICAgICB0aGlzLnVzYWdlcy5zZWNvbmRhcnlVc2FnZVZhbHVlICYmCiAgICAgICAgdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VWYWx1ZSA8PSB0aGlzLmFzc2V0U2Vjb25kYXJ5VmFsdWUKICAgICAgKSB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgICAiU2Vjb25kYXJ5IFVzYWdlIHZhbHVlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gIiArCiAgICAgICAgICAgIHRoaXMuYXNzZXRTZWNvbmRhcnlWYWx1ZSArCiAgICAgICAgICAgICIuIiwKICAgICAgICAgICJ3YXJuaW5nIgogICAgICAgICk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBsZXQgcmVxdWVzdCA9IHsKICAgICAgICB1c2FnZTogdGhpcy51c2FnZXMsCiAgICAgIH07CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIGlmICh0aGlzLnN0YXJ0RGF0ZSkgewogICAgICAgIHZhciBzZWxlY3RlZERhdGUgPSBtb21lbnQodGhpcy5zdGFydERhdGUpLmZvcm1hdCgKICAgICAgICAgICJZWVlZLU1NLUREVEhIOk1NOlNTWiIKICAgICAgICApOwogICAgICAgIHJlcXVlc3QudXNhZ2Uuc3RhcnRUaW1lID0gc2VsZWN0ZWREYXRlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmVuZERhdGUpIHsKICAgICAgICB2YXIgc2VsZWN0ZWREYXRlRW5kID0gbW9tZW50KHRoaXMuZW5kRGF0ZSkuZm9ybWF0KAogICAgICAgICAgIllZWVktTU0tRERUSEg6TU06U1NaIgogICAgICAgICk7CiAgICAgICAgcmVxdWVzdC51c2FnZS5zdG9wVGltZSA9IHNlbGVjdGVkRGF0ZUVuZDsKICAgICAgfQoKICAgICAgcmVxdWVzdC51c2FnZS50ZW5hbnRVVUlEID0gdGhpcy5jdXJyZW50VXNlckRldGFpbHMub3JnYW5pemF0aW9uSWQ7CiAgICAgIHJlcXVlc3QudXNhZ2UucHJpbWFyeVVzYWdlVW5pdCA9IHRoaXMucHJpbWFyeVVzYWdlVW5pdDsKICAgICAgcmVxdWVzdC51c2FnZS5zZWNvbmRhcnlVc2FnZVVuaXQgPSB0aGlzLnNlY29uZGFyeVVzYWdlVW5pdDsKICAgICAgcmVxdWVzdC51c2FnZS5hc3NldE5hbWUgPSB0aGlzLmFzc2V0TmFtZUxhYmVsOwoKCiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuYWRkVXNhZ2VzKHJlcXVlc3QpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhLnJlc3BvbnNlQ29kZSA9PSAiMjAwIikgewogICAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICJ1c2FnZSIsCiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2U6IHJlcy5kYXRhLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgdG9hc3RUeXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICB0b2FzdEZsYWc6IHRydWUsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJFcnJvciB3aGlsZSBhZGRpbmcgdXNhZ2UgaW4gYXNzZXQuIiwgImVycm9yIik7CiAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCgogICAgdXBkYXRlVXNhZ2UoKSB7CiAgICAgIHRoaXMuJHYuJHRvdWNoKCk7CiAgICAgIGlmICh0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIlBsZWFzZSBmaWxsIGFsbCByZXF1aXJlZCBmaWVsZHMiLCAid2FybmluZyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBsZXQgcmVxdWVzdCA9IHsKICAgICAgICB1c2FnZTogewogICAgICAgICAgaWQ6IHRoaXMudXNhZ2VzLmlkLAogICAgICAgICAgcHJpbWFyeVVzYWdlVmFsdWU6IHRoaXMudXNhZ2VzLnByaW1hcnlVc2FnZVZhbHVlLAogICAgICAgICAgc2Vjb25kYXJ5VXNhZ2VWYWx1ZTogdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VWYWx1ZSwKICAgICAgICAgIHByaW1hcnlVc2FnZVRpbWU6IHRoaXMudXNhZ2VzLnByaW1hcnlVc2FnZVRpbWUsCiAgICAgICAgICBwcmltYXJ5VXNhZ2VMYXQ6IHRoaXMudXNhZ2VzLnByaW1hcnlVc2FnZUxhdCwKICAgICAgICAgIHByaW1hcnlVc2FnZUxuZzogdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlTG5nLAogICAgICAgICAgc2Vjb25kYXJ5VXNhZ2VUaW1lOiB0aGlzLnVzYWdlcy5zZWNvbmRhcnlVc2FnZVRpbWUsCiAgICAgICAgICBzZWNvbmRhcnlVc2FnZUxhdDogdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VMYXQsCiAgICAgICAgICBzZWNvbmRhcnlVc2FnZUxuZzogdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VMbmcsCiAgICAgICAgICBjYXRlZ29yeTogdGhpcy51c2FnZXMuY2F0ZWdvcnksCiAgICAgICAgICB0cmlwRW5kVXNhZ2VWYWx1ZTogdGhpcy51c2FnZXMudHJpcEVuZFVzYWdlVmFsdWUsCiAgICAgICAgICB0ZW5hbnRVVUlEOiB0aGlzLnVzYWdlcy50ZW5hbnRVVUlELAogICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMudXNhZ2VzLmRlc2NyaXB0aW9uLAogICAgICAgIH0sCiAgICAgIH07CiAgICAgIHZhciBzZWxlY3RlZERhdGUgPSBtb21lbnQodGhpcy5zdGFydERhdGUpLmZvcm1hdCgiWVlZWS1NTS1ERFRISDpNTTpTU1oiKTsKICAgICAgdmFyIGRhdGVTcGxpdCA9IHNlbGVjdGVkRGF0ZS5zcGxpdCgiVCIpOwogICAgICB2YXIgb2JqRGF0ZSA9IGRhdGVTcGxpdFswXTsKICAgICAgdmFyIHRpbWVTcGxpdCA9IHRoaXMudXNhZ2VzLnN0YXJ0VGltZS5zcGxpdCgiOiIpOwogICAgICB2YXIgaG91ciA9IHRpbWVTcGxpdFswXTsKICAgICAgdmFyIG1pbiA9IHRpbWVTcGxpdFsxXTsKICAgICAgdmFyIGFzc2lnbm1lbnREYXRlID0gb2JqRGF0ZSArICJUIiArIGhvdXIgKyAiOiIgKyBtaW4gKyAiOiIgKyAiMDArMDU6MDAiOwogICAgICByZXF1ZXN0LnVzYWdlLnN0YXJ0VGltZSA9IGFzc2lnbm1lbnREYXRlOwogICAgICB2YXIgc2VsZWN0ZWREYXRlRW5kID0gbW9tZW50KHRoaXMuZW5kRGF0ZSkuZm9ybWF0KCJZWVlZLU1NLUREVEhIOk1NOlNTWiIpOwogICAgICB2YXIgZGF0ZVNwbGl0MSA9IHNlbGVjdGVkRGF0ZUVuZC5zcGxpdCgiVCIpOwogICAgICB2YXIgb2JqRGF0ZTEgPSBkYXRlU3BsaXQxWzBdOwogICAgICB2YXIgdGltZVNwbGl0MSA9IHRoaXMudXNhZ2VzLnN0b3BUaW1lLnNwbGl0KCI6Iik7CiAgICAgIHZhciBob3VyMSA9IHRpbWVTcGxpdDFbMF07CiAgICAgIHZhciBtaW4xc3RhcnREYXRlID0gdGltZVNwbGl0MVsxXTsKICAgICAgdmFyIGFzc2lnbm1lbnREYXRlRW5kID0KICAgICAgICBvYmpEYXRlMSArICJUIiArIGhvdXIxICsgIjoiICsgbWluMXN0YXJ0RGF0ZSArICI6IiArICIwMCswNTowMCI7CiAgICAgIHJlcXVlc3QudXNhZ2Uuc3RvcFRpbWUgPSBhc3NpZ25tZW50RGF0ZUVuZDsKICAgICAgcmVxdWVzdC51c2FnZS5hc3NldFVVSUQgPSB0aGlzLnVzYWdlcy5hc3NldFVVSUQ7CgogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmVkaXRVc2FnZXMocmVxdWVzdCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEucmVzcG9uc2VDb2RlID09ICIyMDAiKSB7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogInVzYWdlIiwKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZTogcmVzLmRhdGEuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICB0b2FzdFR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIHRvYXN0RmxhZzogdHJ1ZSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiRXJyb3Igd2hpbGUgYWRkaW5nIHVzYWdlIGluIGFzc2V0LiIsICJlcnJvciIpOwogICAgICAgIH0pOwogICAgfSwKCiAgICBnZXRBbGxDYXRlZ29yaWVzKGN1cnJlbnRVc2VyRGV0YWlscykgewogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldEFsbEFzc2V0Q2F0ZWdvcmllcygKICAgICAgICBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZAogICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5hc3NldENhdGVnb3JpZXMgPSByZXNwb25zZS5kYXRhLmNhdGVnb3JpZXM7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7CiAgICB9LAoKICAgIGdldEFsbEFzc2V0KGN1cnJlbnRVc2VyRGV0YWlscykgewogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldEFsbEFzc2V0cygKICAgICAgICBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZAogICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy50b3RhbEFzc2V0TmFtZXMgPSByZXNwb25zZS5kYXRhLmFzc2V0czsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHt9KTsKICAgIH0sCgogICAgb25TZWxlY3RlZENhdGVnb3J5KHZhbHVlKSB7CiAgICAgIHRoaXMuYXNzZXRzTmFtZXMgPSBbXTsKICAgICAgdGhpcy5hc3NldENhdGVnb3J5ID0gdmFsdWUuc2VsZWN0ZWRPYmplY3Q7CiAgICAgIGZvciAobGV0IGFzc2V0IG9mIHRoaXMudG90YWxBc3NldE5hbWVzKSB7CiAgICAgICAgaWYgKGFzc2V0LmNhdGVnb3J5VVVJRCA9PT0gdGhpcy5hc3NldENhdGVnb3J5LnV1aWQpIHsKICAgICAgICAgIHRoaXMuYXNzZXRzTmFtZXMucHVzaChhc3NldCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGNsZWFyU2VsZWN0ZWRDYXRlZ29yeSgpIHsKICAgICAgdGhpcy5hc3NldENhdGVnb3J5TGFiZWwgPSAiIjsKICAgICAgdGhpcy5hc3NldE5hbWVMYWJlbCA9ICIiOwogICAgICB0aGlzLmFzc2V0cyA9IHt9OwogICAgICB0aGlzLnVzYWdlcy5wcmltYXJ5VXNhZ2VWYWx1ZSA9ICIiOwogICAgICB0aGlzLnVzYWdlcy5zZWNvbmRhcnlVc2FnZVZhbHVlID0gIiI7CiAgICAgIHRoaXMucHJpbWFyeVVzYWdlVW5pdCA9ICIiOwogICAgICB0aGlzLnNlY29uZGFyeVVzYWdlVW5pdCA9ICIiOwogICAgICB0aGlzLmFzc2V0c05hbWVzID0gW107CiAgICAgIHRoaXMuaW5kZXhLZXkrKzsKICAgIH0sCgogICAgb25TZWxlY3RlZE5hbWUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgdGhpcy51c2FnZV9sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgICB0aGlzLmFzc2V0TmFtZUxhYmVsID0gdmFsdWUuc2VsZWN0ZWRPYmplY3QubmFtZTsKICAgICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldEFzc2V0KHZhbHVlLnNlbGVjdGVkT2JqZWN0LnV1aWQpCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGxldCBhc3NldCA9IHJlcy5kYXRhLmFzc2V0OwogICAgICAgICAgICB0aGlzLmFzc2V0UHJpbWFyeVZhbHVlID0gYXNzZXQubGFzdFVzYWdlLnByaW1hcnlVc2FnZVZhbHVlCiAgICAgICAgICAgICAgPyBhc3NldC5sYXN0VXNhZ2UucHJpbWFyeVVzYWdlVmFsdWUKICAgICAgICAgICAgICA6IDA7CiAgICAgICAgICAgIHRoaXMuYXNzZXRTZWNvbmRhcnlWYWx1ZSA9IGFzc2V0Lmxhc3RVc2FnZS5zZWNvbmRhcnlVc2FnZVZhbHVlCiAgICAgICAgICAgICAgPyBhc3NldC5sYXN0VXNhZ2Uuc2Vjb25kYXJ5VXNhZ2VWYWx1ZQogICAgICAgICAgICAgIDogMDsKICAgICAgICAgICAgdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlVmFsdWUgPSBhc3NldC5sYXN0VXNhZ2UucHJpbWFyeVVzYWdlVmFsdWUKICAgICAgICAgICAgICA/IGFzc2V0Lmxhc3RVc2FnZS5wcmltYXJ5VXNhZ2VWYWx1ZQogICAgICAgICAgICAgIDogMDsKICAgICAgICAgICAgdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VWYWx1ZSA9IGFzc2V0Lmxhc3RVc2FnZQogICAgICAgICAgICAgIC5zZWNvbmRhcnlVc2FnZVZhbHVlCiAgICAgICAgICAgICAgPyBhc3NldC5sYXN0VXNhZ2Uuc2Vjb25kYXJ5VXNhZ2VWYWx1ZQogICAgICAgICAgICAgIDogMDsKICAgICAgICAgICAgdGhpcy51c2FnZV9sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiRmFpbGVkIHRvIGxvYWQgdXNhZ2UuIiwgImVycm9yIik7CiAgICAgICAgICAgIHRoaXMudXNhZ2VfbG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgdGhpcy5hc3NldHMgPSB2YWx1ZS5zZWxlY3RlZE9iamVjdDsKICAgICAgICB0aGlzLnVzYWdlcy5hc3NldFVVSUQgPSB2YWx1ZS5zZWxlY3RlZE9iamVjdC51dWlkOwogICAgICAgIHRoaXMudXNhZ2VzLmFzc2V0TnVtYmVyID0gdmFsdWUuc2VsZWN0ZWRPYmplY3QuYXNzZXROdW1iZXI7CiAgICAgICAgdGhpcy5wcmltYXJ5VXNhZ2VVbml0ID0gdmFsdWUuc2VsZWN0ZWRPYmplY3QucHJpbWFyeVVzYWdlVW5pdDsKICAgICAgICB0aGlzLnNlY29uZGFyeVVzYWdlVW5pdCA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0LnNlY29uZGFyeVVzYWdlVW5pdDsKICAgICAgICB0aGlzLmluZGV4S2V5Kys7CiAgICAgIH0KICAgIH0sCgogICAgY2xlYXJTZWxlY3RlZEFzc2V0TmFtZSgpIHsKICAgICAgdGhpcy5hc3NldE5hbWVMYWJlbCA9ICIiOwogICAgICB0aGlzLmFzc2V0cyA9IHt9OwogICAgICB0aGlzLnVzYWdlcy5wcmltYXJ5VXNhZ2VWYWx1ZSA9ICIiOwogICAgICB0aGlzLnVzYWdlcy5zZWNvbmRhcnlVc2FnZVZhbHVlID0gIiI7CiAgICAgIHRoaXMucHJpbWFyeVVzYWdlVW5pdCA9ICIiOwogICAgICB0aGlzLnNlY29uZGFyeVVzYWdlVW5pdCA9ICIiOwogICAgICB0aGlzLmluZGV4S2V5Kys7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRGaWVsZENhdGVnb3J5KHZhbHVlKSB7CiAgICAgIHRoaXMudXNhZ2VzLmNhdGVnb3J5ID0gdmFsdWUuc2VsZWN0ZWRPYmplY3QudmFsdWU7CiAgICAgIHRoaXMuZmllbGRDYXRlZ29yeSA9IHZhbHVlLnNlbGVjdGVkT2JqZWN0OwogICAgfSwKCiAgICBjbGVhclNlbGVjdGVkRmllbGRDYXRlZ29yeSgpIHsKICAgICAgdGhpcy51c2FnZXMuY2F0ZWdvcnkgPSAiIjsKICAgICAgdGhpcy5maWVsZENhdGVnb3J5ID0gIiI7CiAgICAgIHRoaXMuZmllbGRDYXRlZ29yeUxhYmVsID0gIiI7CiAgICAgIHRoaXMuaW5kZXhLZXkrKzsKICAgIH0sCgogICAgYXNzZXREZXRhaWxzQWNjb3JkaW9uRnVuY3Rpb24odmFsdWUpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuYXNzZXREZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy4kcmVmcy51c2FnZURldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgICB0aGlzLiRyZWZzLnRpbWVEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcmVmcy5tYXBEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgdXNhZ2VBY2NvcmRpb25GdW5jdGlvbih2YWx1ZSkgewogICAgICBpZiAodGhpcy4kcmVmcy51c2FnZURldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPT09IHRydWUpIHsKICAgICAgICB0aGlzLiRyZWZzLnRpbWVEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcmVmcy5tYXBEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcmVmcy5hc3NldERldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICB0aW1lQWNjb3JkaW9uRnVuY3Rpb24odmFsdWUpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMudGltZURldGFpbHNBY2NvcmRpb24ub3BlbkZsYWcgPT09IHRydWUpIHsKICAgICAgICB0aGlzLiRyZWZzLnVzYWdlRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJHJlZnMubWFwRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJHJlZnMuYXNzZXREZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgbWFwQWNjb3JkaW9uRnVuY3Rpb24odmFsdWUpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMubWFwRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuJHJlZnMudXNhZ2VEZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcmVmcy50aW1lRGV0YWlsc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJHJlZnMuYXNzZXREZXRhaWxzQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBnZXRGb3JtRXJyb3JNZXNzYWdlKGZpZWxkVmFsaWRhdGlvbikgewogICAgICBpZiAoZmllbGRWYWxpZGF0aW9uICYmIGZpZWxkVmFsaWRhdGlvbi4kZGlydHkpIHsKICAgICAgICByZXR1cm4gRnVuY3Rpb25zLmdldEZvcm1GaWVsZEVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pOwogICAgICB9CiAgICB9LAogICAgZ2V0VXNhZ2VCeUlkKCkgewogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldFVzYWdlQnlJZCh0aGlzLiRyb3V0ZS5wYXJhbXMudXNhZ2VJRCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRVc2FnZUJ5SWQnLHJlc3BvbnNlKQogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIGxldCB1c2FnZSA9IHJlc3BvbnNlLmRhdGEudXNhZ2U7CiAgICAgICAgICAgIGxldCBhc3NldHV1aWRzID0gW107CiAgICAgICAgICAgIGFzc2V0dXVpZHMucHVzaCh1c2FnZS5hc3NldFVVSUQpOwogICAgICAgICAgICB0aGlzLnVzYWdlcy5jcmVhdGVkRGF0ZSA9IG1vbWVudAogICAgICAgICAgICAgIC51dGModXNhZ2UuY3JlYXRlZEF0KQogICAgICAgICAgICAgIC5sb2NhbCgpCiAgICAgICAgICAgICAgLmZvcm1hdCgiREQgTU1NIFlZWVkgaGg6bW0gYSIpOwogICAgICAgICAgICBpZiAodXNhZ2UuY2F0ZWdvcnkgIT09IG51bGwpIHsKICAgICAgICAgICAgICB0aGlzLnByaW1hcnlVc2FnZVVuaXQgPSB1c2FnZS5wcmltYXJ5VXNhZ2VVbml0OwogICAgICAgICAgICAgIHRoaXMuc2Vjb25kYXJ5VXNhZ2VVbml0ID0gdXNhZ2Uuc2Vjb25kYXJ5VXNhZ2VVbml0OwogICAgICAgICAgICAgIHRoaXMudXNhZ2VzLmFzc2V0TmFtZSA9IHVzYWdlLmFzc2V0TmFtZTsKICAgICAgICAgICAgICB0aGlzLmZpZWxkQ2F0ZWdvcnlMYWJlbCA9IHRoaXMuJHRpdGxlX2Nhc2UodXNhZ2UuY2F0ZWdvcnkpOwogICAgICAgICAgICAgIHRoaXMudXNhZ2VzLnByaW1hcnlVc2FnZUxhdCA9IHVzYWdlLnByaW1hcnlVc2FnZUxhdDsKICAgICAgICAgICAgICB0aGlzLnVzYWdlcy5wcmltYXJ5VXNhZ2VMbmcgPSB1c2FnZS5wcmltYXJ5VXNhZ2VMbmc7CiAgICAgICAgICAgICAgdGhpcy51c2FnZXMuc2Vjb25kYXJ5VXNhZ2VMYXQgPSB1c2FnZS5zZWNvbmRhcnlVc2FnZUxhdDsKICAgICAgICAgICAgICB0aGlzLnVzYWdlcy5zZWNvbmRhcnlVc2FnZUxuZyA9IHVzYWdlLnNlY29uZGFyeVVzYWdlTG5nOwoKICAgICAgICAgICAgICB1c2FnZS5zdGFydERhdGUgPSB1c2FnZS5zdGFydFRpbWUKICAgICAgICAgICAgICAgID8gbW9tZW50CiAgICAgICAgICAgICAgICAgICAgLnV0Yyh1c2FnZS5zdGFydFRpbWUpCiAgICAgICAgICAgICAgICAgICAgLmxvY2FsKCkKICAgICAgICAgICAgICAgICAgICAuZm9ybWF0KCJERCBNTU0gWVlZWSIpCiAgICAgICAgICAgICAgICA6ICIiOwogICAgICAgICAgICAgIHVzYWdlLmVuZERhdGUgPSB1c2FnZS5zdG9wVGltZQogICAgICAgICAgICAgICAgPyBtb21lbnQKICAgICAgICAgICAgICAgICAgICAudXRjKHVzYWdlLnN0b3BUaW1lKQogICAgICAgICAgICAgICAgICAgIC5sb2NhbCgpCiAgICAgICAgICAgICAgICAgICAgLmZvcm1hdCgiREQgTU1NIFlZWVkiKQogICAgICAgICAgICAgICAgOiAiIjsKICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IHVzYWdlLnN0YXJ0VGltZTsKICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSB1c2FnZS5zdG9wVGltZTsKCiAgICAgICAgICAgICAgdXNhZ2Uuc3RhcnRUaW1lID0gdXNhZ2Uuc3RhcnRUaW1lCiAgICAgICAgICAgICAgICA/IG1vbWVudAogICAgICAgICAgICAgICAgICAgIC51dGModXNhZ2Uuc3RhcnRUaW1lKQogICAgICAgICAgICAgICAgICAgIC5sb2NhbCgpCiAgICAgICAgICAgICAgICAgICAgLmZvcm1hdCgiaGg6bW0iKQogICAgICAgICAgICAgICAgOiAiIjsKICAgICAgICAgICAgICB1c2FnZS5zdG9wVGltZSA9IHVzYWdlLnN0b3BUaW1lCiAgICAgICAgICAgICAgICA/IG1vbWVudAogICAgICAgICAgICAgICAgICAgIC51dGModXNhZ2Uuc3RvcFRpbWUpCiAgICAgICAgICAgICAgICAgICAgLmxvY2FsKCkKICAgICAgICAgICAgICAgICAgICAuZm9ybWF0KCJoaDptbSIpCiAgICAgICAgICAgICAgICA6ICIiOwogICAgICAgICAgICAgIHRoaXMuZGVmYXVsdF9sb2NhdGlvbi5wdXNoKHsKICAgICAgICAgICAgICAgIGxuZzogdXNhZ2UucHJpbWFyeVVzYWdlTG5nCiAgICAgICAgICAgICAgICAgID8gdXNhZ2UucHJpbWFyeVVzYWdlTG5nCiAgICAgICAgICAgICAgICAgIDogdXNhZ2Uuc2Vjb25kYXJ5VXNhZ2VMbmcKICAgICAgICAgICAgICAgICAgPyB1c2FnZS5zZWNvbmRhcnlVc2FnZUxuZwogICAgICAgICAgICAgICAgICA6ICIiLAogICAgICAgICAgICAgICAgbGF0OiB1c2FnZS5wcmltYXJ5VXNhZ2VMYXQKICAgICAgICAgICAgICAgICAgPyB1c2FnZS5wcmltYXJ5VXNhZ2VMYXQKICAgICAgICAgICAgICAgICAgOiB1c2FnZS5zZWNvbmRhcnlVc2FnZUxhdAogICAgICAgICAgICAgICAgICA/IHVzYWdlLnNlY29uZGFyeVVzYWdlTGF0CiAgICAgICAgICAgICAgICAgIDogIiIsCiAgICAgICAgICAgICAgICB0eXBlOiAib2ZmaWNlIiwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB1c2FnZS5sb2NhdGlvbiA9ICIiOwogICAgICAgICAgICAgIGlmICh1c2FnZS5wcmltYXJ5VXNhZ2VMbmcpIHsKICAgICAgICAgICAgICAgIHVzYWdlLnR5cGUgPSAicHJpbWFyeSI7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh1c2FnZS5zZWNvbmRhcnlVc2FnZUxuZykgewogICAgICAgICAgICAgICAgICB1c2FnZS50eXBlID0gInNlY29uZGFyeSI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0TmFtZUFuZFR5cGVPZkFzc2V0c0J5VVVJRFMoewogICAgICAgICAgICAgIHV1aWRzOiBhc3NldHV1aWRzLAogICAgICAgICAgICB9KQogICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZTEpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRzID0gcmVzcG9uc2UxLmRhdGEuYXNzZXRzW2Fzc2V0dXVpZHNdOwogICAgICAgICAgICAgICAgdGhpcy5hc3NldE5hbWVMYWJlbCA9CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlMS5kYXRhLmFzc2V0c1t1c2FnZS5hc3NldFVVSURdLm5hbWU7CiAgICAgICAgICAgICAgICB0aGlzLmFzc2V0Q2F0ZWdvcnlMYWJlbCA9CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlMS5kYXRhLmFzc2V0c1t1c2FnZS5hc3NldFVVSURdLnR5cGU7CiAgICAgICAgICAgICAgICB0aGlzLnVzYWdlcy5hc3NldE51bWJlciA9CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlMS5kYXRhLmFzc2V0c1t1c2FnZS5hc3NldFVVSURdLmFzc2V0TnVtYmVyOwogICAgICAgICAgICAgICAgdGhpcy51c2FnZXMucHJpbWFyeVVzYWdlVW5pdCA9CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlMS5kYXRhLmFzc2V0c1t1c2FnZS5hc3NldFVVSURdLnByaW1hcnlVc2FnZVVuaXQ7CiAgICAgICAgICAgICAgICB0aGlzLnVzYWdlcy5zZWNvbmRhcnlVc2FnZVVuaXQgPQogICAgICAgICAgICAgICAgICByZXNwb25zZTEuZGF0YS5hc3NldHNbdXNhZ2UuYXNzZXRVVUlEXS5zZWNvbmRhcnlVc2FnZVVuaXQ7CiAgICAgICAgICAgICAgICB0aGlzLnVzYWdlcyA9IHsgLi4udXNhZ2UgfTsKICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhLZXkrKzsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGUubmFtZSAhPSAiY3JlYXRlLXVzYWdlIiAmJgogICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRfbG9jYXRpb24ubGVuZ3RoID4gMAogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGVmYXVsdExvY2F0aW9uT2JqKAogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdF9sb2NhdGlvblswXS5sbmcsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0X2xvY2F0aW9uWzBdLmxhdAogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLnJlc3BvbnNlLm1lc3NhZ2UsICJlcnJvciIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoZXJyb3IucmVzcG9uc2UubWVzc2FnZSwgImVycm9yIik7CiAgICAgICAgfSk7CiAgICB9LAogICAgc2hvd1RvYXN0KG1lc3NhZ2UsIHR5cGUpIHsKICAgICAgdGhpcy50b2FzdE1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICB0aGlzLnRvYXN0VHlwZSA9IHR5cGU7CiAgICAgIHRoaXMudG9hc3RGbGFnKys7CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGdldFNvdXJjZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3VnZ2VzdGlvblNvdXJjZTsKICAgIH0sCgogICAgbWluRW5kRGF0ZSgpIHsKICAgICAgbGV0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIGlmICh0aGlzLnN0YXJ0RGF0ZSkgewogICAgICAgIHJldHVybiB0aGlzLnN0YXJ0RGF0ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gc3RhcnREYXRlOwogICAgICB9CiAgICB9LAoKICAgIG1heFN0YXJ0RGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuZW5kRGF0ZSkgewogICAgICAgIHJldHVybiB0aGlzLmVuZERhdGU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKAogICAgICAgICAgYCR7bmV3IERhdGUoKS5nZXRNb250aCgpfS8xLyR7bmV3IERhdGUoKS5nZXRGdWxsWWVhciArIDEwMH1gCiAgICAgICAgKTsKICAgICAgfQogICAgfSwKICB9LAoKICB3YXRjaDogewogICAgc3VnZ2VzdGlvblNvdXJjZTogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyKHYsIG92KSB7fSwKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5jdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKAogICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKICAgICk7CiAgICAvKiBGZXRjaGVzIERlZmF1bHQgTG9jYXRpb24gKi8KICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09ICJjcmVhdGUtdXNhZ2UiKSB7CiAgICAgIHRoaXMuZGVmYXVsdExvY2F0aW9uKCk7CiAgICB9CiAgICBpZiAodGhpcy4kcm91dGUubmFtZSA9PT0gInVzYWdlLWRldGFpbCIpIHsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy50eXBlID09ICJ2aWV3IikgewogICAgICAgIHRoaXMuc3RhdGVEaXNhYmxlID0gdHJ1ZTsKICAgICAgfQogICAgICB0aGlzLmZvcm1UaXRsZSA9IGAke3RoaXMuJHRpdGxlX2Nhc2UodGhpcy4kcm91dGUucGFyYW1zLnR5cGUpfWA7CiAgICAgIHRoaXMuZ2V0VXNhZ2VCeUlkKCk7CiAgICB9CiAgICB0aGlzLmdldEFsbENhdGVnb3JpZXModGhpcy5jdXJyZW50VXNlckRldGFpbHMpOwogICAgdGhpcy5nZXRBbGxBc3NldCh0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyk7CiAgfSwKCiAgdmFsaWRhdGlvbnM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgYXNzZXRDYXRlZ29yeUxhYmVsOiB7IHJlcXVpcmVkIH0sCiAgICAgIGFzc2V0TmFtZUxhYmVsOiB7IHJlcXVpcmVkIH0sCiAgICAgIGZpZWxkQ2F0ZWdvcnlMYWJlbDogeyByZXF1aXJlZCB9LAogICAgICBzdGFydERhdGU6IHsKICAgICAgICByZXF1aXJlZDogcmVxdWlyZWRJZigoKSA9PiB7CiAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZENhdGVnb3J5TGFiZWwudG9Mb3dlckNhc2UoKSA9PSAidHJpcCIgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfSksCiAgICAgIH0sCiAgICAgIGVuZERhdGU6IHsKICAgICAgICByZXF1aXJlZDogcmVxdWlyZWRJZigoKSA9PiB7CiAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZENhdGVnb3J5TGFiZWwudG9Mb3dlckNhc2UoKSA9PSAidHJpcCIgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfSksCiAgICAgIH0sCiAgICAgIHVzYWdlczogewogICAgICAgIHByaW1hcnlVc2FnZVZhbHVlOiB7CiAgICAgICAgICByZXF1aXJlZDogcmVxdWlyZWRJZigoKSA9PiB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnVzYWdlcy5zZWNvbmRhcnlVc2FnZVZhbHVlID8gZmFsc2UgOiB0cnVlOwogICAgICAgICAgfSksCiAgICAgICAgICBtaW5WYWx1ZTogbWluVmFsdWUoMCksCiAgICAgICAgfSwKICAgICAgICBzZWNvbmRhcnlVc2FnZVZhbHVlOiB7CiAgICAgICAgICByZXF1aXJlZDogcmVxdWlyZWRJZigoKSA9PiB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnVzYWdlcy5wcmltYXJ5VXNhZ2VWYWx1ZSA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICAgIH0pLAogICAgICAgICAgbWluVmFsdWU6IG1pblZhbHVlKDApLAogICAgICAgIH0sCiAgICAgICAgbG9jYXRpb246IHsgcmVxdWlyZWQgfSwKICAgICAgICBkZXNjcmlwdGlvbjogeyByZXF1aXJlZCwgbWF4TGVuZ3RoOiBtYXhMZW5ndGgoNTAwKSB9LAogICAgICB9LAogICAgfTsKICB9LAp9Owo="},null]}