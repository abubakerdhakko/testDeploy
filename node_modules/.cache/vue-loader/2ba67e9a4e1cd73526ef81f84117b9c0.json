{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/manage-asset-category/AssetCategory.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/manage-asset-category/AssetCategory.vue","mtime":1661968702440},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":1662622637719},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1662622639723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBFbmRwb2ludHMgZnJvbSAiLi4vLi4vc2VydmljZXMvRW5kUG9pbnRzIjsKaW1wb3J0IGFzc2V0UGVyc29ubmVsU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlcy9Bc3NldFBlcnNvbm5lbFNlcnZpY2UiOwppbXBvcnQgeyBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlIH0gZnJvbSAiLi4vLi4vc2VydmljZXMvQXNzZXRNYW5hZ2VtZW50U2VydmljZSI7CgppbXBvcnQgRGVsZXRlRGlhbG9nIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvRGVsZXRlRGlhbG9nIjsKaW1wb3J0IEFyY2hpdmVEaWFsb2cgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9BcmNoaXZlRGlhbG9nIjsKaW1wb3J0IEFyY2hpdmVkQXNzZXRDYXRlIGZyb20gIi4vY29tcG9uZW50cy9BcmNoaXZlZEFzc2V0c0NhdGUudnVlIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwoKaW1wb3J0IGxvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvTG9hZGVyLnZ1ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFzc2V0cyIsCgogIGNvbXBvbmVudHM6IHsKICAgIERlbGV0ZURpYWxvZywKICAgIEFyY2hpdmVEaWFsb2csCiAgICBsb2FkZXIsCiAgICBBcmNoaXZlZEFzc2V0Q2F0ZSwKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdG9hc3RGbGFnOiAwLAogICAgICB0b2FzdE1lc3NhZ2U6ICIiLAogICAgICB0b2FzdFR5cGU6ICIiLAogICAgICBsb2FkZXJGbGFnOiBmYWxzZSwKICAgICAgZGVsZXRlSW5zcGVjdGlvbkRpYWxvZzogZmFsc2UsCiAgICAgIGFyY2hpdmVJbnNwZWN0aW9uRGlhbG9nOiBmYWxzZSwKICAgICAgbmV3SXNzdWU6IGZhbHNlLAogICAgICBhZGRTZXJ2aWNlRGlhbG9nOiBmYWxzZSwKICAgICAgYXNzZXRVVUlEOiAiIiwKICAgICAgcmVzZXRUYWJsZTogMCwKICAgICAgYXNzZXRPYmo6ICIiLAogICAgICAvLyAtLS0tLS0tLS0tLS0tIEFzc2V0cyBTRFQgRGF0YSBTVEFSVCAtLS0tLS0tLS0tLS0tLS0tCiAgICAgIHNkdF90b2tlbjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpCiAgICAgICAgLmFjY2Vzc190b2tlbiwKICAgICAgdXNlcjogIiIsCiAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgaXNMb2FkaW5nUGFnZTogZmFsc2UsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIHByb21wdDogZmFsc2UsCiAgICAgIHByb21wdFZpZXdOYW1lOiAiIiwKICAgICAgc2VydmVyRGF0YTogIiIsCiAgICAgIGZpbHRlckZpZWxkTGlzdDogW10sCiAgICAgIGV2ZW50RGF0YTogIiIsCiAgICAgIGluZGV4S2V5OiAwLAogICAgICBwYXJlbnRTeXN0ZW1TZXR0aW5nczogewogICAgICAgIHNlcnZpY2VVUkw6IEVuZHBvaW50cy5wcmVmZXJlbmNlU2VydmljZS5wcmVmZXJlbmNlLAogICAgICAgIC8vIHNlcnZpY2VVUkw6ICJodHRwOi8vbG9jYWxob3N0OjgwOTkvcHJlZmVyZW5jZXMiLAogICAgICAgIGJ1dHRvbnM6IFtdLAogICAgICAgIHNlYXJjaFZhbHVlOiAiIiwKICAgICAgICBoZWlnaHQ6ICI5NTBweCIsCiAgICAgICAgc2VsZWN0aW9uQ29sdW1uOiB0cnVlLAogICAgICAgIHNlbGVjdFR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgbW9yZU9wdGlvbnM6IFtdLAogICAgICAgIGFjdGlvbnNPcHRpb25zOiBbCiAgICAgICAgICAiVmlldyIsCiAgICAgICAgICAiRWRpdCIsCiAgICAgICAgICAiQXJjaGl2ZSIsCiAgICAgICAgICAiQWRkIEFzc2V0IgogICAgICAgICAgLy8gIkRlbGV0ZSIsCiAgICAgICAgXSwKICAgICAgICBjb2x1bW5JY29uczogW10sCiAgICAgICAgcGlsbENvbmZpZzogWwogICAgICAgICAgeyBjb2x1bW46ICIiLCBzdGF0ZTogInN1Y2Nlc3MiLCBkYXRhOiAiIiB9LAogICAgICAgICAgeyBjb2x1bW46ICIiLCBzdGF0ZTogImVycm9yIiwgZGF0YTogIiIgfSwKICAgICAgICAgIHsgY29sdW1uOiAiIiwgc3RhdGU6ICJub3JtYWwiLCBkYXRhOiAiIiB9LAogICAgICAgIF0sCiAgICAgICAgc3RhdGljQ29sdW1uczogW10sCiAgICAgICAgdXNlcjogIiIsCiAgICAgICAgdXBwZXJjYXNlQ29sdW1uczogW10sIC8vIHBhc3MgY29sdW1uIG5hbWUgd2hvc2UgZGF0YSBzaG91bGQgYmUgc2hvd24gaW4gY2FwcwogICAgICAgIGRhdGVGb3JtYXQ6ICJERC9NTS95eXl5IGhoOm1tIGEiLCAvL3Bhc3MgYW55IG1vbWVudCBkYXRlIGZvcm1hdCBoZXJlCiAgICAgIH0sCiAgICAgIHBhcmVudERlZmF1bHRTeXN0ZW1WaWV3OiB7CiAgICAgICAgdmlld05hbWVzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJEZWZhdWx0IFZpZXciLAogICAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgICAgcG9zaXRpb246IDEsCiAgICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJBZGQgQSBWaWV3IFRpbGUiLAogICAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgICAgcG9zaXRpb246IDAsCiAgICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKCiAgICAgICAgZGVmYXVsdFRhYmxlOiB7CiAgICAgICAgICBpZDogbnVsbCwKICAgICAgICAgIHZpZXdOYW1lOiAiRGVmYXVsdCBWaWV3IiwKICAgICAgICAgIGRlbnNpdHk6ICJzbSIsCiAgICAgICAgICBwYWdlU2l6ZTogIjUwIiwKICAgICAgICAgIHBhZ2VOYW1lOiAiYXNzZXRzIiwKICAgICAgICAgIHVzZXI6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKS5wcm9maWxlCiAgICAgICAgICAgIC51c2VybmFtZSwKICAgICAgICAgIGRlZmF1bHRWaWV3RmxhZzogdHJ1ZSwKICAgICAgICAgIHNvcnRGaWVsZDogIiIsCiAgICAgICAgICBzb3J0RGlyZWN0aW9uOiAiIiwKICAgICAgICAgIHRpbGVGbGFnOiB0cnVlLAogICAgICAgICAgcG9zaXRpb246IDEsIC8vIGFsd2F5cyBwYXNzIDEKICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIGNvbHVtbnM6IFtdLAogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIHBhcmVudERhdGE6IFtdLAogICAgICBmaWx0ZXJDb3VudDogIiIsCiAgICAgIC8vIC0tLS0tLS0tLS0tLS0gQXNzZXRzIFNEVCBEYXRhIEVORCAtLS0tLS0tLS0tLS0tLS0tCgogICAgICBpbnNwZWN0aW9uczogW10sCiAgICAgIG9yZ0NvbmZpZ3NSZXNwb25zZTogbnVsbCwKICAgICAgYXNzZXRUeXBlOiAiYXNzZXQiLAogICAgICBhc3NldE9wdGlvbnM6IFsKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogIkNhdGVnb3JpZXMiLAogICAgICAgICAgdmFsdWU6ICJhc3NldCIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogIkFyY2hpdmVkIiwKICAgICAgICAgIHZhbHVlOiAiYXJjaGl2ZWRBc3NldHMiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGFzc2V0T3B0aW9uOiAiYXNzZXQiLAogICAgICBjdXJyZW50VXNlckRldGFpbHM6ICIiLAogICAgICBhc3NldENhdGVnb3J5T3B0aW9uczogW10sCiAgICAgIHZpZXdBc3NldEdyb3VwRGlhbG9nOiBmYWxzZSwKICAgICAgYXNzZXRHcm91cENvbmZpZ3M6ICIiLAogICAgICBhcmNoaXZlZEFzc2V0c0NvbmZpZ3M6ICIiLAogICAgICB0YWJsZUNvbmZpZzI6IG51bGwsCiAgICAgIGN1cnJlbmN5OiAiIiwKICAgICAgc2R0RGF0YTogIiIsCiAgICAgIG9wZW5BZGRQb3BVcDogZmFsc2UsCiAgICAgIGV4cG9ydEZsYWc6IGZhbHNlLAogICAgICBvcHQ6IFtdLAogICAgICBvcGVuVXBkYXRlUG9wVXA6IGZhbHNlLAogICAgICBpbXBvcnRUeXBlOiAiQWRkIiwKICAgICAgZmllbGROYW1lczogW10sCiAgICAgIGNvbHVtbnM6IFtdLAogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBjcmVhdGVBc3NldENhdGVUZW1wbGF0ZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJjcmVhdGUtYXNzZXQtY2F0ZWdvcnkiLAogICAgICB9KTsKICAgIH0sCiAgICBvcGVuQ3JlYXRlQ2F0ZWdvcnkoKSB7CiAgICAgIAogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogImNyZWF0ZS1hc3NldC1jYXRlZ29yeSIsCiAgICAgIH0pOwogICAgfSwKCiAgICBpbXBvcnRPcHRpb24odmFsKSB7CiAgICAgIGlmICh2YWwgPT09ICJhZGQiKSB7CiAgICAgICAgdGhpcy5vcGVuQWRkUG9wVXAgPSB0cnVlOwogICAgICAgIHRoaXMuaW1wb3J0VHlwZSA9ICJBZGQiOwogICAgICB9IGVsc2UgaWYgKHZhbCA9PT0gInVwZGF0ZSIpIHsKICAgICAgICB0aGlzLm9wZW5BZGRQb3BVcCA9IHRydWU7CiAgICAgICAgdGhpcy5pbXBvcnRUeXBlID0gIlVwZGF0ZSI7CiAgICAgIH0gZWxzZSBpZiAodmFsID09PSAiZXhpc3RpbmciKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAiZXhpc3RpbmctdGVtcGxhdGVzIiB9KTsKICAgICAgfSBlbHNlIGlmICh2YWwgPT09ICJoaXN0b3J5IikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogImxhc3QtaW1wb3J0LXJlY29yZHMiIH0pOwogICAgICB9CiAgICB9LAoKICAgIGNsb3NlQWRkUG9wdXAoKSB7CiAgICAgIHRoaXMub3BlbkFkZFBvcFVwID0gZmFsc2U7CiAgICB9LAoKICAgIHJlZnJlc2hUYWJsZSgpIHsKICAgICAgdGhpcy5vcGVuQWRkUG9wVXAgPSBmYWxzZTsKICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgIH0sCgogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuZGVsZXRlSW5zcGVjdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmFyY2hpdmVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuZXhwb3J0RmxhZyA9IGZhbHNlOwogICAgfSwKICAgIGRpc3BsYXlNZXNzYWdlKCkgewogICAgICB0aGlzLnNob3dUb2FzdCgiSXNzdWUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuIiwgInN1Y2Nlc3MiKTsKICAgIH0sCiAgICBkZWxldGVEaWFsb2coKSB7CiAgICAgIHRoaXMuZGVsZXRlSW5zcGVjdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmxvYWRlcj0gdHJ1ZQogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLkRlbGV0ZUFzc2V0Q2F0ZSh0aGlzLmFzc2V0VVVJRCwgImRlbGV0ZSIpIAogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMubG9hZFRhYmxlKHRoaXMuc2R0RGF0YSk7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJUZW1wbGF0ZSBBc3NldCBEZWxldGVkIFN1Y2Nlc3NmdWxseSIsICJzdWNjZXNzIik7CiAgICAgICAgICAgIHRoaXMuZGVsZXRlSW5zcGVjdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICAgdGhpcy5sb2FkZXI9IGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvciwgImVycm9yIik7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGFyY2hpdmVEaWFsb2coKSB7CiAgICAgIHRoaXMubG9hZGVyPSBmYWxzZQogICAgICB0aGlzLmRlbGV0ZUluc3BlY3Rpb25EaWFsb2cgPSBmYWxzZTsKICAgICAgQXNzZXRNYW5hZ2VtZW50U2VydmljZS5hcmNoaXZlT3JEZWxldGVBc3NldENhdGUodGhpcy5hc3NldFVVSUQsICJhcmNoaXZlZCIpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkNhdGVnb3J5IEFyY2hpdmVkIFN1Y2Nlc3NmdWxseSIsICJzdWNjZXNzIik7CiAgICAgICAgICAgIHRoaXMuYXJjaGl2ZUluc3BlY3Rpb25EaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5sb2FkZXI9IGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvciwgImVycm9yIik7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8gLS0tLS0tLS0tLS0tIEFzc2V0cyBTRFQgRnVuY3Rpb25zIFNUQVJUIC0tLS0tLS0tLS0tLS0tCgogICAgZ2V0QWN0aW9uc09wdGlvbih2YWwpIHsKICAgICAgaWYgKHZhbC52YWx1ZSA9PSAiVmlldyIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogImRldGFpbC1hc3NldC1jYXRlZ29yeSIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIHZpZXdGbGFnOiB0cnVlLAogICAgICAgICAgICBhc3NldENhdGVJRDogdmFsLnJvdy51dWlkLAogICAgICAgICAgICAKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09ICJFZGl0IikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJlZGl0LWFzc2V0LWNhdGVnb3J5IiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBlZGl0RmxhZzogdHJ1ZSwKICAgICAgICAgICAgYXNzZXRDYXRlSUQ6IHZhbC5yb3cudXVpZCwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09ICJBZGQgQXNzZXQiKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogImNyZWF0ZS1hc3NldC1ieS1jYXRlZ29yeSIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgQWRkQnlDYXRlRmxhZzogdHJ1ZSwKICAgICAgICAgICAgYXNzZXRDYXRlSUQ6IHZhbC5yb3cudXVpZCwKICAgICAgICAgICAgc2x1ZzogJ0FkZC1Bc3NldEJ5LUNhdGUnCiAgICAgICAgICB9LAoKICAgICAgICB9KTsKICAgICAgICAKICAgICAgfQogICAgICAgZWxzZSBpZiAodmFsLnZhbHVlID09ICJBcmNoaXZlIikgewogICAgICAgIHRoaXMuYXNzZXRVVUlEID0gdmFsLnJvdy51dWlkOwogICAgICAgIHRoaXMuYXJjaGl2ZUluc3BlY3Rpb25EaWFsb2cgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PSAiRGVsZXRlIikgewogICAgICAgIHRoaXMuYXNzZXRVVUlEID0gdmFsLnJvdy51dWlkOwogICAgICAgIHRoaXMuZGVsZXRlSW5zcGVjdGlvbkRpYWxvZyA9IHRydWU7CiAgICAgIH0KICAgIH0sCgogICAgY29udmVydFRvQ1NWKG9iakFycmF5KSB7CiAgICAgIHZhciBhcnJheSA9IHR5cGVvZiBvYmpBcnJheSAhPSAib2JqZWN0IiA/IEpTT04ucGFyc2Uob2JqQXJyYXkpIDogb2JqQXJyYXk7CiAgICAgIHZhciBzdHIgPSAiIjsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbGluZSA9ICIiOwogICAgICAgIGZvciAodmFyIGluZGV4IGluIGFycmF5W2ldKSB7CiAgICAgICAgICBpZiAobGluZSAhPSAiIikgbGluZSArPSAiLCI7CgogICAgICAgICAgbGluZSArPSBhcnJheVtpXVtpbmRleF07CiAgICAgICAgfQoKICAgICAgICBzdHIgKz0gbGluZSArICJcclxuIjsKICAgICAgfQoKICAgICAgcmV0dXJuIHN0cjsKICAgIH0sCgogICAgZ2V0RG93bmxvYWRBc09wdGlvbihvcHQpIHsKICAgICAgaWYgKG9wdC5yb3dzID09ICIiKSB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIlBsZWFzZSBTZWxlY3QgUmVjb3JkKHMpIiwgIndhcm5pbmciKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAob3B0Lm9wdGlvbiA9PSAicGRmIikgewogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgICAgIC8vIGFkZGluZyBjdXN0b21lciBkZXRhaWxzCiAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICByb3dzOiBvcHQucm93cywKICAgICAgICAgICAgb3B0aW9uOiBvcHQub3B0aW9uLAogICAgICAgICAgICBvcmdhbml6YXRpb25JZDogdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCwKICAgICAgICAgICAgb3JnYW5pemF0aW9uTmFtZTogIkVyb2hhbCIsCiAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuY29sdW1ucywKICAgICAgICAgIH07CgogICAgICAgICAgbGV0IG9iamVjdCA9IG9iai5yb3dzOwogICAgICAgICAgb2JqLnJvd3MgPSBvYmplY3Q7CiAgICAgICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmRvd25sb2FkU2VsZWN0ZWRQREYob2JqKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIGxldCBmaWxlQ29udGVudHMgPSBudWxsOwogICAgICAgICAgICBsZXQgcG9wdXBXaW4gPSBudWxsOwogICAgICAgICAgICBwb3B1cFdpbiA9IHdpbmRvdy5vcGVuKAogICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICJfYmxhbmsiLAogICAgICAgICAgICAgICJ0b3A9MCxsZWZ0PTAsaGVpZ2h0PTcwMCx3aWR0aD0xMDAwOyIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgbGV0IGRvY3VtZW50ID0gewogICAgICAgICAgICAgIGRvY3VtZW50TmFtZTogIkFzc2V0cyIsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGZpbGVDb250ZW50cyA9IHJlcy5kYXRhLnR5cGUgKyByZXMuZGF0YS5jb250ZW50OwogICAgICAgICAgICBwb3B1cFdpbi5kb2N1bWVudC53cml0ZShgCiAgICAgICAgICAgIDxodG1sPgogICAgICAgICAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgICAgICAgPCEtLXRpdGxlPlByaW50IHRhYjwvdGl0bGUtLT4KICAgICAgICAgICAgICAgICAgICA8c3R5bGU+CiAgICAgICAgICAgICAgICAgICAgICAgICNidXR0b25ze2Rpc3BsYXk6bm9uZTt9CiAgICAgICAgICAgICAgICAgICAgICAgICBib2R5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAiT3BlbiBTYW5zIiwgLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBFdWNsaWQgQ2lyY3VsYXIgQiwgIkhlbHZldGljYSBOZXVlIiwgQXJpYWwsIHNhbnMtc2VyaWYsICJBcHBsZSBDb2xvciBFbW9qaSIsICJTZWdvZSBVSSBFbW9qaSIsICJTZWdvZSBVSSBTeW1ib2wiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzIxMjUyOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbiwgbWV0ZXIsIHByb2dyZXNzIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtd3JpdGluZy1tb2RlOiBob3Jpem9udGFsLXRiICFpbXBvcnRhbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QsIGJ1dHRvbiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LXJlbmRlcmluZzogYXV0bzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBpbml0aWFsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQtc3BhY2luZzogbm9ybWFsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWluZGVudDogMHB4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1zaGFkb3c6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBzdGFydDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMGVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDogNDAwIDEzLjMzMzNweCBBcmlhbDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFt0eXBlPSJidXR0b24iIGldLCBpbnB1dFt0eXBlPSJzdWJtaXQiIGldLCBpbnB1dFt0eXBlPSJyZXNldCIgaV0sIGlucHV0W3R5cGU9ImZpbGUiIGldOjotd2Via2l0LWZpbGUtdXBsb2FkLWJ1dHRvbiwgYnV0dG9uIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBkZWZhdWx0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGJ1dHRvbnRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBidXR0b25mYWNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDJweCA2cHggM3B4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiAycHg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItc3R5bGU6IG91dHNldDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogYnV0dG9uZmFjZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1pbWFnZTogaW5pdGlhbDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCwgYnV0dG9uLCBzZWxlY3QsIG9wdGdyb3VwLCB0ZXh0YXJlYSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogaW5oZXJpdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogaW5oZXJpdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiBpbmhlcml0OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbiwgc2VsZWN0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC5idG4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMC4zNzVyZW0gMC43NXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm9yZGVyLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3gtc2hhZG93IDAuMTVzIGVhc2UtaW4tb3V0OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC5idG4tb3V0bGluZS1wcmltYXJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMDA3YmZmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjMDA3YmZmOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC5idG4tb3V0bGluZS1wcmltYXJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjZDAzMjMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2QwMzIzMjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlIHsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGU+LmZhIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IG5vcm1hbCBub3JtYWwgbm9ybWFsIDE0cHgvMSBGb250QXdlc29tZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogaW5oZXJpdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtcmVuZGVyaW5nOiBhdXRvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlOwogICAgICAgICAgICAgICAgICAgICAgICB9PC9zdHlsZT4KICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlPiosICo6OmJlZm9yZSwgKjo6YWZ0ZXIgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBTdHlsZSBBdHRyaWJ1dGUgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC5idG4sIC5mb3JtLWNvbnRyb2wgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMC4yNXJlbSAwLjVyZW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAuM3JlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMTVweDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMjNweDsKICAgICAgICAgICAgICAgICAgICAgICAgfTwvc3R5bGU+CiAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAgICAgICAgIDwvaGVhZD4KICAgICAgICAgICAgICAgIDxib2R5IG9ubG9hZD0iIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyIgPgogICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSIke2ZpbGVDb250ZW50c30iIGRvd25sb2FkPSIke2RvY3VtZW50LmRvY3VtZW50TmFtZX0iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tc20gYnRuLW91dGxpbmUtcHJpbWFyeSI+RG93bmxvYWQ8L2J1dHRvbj48L2E+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgICAgIDxpZnJhbWUgc3JjPScke2ZpbGVDb250ZW50c30nICBzdHlsZT0ibWluLXdpZHRoOiAxMDAlO2hlaWdodDogMTAwJTsiID48L2lmcmFtZT4KICAgICAgICAgICAgICAgIDwvYm9keT4KICAgICAgICAgICAgPC9odG1sPmApOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChvcHQub3B0aW9uID09ICJjc3YiKSB7CiAgICAgICAgICBpZiAodGhpcy5vcHQubGVuZ3RoIDw9IDApIHsKICAgICAgICAgICAgdGhpcy50b2FzdE1lc3NhZ2UgPSAiS2luZGx5IFNlbGVjdCBBc3NldHMgdG8gRXhwb3J0LiI7CiAgICAgICAgICAgIHRoaXMudG9hc3RUeXBlID0gIndhcm5pbmciOwogICAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy50b2FzdEZsYWcrKzsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5leHBvcnRGbGFnID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQpIHsKICAgICAgdmFyIGJpbmFyeVN0cmluZyA9IHdpbmRvdy5hdG9iKGJhc2U2NCk7CiAgICAgIHZhciBiaW5hcnlMZW4gPSBiaW5hcnlTdHJpbmcubGVuZ3RoOwogICAgICB2YXIgYnl0ZXMgPSBuZXcgVWludDhBcnJheShiaW5hcnlMZW4pOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJpbmFyeUxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGFzY2lpID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgYnl0ZXNbaV0gPSBhc2NpaTsKICAgICAgfQogICAgICByZXR1cm4gYnl0ZXM7CiAgICB9LAoKICAgIGV4cG9ydERhdGEodmFsKSB7CiAgICAgIGlmICh2YWwgPT09ICJ0YWJsZSIpIHsKICAgICAgICB0aGlzLnNpbXBsZUV4cG9ydCh0aGlzLm9wdCk7CiAgICAgICAgdGhpcy5leHBvcnRGbGFnID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kb3duTG9hZERldGFpbGVkQ3N2KHRoaXMub3B0KTsKICAgICAgICB0aGlzLmV4cG9ydEZsYWcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICBkb3duTG9hZERldGFpbGVkQ3N2KG9wdCkgewogICAgICBsZXQgYXNzZXRVVUlEUyA9IFtdOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdC5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGFzc2V0ID0gb3B0W2ldOwogICAgICAgIGFzc2V0VVVJRFMucHVzaChhc3NldC51dWlkKTsKICAgICAgfQoKICAgICAgbGV0IHJlcXVlc3QgPSB7CiAgICAgICAgYXNzZXRVVUlEUzogYXNzZXRVVUlEUywKICAgICAgICB0ZW5hbnRVVUlEOiB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgICB9OwogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmV4cG9ydEFzc2V0c0luQnVsayhyZXF1ZXN0KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDAgJiYgcmVzLmRhdGEucmVzcG9uc2VJZGVudGlmaWVyID09PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBzYW1wbGVBcnJheSA9IHRoaXMuYmFzZTY0VG9BcnJheUJ1ZmZlcihyZXMuZGF0YS5jb250ZW50KTsKICAgICAgICAgICAgbGV0IGZpbGVVcmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCgKICAgICAgICAgICAgICBuZXcgQmxvYihbc2FtcGxlQXJyYXldLCB7IHR5cGU6ICJ0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04OyIgfSkKICAgICAgICAgICAgKTsKICAgICAgICAgICAgdmFyIGZpbGVMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgICBmaWxlTGluay5ocmVmID0gZmlsZVVybDsKICAgICAgICAgICAgZmlsZUxpbmsuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsIHJlcy5kYXRhLmZpbGVOYW1lKTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmaWxlTGluayk7CiAgICAgICAgICAgIGZpbGVMaW5rLmNsaWNrKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KAogICAgICAgICAgICAiQW4gVW5leHBlY3RlZCBFcnJvciBvY2N1cnJlZCB3aGlsZSBkb3dubG9hZGluZyBpbXBvcnQgdGVtcGxhdGVzLiIsCiAgICAgICAgICAgICJlcnJvciIKICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIHNpbXBsZUV4cG9ydChvcHQpIHsKICAgICAgbGV0IGZpbGVUaXRsZSA9ICJBc3NldHMiOwogICAgICBsZXQgaGVhZGVycyA9IHsKICAgICAgICAvLyBjcmVhdGVkRGF0ZTogJ1JlcXVlc3RlZCBPbicucmVwbGFjZSgvLC9nLCAnJyksIC8vIHJlbW92ZSBjb21tYXMgdG8gYXZvaWQgZXJyb3JzCiAgICAgICAgYXNzZXROdW1iZXI6ICJBc3NldCBOdW1iZXIiLAogICAgICAgIG5hbWU6ICJOYW1lIiwKICAgICAgICBjYXRlZ29yeTogIkNhdGVnb3J5IiwKICAgICAgICBhc3NpZ25lZXM6ICJBc3NpZ25lZCBUbyIsCiAgICAgICAgc3RhdHVzOiAiU3RhdHVzIiwKICAgICAgICBjb3N0OiAiTWFpbnRhaW5lbmNlIENvc3QiICsgIiAoIiArIHRoaXMuY3VycmVuY3kgKyAiKSIsCiAgICAgICAgb3Blbklzc3VlczogIk9wZW4gSXNzdWVzIiwKICAgICAgICBhc3NpZ25lZElzc3VlczogIkFzc2lnbmVkIElzc3VlcyIsCiAgICAgICAgcmVwYWlyczogIlJlcGFpcnMiLAogICAgICAgIHdvcmtPcmRlcnM6ICJXb3JrIE9yZGVycyIsCiAgICAgIH07CiAgICAgIGxldCBkYXRhT2JqID0gW107CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYXNzZXQgPSBvcHRbaV07CiAgICAgICAgZGF0YU9iai5wdXNoKHsKICAgICAgICAgIGFzc2V0TnVtYmVyOgogICAgICAgICAgICBhc3NldC5hc3NldE51bWJlciAhPT0gbnVsbCAmJiBhc3NldC5hc3NldE51bWJlciAhPT0gIiIKICAgICAgICAgICAgICA/IGFzc2V0LmFzc2V0TnVtYmVyCiAgICAgICAgICAgICAgOiAiIiwKICAgICAgICAgIG5hbWU6IGFzc2V0Lm5hbWUgIT09IG51bGwgJiYgYXNzZXQubmFtZSAhPT0gIiIgPyBhc3NldC5uYW1lIDogIiIsCiAgICAgICAgICBjYXRlZ29yeToKICAgICAgICAgICAgYXNzZXQuY2F0ZWdvcnlOYW1lICE9PSBudWxsICYmIGFzc2V0LmNhdGVnb3J5TmFtZSAhPT0gIiIKICAgICAgICAgICAgICA/IGFzc2V0LmNhdGVnb3J5TmFtZQogICAgICAgICAgICAgIDogIiIsCiAgICAgICAgICBhc3NpZ25lZXM6CiAgICAgICAgICAgIGFzc2V0LmFzc2lnbmVkVG8gIT09IG51bGwgJiYgYXNzZXQuYXNzaWduZWRUbyAhPT0gIiIKICAgICAgICAgICAgICA/IGFzc2V0LmFzc2lnbmVkVG8ucmVwbGFjZSgvLC9nLCAiICIpCiAgICAgICAgICAgICAgOiAiIiwKICAgICAgICAgIHN0YXR1czoKICAgICAgICAgICAgYXNzZXQuc3RhdHVzICE9PSBudWxsICYmIGFzc2V0LnN0YXR1cyAhPT0gIiIgPyBhc3NldC5zdGF0dXMgOiAiIiwKICAgICAgICAgIGNvc3Q6CiAgICAgICAgICAgIGFzc2V0Lm1haW50ZW5hbmNlQ29zdCAhPT0gbnVsbCAmJiBhc3NldC5tYWludGVuYW5jZUNvc3QgIT09ICIiCiAgICAgICAgICAgICAgPyBhc3NldC5tYWludGVuYW5jZUNvc3QKICAgICAgICAgICAgICA6IDAsCiAgICAgICAgICBvcGVuSXNzdWVzOgogICAgICAgICAgICBhc3NldC5vcGVuSXNzdWVzICE9PSBudWxsICYmIGFzc2V0Lm9wZW5Jc3N1ZXMgIT09ICIiCiAgICAgICAgICAgICAgPyBhc3NldC5vcGVuSXNzdWVzCiAgICAgICAgICAgICAgOiAwLAogICAgICAgICAgYXNzaWduZWRJc3N1ZXM6CiAgICAgICAgICAgIGFzc2V0LmFzc2lnbmVkSXNzdWVzICE9PSBudWxsICYmIGFzc2V0LmFzc2lnbmVkSXNzdWVzICE9PSAiIgogICAgICAgICAgICAgID8gYXNzZXQuYXNzaWduZWRJc3N1ZXMKICAgICAgICAgICAgICA6IDAsCiAgICAgICAgICByZXBhaXJzOgogICAgICAgICAgICBhc3NldC5yZXBhaXJzICE9PSBudWxsICYmIGFzc2V0LnJlcGFpcnMgIT09ICIiID8gYXNzZXQucmVwYWlycyA6IDAsCiAgICAgICAgICB3b3JrT3JkZXJzOgogICAgICAgICAgICBhc3NldC53b3Jrb3JkZXJzICE9PSBudWxsICYmIGFzc2V0LndvcmtvcmRlcnMgIT09ICIiCiAgICAgICAgICAgICAgPyBhc3NldC53b3Jrb3JkZXJzCiAgICAgICAgICAgICAgOiAwLAogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuZXhwb3J0Q1NWRmlsZShoZWFkZXJzLCBkYXRhT2JqLCBmaWxlVGl0bGUpOwogICAgfSwKCiAgICBleHBvcnRDU1ZGaWxlKGhlYWRlcnMsIGFzc2V0RGF0YSwgZmlsZVRpdGxlKSB7CiAgICAgIGlmIChoZWFkZXJzKSB7CiAgICAgICAgYXNzZXREYXRhLnVuc2hpZnQoaGVhZGVycyk7CiAgICAgIH0KCiAgICAgIC8vIENvbnZlcnQgT2JqZWN0IHRvIEpTT04KICAgICAgdmFyIGpzb25PYmplY3QgPSBKU09OLnN0cmluZ2lmeShhc3NldERhdGEpOwoKICAgICAgdmFyIGNzdiA9IHRoaXMuY29udmVydFRvQ1NWKGpzb25PYmplY3QpOwoKICAgICAgdmFyIGV4cG9ydGVkRmlsZW5tYWUgPSBmaWxlVGl0bGUgKyAiLmNzdiIgfHwgImV4cG9ydC5jc3YiOwoKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbY3N2XSwgeyB0eXBlOiAidGV4dC9jc3Y7Y2hhcnNldD11dGYtODsiIH0pOwogICAgICBpZiAobmF2aWdhdG9yLm1zU2F2ZUJsb2IpIHsKICAgICAgICAvLyBJRSAxMCsKICAgICAgICBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBleHBvcnRlZEZpbGVubWFlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICBpZiAobGluay5kb3dubG9hZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvLyBmZWF0dXJlIGRldGVjdGlvbgogICAgICAgICAgLy8gQnJvd3NlcnMgdGhhdCBzdXBwb3J0IEhUTUw1IGRvd25sb2FkIGF0dHJpYnV0ZQogICAgICAgICAgdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHVybCk7CiAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBleHBvcnRlZEZpbGVubWFlKTsKICAgICAgICAgIGxpbmsuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIHNldFRhYmxlQ29uZmlncygpIHsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuZGVuc2l0eSA9CiAgICAgICAgdGhpcy50YWJsZUNvbmZpZy5kZW5zaXR5OwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5wYWdlU2l6ZSA9CiAgICAgICAgdGhpcy50YWJsZUNvbmZpZy5wYWdlU2l6ZTsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUucGFnZU5hbWUgPQogICAgICAgIHRoaXMudGFibGVDb25maWcucGFnZU5hbWU7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnNvcnRGaWVsZCA9CiAgICAgICAgdGhpcy50YWJsZUNvbmZpZy5zb3J0RmllbGQ7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnNvcnREaXJlY3Rpb24gPQogICAgICAgIHRoaXMudGFibGVDb25maWcuc29ydERpcmVjdGlvbjsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuY29sdW1ucyA9CiAgICAgICAgdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zOwogICAgfSwKCiAgICBleHRyYWN0RmllbGROYW1lc0ZvclNlYXJjaFF1ZXJ5KGNvbmZpZykgewogICAgICBmb3IgKGxldCBjb2x1bW4gb2YgY29uZmlnLmNvbHVtbnMpIHsKICAgICAgICB0aGlzLmZpZWxkTmFtZXMucHVzaChjb2x1bW4uZmllbGROYW1lKTsKICAgICAgICB0aGlzLmNvbHVtbnMucHVzaChjb2x1bW4ubGFiZWxOYW1lKTsKICAgICAgfQogICAgfSwKCiAgICBjYXRjaERlcGFydHVyZTogZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgdGhpcy5zZHREYXRhID0gZGF0YTsKICAgICAgaWYgKGRhdGEuc3RhdHVzID09IDEgfHwgZGF0YS5zdGF0dXMgPT0gMykgewogICAgICAgIHRoaXMubG9hZFRhYmxlKGRhdGEpOwogICAgICB9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDQpIHsKICAgICAgICB0aGlzLmxvYWRUYWJsZShkYXRhKTsKICAgICAgfSAKCiAgICB9LAoKICAgIGxvYWRUYWJsZShzZHREYXRhKSB7CiAgICAgIGxldCBmaWx0ZXJzID0gW107CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIGZvciAobGV0IHNkdF9kYXRhIG9mIHNkdERhdGEubWVzc2FnZSkgewogICAgICAgIGlmIChzZHRfZGF0YS5maWVsZE5hbWUgIT09ICJhY3Rpb25zIikgewogICAgICAgICAgbGV0IG5ld0RhdGUgPSAiIjsKICAgICAgICAgIGlmIChzZHRfZGF0YS5maWVsZFR5cGUgPT09ICJkYXRlIiAmJiBzZHRfZGF0YS5maWx0ZXJWYWx1ZSAhPT0gIiIpIHsKICAgICAgICAgICAgbGV0IGRhdGUgPSBzZHRfZGF0YS5maWx0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBkYXRlID0gZGF0ZS5zcGxpdCgiLyIpOwogICAgICAgICAgICBuZXdEYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVsxXX0vJHtkYXRlWzBdfS8ke2RhdGVbMl19YCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc2R0X2RhdGEuZmlsdGVyVmFsdWUgPT09IG51bGwpIHsKICAgICAgICAgICAgc2R0X2RhdGEuZmlsdGVyVmFsdWUgPSAiIjsKICAgICAgICAgIH0KICAgICAgICAgIGZpbHRlcnMucHVzaCh7CiAgICAgICAgICAgIGZpZWxkTmFtZTogc2R0X2RhdGEuZmllbGROYW1lLAogICAgICAgICAgICBmaWVsZFR5cGU6IHNkdF9kYXRhLmZpZWxkVHlwZSwKICAgICAgICAgICAgZmlsdGVyVmFsdWU6CiAgICAgICAgICAgICAgbmV3RGF0ZSA9PT0gbnVsbCB8fCBuZXdEYXRlID09PSAiIgogICAgICAgICAgICAgICAgPyBzZHRfZGF0YS5maWx0ZXJWYWx1ZQogICAgICAgICAgICAgICAgOiBuZXdEYXRlLmdldFRpbWUoKSwKICAgICAgICAgICAgc2Vjb25kVmFsdWU6IHNkdF9kYXRhLnNlY29uZFZhbHVlLAogICAgICAgICAgICBjb21wYXJpc29uVHlwZTogc2R0X2RhdGEuY29tcGFyaXNvblR5cGUsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5nZXRQYWdpbmF0ZWRBc3NldHMoCiAgICAgICAgZmlsdGVycywKICAgICAgICBzZHREYXRhLmRhdGEuc29ydEZpZWxkLAogICAgICAgIHNkdERhdGEuZGF0YS5zb3J0RGlyZWN0aW9uLAogICAgICAgIHNkdERhdGEuZGF0YS5vZmZzZXQsCiAgICAgICAgc2R0RGF0YS5kYXRhLmxpbWl0LAogICAgICAgIHNkdERhdGEuZGF0YS5zZWFyY2hRdWVyeQogICAgICApOwogICAgfSwKCiAgICBsb2FkU0RUKHJlc3BvbnNlLCBkYXRhKSB7CiAgICAgIHRoaXMucGFyZW50RGF0YSA9IGRhdGE7CiAgICAgIGxldCBldmVudERhdGEgPSB7CiAgICAgICAgZGF0YTogdGhpcy5wYXJlbnREYXRhLAogICAgICAgIHRvdGFsRWxlbWVudHM6IHJlc3BvbnNlLmRhdGEuc2R0RGF0YS50b3RhbEVsZW1lbnRzLAogICAgICAgIHRvdGFsUGFnZXM6IHJlc3BvbnNlLmRhdGEuc2R0RGF0YS50b3RhbFBhZ2VzLAogICAgICAgIHBhZ2VOdW1iZXI6IHJlc3BvbnNlLmRhdGEub2Zmc2V0LAogICAgICB9OwogICAgICB0aGlzLiRyZWZzLnRlc3QuZGF0YUxvYWRFdmVudChldmVudERhdGEpOwogICAgfSwKCiAgICBnZXRQYWdpbmF0ZWRBc3NldHMoCiAgICAgIGZpbHRlcnMsCiAgICAgIHNvcnRGaWVsZCwKICAgICAgc29ydERpcmVjdGlvbiwKICAgICAgb2Zmc2V0LAogICAgICBsaW1pdCwKICAgICAgc2VhcmNoUXVlcnkKICAgICkgewogICAgICBsZXQgY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZSgKICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKICAgICAgKTsKCiAgICAgIGxldCByZXF1ZXN0T2JqID0gewogICAgICAgIGZpbHRlcnM6IGZpbHRlcnMsCiAgICAgICAgc29ydEZpZWxkOiBzb3J0RmllbGQsCiAgICAgICAgc29ydERpcmVjdGlvbjogc29ydERpcmVjdGlvbiwKICAgICAgICBvZmZzZXQ6IG9mZnNldCwKICAgICAgICBsaW1pdDogbGltaXQsCiAgICAgICAgdGVuYW50VVVJRDogY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQsCiAgICAgICAgc2VhcmNoUXVlcnk6IHNlYXJjaFF1ZXJ5LAogICAgICAgIGZpZWxkTmFtZXM6IHRoaXMuZmllbGROYW1lcywKICAgICAgICBhcmNoaXZlZDogZmFsc2UsCiAgICAgIH07CiAgICAgIC8vIGxldCByZXEgPSB7CiAgICAgIC8vICAgc2VhcmNoUXVlcnk6IG51bGwsCiAgICAgIC8vICAgZmlsdGVyczogW10sCiAgICAgIC8vICAgc29ydEZpZWxkOiAiaWQiLAogICAgICAvLyAgIHNvcnREaXJlY3Rpb246ICJkZXNjIiwKICAgICAgLy8gICBvZmZzZXQ6IDAsCiAgICAgIC8vICAgbGltaXQ6IDEwLAogICAgICAvLyAgIHRlbmFudFVVSUQ6ICJURVNULU9SRyIsCiAgICAgIC8vICAgYXJjaGl2ZWQ6IGZhbHNlLAogICAgICAvLyB9OwogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldFBhZ2luYXRlZEFzc2V0Q2F0ZShyZXF1ZXN0T2JqKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuc2R0RGF0YS5jb250ZW50Lm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICAgIGl0ZW0uY3JlYXRlZEF0ID0gbW9tZW50CiAgICAgICAgICAgICAgICAudXRjKGl0ZW0uY3JlYXRlZEF0KQogICAgICAgICAgICAgICAgLmxvY2FsKCkKICAgICAgICAgICAgICAgIC5mb3JtYXQoJ0REL01NL1lZWVkgaGg6bW0gYScpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5vZmZzZXQgPSBvZmZzZXQgKyAxOwogICAgICAgICAgICB0aGlzLmxvYWRTRFQocmVzcG9uc2UsIHJlc3BvbnNlLmRhdGEuc2R0RGF0YS5jb250ZW50KTsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgKICAgICAgICAgICAgICAiRXJyb3Igd2hpbGUgZ2V0dGluZyBhc3NldHMuIFBsZWFzZSB0cnkgYWdhaW4iLAogICAgICAgICAgICAgICJlcnJvciIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNikgewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5yZXNwb25zZS5kYXRhLmRlc2NyaXB0aW9uLCAiZXJyb3IiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHRoaXMuc2hvd1RvYXN0KCJPb3BzIGl0cyBsb29rIGxpa2Ugb3VyIHNlcnZlciBpcyBvZmZsaW5lIik7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgIT09IHVuZGVmaW5lZCAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNikgewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5yZXNwb25zZS5kYXRhLmRlc2NyaXB0aW9uLCAiZXJyb3IiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgc2V0U3RhdGljQ29sdW1uKCkgewogICAgICBsZXQgc3RhdGljQ29sID0gdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zLmZpbHRlcigKICAgICAgICAoY29sKSA9PiBjb2wubGFiZWxOYW1lID09ICJOYW1lIgogICAgICApWzBdOwogICAgICB0aGlzLnBhcmVudFN5c3RlbVNldHRpbmdzLnN0YXRpY0NvbHVtbnMucHVzaChzdGF0aWNDb2wpOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnNbaV0ubGFiZWxOYW1lID09IHN0YXRpY0NvbC5sYWJlbE5hbWUpIHsKICAgICAgICAgIHRoaXMudGFibGVDb25maWcuY29sdW1ucy5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIC0tLS0tLS0tLS0tLUFzc2V0cyBTRFQgRnVuY3Rpb25zIEVORCAtLS0tLS0tLS0tLS0tLQoKICAgIGFzc2V0RGlhbG9nKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJjcmVhdGUtYXNzZXQiIH0pOwogICAgfSwKCiAgICBhc3NldEdyb3VwRGlhbG9nKCkgewogICAgICB0aGlzLnZpZXdBc3NldEdyb3VwRGlhbG9nID0gdHJ1ZTsKICAgIH0sCgogICAgc2VsZWN0QXNzZXRUeXBlKG9iaikgewogICAgICB0aGlzLmFzc2V0T3B0aW9uID0gb2JqLnZhbHVlOwogICAgfSwKCiAgICBjbG9zZUFzc2V0R3JvdXBEaWFsb2coKSB7CiAgICAgIHRoaXMudmlld0Fzc2V0R3JvdXBEaWFsb2cgPSBmYWxzZTsKICAgIH0sCgogICAgc2F2ZVNlcnZpY2VSZXF1ZXN0RGlhbG9nKCkgewogICAgICB0aGlzLmFkZFNlcnZpY2VEaWFsb2cgPSBmYWxzZTsKICAgIH0sCgogICAgY2xvc2VTZXJ2aWNlRGlhbG9nKCkgewogICAgICB0aGlzLmFkZFNlcnZpY2VEaWFsb2cgPSBmYWxzZTsKICAgIH0sCgogICAgY2xvc2VJc3N1ZURpYWxvZygpIHsKICAgICAgdGhpcy5uZXdJc3N1ZSA9IGZhbHNlOwogICAgfSwKCiAgICBzaG93VG9hc3QobWVzc2FnZSwgdHlwZSkgewogICAgICB0aGlzLnRvYXN0TWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgIHRoaXMudG9hc3RUeXBlID0gdHlwZTsKICAgICAgdGhpcy50b2FzdEZsYWcrKzsKICAgICAgdGhpcy5jbG9zZUlzc3VlRGlhbG9nKCk7CiAgICB9LAogIH0sCgogIHdhdGNoOiB7CiAgICBhc3NldE9wdGlvbjogZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChuZXdWYWwgPT09ICJhc3NldC1ncm91cCIpIHsKICAgICAgICAvLyBsZXQgYWxsQ29uZmlncyA9IEpTT04ucGFyc2UodGhpcy5vcmdDb25maWdzUmVzcG9uc2UuZGF0YS50YWJsZUNvbmZpZ3MpOwogICAgICAgIC8vIGFsbENvbmZpZ3MgPSBhbGxDb25maWdzLmZpbHRlcigKICAgICAgICAvLyAgIChkYXRhKSA9PiBkYXRhLnBhZ2VOYW1lID09PSAiYXNzZXRncm91cHMiCiAgICAgICAgLy8gKVswXTsKICAgICAgICAvLyB0aGlzLmFzc2V0R3JvdXBDb25maWdzID0gYWxsQ29uZmlnczsKICAgICAgICBjb25zb2xlLmxvZygiYXNzZXQtZ3JvdXAiKTsKICAgICAgfSBlbHNlIGlmIChuZXdWYWwgPT09ICJhcmNoaXZlZEFzc2V0cyIpIHsKICAgICAgICBsZXQgYWxsQ29uZmlncyA9IEpTT04ucGFyc2UodGhpcy5vcmdDb25maWdzUmVzcG9uc2UuZGF0YS50YWJsZUNvbmZpZ3MpOwogICAgICAgIGFsbENvbmZpZ3MgPSBhbGxDb25maWdzLmZpbHRlcigKICAgICAgICAgIChkYXRhKSA9PiBkYXRhLnBhZ2VOYW1lID09PSAiYXNzZXRDYXRlZ29yeVRlbXBsYXRlcyIKICAgICAgICApWzBdOwogICAgICAgIHRoaXMuYXJjaGl2ZWRBc3NldHNDb25maWdzID0gYWxsQ29uZmlnczsKICAgICAgfQogICAgfSwKICB9LAoKICBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy50b2FzdEZsYWcgPT09IHRydWUpIHsKICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLnRvYXNzdE1lc3NhZ2UsCiAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLnRvYXN0VHlwZQogICAgICApOwogICAgfQogICAgZG9jdW1lbnQudGl0bGUgPSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlOwogICAgdGhpcy5jdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKAogICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKICAgICk7CgogICAgLy8gc2VuZGluZyBvbmx5IGZpcnN0IGFuZCBsYXN0IG5hbWUgZm9yIFNEVAogICAgbGV0IG5hbWUgPSB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLnVzZXJuYW1lOwogICAgaWYgKG5hbWUuaW5jbHVkZXMoIkAiKSkgewogICAgICBuYW1lID0gbmFtZS5zcGxpdCgiQCIpOwogICAgICBuYW1lID0gbmFtZVswXTsKICAgIH0KICAgIHRoaXMucGFyZW50U3lzdGVtU2V0dGluZ3MudXNlciA9IG5hbWU7CgogICAgbGV0IHV1aWQgPSB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkOwogICAgYXNzZXRQZXJzb25uZWxTZXJ2aWNlCiAgICAgIC5nZXRDb21wYW55Q3VycmVuY3kodXVpZCkKICAgICAgLnRoZW4oKGN1cnJlbmN5UmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmN1cnJlbmN5ID0gY3VycmVuY3lSZXNwb25zZS5kYXRhLmN1cnJlbmN5OwogICAgICAgIGFzc2V0UGVyc29ubmVsU2VydmljZQogICAgICAgICAgLmdldE9yZ0NvbmZpZ3ModXVpZCwgInRhYmxlQ29uZmlncyIpCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgdGhpcy5vcmdDb25maWdzUmVzcG9uc2UgPSByZXNwb25zZTsKICAgICAgICAgICAgbGV0IGFsbENvbmZpZ3MgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEudGFibGVDb25maWdzKTsKCiAgICAgICAgICAgIGFsbENvbmZpZ3MgPSBhbGxDb25maWdzLmZpbHRlcigKICAgICAgICAgICAgICAoZGF0YSkgPT4gZGF0YS5wYWdlTmFtZSA9PT0gImFzc2V0Q2F0ZWdvcnlUZW1wbGF0ZXMiCiAgICAgICAgICAgIClbMF07CiAgICAgICAgICAgIHRoaXMudGFibGVDb25maWcgPSBhbGxDb25maWdzOwogICAgICAgICAgICB0aGlzLmV4dHJhY3RGaWVsZE5hbWVzRm9yU2VhcmNoUXVlcnkodGhpcy50YWJsZUNvbmZpZyk7CiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGljQ29sdW1uKCk7CiAgICAgICAgICAgIHRoaXMuc2V0VGFibGVDb25maWdzKCk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiRXJyb3IgZmV0Y2hpbmcgY29uZmlncyIsICJlcnJvciIpOwogICAgICAgICAgfSk7CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiRXJyb3IgZmV0Y2hpbmcgY29tcGFueSBjdXJyZW5jeSIsICJlcnJvciIpOwogICAgICB9KTsKICB9LAoKICB2YWxpZGF0aW9uczogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHt9OwogIH0sCgogIGNvbXB1dGVkOiB7fSwKfTsK"},null]}