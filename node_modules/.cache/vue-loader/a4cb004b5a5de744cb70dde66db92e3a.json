{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/assets/components/ExistingTemplates.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/assets/components/ExistingTemplates.vue","mtime":1661968702428},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":1662622637719},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1662622639723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDcmVhdGVJbXBvcnRUZW1wbGF0ZSBmcm9tICIuLi9jb21wb25lbnRzL0NyZWF0ZVRlbXBsYXRlRGlhbG9nLnZ1ZSI7CmltcG9ydCBhc3NldFBlcnNvbm5lbFNlcnZpY2UgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvQXNzZXRQZXJzb25uZWxTZXJ2aWNlIjsKaW1wb3J0IGFzc2V0TWFuYWdlbWVudFNlcnZpY2UgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvQXNzZXRNYW5hZ2VtZW50U2VydmljZSI7CmltcG9ydCBFbmRwb2ludHMgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvRW5kUG9pbnRzIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwoKaW1wb3J0IGxvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvTG9hZGVyLnZ1ZSIKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJFeGlzdGluZ1RlbXBsYXRlcyIsCgogIGNvbXBvbmVudHM6IHsgQ3JlYXRlSW1wb3J0VGVtcGxhdGUsIGxvYWRlciB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgb3BlbkFkZFBvcFVwOiBmYWxzZSwKICAgICAgbG9hZGVyRmxhZzogZmFsc2UsCiAgICAgIHVzZXI6ICIiLAogICAgICB1c2VybmFtZTogIiIsCiAgICAgIHByb21wdDogZmFsc2UsCiAgICAgIHByb21wdFZpZXdOYW1lOiAiIiwKICAgICAgc2VydmVyRGF0YTogIiIsCiAgICAgIGZpbHRlckZpZWxkTGlzdDogW10sCiAgICAgIGV2ZW50RGF0YTogIiIsCiAgICAgIHRlbXBsYXRlSWQ6ICIiLAogICAgICAvLyAtLS0tLS0tLS0tLS0tIFNEVCBEYXRhIFNUQVJUIC0tLS0tLS0tLS0tLS0tLS0KICAgICAgc2R0X3Rva2VuOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKSkKICAgICAgICAuYWNjZXNzX3Rva2VuLAogICAgICBwYXJlbnRTeXN0ZW1TZXR0aW5nczogewogICAgICAgIHNlcnZpY2VVUkw6IEVuZHBvaW50cy5wcmVmZXJlbmNlU2VydmljZS5wcmVmZXJlbmNlLAogICAgICAgIC8vIHNlcnZpY2VVUkw6ICdodHRwOi8vbG9jYWxob3N0OjgwOTkvcHJlZmVyZW5jZXMnLAogICAgICAgIGJ1dHRvbnM6IFtdLAogICAgICAgIHNlYXJjaFZhbHVlOiAiIiwKICAgICAgICBoZWlnaHQ6ICI5NTBweCIsCiAgICAgICAgc2VsZWN0aW9uQ29sdW1uOiBmYWxzZSwKICAgICAgICBzZWxlY3RUeXBlOiAibm9uZSIsCiAgICAgICAgbW9yZU9wdGlvbnM6IFtdLAogICAgICAgIGFjdGlvbnNPcHRpb25zOiBbIlZpZXciLCAiRG93bmxvYWQiXSwKICAgICAgICBjb2x1bW5JY29uczogW10sCiAgICAgICAgcGlsbENvbmZpZzogWwogICAgICAgICAgeyBjb2x1bW46ICIiLCBzdGF0ZTogInN1Y2Nlc3MiLCBkYXRhOiAiIiB9LAogICAgICAgICAgeyBjb2x1bW46ICIiLCBzdGF0ZTogImVycm9yIiwgZGF0YTogIiIgfSwKICAgICAgICAgIHsgY29sdW1uOiAiIiwgc3RhdGU6ICJub3JtYWwiLCBkYXRhOiAiIiB9LAogICAgICAgIF0sCiAgICAgICAgc3RhdGljQ29sdW1uczogW10sCiAgICAgICAgdXNlcjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpLnByb2ZpbGUKICAgICAgICAgIC51c2VybmFtZSwKICAgICAgICB1cHBlcmNhc2VDb2x1bW5zOiBbXSwgLy8gcGFzcyBjb2x1bW4gbmFtZSB3aG9zZSBkYXRhIHNob3VsZCBiZSBzaG93biBpbiBjYXBzCiAgICAgICAgZGF0ZUZvcm1hdDogIkREL01NL3l5eXkgaGg6bW0gYSIsIC8vcGFzcyBhbnkgbW9tZW50IGRhdGUgZm9ybWF0IGhlcmUKICAgICAgfSwKICAgICAgcGFyZW50RGVmYXVsdFN5c3RlbVZpZXc6IHsKICAgICAgICB2aWV3TmFtZXM6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIkRlZmF1bHQgVmlldyIsCiAgICAgICAgICAgIHRpbGVGbGFnOiB0cnVlLAoKICAgICAgICAgICAgcG9zaXRpb246IDEsCiAgICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJBZGQgQSBWaWV3IFRpbGUiLAogICAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKCiAgICAgICAgICAgIHBvc2l0aW9uOiAwLAogICAgICAgICAgICBwcml2YWN5OiAicHJpdmF0ZSIsCiAgICAgICAgICB9LAogICAgICAgIF0sCgogICAgICAgIGRlZmF1bHRUYWJsZTogewogICAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgICB2aWV3TmFtZTogIkRlZmF1bHQgVmlldyIsCiAgICAgICAgICBkZW5zaXR5OiAiIiwKICAgICAgICAgIHBhZ2VTaXplOiAiIiwKICAgICAgICAgIHBhZ2VOYW1lOiAiIiwKICAgICAgICAgIHVzZXI6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKS5wcm9maWxlCiAgICAgICAgICAgIC51c2VybmFtZSwKICAgICAgICAgIGRlZmF1bHRWaWV3RmxhZzogdHJ1ZSwKICAgICAgICAgIHNvcnRGaWVsZDogIiIsCiAgICAgICAgICBzb3J0RGlyZWN0aW9uOiAiZGF0ZUNyZWF0ZWQiLAogICAgICAgICAgdGlsZUZsYWc6IHRydWUsCiAgICAgICAgICBjb2x1bW5zOiBbXSwKICAgICAgICAgIHBvc2l0aW9uOiAxLCAvLyBhbHdheXMgcGFzcyAxCiAgICAgICAgICBwcml2YWN5OiAicHJpdmF0ZSIsCiAgICAgICAgfSwKICAgICAgfSwKICAgICAgcGFyZW50RGF0YTogW10sCgogICAgICBmaWx0ZXJDb3VudDogIiIsCiAgICAgIGZpZWxkTmFtZXM6W10sCiAgICAgIC8vIC0tLS0tLS0tLS0tLS0gU0RUIERhdGEgRU5EIC0tLS0tLS0tLS0tLS0tLS0KCiAgICAgIHZpZXdUZW1wbGF0ZURpYWxvZzogZmFsc2UsCiAgICAgIHRvYXN0RmxhZzogMCwKICAgICAgdG9hc3RNZXNzYWdlOiAiIiwKICAgICAgdG9hc3RUeXBlOiAiIiwKICAgICAgdmlldzogdHJ1ZSwKICAgICAgdGVtcGxhdGVEYXRhOiBbXSwKICAgICAgZG93bmxvYWRUZW1wbGF0ZTogIiIsCiAgICB9OwogIH0sCiAgcHJvcHM6IHt9LAoKICBtZXRob2RzOiB7CiAgICB2aWV3VGVtcGxhdGUoKSB7CiAgICAgIHRoaXMudmlld1RlbXBsYXRlRGlhbG9nID0gdHJ1ZTsKICAgIH0sCgogICAgY2xvc2VUZW1wbGF0ZURpYWxvZygpIHsKICAgICAgdGhpcy52aWV3VGVtcGxhdGVEaWFsb2cgPSBmYWxzZTsKICAgIH0sCgogICAgLy8gLS0tLS0tLS0tLS0tIFNEVCBGdW5jdGlvbnMgU1RBUlQgLS0tLS0tLS0tLS0tLS0KCiAgICBnZXRBY3Rpb25zT3B0aW9uKHZhbCkgewogICAgICBpZiAodmFsLnZhbHVlID09ICJWaWV3IikgewogICAgICAgIHRoaXMudGVtcGxhdGVEYXRhID0gdmFsLnJvdzsKICAgICAgICB0aGlzLnZpZXdUZW1wbGF0ZSgpOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PSAiRG93bmxvYWQiKSB7CiAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgICB0aGlzLmNyZWF0ZURvd25sb2FkVGVtcGxhdGUoSlNPTi5wYXJzZSh2YWwucm93LmNzdkNvbHVtbkRhdGEpKTsKICAgICAgICBsZXQgZG93bmxvYWQgPSB7CiAgICAgICAgICBjb2x1bW5zRGF0YTogdGhpcy5kb3dubG9hZFRlbXBsYXRlLAogICAgICAgICAgdGVtcGxhdGVOYW1lOiB2YWwucm93LnRlbXBsYXRlTmFtZSwKICAgICAgICB9OwogICAgICAgIHRoaXMuZG93bmxvYWRBc3NldFRlbXBsYXRlKGRvd25sb2FkKTsKICAgICAgfQogICAgfSwKCiAgICBjcmVhdGVEb3dubG9hZFRlbXBsYXRlKGNzdkNvbHVtbkRhdGEpIHsKICAgICAgdGhpcy5kb3dubG9hZFRlbXBsYXRlID0gIiI7CiAgICAgIGxldCBpID0gMDsKICAgICAgY3N2Q29sdW1uRGF0YS5tYXAoKGRhdGEpID0+IHsKICAgICAgICB0aGlzLmRvd25sb2FkVGVtcGxhdGUgPQogICAgICAgICAgdGhpcy5kb3dubG9hZFRlbXBsYXRlICsKICAgICAgICAgIGRhdGEubmFtZSArCiAgICAgICAgICAoY3N2Q29sdW1uRGF0YVtpICsgMV0gIT09IHVuZGVmaW5lZCA/ICIsIiA6ICIiKTsKICAgICAgICBpICs9IDE7CiAgICAgIH0pOwogICAgfSwKCiAgICBkb3dubG9hZEFzc2V0VGVtcGxhdGUoZG93bmxvYWRSZXF1ZXN0KSB7CiAgICAgIGFzc2V0TWFuYWdlbWVudFNlcnZpY2UKICAgICAgICAuZG93bmxvYWRBc3NldEltcG9ydFRlbXBsYXRlKGRvd25sb2FkUmVxdWVzdCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhLnJlc3BvbnNlSWRlbnRpZmllciA9PT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgICB2YXIgc2FtcGxlQXJyYXkgPSB0aGlzLmJhc2U2NFRvQXJyYXlCdWZmZXIocmVzLmRhdGEuY29udGVudCk7CiAgICAgICAgICAgIGxldCBmaWxlVXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoCiAgICAgICAgICAgICAgbmV3IEJsb2IoW3NhbXBsZUFycmF5XSwgeyB0eXBlOiAidGV4dC9jc3Y7Y2hhcnNldD11dGYtODsiIH0pCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHZhciBmaWxlTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgZmlsZUxpbmsuaHJlZiA9IGZpbGVVcmw7CiAgICAgICAgICAgIGZpbGVMaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCByZXMuZGF0YS5maWxlTmFtZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZmlsZUxpbmspOwogICAgICAgICAgICBmaWxlTGluay5jbGljaygpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy50b2FzdE1lc3NhZ2UgPQogICAgICAgICAgICAiQW4gVW5leHBlY3RlZCBFcnJvciBvY2N1cnJlZCB3aGlsZSBkb3dubG9hZGluZyBpbXBvcnQgdGVtcGxhdGVzLiI7CiAgICAgICAgICB0aGlzLnRvYXN0VHlwZSA9ICJlcnJvciI7CiAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMudG9hc3RGbGFnKys7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0KSB7CiAgICAgIHZhciBiaW5hcnlTdHJpbmcgPSB3aW5kb3cuYXRvYihiYXNlNjQpOwogICAgICB2YXIgYmluYXJ5TGVuID0gYmluYXJ5U3RyaW5nLmxlbmd0aDsKICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5TGVuKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaW5hcnlMZW47IGkrKykgewogICAgICAgIHZhciBhc2NpaSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpOwogICAgICAgIGJ5dGVzW2ldID0gYXNjaWk7CiAgICAgIH0KICAgICAgcmV0dXJuIGJ5dGVzOwogICAgfSwKCiAgICBjb252ZXJ0VG9DU1Yob2JqQXJyYXkpIHsKICAgICAgdmFyIGFycmF5ID0gdHlwZW9mIG9iakFycmF5ICE9ICJvYmplY3QiID8gSlNPTi5wYXJzZShvYmpBcnJheSkgOiBvYmpBcnJheTsKICAgICAgdmFyIHN0ciA9ICIiOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBsaW5lID0gIiI7CiAgICAgICAgZm9yICh2YXIgaW5kZXggaW4gYXJyYXlbaV0pIHsKICAgICAgICAgIGlmIChsaW5lICE9ICIiKSBsaW5lICs9ICIsIjsKCiAgICAgICAgICBsaW5lICs9IGFycmF5W2ldW2luZGV4XTsKICAgICAgICB9CgogICAgICAgIHN0ciArPSBsaW5lICsgIlxyXG4iOwogICAgICB9CgogICAgICByZXR1cm4gc3RyOwogICAgfSwKCiAgICBnZXREb3dubG9hZEFzT3B0aW9uKG9wdCkgewogICAgICAvLyBjb25zb2xlLmxvZygnZG93bmxvYWQgYXMgb3B0aW9uJyxvcHQpOwogICAgICBpZiAob3B0Lm9wdGlvbiA9PSAicGRmIikgewogICAgICAgIC8vIG5vdGlmaWNhdGlvbkFuZENvbW11bmljYXRpb25TZXJ2aWNlLmRvd25sb2FkU2VsZWN0ZWRQREYob2JqKQogICAgICAgIC8vIC50aGVuKChyZXMpID0+IHsKICAgICAgICAvLyAvLyBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgLy8gbGV0IGZpbGVDb250ZW50cyA9IG51bGw7CiAgICAgICAgLy8gICAgIGxldCBwb3B1cFdpbj1udWxsOwogICAgICAgIC8vICAgICBwb3B1cFdpbiA9IHdpbmRvdy5vcGVuKCcnLCAnX2JsYW5rJywgJ3RvcD0wLGxlZnQ9MCxoZWlnaHQ9NzAwLHdpZHRoPTEwMDA7Jyk7CiAgICAgICAgLy8gICAgIGxldCBkb2N1bWVudCA9IHsKICAgICAgICAvLyAgICAgICAgICdkb2N1bWVudE5hbWUnOiAnQmlsbGluZycKICAgICAgICAvLyAgICAgfTsKICAgICAgICAvLyBmaWxlQ29udGVudHMgPSByZXMuZGF0YS50eXBlICsgcmVzLmRhdGEuY29udGVudDsKICAgICAgICAvLyAgIHBvcHVwV2luLmRvY3VtZW50LndyaXRlKGAKICAgICAgICAvLyAgICAgPGh0bWw+CiAgICAgICAgLy8gICAgICAgICA8aGVhZD4KICAgICAgICAvLyAgICAgICAgICA8IS0tdGl0bGU+UHJpbnQgdGFiPC90aXRsZS0tPgogICAgICAgIC8vICAgICAgICAgICAgIDxzdHlsZT4KICAgICAgICAvLyAgICAgICAgICAgICAgICAgI2J1dHRvbnN7ZGlzcGxheTpub25lO30KICAgICAgICAvLyAgICAgICAgICAgICAgICAgIGJvZHkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICJPcGVuIFNhbnMiLCAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsIEV1Y2xpZCBDaXJjdWxhciBCLCAiSGVsdmV0aWNhIE5ldWUiLCBBcmlhbCwgc2Fucy1zZXJpZiwgIkFwcGxlIENvbG9yIEVtb2ppIiwgIlNlZ29lIFVJIEVtb2ppIiwgIlNlZ29lIFVJIFN5bWJvbCI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMjEyNTI5OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgYnV0dG9uLCBtZXRlciwgcHJvZ3Jlc3MgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC13cml0aW5nLW1vZGU6IGhvcml6b250YWwtdGIgIWltcG9ydGFudDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICBpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgYnV0dG9uIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtcmVuZGVyaW5nOiBhdXRvOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGluaXRpYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogbm9ybWFsOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgd29yZC1zcGFjaW5nOiBub3JtYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtaW5kZW50OiAwcHg7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LXNoYWRvdzogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IHN0YXJ0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250OiA0MDAgMTMuMzMzM3B4IEFyaWFsOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlucHV0W3R5cGU9ImJ1dHRvbiIgaV0sIGlucHV0W3R5cGU9InN1Ym1pdCIgaV0sIGlucHV0W3R5cGU9InJlc2V0IiBpXSwgaW5wdXRbdHlwZT0iZmlsZSIgaV06Oi13ZWJraXQtZmlsZS11cGxvYWQtYnV0dG9uLCBidXR0b24gewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb2xvcjogYnV0dG9udGV4dDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGJ1dHRvbmZhY2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMnB4IDZweCAzcHg7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItd2lkdGg6IDJweDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1zdHlsZTogb3V0c2V0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiBidXR0b25mYWNlOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWltYWdlOiBpbml0aWFsOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlucHV0LCBidXR0b24sIHNlbGVjdCwgb3B0Z3JvdXAsIHRleHRhcmVhIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiBpbmhlcml0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgYnV0dG9uLCBzZWxlY3QgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0biB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjM3NXJlbSAwLjc1cmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3JkZXItY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJveC1zaGFkb3cgMC4xNXMgZWFzZS1pbi1vdXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0bi1vdXRsaW5lLXByaW1hcnkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMDdiZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICMwMDdiZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0bi1vdXRsaW5lLXByaW1hcnkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICNkMDMyMzI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDAzMjMyOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUgewogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzdHlsZT4uZmEgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udDogbm9ybWFsIG5vcm1hbCBub3JtYWwgMTRweC8xIEZvbnRBd2Vzb21lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiBpbmhlcml0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1yZW5kZXJpbmc6IGF1dG87CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH08L3N0eWxlPgogICAgICAgIC8vICAgICAgICAgICAgICAgICA8c3R5bGU+KiwgKjo6YmVmb3JlLCAqOjphZnRlciB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIFN0eWxlIEF0dHJpYnV0ZSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0biwgLmZvcm0tY29udHJvbCB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjI1cmVtIDAuNXJlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4zcmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxNXB4OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyM3B4OwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9PC9zdHlsZT4KICAgICAgICAvLyAgICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIC8vICAgICAgICAgPC9oZWFkPgogICAgICAgIC8vICAgICAgICAgPGJvZHkgb25sb2FkPSIiPgogICAgICAgIC8vICAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IiA+CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxhIGhyZWY9IiR7ZmlsZUNvbnRlbnRzfSIgZG93bmxvYWQ9IiR7ZG9jdW1lbnQuZG9jdW1lbnROYW1lfSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1wcmltYXJ5Ij5Eb3dubG9hZDwvYnV0dG9uPjwvYT4KICAgICAgICAvLyAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAvLyAgICAgICAgICAgICA8YnI+CiAgICAgICAgLy8gICAgICAgICAgICAgPGlmcmFtZSBzcmM9JyR7ZmlsZUNvbnRlbnRzfScgIHN0eWxlPSJtaW4td2lkdGg6IDEwMCU7aGVpZ2h0OiAxMDAlOyIgPjwvaWZyYW1lPgogICAgICAgIC8vICAgICAgICAgPC9ib2R5PgogICAgICAgIC8vICAgICA8L2h0bWw+YAogICAgICAgIC8vICk7CiAgICAgICAgLy8gfSkKICAgICAgICAvLyAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7CiAgICAgIH0gZWxzZSBpZiAob3B0Lm9wdGlvbiA9PSAiY3N2IikgewogICAgICAgIC8vIAlsZXQgZmlsZVRpdGxlID0gJ0JpbGxpbmdzJzsKICAgICAgICAvLyAJbGV0IGhlYWRlcnMgPSB7CiAgICAgICAgLy8gICAgICAgY3JlYXRlZERhdGU6ICdSZXF1ZXN0ZWQgT24nLnJlcGxhY2UoLywvZywgJycpLCAvLyByZW1vdmUgY29tbWFzIHRvIGF2b2lkIGVycm9ycwogICAgICAgIC8vICAgICAgIGR1ZURhdGU6ICJEdWUgRGF0ZSIsCiAgICAgICAgLy8gICAgICAgc2hpcG1lbnROdW1iZXI6ICJTaGlwbWVudCAjIiwKICAgICAgICAvLyAJCSAgcG9ydE9mTG9hZGluZzogIlBvcnQgb2YgTG9hZCIsCiAgICAgICAgLy8gCQkgIHBvcnRPZkRpc2NoYXJnZTogIlBvcnQgT2YgRGlzY2hhcmdlIiwKICAgICAgICAvLyAJCSAgYW1vdW50OiAiQW1vdW50IiwKICAgICAgICAvLyAJCSAgYmFsYW5jZTogIkJhbGFuY2UiLAogICAgICAgIC8vIAkJICBuZXRzdWl0ZVN0YXR1czogIlN0YXR1cyIKICAgICAgICAvLyAJfTsKICAgICAgICAvLyAJbGV0IGRhdGFPYmogPSBbXTsKICAgICAgICAvLyAJZm9yIChsZXQgaSA9IDA7IGkgPCBvcHQucm93cy5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIAkJY29uc3QgYmlsbCA9IG9wdC5yb3dzW2ldOwogICAgICAgIC8vIAkJZGF0YU9iai5wdXNoKHsKICAgICAgICAvLyAJCQljcmVhdGVkRGF0ZTogYmlsbC5jcmVhdGVkRGF0ZSwKICAgICAgICAvLyAJCQlkdWVEYXRlOiBiaWxsLmR1ZURhdGUsCiAgICAgICAgLy8gCQkJc2hpcG1lbnROdW1iZXI6IGJpbGwuc2hpcG1lbnROdW1iZXIsCiAgICAgICAgLy8gCQkJcG9ydE9mTG9hZGluZzogYmlsbC5wb3J0T2ZMb2FkaW5nLAogICAgICAgIC8vIAkJCXBvcnRPZkRpc2NoYXJnZTogYmlsbC5wb3J0T2ZEaXNjaGFyZ2UsCiAgICAgICAgLy8gCQkJYW1vdW50OiBiaWxsLmFtb3VudCwKICAgICAgICAvLyAJCQliYWxhbmNlOiBiaWxsLmJhbGFuY2UsCiAgICAgICAgLy8gCQkJbmV0c3VpdGVTdGF0dXM6IGJpbGwubmV0c3VpdGVTdGF0dXMKICAgICAgICAvLyAJCX0pOwogICAgICAgIC8vIAl9CiAgICAgICAgLy8gCXRoaXMuZXhwb3J0Q1NWRmlsZShoZWFkZXJzLCBkYXRhT2JqLCBmaWxlVGl0bGUpOwogICAgICB9CiAgICB9LAoKICAgIC8vIGV4cG9ydENTVkZpbGUoaGVhZGVycywgYmlsbGluZ0RhdGEsIGZpbGVUaXRsZSkgewogICAgLy8gICAgIC8vIGlmIChoZWFkZXJzKSB7CiAgICAvLyAgICAgLy8gICAgIGJpbGxpbmdEYXRhLnVuc2hpZnQoaGVhZGVycyk7CiAgICAvLyAgICAgLy8gfQoKICAgIC8vICAgICAvLyAvLyBDb252ZXJ0IE9iamVjdCB0byBKU09OCiAgICAvLyAgICAgLy8gdmFyIGpzb25PYmplY3QgPSBKU09OLnN0cmluZ2lmeShiaWxsaW5nRGF0YSk7CgogICAgLy8gICAgIC8vIHZhciBjc3YgPSB0aGlzLmNvbnZlcnRUb0NTVihqc29uT2JqZWN0KTsKCiAgICAvLyAgICAgLy8gdmFyIGV4cG9ydGVkRmlsZW5tYWUgPSBmaWxlVGl0bGUgKyAnLmNzdicgfHwgJ2V4cG9ydC5jc3YnOwoKICAgIC8vICAgICAvLyB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3ZdLCB7IHR5cGU6ICd0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04OycgfSk7CiAgICAvLyAgICAgLy8gaWYgKG5hdmlnYXRvci5tc1NhdmVCbG9iKSB7IC8vIElFIDEwKwogICAgLy8gICAgIC8vICAgICBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBleHBvcnRlZEZpbGVubWFlKTsKICAgIC8vICAgICAvLyB9IGVsc2UgewogICAgLy8gICAgIC8vICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgIC8vICAgICAvLyAgICAgaWYgKGxpbmsuZG93bmxvYWQgIT09IHVuZGVmaW5lZCkgeyAvLyBmZWF0dXJlIGRldGVjdGlvbgogICAgLy8gICAgIC8vICAgICAgICAgLy8gQnJvd3NlcnMgdGhhdCBzdXBwb3J0IEhUTUw1IGRvd25sb2FkIGF0dHJpYnV0ZQogICAgLy8gICAgIC8vICAgICAgICAgdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAvLyAgICAgLy8gICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHVybCk7CiAgICAvLyAgICAgLy8gICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBleHBvcnRlZEZpbGVubWFlKTsKICAgIC8vICAgICAvLyAgICAgICAgIGxpbmsuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nOwogICAgLy8gICAgIC8vICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgIC8vICAgICAvLyAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgIC8vICAgICAvLyAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICAvLyAgICAgLy8gICAgIH0KICAgIC8vICAgICAvLyB9CiAgICAvLyB9LAoKICAgIHNldFRhYmxlQ29uZmlncygpIHsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuZGVuc2l0eSA9CiAgICAgICAgdGhpcy50YWJsZUNvbmZpZy5kZW5zaXR5OwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5wYWdlU2l6ZSA9CiAgICAgICAgdGhpcy50YWJsZUNvbmZpZy5wYWdlU2l6ZTsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUucGFnZU5hbWUgPQogICAgICAgIHRoaXMudGFibGVDb25maWcucGFnZU5hbWU7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnNvcnRGaWVsZCA9CiAgICAgICAgdGhpcy50YWJsZUNvbmZpZy5zb3J0RmllbGQ7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnNvcnREaXJlY3Rpb24gPQogICAgICAgIHRoaXMudGFibGVDb25maWcuc29ydERpcmVjdGlvbjsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuY29sdW1ucyA9CiAgICAgICAgdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zOwogICAgfSwKCiAgICBzZXRTdGF0aWNDb2x1bW4oKSB7CiAgICAgIGxldCBzdGF0aWNDb2wgPSB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnMuZmlsdGVyKAogICAgICAgIChjb2wpID0+IGNvbC5sYWJlbE5hbWUgPT0gIlRlbXBsYXRlIE51bWJlciIKICAgICAgKVswXTsKICAgICAgdGhpcy5wYXJlbnRTeXN0ZW1TZXR0aW5ncy5zdGF0aWNDb2x1bW5zLnB1c2goc3RhdGljQ29sKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMudGFibGVDb25maWcuY29sdW1uc1tpXS5sYWJlbE5hbWUgPT0gc3RhdGljQ29sLmxhYmVsTmFtZSkgewogICAgICAgICAgdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zLnNwbGljZShpLCAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHN0YXRpY0NvbCA9IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5maWx0ZXIoCiAgICAgICAgKGNvbCkgPT4gY29sLmxhYmVsTmFtZSA9PSAiVGVtcGxhdGUgTmFtZSIKICAgICAgKVswXTsKICAgICAgdGhpcy5wYXJlbnRTeXN0ZW1TZXR0aW5ncy5zdGF0aWNDb2x1bW5zLnB1c2goc3RhdGljQ29sKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMudGFibGVDb25maWcuY29sdW1uc1tpXS5sYWJlbE5hbWUgPT0gc3RhdGljQ29sLmxhYmVsTmFtZSkgewogICAgICAgICAgdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zLnNwbGljZShpLCAxKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgY2F0Y2hEZXBhcnR1cmU6IGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJkYXRhIiwgZGF0YSk7CiAgICAgIC8vIGRlYnVnZ2VyCiAgICAgIGlmIChkYXRhLnN0YXR1cyA9PSAxIHx8IGRhdGEuc3RhdHVzID09IDMpIHsKICAgICAgICB0aGlzLmxvYWRUYWJsZShkYXRhKTsKICAgICAgfSBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PSA0KSB7CiAgICAgICAgdGhpcy5sb2FkVGFibGUoZGF0YSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5zdGF0dXMgPT0gMTApIHsKICAgICAgfQogICAgfSwKCiAgICBsb2FkVGFibGUoc2R0RGF0YSkgewogICAgICBsZXQgZmlsdGVycyA9IFtdOwogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlCiAgICAgIGZvciAobGV0IHNkdF9kYXRhIG9mIHNkdERhdGEubWVzc2FnZSkgewogICAgICAgIGlmKHNkdF9kYXRhLmZpZWxkTmFtZSAhPT0gImFjdGlvbnMiICl7CiAgICAgICAgICBsZXQgbmV3RGF0ZSA9ICIiOwogICAgICAgICAgaWYoc2R0X2RhdGEuZmllbGRUeXBlID09PSAiZGF0ZSIgJiYgc2R0X2RhdGEuZmlsdGVyVmFsdWUgIT09ICIiKXsKICAgICAgICAgICAgbGV0IGRhdGUgPSBzZHRfZGF0YS5maWx0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBkYXRlID0gZGF0ZS5zcGxpdCgiLyIpOwogICAgICAgICAgICBuZXdEYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVsxXX0vJHtkYXRlWzBdfS8ke2RhdGVbMl19YCkKICAgICAgICAgIH0KICAgICAgICAgIGlmKHNkdF9kYXRhLmZpbHRlclZhbHVlID09PSBudWxsKXsKICAgICAgICAgICAgc2R0X2RhdGEuZmlsdGVyVmFsdWUgPSAiIgogICAgICAgICAgfQogICAgICAgICAgZmlsdGVycy5wdXNoKHsKICAgICAgICAgICAgZmllbGROYW1lOiBzZHRfZGF0YS5maWVsZE5hbWUsCiAgICAgICAgICAgIGZpZWxkVHlwZTogc2R0X2RhdGEuZmllbGRUeXBlLAogICAgICAgICAgICBmaWx0ZXJWYWx1ZTpuZXdEYXRlID09PSBudWxsIHx8IG5ld0RhdGUgPT09ICIiID8gc2R0X2RhdGEuZmlsdGVyVmFsdWU6IG5ld0RhdGUuZ2V0VGltZSgpLAogICAgICAgICAgICBzZWNvbmRWYWx1ZTogc2R0X2RhdGEuc2Vjb25kVmFsdWUsCiAgICAgICAgICAgIGNvbXBhcmlzb25UeXBlOiBzZHRfZGF0YS5jb21wYXJpc29uVHlwZSwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5nZXRQYWdpbmF0ZWRBc3NldEltcG9ydFRlbXBsYXRlc0ZvclNEVCgKICAgICAgICBmaWx0ZXJzLAogICAgICAgIHNkdERhdGEuZGF0YS5zb3J0RmllbGQsCiAgICAgICAgc2R0RGF0YS5kYXRhLnNvcnREaXJlY3Rpb24sCiAgICAgICAgc2R0RGF0YS5kYXRhLm9mZnNldCwKICAgICAgICBzZHREYXRhLmRhdGEubGltaXQsCiAgICAgICAgc2R0RGF0YS5kYXRhLnNlYXJjaFF1ZXJ5CiAgICAgICk7CiAgICB9LAoKICAgIGxvYWRTRFQocmVzcG9uc2UsIGRhdGEpIHsKICAgICAgdGhpcy5pbnNwZWN0aW9ucyA9IGRhdGE7CiAgICAgIC8vIHRoaXMucGFnZSA9IHJlc3BvbnNlLmRhdGEuc2R0RGF0YS5vZmZzZXQ7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBsZXQgZXZlbnREYXRhID0gewogICAgICAgIGRhdGE6IHRoaXMuaW5zcGVjdGlvbnMsCiAgICAgICAgdG90YWxFbGVtZW50czogcmVzcG9uc2UuZGF0YS5zZHREYXRhLnRvdGFsRWxlbWVudHMsCiAgICAgICAgdG90YWxQYWdlczogcmVzcG9uc2UuZGF0YS5zZHREYXRhLnRvdGFsUGFnZXMsCiAgICAgICAgcGFnZU51bWJlcjogcmVzcG9uc2UuZGF0YS5zZHREYXRhLm9mZnNldCwKICAgICAgfTsKICAgICAgdGhpcy4kcmVmcy50ZXN0LmRhdGFMb2FkRXZlbnQoZXZlbnREYXRhKTsKICAgIH0sCgogICAgZXh0cmFjdEZpZWxkTmFtZXNGb3JTZWFyY2hRdWVyeShjb25maWcpewogICAgICBmb3IobGV0IGNvbHVtbiBvZiBjb25maWcuY29sdW1ucyl7CiAgICAgICAgdGhpcy5maWVsZE5hbWVzLnB1c2goY29sdW1uLmZpZWxkTmFtZSkKICAgICAgfQogICAgfSwKCiAgICBnZXRQYWdpbmF0ZWRBc3NldEltcG9ydFRlbXBsYXRlc0ZvclNEVCgKICAgICAgZmlsdGVycywKICAgICAgc29ydEZpZWxkLAogICAgICBzb3J0RGlyZWN0aW9uLAogICAgICBvZmZzZXQsCiAgICAgIGxpbWl0LAogICAgICBzZWFyY2hRdWVyeQogICAgKSB7CiAgICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKAogICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKQogICAgICApOwoKICAgICAgbGV0IHJlcXVlc3RPYmogPSB7CiAgICAgICAgc2VhcmNoUXVlcnk6IHNlYXJjaFF1ZXJ5LAogICAgICAgIC8vIHNlYXJjaENvbHVtbnM6IHNlYXJjaENvbHVtbnMsCiAgICAgICAgZmlsdGVyczogZmlsdGVycywKICAgICAgICBzb3J0RmllbGQ6IHNvcnRGaWVsZCwKICAgICAgICBzb3J0RGlyZWN0aW9uOiBzb3J0RGlyZWN0aW9uLAogICAgICAgIG9mZnNldDogb2Zmc2V0LAogICAgICAgIGxpbWl0OiBsaW1pdCwKICAgICAgICB0ZW5hbnRVVUlEOiBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCwKICAgICAgICB1c2VyVVVJRDogY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUudXNlcmlkLAogICAgICAgIGZpZWxkTmFtZXM6dGhpcy5maWVsZE5hbWVzCiAgICAgIH07CgogICAgICBhc3NldE1hbmFnZW1lbnRTZXJ2aWNlCiAgICAgICAgLmdldFBhZ2luYXRlZEFzc2V0SW1wb3J0VGVtcGxhdGVzRm9yU0RUKHJlcXVlc3RPYmopCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICByZXNwb25zZS5kYXRhLnNkdERhdGEuY29udGVudC5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICBpdGVtLmNyZWF0ZWREYXRlID0gbW9tZW50LnV0YyhpdGVtLmNyZWF0ZWREYXRlKS5sb2NhbCgpLmZvcm1hdCgpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZXMgPSByZXNwb25zZS5kYXRhLnNkdERhdGEuY29udGVudDsKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5zZHREYXRhLm9mZnNldCA9IG9mZnNldCArIDE7CiAgICAgICAgICAgIHRoaXMubG9hZFNEVChyZXNwb25zZSwgdGVtcGxhdGVzKTsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnRvYXN0TWVzc2FnZSA9CiAgICAgICAgICAgICAgIkFuIFVuZXhwZWN0ZWQgRXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2V0dGluZyBpbXBvcnQgQXNzZXQgdGVtcGxhdGVzLiI7CiAgICAgICAgICAgIHRoaXMudG9hc3RUeXBlID0gImVycm9yIjsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMudG9hc3RGbGFnKys7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLnRvYXN0TWVzc2FnZSA9CiAgICAgICAgICAgICJBbiBVbmV4cGVjdGVkIEVycm9yIG9jY3VycmVkIHdoaWxlIGdldHRpbmcgaW1wb3J0IEFzc2V0IHRlbXBsYXRlcy4iOwogICAgICAgICAgdGhpcy50b2FzdFR5cGUgPSAiZXJyb3IiOwogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnRvYXN0RmxhZysrOwogICAgICAgIH0pOwogICAgfSwKCiAgICAvLyAtLS0tLS0tLS0tLS0gU0RUIEZ1bmN0aW9ucyBFTkQgLS0tLS0tLS0tLS0tLS0KICB9LAoKICBtb3VudGVkKCkgewogICAgZG9jdW1lbnQudGl0bGUgPSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlOwogICAgbGV0IGN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UoCiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKQogICAgKTsKICAgIGlmIChjdXJyZW50VXNlckRldGFpbHMgPT09IG51bGwpIHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImZvcmNlU2lnbm91dCIsICJ5ZXMiKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIGZldGNoaW5nIGNvbmZpZ3MKICAgIGxldCB1dWlkID0gY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQ7CgogICAgYXNzZXRQZXJzb25uZWxTZXJ2aWNlCiAgICAgIC5nZXRPcmdDb25maWdzKHV1aWQsICJ0YWJsZUNvbmZpZ3MiKQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKQogICAgICAgIGxldCBhbGxDb25maWdzID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhLnRhYmxlQ29uZmlncyk7CiAgICAgICAgdGhpcy50YWJsZUNvbmZpZyA9IGFsbENvbmZpZ3MuZmlsdGVyKAogICAgICAgICAgKGRhdGEpID0+IGRhdGEucGFnZU5hbWUgPT09ICJFeGlzdGluZ0Fzc2V0Q1NWVGVtcGxhdGVzIgogICAgICAgIClbMF07CiAgICAgICAgdGhpcy5leHRyYWN0RmllbGROYW1lc0ZvclNlYXJjaFF1ZXJ5KHRoaXMudGFibGVDb25maWcpCiAgICAgICAgdGhpcy5zZXRTdGF0aWNDb2x1bW4oKTsKICAgICAgICB0aGlzLnNldFRhYmxlQ29uZmlncygpOwogICAgICB9KQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yIGZldGNoaW5nIGNvbmZpZ3MiLCBlcnJvcik7CiAgICAgIH0pOwogIH0sCgogIHZhbGlkYXRpb25zOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4ge307CiAgfSwKCiAgY29tcHV0ZWQ6IHt9LAp9Owo="},null]}