{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/work-orders/WorkOrders.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/work-orders/WorkOrders.vue","mtime":1661968702452},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":1662622637719},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1662622639723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBhc3NldFBlcnNvbm5lbFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZXMvQXNzZXRQZXJzb25uZWxTZXJ2aWNlIjsKaW1wb3J0IHdvcmtPcmRlclNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZXMvV29ya09yZGVyU2VydmljZSI7CmltcG9ydCBFbmRwb2ludHMgZnJvbSAiLi4vLi4vc2VydmljZXMvRW5kUG9pbnRzIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgRGVsZXRlRGlhbG9nIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvRGVsZXRlRGlhbG9nIjsKaW1wb3J0IEFyY2hpdmVEaWFsb2cgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9BcmNoaXZlRGlhbG9nIjsKaW1wb3J0IEFyY2hpdmVkV29ya09yZGVyIGZyb20gIi4vQXJjaGl2ZWRXb3JrT3JkZXIudnVlIgoKaW1wb3J0IGxvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvTG9hZGVyLnZ1ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIldvcmtPcmRlcnMiLAoKICBjb21wb25lbnRzOiB7CiAgICBEZWxldGVEaWFsb2csCiAgICBBcmNoaXZlRGlhbG9nLAogICAgbG9hZGVyLAogICAgQXJjaGl2ZWRXb3JrT3JkZXIKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXJjaGl2ZWRDb25maWdzOm51bGwsCiAgICAgIHdvcmtPcmRlclR5cGU6Indvcmstb3JkZXIiLAogICAgICB3b3JrT3JkZXJPcHRpb25zOlsKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogIldvcmsgT3JkZXIiLAogICAgICAgICAgdmFsdWU6ICJ3b3JrLW9yZGVyIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAiQXJjaGl2ZWQiLAogICAgICAgICAgdmFsdWU6ICJhcmNoaXZlZCIsCiAgICAgICAgfQogICAgICBdLAogICAgICBzZWxlY3RXb3JrT3JkZXI6Indvcmstb3JkZXIiLAogICAgICBsb2FkZXJGbGFnOiBmYWxzZSwKICAgICAgLyogVG9hc3QgUHJvcGVydGllcyAqLwogICAgICB0b2FzdFRpbWVPdXQ6IDMwMDAsCiAgICAgIHRvYXN0TWVzc2FnZTogIiIsCiAgICAgIHRvYXN0VHlwZTogIiIsCiAgICAgIHRvYXN0RmxhZzogMCwKICAgICAgLyogVG9hc3QgUHJvcGVydGllcyAqLwogICAgICBkZWxldGVXb3JrT3JkZXJEaWFsb2c6IGZhbHNlLAogICAgICBhcmNoaXZlV29ya09yZGVyRGlhbG9nOiBmYWxzZSwKICAgICAgd29ya09yZGVySUQ6ICIiLAogICAgICByZXNldFRhYmxlOiAwLAogICAgICB0YWJsZUNvbmZpZzogbnVsbCwKICAgICAgLy8gLS0tLS0tLS0tLS0tLSBTRFQgRGF0YSBTVEFSVCAtLS0tLS0tLS0tLS0tLS0tCgogICAgICBzZHRfdG9rZW46IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKQogICAgICAgIC5hY2Nlc3NfdG9rZW4sCiAgICAgIHVzZXI6ICIiLAogICAgICB1c2VybmFtZTogIiIsCiAgICAgIGlzTG9hZGluZ1BhZ2U6IGZhbHNlLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBwcm9tcHQ6IGZhbHNlLAogICAgICBwcm9tcHRWaWV3TmFtZTogIiIsCiAgICAgIHNlcnZlckRhdGE6ICIiLAogICAgICBmaWx0ZXJGaWVsZExpc3Q6IFtdLAogICAgICBldmVudERhdGE6ICIiLAogICAgICBwYXJlbnRTeXN0ZW1TZXR0aW5nczogewogICAgICAgIHNlcnZpY2VVUkw6IEVuZHBvaW50cy5wcmVmZXJlbmNlU2VydmljZS5wcmVmZXJlbmNlLAogICAgICAgIC8vIHNlcnZpY2VVUkw6ICdodHRwOi8vbG9jYWxob3N0OjgwOTkvcHJlZmVyZW5jZXMnLAogICAgICAgIGJ1dHRvbnM6IFtdLAogICAgICAgIHNlYXJjaFZhbHVlOiAiIiwKICAgICAgICBoZWlnaHQ6ICI5NTBweCIsCiAgICAgICAgc2VsZWN0aW9uQ29sdW1uOiBmYWxzZSwKICAgICAgICBzZWxlY3RUeXBlOiAibm9uZSIsCiAgICAgICAgbW9yZU9wdGlvbnM6IFtdLAogICAgICAgIGFjdGlvbnNPcHRpb25zOiBbIlZpZXciLCAiRWRpdCIsICJBcmNoaXZlIiwgIkRlbGV0ZSJdLAogICAgICAgIGNvbHVtbkljb25zOiBbXSwKICAgICAgICBwaWxsQ29uZmlnOiBbCiAgICAgICAgICB7IGNvbHVtbjogIiIsIHN0YXRlOiAic3VjY2VzcyIsIGRhdGE6ICIiIH0sCiAgICAgICAgICB7IGNvbHVtbjogIiIsIHN0YXRlOiAiZXJyb3IiLCBkYXRhOiAiIiB9LAogICAgICAgICAgeyBjb2x1bW46ICIiLCBzdGF0ZTogIm5vcm1hbCIsIGRhdGE6ICIiIH0sCiAgICAgICAgXSwKICAgICAgICBzdGF0aWNDb2x1bW5zOiBbXSwKICAgICAgICB1c2VyOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKSkucHJvZmlsZQogICAgICAgICAgLnVzZXJuYW1lLAogICAgICAgIHVwcGVyY2FzZUNvbHVtbnM6IFtdLCAvLyBwYXNzIGNvbHVtbiBuYW1lIHdob3NlIGRhdGEgc2hvdWxkIGJlIHNob3duIGluIGNhcHMKICAgICAgICBkYXRlRm9ybWF0OiAiREQvTU0veXl5eSBoaDptbSBhIiwgLy9wYXNzIGFueSBtb21lbnQgZGF0ZSBmb3JtYXQgaGVyZQogICAgICB9LAogICAgICBwYXJlbnREZWZhdWx0U3lzdGVtVmlldzogewogICAgICAgIHZpZXdOYW1lczogWwogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiRGVmYXVsdCBWaWV3IiwKICAgICAgICAgICAgdGlsZUZsYWc6IHRydWUsCiAgICAgICAgICAgIHBvc2l0aW9uOiAxLAogICAgICAgICAgICBwcml2YWN5OiAicHJpdmF0ZSIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiQWRkIEEgVmlldyBUaWxlIiwKICAgICAgICAgICAgdGlsZUZsYWc6IHRydWUsCiAgICAgICAgICAgIHBvc2l0aW9uOiAwLAogICAgICAgICAgICBwcml2YWN5OiAicHJpdmF0ZSIsCiAgICAgICAgICB9LAogICAgICAgIF0sCgogICAgICAgIGRlZmF1bHRUYWJsZTogewogICAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgICB2aWV3TmFtZTogIkRlZmF1bHQgVmlldyIsCiAgICAgICAgICBkZW5zaXR5OiAic20iLAogICAgICAgICAgcGFnZVNpemU6IDUwLAogICAgICAgICAgcGFnZU5hbWU6ICIiLAogICAgICAgICAgdXNlcjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpLnByb2ZpbGUKICAgICAgICAgICAgLnVzZXJuYW1lLAogICAgICAgICAgZGVmYXVsdFZpZXdGbGFnOiB0cnVlLAogICAgICAgICAgc29ydEZpZWxkOiAiIiwKICAgICAgICAgIHNvcnREaXJlY3Rpb246ICIiLAogICAgICAgICAgdGlsZUZsYWc6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbjogMSwgLy8gYWx3YXlzIHBhc3MgMQogICAgICAgICAgcHJpdmFjeTogInByaXZhdGUiLAogICAgICAgICAgY29sdW1uczogW10sCiAgICAgICAgfSwKICAgICAgfSwKICAgICAgcGFyZW50RGF0YTogW10sCiAgICAgIGZpbHRlckNvdW50OiAiIiwKICAgICAgc2R0RGF0YTogIiIsCiAgICAgIGZpZWxkTmFtZXM6W10sCiAgICAgIG9yZ0NvbmZpZ3NSZXNwb25zZTpudWxsCiAgICAgIC8vIC0tLS0tLS0tLS0tLS0gU0RUIERhdGEgRU5EIC0tLS0tLS0tLS0tLS0tLS0KICAgIH07CiAgfSwKCiAgd2F0Y2g6IHsKICAgIHdvcmtPcmRlclR5cGU6IGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAobmV3VmFsID09PSAiYXJjaGl2ZWQiKSB7CiAgICAgICAgbGV0IGFsbENvbmZpZ3MgPSBKU09OLnBhcnNlKHRoaXMub3JnQ29uZmlnc1Jlc3BvbnNlLmRhdGEudGFibGVDb25maWdzKTsKICAgICAgICBhbGxDb25maWdzID0gYWxsQ29uZmlncy5maWx0ZXIoCiAgICAgICAgICAoZGF0YSkgPT4gZGF0YS5wYWdlTmFtZSA9PT0gImFyY2hpdmVkV29ya09yZGVyIgogICAgICAgIClbMF07CiAgICAgICAgdGhpcy5hcmNoaXZlZENvbmZpZ3MgPSBhbGxDb25maWdzOwogICAgICB9CiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIHNlbGVjdFdvcmtPcmRlclR5cGUob2JqKXsKICAgICAgICB0aGlzLnNlbGVjdFdvcmtPcmRlciA9IG9iai52YWx1ZQogICAgfSwKCiAgICBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy5kZWxldGVXb3JrT3JkZXJEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5hcmNoaXZlV29ya09yZGVyRGlhbG9nID0gZmFsc2U7CiAgICB9LAoKICAgIGRlbGV0ZURpYWxvZygpIHsKICAgICAgdGhpcy5kZWxldGVXb3JrT3JkZXJEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5kZWxldGVXb3JrT3JkZXIodGhpcy53b3JrT3JkZXJJRCwgIkRlbGV0ZSIpOwogICAgfSwKCiAgICBhcmNoaXZlRGlhbG9nKCkgewogICAgICB0aGlzLmFyY2hpdmVXb3JrT3JkZXJEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5kZWxldGVXb3JrT3JkZXIodGhpcy53b3JrT3JkZXJJRCwgIkFyY2hpdmUiKTsKICAgIH0sCgogICAgZGVsZXRlV29ya09yZGVyKHV1aWQsIHR5cGUpIHsKICAgICAgd29ya09yZGVyU2VydmljZQogICAgICAgIC5kZWxldGVXb3JrT3JkZXJCeVVVSUQodXVpZCwgdHlwZSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICBpZiAodHlwZSA9PT0gIkRlbGV0ZSIpIHsKICAgICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiRGVsZXRlZCBXb3JrIE9yZGVyIFN1Y2Nlc3NmdWxseSIsICJTdWNjZXNzIik7CiAgICAgICAgICAgICAgdGhpcy5kZWxldGVXb3JrT3JkZXJEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJBcmNoaXZlZCBXb3JrIE9yZGVyIFN1Y2Nlc3NmdWxseSIsICJTdWNjZXNzIik7CiAgICAgICAgICAgICAgdGhpcy5hcmNoaXZlV29ya09yZGVyRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge30pOwogICAgfSwKICAgIC8vIC0tLS0tLS0tLS0tLSBTRFQgRnVuY3Rpb25zIFNUQVJUIC0tLS0tLS0tLS0tLS0tCgogICAgZ2V0QWN0aW9uc09wdGlvbih2YWwpIHsKICAgICAgaWYgKHZhbC52YWx1ZSA9PSAiVmlldyIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAid29yay1vcmRlci1kZXRhaWxzIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICB3b3JrdXVpZDogdmFsLnJvdy51dWlkLAogICAgICAgICAgICB0eXBlOiAidmlldyIsCiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICh2YWwudmFsdWUgPT0gIkVkaXQiKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogImVkaXQtd29yay1vcmRlci1kZXRhaWxzIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICB3b3JrdXVpZDogdmFsLnJvdy51dWlkLAogICAgICAgICAgICB0eXBlOiAiZWRpdCIsCiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICh2YWwudmFsdWUgPT0gIkFyY2hpdmUiKSB7CiAgICAgICAgaWYgKHZhbC5yb3cuc3RhdHVzICE9PSAiSW4gUHJvZ3Jlc3MiKSB7CiAgICAgICAgICB0aGlzLndvcmtPcmRlcklEID0gdmFsLnJvdy51dWlkOwogICAgICAgICAgdGhpcy5hcmNoaXZlV29ya09yZGVyRGlhbG9nID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgICAgICJZb3UgYXJlIHVuYWJsZSB0byBhcmNoaXZlIGFuIGluLXByb2dyZXNzIHdvcmtvcmRlciIsCiAgICAgICAgICAgICJ3YXJuaW5nIgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHZhbC52YWx1ZSA9PSAiRGVsZXRlIikgewogICAgICAgIGlmICh2YWwucm93LnN0YXR1cyAhPT0gIkluIFByb2dyZXNzIikgewogICAgICAgICAgdGhpcy53b3JrT3JkZXJJRCA9IHZhbC5yb3cudXVpZDsKICAgICAgICAgIHRoaXMuZGVsZXRlV29ya09yZGVyRGlhbG9nID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgICAgICJZb3UgYXJlIHVuYWJsZSB0byBkZWxldGUgYW4gaW4tcHJvZ3Jlc3Mgd29ya29yZGVyIiwKICAgICAgICAgICAgIndhcm5pbmciCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBjb252ZXJ0VG9DU1Yob2JqQXJyYXkpIHsKICAgICAgdmFyIGFycmF5ID0gdHlwZW9mIG9iakFycmF5ICE9ICJvYmplY3QiID8gSlNPTi5wYXJzZShvYmpBcnJheSkgOiBvYmpBcnJheTsKICAgICAgdmFyIHN0ciA9ICIiOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBsaW5lID0gIiI7CiAgICAgICAgZm9yICh2YXIgaW5kZXggaW4gYXJyYXlbaV0pIHsKICAgICAgICAgIGlmIChsaW5lICE9ICIiKSBsaW5lICs9ICIsIjsKCiAgICAgICAgICBsaW5lICs9IGFycmF5W2ldW2luZGV4XTsKICAgICAgICB9CgogICAgICAgIHN0ciArPSBsaW5lICsgIlxyXG4iOwogICAgICB9CgogICAgICByZXR1cm4gc3RyOwogICAgfSwKCiAgICBnZXREb3dubG9hZEFzT3B0aW9uKG9wdCkgewogICAgICAvLyBjb25zb2xlLmxvZygnZG93bmxvYWQgYXMgb3B0aW9uJyxvcHQpOwogICAgICBpZiAob3B0Lm9wdGlvbiA9PSAicGRmIikgewogICAgICAgIC8vIG5vdGlmaWNhdGlvbkFuZENvbW11bmljYXRpb25TZXJ2aWNlLmRvd25sb2FkU2VsZWN0ZWRQREYob2JqKQogICAgICAgIC8vIC50aGVuKChyZXMpID0+IHsKICAgICAgICAvLyAvLyBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgLy8gbGV0IGZpbGVDb250ZW50cyA9IG51bGw7CiAgICAgICAgLy8gICAgIGxldCBwb3B1cFdpbj1udWxsOwogICAgICAgIC8vICAgICBwb3B1cFdpbiA9IHdpbmRvdy5vcGVuKCcnLCAnX2JsYW5rJywgJ3RvcD0wLGxlZnQ9MCxoZWlnaHQ9NzAwLHdpZHRoPTEwMDA7Jyk7CiAgICAgICAgLy8gICAgIGxldCBkb2N1bWVudCA9IHsKICAgICAgICAvLyAgICAgICAgICdkb2N1bWVudE5hbWUnOiAnQmlsbGluZycKICAgICAgICAvLyAgICAgfTsKICAgICAgICAvLyBmaWxlQ29udGVudHMgPSByZXMuZGF0YS50eXBlICsgcmVzLmRhdGEuY29udGVudDsKICAgICAgICAvLyAgIHBvcHVwV2luLmRvY3VtZW50LndyaXRlKGAKICAgICAgICAvLyAgICAgPGh0bWw+CiAgICAgICAgLy8gICAgICAgICA8aGVhZD4KICAgICAgICAvLyAgICAgICAgICA8IS0tdGl0bGU+UHJpbnQgdGFiPC90aXRsZS0tPgogICAgICAgIC8vICAgICAgICAgICAgIDxzdHlsZT4KICAgICAgICAvLyAgICAgICAgICAgICAgICAgI2J1dHRvbnN7ZGlzcGxheTpub25lO30KICAgICAgICAvLyAgICAgICAgICAgICAgICAgIGJvZHkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICJPcGVuIFNhbnMiLCAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsIEV1Y2xpZCBDaXJjdWxhciBCLCAiSGVsdmV0aWNhIE5ldWUiLCBBcmlhbCwgc2Fucy1zZXJpZiwgIkFwcGxlIENvbG9yIEVtb2ppIiwgIlNlZ29lIFVJIEVtb2ppIiwgIlNlZ29lIFVJIFN5bWJvbCI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMjEyNTI5OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgYnV0dG9uLCBtZXRlciwgcHJvZ3Jlc3MgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC13cml0aW5nLW1vZGU6IGhvcml6b250YWwtdGIgIWltcG9ydGFudDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICBpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgYnV0dG9uIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtcmVuZGVyaW5nOiBhdXRvOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGluaXRpYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogbm9ybWFsOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgd29yZC1zcGFjaW5nOiBub3JtYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtaW5kZW50OiAwcHg7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LXNoYWRvdzogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IHN0YXJ0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250OiA0MDAgMTMuMzMzM3B4IEFyaWFsOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlucHV0W3R5cGU9ImJ1dHRvbiIgaV0sIGlucHV0W3R5cGU9InN1Ym1pdCIgaV0sIGlucHV0W3R5cGU9InJlc2V0IiBpXSwgaW5wdXRbdHlwZT0iZmlsZSIgaV06Oi13ZWJraXQtZmlsZS11cGxvYWQtYnV0dG9uLCBidXR0b24gewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb2xvcjogYnV0dG9udGV4dDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGJ1dHRvbmZhY2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMnB4IDZweCAzcHg7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItd2lkdGg6IDJweDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1zdHlsZTogb3V0c2V0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiBidXR0b25mYWNlOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWltYWdlOiBpbml0aWFsOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlucHV0LCBidXR0b24sIHNlbGVjdCwgb3B0Z3JvdXAsIHRleHRhcmVhIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiBpbmhlcml0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgYnV0dG9uLCBzZWxlY3QgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0biB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjM3NXJlbSAwLjc1cmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3JkZXItY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJveC1zaGFkb3cgMC4xNXMgZWFzZS1pbi1vdXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0bi1vdXRsaW5lLXByaW1hcnkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMDdiZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICMwMDdiZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0bi1vdXRsaW5lLXByaW1hcnkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICNkMDMyMzI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDAzMjMyOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUgewogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzdHlsZT4uZmEgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udDogbm9ybWFsIG5vcm1hbCBub3JtYWwgMTRweC8xIEZvbnRBd2Vzb21lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiBpbmhlcml0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1yZW5kZXJpbmc6IGF1dG87CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH08L3N0eWxlPgogICAgICAgIC8vICAgICAgICAgICAgICAgICA8c3R5bGU+KiwgKjo6YmVmb3JlLCAqOjphZnRlciB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIFN0eWxlIEF0dHJpYnV0ZSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmJ0biwgLmZvcm0tY29udHJvbCB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjI1cmVtIDAuNXJlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4zcmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxNXB4OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyM3B4OwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9PC9zdHlsZT4KICAgICAgICAvLyAgICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIC8vICAgICAgICAgPC9oZWFkPgogICAgICAgIC8vICAgICAgICAgPGJvZHkgb25sb2FkPSIiPgogICAgICAgIC8vICAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IiA+CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxhIGhyZWY9IiR7ZmlsZUNvbnRlbnRzfSIgZG93bmxvYWQ9IiR7ZG9jdW1lbnQuZG9jdW1lbnROYW1lfSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1wcmltYXJ5Ij5Eb3dubG9hZDwvYnV0dG9uPjwvYT4KICAgICAgICAvLyAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAvLyAgICAgICAgICAgICA8YnI+CiAgICAgICAgLy8gICAgICAgICAgICAgPGlmcmFtZSBzcmM9JyR7ZmlsZUNvbnRlbnRzfScgIHN0eWxlPSJtaW4td2lkdGg6IDEwMCU7aGVpZ2h0OiAxMDAlOyIgPjwvaWZyYW1lPgogICAgICAgIC8vICAgICAgICAgPC9ib2R5PgogICAgICAgIC8vICAgICA8L2h0bWw+YAogICAgICAgIC8vICk7CiAgICAgICAgLy8gfSkKICAgICAgICAvLyAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7CiAgICAgIH0gZWxzZSBpZiAob3B0Lm9wdGlvbiA9PSAiY3N2IikgewogICAgICAgIC8vIAlsZXQgZmlsZVRpdGxlID0gJ0JpbGxpbmdzJzsKICAgICAgICAvLyAJbGV0IGhlYWRlcnMgPSB7CiAgICAgICAgLy8gICAgICAgY3JlYXRlZERhdGU6ICdSZXF1ZXN0ZWQgT24nLnJlcGxhY2UoLywvZywgJycpLCAvLyByZW1vdmUgY29tbWFzIHRvIGF2b2lkIGVycm9ycwogICAgICAgIC8vICAgICAgIGR1ZURhdGU6ICJEdWUgRGF0ZSIsCiAgICAgICAgLy8gICAgICAgc2hpcG1lbnROdW1iZXI6ICJTaGlwbWVudCAjIiwKICAgICAgICAvLyAJCSAgcG9ydE9mTG9hZGluZzogIlBvcnQgb2YgTG9hZCIsCiAgICAgICAgLy8gCQkgIHBvcnRPZkRpc2NoYXJnZTogIlBvcnQgT2YgRGlzY2hhcmdlIiwKICAgICAgICAvLyAJCSAgYW1vdW50OiAiQW1vdW50IiwKICAgICAgICAvLyAJCSAgYmFsYW5jZTogIkJhbGFuY2UiLAogICAgICAgIC8vIAkJICBuZXRzdWl0ZVN0YXR1czogIlN0YXR1cyIKICAgICAgICAvLyAJfTsKICAgICAgICAvLyAJbGV0IGRhdGFPYmogPSBbXTsKICAgICAgICAvLyAJZm9yIChsZXQgaSA9IDA7IGkgPCBvcHQucm93cy5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIAkJY29uc3QgYmlsbCA9IG9wdC5yb3dzW2ldOwogICAgICAgIC8vIAkJZGF0YU9iai5wdXNoKHsKICAgICAgICAvLyAJCQljcmVhdGVkRGF0ZTogYmlsbC5jcmVhdGVkRGF0ZSwKICAgICAgICAvLyAJCQlkdWVEYXRlOiBiaWxsLmR1ZURhdGUsCiAgICAgICAgLy8gCQkJc2hpcG1lbnROdW1iZXI6IGJpbGwuc2hpcG1lbnROdW1iZXIsCiAgICAgICAgLy8gCQkJcG9ydE9mTG9hZGluZzogYmlsbC5wb3J0T2ZMb2FkaW5nLAogICAgICAgIC8vIAkJCXBvcnRPZkRpc2NoYXJnZTogYmlsbC5wb3J0T2ZEaXNjaGFyZ2UsCiAgICAgICAgLy8gCQkJYW1vdW50OiBiaWxsLmFtb3VudCwKICAgICAgICAvLyAJCQliYWxhbmNlOiBiaWxsLmJhbGFuY2UsCiAgICAgICAgLy8gCQkJbmV0c3VpdGVTdGF0dXM6IGJpbGwubmV0c3VpdGVTdGF0dXMKICAgICAgICAvLyAJCX0pOwogICAgICAgIC8vIAl9CiAgICAgICAgLy8gCXRoaXMuZXhwb3J0Q1NWRmlsZShoZWFkZXJzLCBkYXRhT2JqLCBmaWxlVGl0bGUpOwogICAgICB9CiAgICB9LAoKICAgIC8vIGV4cG9ydENTVkZpbGUoaGVhZGVycywgYmlsbGluZ0RhdGEsIGZpbGVUaXRsZSkgewogICAgLy8gICAgIC8vIGlmIChoZWFkZXJzKSB7CiAgICAvLyAgICAgLy8gICAgIGJpbGxpbmdEYXRhLnVuc2hpZnQoaGVhZGVycyk7CiAgICAvLyAgICAgLy8gfQoKICAgIC8vICAgICAvLyAvLyBDb252ZXJ0IE9iamVjdCB0byBKU09OCiAgICAvLyAgICAgLy8gdmFyIGpzb25PYmplY3QgPSBKU09OLnN0cmluZ2lmeShiaWxsaW5nRGF0YSk7CgogICAgLy8gICAgIC8vIHZhciBjc3YgPSB0aGlzLmNvbnZlcnRUb0NTVihqc29uT2JqZWN0KTsKCiAgICAvLyAgICAgLy8gdmFyIGV4cG9ydGVkRmlsZW5tYWUgPSBmaWxlVGl0bGUgKyAnLmNzdicgfHwgJ2V4cG9ydC5jc3YnOwoKICAgIC8vICAgICAvLyB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3ZdLCB7IHR5cGU6ICd0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04OycgfSk7CiAgICAvLyAgICAgLy8gaWYgKG5hdmlnYXRvci5tc1NhdmVCbG9iKSB7IC8vIElFIDEwKwogICAgLy8gICAgIC8vICAgICBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBleHBvcnRlZEZpbGVubWFlKTsKICAgIC8vICAgICAvLyB9IGVsc2UgewogICAgLy8gICAgIC8vICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgIC8vICAgICAvLyAgICAgaWYgKGxpbmsuZG93bmxvYWQgIT09IHVuZGVmaW5lZCkgeyAvLyBmZWF0dXJlIGRldGVjdGlvbgogICAgLy8gICAgIC8vICAgICAgICAgLy8gQnJvd3NlcnMgdGhhdCBzdXBwb3J0IEhUTUw1IGRvd25sb2FkIGF0dHJpYnV0ZQogICAgLy8gICAgIC8vICAgICAgICAgdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAvLyAgICAgLy8gICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHVybCk7CiAgICAvLyAgICAgLy8gICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBleHBvcnRlZEZpbGVubWFlKTsKICAgIC8vICAgICAvLyAgICAgICAgIGxpbmsuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nOwogICAgLy8gICAgIC8vICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgIC8vICAgICAvLyAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgIC8vICAgICAvLyAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICAvLyAgICAgLy8gICAgIH0KICAgIC8vICAgICAvLyB9CiAgICAvLyB9LAoKICAgIHNldFRhYmxlQ29uZmlncygpIHsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuZGVuc2l0eSA9IHRoaXMudGFibGVDb25maWcuZGVuc2l0eTsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUucGFnZVNpemUgPSB0aGlzLnRhYmxlQ29uZmlnLnBhZ2VTaXplOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5wYWdlTmFtZSA9IHRoaXMudGFibGVDb25maWcucGFnZU5hbWU7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnNvcnRGaWVsZCA9IHRoaXMudGFibGVDb25maWcuc29ydEZpZWxkOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5zb3J0RGlyZWN0aW9uID0gdGhpcy50YWJsZUNvbmZpZy5zb3J0RGlyZWN0aW9uOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5jb2x1bW5zID0gdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zOwogICAgfSwKCiAgICBzZXRTdGF0aWNDb2x1bW4oKSB7CiAgICAgIGxldCBzdGF0aWNDb2wgPSB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnMuZmlsdGVyKAogICAgICAgIChjb2wpID0+IGNvbC5sYWJlbE5hbWUgPT0gIldvcmtPcmRlciBOdW1iZXIiCiAgICAgIClbMF07CiAgICAgIHRoaXMucGFyZW50U3lzdGVtU2V0dGluZ3Muc3RhdGljQ29sdW1ucy5wdXNoKHN0YXRpY0NvbCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnNbaV0ubGFiZWxOYW1lID09IHN0YXRpY0NvbC5sYWJlbE5hbWUpIHsKICAgICAgICAgIHRoaXMudGFibGVDb25maWcuY29sdW1ucy5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGV4dHJhY3RGaWVsZE5hbWVzRm9yU2VhcmNoUXVlcnkoY29uZmlnKXsKICAgICAgZm9yKGxldCBjb2x1bW4gb2YgY29uZmlnLmNvbHVtbnMpewogICAgICAgIHRoaXMuZmllbGROYW1lcy5wdXNoKGNvbHVtbi5maWVsZE5hbWUpCiAgICAgIH0KICAgIH0sCgogICAgY2F0Y2hEZXBhcnR1cmU6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdGhpcy5zZHREYXRhID0gZGF0YTsKICAgICAgaWYgKGRhdGEuc3RhdHVzID09IDEgfHwgZGF0YS5zdGF0dXMgPT0gMykgewogICAgICAgIHRoaXMubG9hZFRhYmxlKGRhdGEpOwogICAgICB9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDQpIHsKICAgICAgICB0aGlzLmxvYWRUYWJsZShkYXRhKTsKICAgICAgfSBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PSAxMCkgewogICAgICB9CiAgICB9LAoKICAgIG9wZW5DcmVhdGVXb3JrT3JkZXIoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiY3JlYXRlLXdvcmstb3JkZXIiLAogICAgICB9KTsKICAgIH0sCgogICAgbG9hZFRhYmxlKHNkdERhdGEpIHsKICAgICAgbGV0IGZpbHRlcnMgPSBbXTsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgIGZvciAobGV0IHNkdF9kYXRhIG9mIHNkdERhdGEubWVzc2FnZSkgewogICAgICAgIGlmKHNkdF9kYXRhLmZpZWxkTmFtZSAhPT0gImFjdGlvbnMiICl7CiAgICAgICAgICBsZXQgbmV3RGF0ZSA9ICIiOwogICAgICAgICAgaWYoc2R0X2RhdGEuZmllbGRUeXBlID09PSAiZGF0ZSIgJiYgc2R0X2RhdGEuZmlsdGVyVmFsdWUgIT09ICIiKXsKICAgICAgICAgICAgbGV0IGRhdGUgPSBzZHRfZGF0YS5maWx0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBkYXRlID0gZGF0ZS5zcGxpdCgiLyIpOwogICAgICAgICAgICBuZXdEYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVsxXX0vJHtkYXRlWzBdfS8ke2RhdGVbMl19YCkKICAgICAgICAgIH0KICAgICAgICAgIGlmKHNkdF9kYXRhLmZpbHRlclZhbHVlID09PSBudWxsKXsKICAgICAgICAgICAgc2R0X2RhdGEuZmlsdGVyVmFsdWUgPSAiIgogICAgICAgICAgfQogICAgICAgICAgZmlsdGVycy5wdXNoKHsKICAgICAgICAgICAgZmllbGROYW1lOiBzZHRfZGF0YS5maWVsZE5hbWUsCiAgICAgICAgICAgIGZpZWxkVHlwZTogc2R0X2RhdGEuZmllbGRUeXBlLAogICAgICAgICAgICBmaWx0ZXJWYWx1ZTpuZXdEYXRlID09PSBudWxsIHx8IG5ld0RhdGUgPT09ICIiID8gc2R0X2RhdGEuZmlsdGVyVmFsdWU6IG5ld0RhdGUuZ2V0VGltZSgpLAogICAgICAgICAgICBzZWNvbmRWYWx1ZTogc2R0X2RhdGEuc2Vjb25kVmFsdWUsCiAgICAgICAgICAgIGNvbXBhcmlzb25UeXBlOiBzZHRfZGF0YS5jb21wYXJpc29uVHlwZSwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5nZXRQYWdpbmF0ZWRXb3JrT3JkZXJzKAogICAgICAgIGZpbHRlcnMsCiAgICAgICAgc2R0RGF0YS5kYXRhLnNvcnRGaWVsZCwKICAgICAgICBzZHREYXRhLmRhdGEuc29ydERpcmVjdGlvbiwKICAgICAgICBzZHREYXRhLmRhdGEub2Zmc2V0LAogICAgICAgIHNkdERhdGEuZGF0YS5saW1pdCwKICAgICAgICBzZHREYXRhLmRhdGEuc2VhcmNoUXVlcnkKICAgICAgKTsKICAgIH0sCgogICAgbG9hZFNEVChyZXNwb25zZSwgZGF0YSkgewogICAgICB0aGlzLnBhcmVudERhdGEgPSBkYXRhOwogICAgICBsZXQgZXZlbnREYXRhID0gewogICAgICAgIGRhdGE6IHRoaXMucGFyZW50RGF0YSwKICAgICAgICB0b3RhbEVsZW1lbnRzOiByZXNwb25zZS5kYXRhLnNkdERhdGEudG90YWxFbGVtZW50cywKICAgICAgICB0b3RhbFBhZ2VzOiByZXNwb25zZS5kYXRhLnNkdERhdGEudG90YWxQYWdlcywKICAgICAgICBwYWdlTnVtYmVyOiByZXNwb25zZS5kYXRhLnNkdERhdGEub2Zmc2V0LAogICAgICB9OwogICAgICB0aGlzLiRyZWZzLnRlc3QuZGF0YUxvYWRFdmVudChldmVudERhdGEpOwogICAgfSwKCiAgICBnZXRQYWdpbmF0ZWRXb3JrT3JkZXJzKGZpbHRlcnMsIHNvcnRGaWVsZCwgc29ydERpcmVjdGlvbiwgb2Zmc2V0LCBsaW1pdCxzZWFyY2hRdWVyeSkgewogICAgICBsZXQgY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZSgKICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKICAgICAgKTsKCiAgICAgIGxldCByZXF1ZXN0T2JqID0gewogICAgICAgIHNlYXJjaFF1ZXJ5OiBzZWFyY2hRdWVyeSwKICAgICAgICBmaWVsZE5hbWVzOiB0aGlzLmZpZWxkTmFtZXMsCiAgICAgICAgZmlsdGVyczogZmlsdGVycywKICAgICAgICBzb3J0RmllbGQ6IHNvcnRGaWVsZCwKICAgICAgICBzb3J0RGlyZWN0aW9uOiBzb3J0RGlyZWN0aW9uLAogICAgICAgIG9mZnNldDogb2Zmc2V0LAogICAgICAgIGxpbWl0OiBsaW1pdCwKICAgICAgICB0ZW5hbnRVVUlEOiBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCwKICAgICAgICBhcmNoaXZlZDpmYWxzZQogICAgICB9OwoKICAgICAgd29ya09yZGVyU2VydmljZQogICAgICAgIC5nZXRQYWdpbmF0ZWRXb3JrT3JkZXJGb3JTRFQocmVxdWVzdE9iaikKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuc2R0RGF0YS5jb250ZW50Lm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICAgIGl0ZW0uc2NoZWR1bGUgPSBtb21lbnQKICAgICAgICAgICAgICAgIC51dGMoaXRlbS5zY2hlZHVsZSkKICAgICAgICAgICAgICAgIC5sb2NhbCgpCiAgICAgICAgICAgICAgICAuZm9ybWF0KCdERC9NTS9ZWVlZIGhoOm1tIGEnKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBsZXQgd29ya09yZGVycyA9IHJlc3BvbnNlLmRhdGEuc2R0RGF0YS5jb250ZW50OwogICAgICAgICAgICByZXNwb25zZS5kYXRhLnNkdERhdGEub2Zmc2V0ID0gb2Zmc2V0ICsgMTsKICAgICAgICAgICAgdGhpcy5sb2FkU0RUKHJlc3BvbnNlLCB3b3JrT3JkZXJzKTsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIk9wcHMgaXQgbG9va3MgbGlrZSBvdXIgc2VydmVyIGlzIG9mZmxpbmUiLCAiZXJyb3IiKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAhPT0gdW5kZWZpbmVkICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA2KSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLnJlc3BvbnNlLmRhdGEuZGVzY3JpcHRpb24sICJlcnJvciIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKCiAgICAvLyAtLS0tLS0tLS0tLS0gU0RUIEZ1bmN0aW9ucyBFTkQgLS0tLS0tLS0tLS0tLS0KCiAgICBzaG93VG9hc3QobWVzc2FnZSwgdHlwZSkgewogICAgICB0aGlzLnRvYXN0TWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgIHRoaXMudG9hc3RUeXBlID0gdHlwZTsKICAgICAgdGhpcy50b2FzdEZsYWcrKzsKICAgIH0sCiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIGRvY3VtZW50LnRpdGxlID0gdGhpcy4kcm91dGUubWV0YS50aXRsZTsKICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKAogICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKICAgICk7CiAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLnRvYXN0RmxhZykgewogICAgICB0aGlzLnNob3dUb2FzdCh0aGlzLiRyb3V0ZS5wYXJhbXMubWVzc2FnZSwgdGhpcy4kcm91dGUucGFyYW1zLnRvYXN0VHlwZSk7CiAgICB9CgogICAgaWYgKGN1cnJlbnRVc2VyRGV0YWlscyA9PT0gbnVsbCkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZm9yY2VTaWdub3V0IiwgInllcyIpOwogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gc2VuZGluZyBvbmx5IGZpcnN0IGFuZCBsYXN0IG5hbWUgZm9yIFNEVAogICAgbGV0IG5hbWUgPSBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS51c2VybmFtZTsKICAgIGlmIChuYW1lLmluY2x1ZGVzKCJAIikpIHsKICAgICAgbmFtZSA9IG5hbWUuc3BsaXQoIkAiKTsKICAgICAgbmFtZSA9IG5hbWVbMF07CiAgICB9CiAgICB0aGlzLnBhcmVudFN5c3RlbVNldHRpbmdzLnVzZXIgPSBuYW1lOwoKICAgIC8vIGZldGNoaW5nIGNvbmZpZ3MKICAgIGxldCB1dWlkID0gY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQ7CgogICAgYXNzZXRQZXJzb25uZWxTZXJ2aWNlCiAgICAgIC5nZXRPcmdDb25maWdzKHV1aWQsICJ0YWJsZUNvbmZpZ3MiKQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLm9yZ0NvbmZpZ3NSZXNwb25zZSA9IHJlc3BvbnNlCiAgICAgICAgbGV0IGFsbENvbmZpZ3MgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEudGFibGVDb25maWdzKTsKICAgICAgICB0aGlzLnRhYmxlQ29uZmlnID0gYWxsQ29uZmlncy5maWx0ZXIoCiAgICAgICAgICAoZGF0YSkgPT4gZGF0YS5wYWdlTmFtZSA9PT0gImFyY2hpdmVkV29ya09yZGVyIgogICAgICAgIClbMF07CiAgICAgICAgdGhpcy5leHRyYWN0RmllbGROYW1lc0ZvclNlYXJjaFF1ZXJ5KHRoaXMudGFibGVDb25maWcpOwogICAgICAgIHRoaXMuc2V0U3RhdGljQ29sdW1uKCk7CiAgICAgICAgdGhpcy5zZXRUYWJsZUNvbmZpZ3MoKTsKICAgICAgfSkKICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBmZXRjaGluZyBjb25maWdzIiwgZXJyb3IpOwogICAgICB9KTsKICB9LAoKICB2YWxpZGF0aW9uczogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4ge307CiAgfSwKCiAgY29tcHV0ZWQ6IHt9LAp9Owo="},null]}