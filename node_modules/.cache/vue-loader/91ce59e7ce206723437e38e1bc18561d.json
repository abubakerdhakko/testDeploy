{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/service-requests/ServiceRequests.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/service-requests/ServiceRequests.vue","mtime":1661968702444},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBhc3NldFBlcnNvbm5lbFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZXMvQXNzZXRQZXJzb25uZWxTZXJ2aWNlIjsKaW1wb3J0IGluc3BlY3Rpb25TZXJ2aWNlLCB7CiAgSW5zcGVjdGlvblNlcnZpY2UsCn0gZnJvbSAiLi4vLi4vc2VydmljZXMvSW5zcGVjdGlvblNlcnZpY2UiOwoKaW1wb3J0IEVuZHBvaW50cyBmcm9tICIuLi8uLi9zZXJ2aWNlcy9FbmRQb2ludHMiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCBBcmNoaXZlZFNlcnZpY2VSZXF1ZXN0IGZyb20gIi4vQXJjaGl2ZWRTZXJ2aWNlUmVxdWVzdC52dWUiCmltcG9ydCBBZGRTZXJ2aWNlUmVxdWVzdCBmcm9tICIuLi8uLi9jb21wb25lbnRzL0FkZFNlcnZpY2VSZXF1ZXN0IjsKaW1wb3J0IERlbGV0ZURpYWxvZyBmcm9tICIuLi8uLi9jb21wb25lbnRzL0RlbGV0ZURpYWxvZyI7CmltcG9ydCBBcmNoaXZlRGlhbG9nIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvQXJjaGl2ZURpYWxvZyI7CmltcG9ydCBJZ25vcmVSZXF1ZXN0IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvSWdub3JlUmVxdWVzdCI7CmltcG9ydCBDcmVhdGVJc3N1ZSBmcm9tICIuLi8uLi9jb21wb25lbnRzL0NyZWF0ZUlzc3VlIjsKCmltcG9ydCBsb2FkZXIgZnJvbSAiQC9jb21wb25lbnRzL0xvYWRlci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNlcnZpY2VSZXF1ZXN0cyIsCiAgY29tcG9uZW50czogewogICAgQWRkU2VydmljZVJlcXVlc3QsCiAgICBEZWxldGVEaWFsb2csCiAgICBBcmNoaXZlRGlhbG9nLAogICAgSWdub3JlUmVxdWVzdCwKICAgIENyZWF0ZUlzc3VlLAogICAgbG9hZGVyLAogICAgQXJjaGl2ZWRTZXJ2aWNlUmVxdWVzdAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhcmNoaXZlZENvbmZpZ3M6bnVsbCwKICAgICAgc2VydmljZVJlcXVlc3RUeXBlOiJzZXJ2aWNlLXJlcXVlc3QiLAogICAgICBzZXJ2aWNlUmVxdWVzdE9wdGlvbnM6WwogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAiU2VydmljZSBSZXF1ZXN0IiwKICAgICAgICAgIHZhbHVlOiAic2VydmljZS1yZXF1ZXN0IiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAiQXJjaGl2ZWQiLAogICAgICAgICAgdmFsdWU6ICJhcmNoaXZlZCIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgc2VsZWN0U2VydmljZVJlcXVlc3Q6InNlcnZpY2UtcmVxdWVzdCIsCiAgICAgIGxvYWRlckZsYWc6IGZhbHNlLAogICAgICB0b2FzdEZsYWc6IDAsCiAgICAgIHRvYXN0TWVzc2FnZTogIiIsCiAgICAgIHRvYXN0VHlwZTogIiIsCiAgICAgIGN1cnJlbnRVc2VyRGV0YWlsczogIiIsCiAgICAgIGFkZFNlcnZpY2VEaWFsb2c6IGZhbHNlLAogICAgICBkZWxldGVJbnNwZWN0aW9uRGlhbG9nOiBmYWxzZSwKICAgICAgYXJjaGl2ZUluc3BlY3Rpb25EaWFsb2c6IGZhbHNlLAogICAgICBwcm9jZXNzVHlwZTogIiIsCiAgICAgIHV1aWQ6ICIiLAogICAgICBJZ25vcmVJc3N1ZVZhbHVlOiBmYWxzZSwKICAgICAgbW9kZWxJbnN0cnVjdGlvbjogIklnbm9yZSBTZXJ2aWNlIFJlcXVlc3QiLAogICAgICBzZXJ2aWNlUmVxdWVzdDogIiIsCiAgICAgIHNkdERhdGE6ICIiLAogICAgICBzdWJtaXROZXdJc3N1ZTogZmFsc2UsCiAgICAgIHVwZGF0ZVNEVDogZmFsc2UsCiAgICAgIC8vIC0tLS0tLS0tLS0tLS0gU0RUIERhdGEgU1RBUlQgLS0tLS0tLS0tLS0tLS0tLQogICAgICBzZHRfdG9rZW46IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKQogICAgICAgIC5hY2Nlc3NfdG9rZW4sCiAgICAgIHVzZXI6ICIiLAogICAgICB1c2VybmFtZTogIiIsCiAgICAgIGlzTG9hZGluZ1BhZ2U6IGZhbHNlLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBwcm9tcHQ6IGZhbHNlLAogICAgICBwcm9tcHRWaWV3TmFtZTogIiIsCiAgICAgIHNlcnZlckRhdGE6ICIiLAogICAgICBmaWx0ZXJGaWVsZExpc3Q6IFtdLAogICAgICBldmVudERhdGE6ICIiLAogICAgICBwYXJlbnRTeXN0ZW1TZXR0aW5nczogewogICAgICAgIHNlcnZpY2VVUkw6IEVuZHBvaW50cy5wcmVmZXJlbmNlU2VydmljZS5wcmVmZXJlbmNlLAogICAgICAgIC8vIHNlcnZpY2VVUkw6ICdodHRwOi8vbG9jYWxob3N0OjgwOTkvcHJlZmVyZW5jZXMnLAogICAgICAgIGJ1dHRvbnM6IFtdLAogICAgICAgIHNlYXJjaFZhbHVlOiAiIiwKICAgICAgICBoZWlnaHQ6ICI5NTBweCIsCiAgICAgICAgc2VsZWN0aW9uQ29sdW1uOiBmYWxzZSwKICAgICAgICBzZWxlY3RUeXBlOiAibm9uZSIsCiAgICAgICAgbW9yZU9wdGlvbnM6IFtdLAogICAgICAgIGFjdGlvbnNPcHRpb25zOiBbCiAgICAgICAgICAiVmlldyIsCiAgICAgICAgICAiRWRpdCIsCiAgICAgICAgICAiQXJjaGl2ZSIsCiAgICAgICAgICAiRGVsZXRlIiwKICAgICAgICAgICJDcmVhdGUgSXNzdWUiLAogICAgICAgICAgIklnbm9yZSBSZXF1ZXN0IiwKICAgICAgICAgIC8vICJBY3RpdmUiLAogICAgICAgIF0sCiAgICAgICAgY29sdW1uSWNvbnM6IFtdLAogICAgICAgIHBpbGxDb25maWc6IFsKICAgICAgICAgIHsgY29sdW1uOiAiIiwgc3RhdGU6ICJzdWNjZXNzIiwgZGF0YTogIiIgfSwKICAgICAgICAgIHsgY29sdW1uOiAiIiwgc3RhdGU6ICJlcnJvciIsIGRhdGE6ICIiIH0sCiAgICAgICAgICB7IGNvbHVtbjogIiIsIHN0YXRlOiAibm9ybWFsIiwgZGF0YTogIiIgfSwKICAgICAgICBdLAogICAgICAgIHN0YXRpY0NvbHVtbnM6IFtdLAogICAgICAgIHVzZXI6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKS5wcm9maWxlCiAgICAgICAgICAudXNlcm5hbWUsCiAgICAgICAgdXBwZXJjYXNlQ29sdW1uczogW10sIC8vIHBhc3MgY29sdW1uIG5hbWUgd2hvc2UgZGF0YSBzaG91bGQgYmUgc2hvd24gaW4gY2FwcwogICAgICAgIGRhdGVGb3JtYXQ6ICJERC9NTS95eXl5IGhoOm1tIGEiLCAvL3Bhc3MgYW55IG1vbWVudCBkYXRlIGZvcm1hdCBoZXJlCiAgICAgIH0sCiAgICAgIHBhcmVudERlZmF1bHRTeXN0ZW1WaWV3OiB7CiAgICAgICAgdmlld05hbWVzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJEZWZhdWx0IFZpZXciLAogICAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgICAgcG9zaXRpb246IDEsCiAgICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJBZGQgQSBWaWV3IFRpbGUiLAogICAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgICAgcG9zaXRpb246IDAsCiAgICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKCiAgICAgICAgZGVmYXVsdFRhYmxlOiB7CiAgICAgICAgICBpZDogbnVsbCwKICAgICAgICAgIHZpZXdOYW1lOiAiRGVmYXVsdCBWaWV3IiwKICAgICAgICAgIGRlbnNpdHk6ICIiLAogICAgICAgICAgcGFnZVNpemU6ICIiLAogICAgICAgICAgcGFnZU5hbWU6ICIiLAogICAgICAgICAgdXNlcjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikpLnByb2ZpbGUKICAgICAgICAgICAgLnVzZXJuYW1lLAogICAgICAgICAgZGVmYXVsdFZpZXdGbGFnOiB0cnVlLAogICAgICAgICAgc29ydEZpZWxkOiAiIiwKICAgICAgICAgIHNvcnREaXJlY3Rpb246ICIiLAogICAgICAgICAgdGlsZUZsYWc6IHRydWUsCiAgICAgICAgICBjb2x1bW5zOiBbXSwKICAgICAgICAgIHBvc2l0aW9uOiAxLCAvLyBhbHdheXMgcGFzcyAxCiAgICAgICAgICBwcml2YWN5OiAicHJpdmF0ZSIsCiAgICAgICAgfSwKICAgICAgfSwKICAgICAgcGFyZW50RGF0YTogW10sCiAgICAgIGZpbHRlckNvdW50OiAiIiwKICAgICAgZmllbGROYW1lczpbXSwKICAgICAgb3JnQ29uZmlnc1Jlc3BvbnNlOm51bGwKICAgICAgLy8gLS0tLS0tLS0tLS0tLSBTRFQgRGF0YSBFTkQgLS0tLS0tLS0tLS0tLS0tLQogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBzZWxlY3RTZXJ2aWNlUmVxdWVzdFR5cGUob2JqKXsKICAgICAgdGhpcy5zZWxlY3RTZXJ2aWNlUmVxdWVzdCA9IG9iai52YWx1ZTsKICAgIH0sCgogICAgaXNzdWVDcmVhdGVkKCkgewogICAgICB0aGlzLnN1Ym1pdE5ld0lzc3VlID0gZmFsc2U7CiAgICAgIHRoaXMubG9hZFRhYmxlKHRoaXMuc2R0RGF0YSk7CiAgICB9LAoKICAgIGRpc3BsYXlNZXNzYWdlKCkgewogICAgICB0aGlzLnNob3dUb2FzdCgiU2VydmljZSByZXF1ZXN0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IiwgInN1Y2Nlc3MiKTsKICAgIH0sCiAgICBkaXNwbGF5TWVzc2FnZUlzc3VlKCkgewogICAgICB0aGlzLnNob3dUb2FzdCgiSXNzdWUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkiLCAic3VjY2VzcyIpOwogICAgfSwKCiAgICB1cGRhdGVTRFRGdW5jdGlvbigpIHsKICAgICAgdGhpcy51cGRhdGVTRFQgPSB0cnVlOwogICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgfSwKCiAgICBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy5kZWxldGVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuYXJjaGl2ZUluc3BlY3Rpb25EaWFsb2cgPSBmYWxzZTsKICAgIH0sCgogICAgc2F2ZVNlcnZpY2VSZXF1ZXN0RGlhbG9nKCkgewogICAgICB0aGlzLmFkZFNlcnZpY2VEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd1RvYXN0KCJTZXJ2aWNlIFJlcXVlc3QgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuIiwgInN1Y2Nlc3MiKTsKICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgIH0sCgogICAgY2xvc2VOZXdJc3N1ZSgpIHsKICAgICAgdGhpcy5zdWJtaXROZXdJc3N1ZSA9IGZhbHNlOwogICAgfSwKCiAgICBvcGVuU2VydmljZURpYWxvZygpIHsKICAgICAgdGhpcy5hZGRTZXJ2aWNlRGlhbG9nID0gdHJ1ZTsKICAgIH0sCgogICAgY2xvc2VTZXJ2aWNlRGlhbG9nKCkgewogICAgICB0aGlzLmFkZFNlcnZpY2VEaWFsb2cgPSBmYWxzZTsKICAgIH0sCgogICAgaWdub3JlUmVxdWVzdCh2YWx1ZSkgewogICAgICBsZXQgaWdub3JlQ29tbWVudHNGaWVsZCA9IHZhbHVlOwogICAgICBpZiAoIWlnbm9yZUNvbW1lbnRzRmllbGQudmFsdWUpIHsKICAgICAgICBpZ25vcmVDb21tZW50c0ZpZWxkLnZhbGlkID0gZmFsc2U7CiAgICAgICAgaWdub3JlQ29tbWVudHNGaWVsZC52YWxpZE1lc3NhZ2UgPSAiUmVxdWlyZWQhIjsKICAgICAgICB0aGlzLmlnbm9yZUNvbW1lbnRzRmllbGQgPSBpZ25vcmVDb21tZW50c0ZpZWxkOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBsZXQgdXBkYXRlSXNzdWVSZXF1ZXN0ID0ge307CiAgICAgIGxldCBzZXJ2aWNlUmVxdWVzdCA9IHRoaXMuc2VydmljZVJlcXVlc3Q7CiAgICAgIHNlcnZpY2VSZXF1ZXN0LnN0YXR1cyA9ICJpZ25vcmVkIjsKICAgICAgc2VydmljZVJlcXVlc3QucmVwb3J0ZWRBdCA9IG1vbWVudCgKICAgICAgICBzZXJ2aWNlUmVxdWVzdC5yZXBvcnRlZEF0LAogICAgICAgICJERC9NTS95eXl5IGhoOm1tIGEiCiAgICAgICkudG9JU09TdHJpbmcoKTsKICAgICAgc2VydmljZVJlcXVlc3QuaWdub3JlQ29tbWVudHMgPSBpZ25vcmVDb21tZW50c0ZpZWxkLnZhbHVlOwogICAgICBzZXJ2aWNlUmVxdWVzdC5pZ25vcmVkQnkgPQogICAgICAgIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUuZmlyc3ROYW1lICsKICAgICAgICAiICIgKwogICAgICAgIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUubGFzdE5hbWU7CiAgICAgIHVwZGF0ZUlzc3VlUmVxdWVzdC5pc3N1ZVJlcG9ydGluZyA9IHNlcnZpY2VSZXF1ZXN0OwogICAgICBJbnNwZWN0aW9uU2VydmljZS51cGRhdGVJc3N1ZSh1cGRhdGVJc3N1ZVJlcXVlc3QpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgKICAgICAgICAgICAgICAgICJTZXJ2aWNlIHJlcXVlc3QgaWdub3JlZCBzdWNjZXNzZnVsbHkhIiwKICAgICAgICAgICAgICAgICJzdWNjZXNzIgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgdGhpcy5jbG9zZUlnbm9yZUlzc3VlKCk7CiAgICAgICAgICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgKICAgICAgICAgICAgICAgICJFcnJvciB3aGlsZSBpZ25vcmluZyBzZXJ2aWNlIHJlcXVlc3QuIFBsZWFzZSB0cnkgYWdhaW4iLAogICAgICAgICAgICAgICAgImVycm9yIgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgICAgICAgIkVycm9yIHdoaWxlIGlnbm9yaW5nIHNlcnZpY2UgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbiIsCiAgICAgICAgICAgICAgImVycm9yIgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkFuIHVuZXhwZWN0ZWQgRXJyb3IgT2NjdXJyZWQuIiwgImVycm9yIik7CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICB0aGlzLnNlcnZpY2VSZXF1ZXN0ID0gc2VydmljZVJlcXVlc3Q7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8gLS0tLS0tLS0tLS0tIFNEVCBGdW5jdGlvbnMgU1RBUlQgLS0tLS0tLS0tLS0tLS0KCiAgICBnZXRBY3Rpb25zT3B0aW9uKHZhbCkgewogICAgICBpZiAodmFsLnZhbHVlID09ICJWaWV3IikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJzZXJ2aWNlLXJlcXVlc3RzLWRldGFpbHMiLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIHNlcnZpY2VSZXF1ZXN0VVVJRDogdmFsLnJvdy51dWlkLAogICAgICAgICAgICBzZXJ2aWNlUmVxdWVzdENoaWxkOiBmYWxzZSwKICAgICAgICAgICAgaXNzdWV1dWlkOiB2YWwucm93LnV1aWQsCiAgICAgICAgICAgIGFzc2V0VVVJRDogdmFsLnJvdy5hc3NldFVVSUQsCiAgICAgICAgICAgIGlzc3VlbnVtYmVyOiB2YWwucm93Lmlzc3VlTnVtYmVyLAogICAgICAgICAgICB0ZW1wbGF0ZVR5cGU6ICJ2aWV3SXNzdWUiLAogICAgICAgICAgICBmbGFnOiB0cnVlLAogICAgICAgICAgICB3b3JrT3JkZXJUeXBlOiB2YWwucm93LndvcmtPcmRlck51bWJlciwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKHZhbC52YWx1ZSA9PSAiRWRpdCIpIHsKICAgICAgICBpZiAoCiAgICAgICAgICB2YWwucm93LnN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAiTmV3Ii50b0xvd2VyQ2FzZSgpIHx8CiAgICAgICAgICB2YWwucm93LnN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAicmVwb3J0ZWQiLnRvTG93ZXJDYXNlKCkgfHwKICAgICAgICAgIHZhbC5yb3cuc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICJSZXNvbHZlZCIudG9Mb3dlckNhc2UoKQogICAgICAgICkgewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAic2VydmljZS1yZXF1ZXN0cy1lZGl0IiwKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgc2VydmljZVJlcXVlc3RVVUlEOiB2YWwucm93LnV1aWQsCiAgICAgICAgICAgICAgc2VydmljZVJlcXVlc3RDaGlsZDogZmFsc2UsCiAgICAgICAgICAgICAgaXNzdWV1dWlkOiB2YWwucm93LnV1aWQsCiAgICAgICAgICAgICAgYXNzZXRVVUlEOiB2YWwucm93LmFzc2V0VVVJRCwKICAgICAgICAgICAgICBmbGFnOiBmYWxzZSwKICAgICAgICAgICAgICBzdGF0dXM6dmFsLnJvdy5zdGF0dXMKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAodmFsLnJvdy5zdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gIklnbm9yZWQiLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogInNlcnZpY2UtcmVxdWVzdHMtZWRpdCIsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIHNlcnZpY2VSZXF1ZXN0VVVJRDogdmFsLnJvdy51dWlkLAogICAgICAgICAgICAgIHNlcnZpY2VSZXF1ZXN0Q2hpbGRVVUlEOiBmYWxzZSwKICAgICAgICAgICAgICBwYXJlbnRVVUlEOiAiIiwKICAgICAgICAgICAgICBpc3N1ZXV1aWQ6IHZhbC5yb3cudXVpZCwKICAgICAgICAgICAgICBhc3NldFVVSUQ6IHZhbC5yb3cuYXNzZXRVVUlELAogICAgICAgICAgICAgIGZsYWc6IHRydWUsCiAgICAgICAgICAgICAgc3RhdHVzOnZhbC5yb3cuc3RhdHVzCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgICAgICJZb3UgY2FuIG9ubHkgZWRpdCByZXBvcnRlZCBhbmQgbmV3IHNlcnZpY2UgcmVxdWVzdCIsCiAgICAgICAgICAgICJlcnJvciIKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh2YWwudmFsdWUgPT0gIklnbm9yZSBSZXF1ZXN0IikgewogICAgICAgIHRoaXMuc2VydmljZVJlcXVlc3QgPSB2YWwucm93OwogICAgICAgIGlmICh2YWwucm93LnN0YXR1cy50b0xvd2VyQ2FzZSgpID09ICJOZXciLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgIHRoaXMuSWdub3JlSXNzdWVWYWx1ZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJZb3UgY2FuIG9ubHkgaWdub3JlIG5ldyBzZXJ2aWNlIHJlcXVlc3QiLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHZhbC52YWx1ZSA9PSAiQ3JlYXRlIElzc3VlIikgewogICAgICAgIHRoaXMuc2VydmljZVJlcXVlc3QgPSB2YWwucm93OwogICAgICAgIGlmICh2YWwucm93LnN0YXR1cy50b0xvd2VyQ2FzZSgpID09ICJOZXciLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgIHRoaXMuc3VibWl0TmV3SXNzdWUgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgKICAgICAgICAgICAgIllvdSBjYW4gb25seSBjcmVhdGUgaXNzdWUgd2l0aCBuZXcgc2VydmljZSByZXF1ZXN0IiwKICAgICAgICAgICAgImVycm9yIgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh2YWwudmFsdWUgPT09ICJBcmNoaXZlIikgewogICAgICAgIGlmICh2YWwucm93LnN0YXR1cyA9PT0gIkluIFByb2dyZXNzIikgewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgICAgICJJbiBwcm9ncmVzcyBTZXJ2aWNlIFJlcXVlc3QgY2Fubm90IGJlIEFyY2hpdmUuIiwKICAgICAgICAgICAgImVycm9yIgogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5hcmNoaXZlSW5zcGVjdGlvbkRpYWxvZyA9IHRydWU7CiAgICAgICAgdGhpcy51dWlkID0gdmFsLnJvdy51dWlkOwogICAgICAgIHRoaXMucHJvY2Vzc1R5cGUgPSAiYXJjaGl2ZSI7CiAgICAgICAgLy8JdGhpcy5kZWxldGVPckFyY2hpdmVTZXJ2aWNlUmVxdWVzdHModmFsLnJvdy51dWlkLCJhcmNoaXZlIikKICAgICAgfQoKICAgICAgaWYgKHZhbC52YWx1ZSA9PT0gIkRlbGV0ZSIpIHsKICAgICAgICBpZiAodmFsLnJvdy5zdGF0dXMgPT09ICJJbiBQcm9ncmVzcyIpIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KAogICAgICAgICAgICAiSW4gcHJvZ3Jlc3MgU2VydmljZSBSZXF1ZXN0IGNhbm5vdCBiZSBEZWxldGUuIiwKICAgICAgICAgICAgImVycm9yIgogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5kZWxldGVJbnNwZWN0aW9uRGlhbG9nID0gdHJ1ZTsKICAgICAgICB0aGlzLnV1aWQgPSB2YWwucm93LnV1aWQ7CiAgICAgICAgdGhpcy5wcm9jZXNzVHlwZSA9ICJkZWxldGUiOwogICAgICAgIC8vCXRoaXMuZGVsZXRlT3JBcmNoaXZlU2VydmljZVJlcXVlc3RzKHZhbC5yb3cudXVpZCwiZGVsZXRlIikKICAgICAgfQogICAgfSwKCiAgICBjbG9zZUlnbm9yZUlzc3VlKCkgewogICAgICB0aGlzLklnbm9yZUlzc3VlVmFsdWUgPSBmYWxzZTsKICAgIH0sCgogICAgY29udmVydFRvQ1NWKG9iakFycmF5KSB7CiAgICAgIHZhciBhcnJheSA9IHR5cGVvZiBvYmpBcnJheSAhPSAib2JqZWN0IiA/IEpTT04ucGFyc2Uob2JqQXJyYXkpIDogb2JqQXJyYXk7CiAgICAgIHZhciBzdHIgPSAiIjsKCiAgICAgIGZvciAodmFyIGVsZW1lbnQgb2YgYXJyYXkpIHsKICAgICAgICB2YXIgbGluZSA9ICIiOwogICAgICAgIGZvciAodmFyIGluZGV4IGluIGVsZW1lbnQpIHsKICAgICAgICAgIGlmIChsaW5lICE9ICIiKSBsaW5lICs9ICIsIjsKCiAgICAgICAgICBsaW5lICs9IGVsZW1lbnRbaW5kZXhdOwogICAgICAgIH0KCiAgICAgICAgc3RyICs9IGxpbmUgKyAiXHJcbiI7CiAgICAgIH0KCiAgICAgIHJldHVybiBzdHI7CiAgICB9LAoKICAgIGdldERvd25sb2FkQXNPcHRpb24ob3B0KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdkb3dubG9hZCBhcyBvcHRpb24nLG9wdCk7CiAgICAgIGlmIChvcHQub3B0aW9uID09ICJwZGYiKSB7CiAgICAgICAgLy8gbm90aWZpY2F0aW9uQW5kQ29tbXVuaWNhdGlvblNlcnZpY2UuZG93bmxvYWRTZWxlY3RlZFBERihvYmopCiAgICAgICAgLy8gLnRoZW4oKHJlcykgPT4gewogICAgICAgIC8vIC8vIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAvLyBsZXQgZmlsZUNvbnRlbnRzID0gbnVsbDsKICAgICAgICAvLyAgICAgbGV0IHBvcHVwV2luPW51bGw7CiAgICAgICAgLy8gICAgIHBvcHVwV2luID0gd2luZG93Lm9wZW4oJycsICdfYmxhbmsnLCAndG9wPTAsbGVmdD0wLGhlaWdodD03MDAsd2lkdGg9MTAwMDsnKTsKICAgICAgICAvLyAgICAgbGV0IGRvY3VtZW50ID0gewogICAgICAgIC8vICAgICAgICAgJ2RvY3VtZW50TmFtZSc6ICdCaWxsaW5nJwogICAgICAgIC8vICAgICB9OwogICAgICAgIC8vIGZpbGVDb250ZW50cyA9IHJlcy5kYXRhLnR5cGUgKyByZXMuZGF0YS5jb250ZW50OwogICAgICAgIC8vICAgcG9wdXBXaW4uZG9jdW1lbnQud3JpdGUoYAogICAgICAgIC8vICAgICA8aHRtbD4KICAgICAgICAvLyAgICAgICAgIDxoZWFkPgogICAgICAgIC8vICAgICAgICAgIDwhLS10aXRsZT5QcmludCB0YWI8L3RpdGxlLS0+CiAgICAgICAgLy8gICAgICAgICAgICAgPHN0eWxlPgogICAgICAgIC8vICAgICAgICAgICAgICAgICAjYnV0dG9uc3tkaXNwbGF5Om5vbmU7fQogICAgICAgIC8vICAgICAgICAgICAgICAgICAgYm9keSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogIk9wZW4gU2FucyIsIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgIlNlZ29lIFVJIiwgRXVjbGlkIENpcmN1bGFyIEIsICJIZWx2ZXRpY2EgTmV1ZSIsIEFyaWFsLCBzYW5zLXNlcmlmLCAiQXBwbGUgQ29sb3IgRW1vamkiLCAiU2Vnb2UgVUkgRW1vamkiLCAiU2Vnb2UgVUkgU3ltYm9sIjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMyMTI1Mjk7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICBidXR0b24sIG1ldGVyLCBwcm9ncmVzcyB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXdyaXRpbmctbW9kZTogaG9yaXpvbnRhbC10YiAhaW1wb3J0YW50OwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0LCBidXR0b24gewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1yZW5kZXJpbmc6IGF1dG87CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb2xvcjogaW5pdGlhbDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiBub3JtYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB3b3JkLXNwYWNpbmc6IG5vcm1hbDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1pbmRlbnQ6IDBweDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogc3RhcnQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDBlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IDQwMCAxMy4zMzMzcHggQXJpYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgaW5wdXRbdHlwZT0iYnV0dG9uIiBpXSwgaW5wdXRbdHlwZT0ic3VibWl0IiBpXSwgaW5wdXRbdHlwZT0icmVzZXQiIGldLCBpbnB1dFt0eXBlPSJmaWxlIiBpXTo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b24sIGJ1dHRvbiB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogZGVmYXVsdDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBidXR0b250ZXh0OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogYnV0dG9uZmFjZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4IDNweDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci13aWR0aDogMnB4OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXN0eWxlOiBvdXRzZXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IGJ1dHRvbmZhY2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItaW1hZ2U6IGluaXRpYWw7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgaW5wdXQsIGJ1dHRvbiwgc2VsZWN0LCBvcHRncm91cCwgdGV4dGFyZWEgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IGluaGVyaXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogaW5oZXJpdDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICBidXR0b24sIHNlbGVjdCB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICAuYnRuIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuMzc1cmVtIDAuNzVyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJvcmRlci1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm94LXNoYWRvdyAwLjE1cyBlYXNlLWluLW91dDsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICAuYnRuLW91dGxpbmUtcHJpbWFyeSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwN2JmZjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogbm9uZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzAwN2JmZjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICAuYnRuLW91dGxpbmUtcHJpbWFyeSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogI2QwMzIzMjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkMDMyMzI7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgPHN0eWxlPi5mYSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250OiBub3JtYWwgbm9ybWFsIG5vcm1hbCAxNHB4LzEgRm9udEF3ZXNvbWU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IGluaGVyaXQ7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0ZXh0LXJlbmRlcmluZzogYXV0bzsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfTwvc3R5bGU+CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzdHlsZT4qLCAqOjpiZWZvcmUsICo6OmFmdGVyIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgU3R5bGUgQXR0cmlidXRlIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICAuYnRuLCAuZm9ybS1jb250cm9sIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuMjVyZW0gMC41cmVtOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjNyZW07CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDE1cHg7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIzcHg7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH08L3N0eWxlPgogICAgICAgIC8vICAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgLy8gICAgICAgICA8L2hlYWQ+CiAgICAgICAgLy8gICAgICAgICA8Ym9keSBvbmxvYWQ9IiI+CiAgICAgICAgLy8gICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiID4KICAgICAgICAvLyAgICAgICAgICAgICAgICAgPGEgaHJlZj0iJHtmaWxlQ29udGVudHN9IiBkb3dubG9hZD0iJHtkb2N1bWVudC5kb2N1bWVudE5hbWV9Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXByaW1hcnkiPkRvd25sb2FkPC9idXR0b24+PC9hPgogICAgICAgIC8vICAgICAgICAgICAgIDwvZGl2PgogICAgICAgIC8vICAgICAgICAgICAgIDxicj4KICAgICAgICAvLyAgICAgICAgICAgICA8aWZyYW1lIHNyYz0nJHtmaWxlQ29udGVudHN9JyAgc3R5bGU9Im1pbi13aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7IiA+PC9pZnJhbWU+CiAgICAgICAgLy8gICAgICAgICA8L2JvZHk+CiAgICAgICAgLy8gICAgIDwvaHRtbD5gCiAgICAgICAgLy8gKTsKICAgICAgICAvLyB9KQogICAgICAgIC8vIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTsKICAgICAgfSBlbHNlIGlmIChvcHQub3B0aW9uID09ICJjc3YiKSB7CiAgICAgICAgLy8gCWxldCBmaWxlVGl0bGUgPSAnQmlsbGluZ3MnOwogICAgICAgIC8vIAlsZXQgaGVhZGVycyA9IHsKICAgICAgICAvLyAgICAgICBjcmVhdGVkRGF0ZTogJ1JlcXVlc3RlZCBPbicucmVwbGFjZSgvLC9nLCAnJyksIC8vIHJlbW92ZSBjb21tYXMgdG8gYXZvaWQgZXJyb3JzCiAgICAgICAgLy8gICAgICAgZHVlRGF0ZTogIkR1ZSBEYXRlIiwKICAgICAgICAvLyAgICAgICBzaGlwbWVudE51bWJlcjogIlNoaXBtZW50ICMiLAogICAgICAgIC8vIAkJICBwb3J0T2ZMb2FkaW5nOiAiUG9ydCBvZiBMb2FkIiwKICAgICAgICAvLyAJCSAgcG9ydE9mRGlzY2hhcmdlOiAiUG9ydCBPZiBEaXNjaGFyZ2UiLAogICAgICAgIC8vIAkJICBhbW91bnQ6ICJBbW91bnQiLAogICAgICAgIC8vIAkJICBiYWxhbmNlOiAiQmFsYW5jZSIsCiAgICAgICAgLy8gCQkgIG5ldHN1aXRlU3RhdHVzOiAiU3RhdHVzIgogICAgICAgIC8vIAl9OwogICAgICAgIC8vIAlsZXQgZGF0YU9iaiA9IFtdOwogICAgICAgIC8vIAlmb3IgKGxldCBpID0gMDsgaSA8IG9wdC5yb3dzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgLy8gCQljb25zdCBiaWxsID0gb3B0LnJvd3NbaV07CiAgICAgICAgLy8gCQlkYXRhT2JqLnB1c2goewogICAgICAgIC8vIAkJCWNyZWF0ZWREYXRlOiBiaWxsLmNyZWF0ZWREYXRlLAogICAgICAgIC8vIAkJCWR1ZURhdGU6IGJpbGwuZHVlRGF0ZSwKICAgICAgICAvLyAJCQlzaGlwbWVudE51bWJlcjogYmlsbC5zaGlwbWVudE51bWJlciwKICAgICAgICAvLyAJCQlwb3J0T2ZMb2FkaW5nOiBiaWxsLnBvcnRPZkxvYWRpbmcsCiAgICAgICAgLy8gCQkJcG9ydE9mRGlzY2hhcmdlOiBiaWxsLnBvcnRPZkRpc2NoYXJnZSwKICAgICAgICAvLyAJCQlhbW91bnQ6IGJpbGwuYW1vdW50LAogICAgICAgIC8vIAkJCWJhbGFuY2U6IGJpbGwuYmFsYW5jZSwKICAgICAgICAvLyAJCQluZXRzdWl0ZVN0YXR1czogYmlsbC5uZXRzdWl0ZVN0YXR1cwogICAgICAgIC8vIAkJfSk7CiAgICAgICAgLy8gCX0KICAgICAgICAvLyAJdGhpcy5leHBvcnRDU1ZGaWxlKGhlYWRlcnMsIGRhdGFPYmosIGZpbGVUaXRsZSk7CiAgICAgIH0KICAgIH0sCgogICAgLy8gZXhwb3J0Q1NWRmlsZShoZWFkZXJzLCBiaWxsaW5nRGF0YSwgZmlsZVRpdGxlKSB7CiAgICAvLyAgICAgLy8gaWYgKGhlYWRlcnMpIHsKICAgIC8vICAgICAvLyAgICAgYmlsbGluZ0RhdGEudW5zaGlmdChoZWFkZXJzKTsKICAgIC8vICAgICAvLyB9CgogICAgLy8gICAgIC8vIC8vIENvbnZlcnQgT2JqZWN0IHRvIEpTT04KICAgIC8vICAgICAvLyB2YXIganNvbk9iamVjdCA9IEpTT04uc3RyaW5naWZ5KGJpbGxpbmdEYXRhKTsKCiAgICAvLyAgICAgLy8gdmFyIGNzdiA9IHRoaXMuY29udmVydFRvQ1NWKGpzb25PYmplY3QpOwoKICAgIC8vICAgICAvLyB2YXIgZXhwb3J0ZWRGaWxlbm1hZSA9IGZpbGVUaXRsZSArICcuY3N2JyB8fCAnZXhwb3J0LmNzdic7CgogICAgLy8gICAgIC8vIHZhciBibG9iID0gbmV3IEJsb2IoW2Nzdl0sIHsgdHlwZTogJ3RleHQvY3N2O2NoYXJzZXQ9dXRmLTg7JyB9KTsKICAgIC8vICAgICAvLyBpZiAobmF2aWdhdG9yLm1zU2F2ZUJsb2IpIHsgLy8gSUUgMTArCiAgICAvLyAgICAgLy8gICAgIG5hdmlnYXRvci5tc1NhdmVCbG9iKGJsb2IsIGV4cG9ydGVkRmlsZW5tYWUpOwogICAgLy8gICAgIC8vIH0gZWxzZSB7CiAgICAvLyAgICAgLy8gICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgLy8gICAgIC8vICAgICBpZiAobGluay5kb3dubG9hZCAhPT0gdW5kZWZpbmVkKSB7IC8vIGZlYXR1cmUgZGV0ZWN0aW9uCiAgICAvLyAgICAgLy8gICAgICAgICAvLyBCcm93c2VycyB0aGF0IHN1cHBvcnQgSFRNTDUgZG93bmxvYWQgYXR0cmlidXRlCiAgICAvLyAgICAgLy8gICAgICAgICB2YXIgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgIC8vICAgICAvLyAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCJocmVmIiwgdXJsKTsKICAgIC8vICAgICAvLyAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsIGV4cG9ydGVkRmlsZW5tYWUpOwogICAgLy8gICAgIC8vICAgICAgICAgbGluay5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7CiAgICAvLyAgICAgLy8gICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgLy8gICAgIC8vICAgICAgICAgbGluay5jbGljaygpOwogICAgLy8gICAgIC8vICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsKICAgIC8vICAgICAvLyAgICAgfQogICAgLy8gICAgIC8vIH0KICAgIC8vIH0sCgogICAgc2V0VGFibGVDb25maWdzKCkgewogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5kZW5zaXR5ID0gdGhpcy50YWJsZUNvbmZpZy5kZW5zaXR5OwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5wYWdlU2l6ZSA9IHRoaXMudGFibGVDb25maWcucGFnZVNpemU7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnBhZ2VOYW1lID0gdGhpcy50YWJsZUNvbmZpZy5wYWdlTmFtZTsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUuc29ydEZpZWxkID0gdGhpcy50YWJsZUNvbmZpZy5zb3J0RmllbGQ7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnNvcnREaXJlY3Rpb24gPSB0aGlzLnRhYmxlQ29uZmlnLnNvcnREaXJlY3Rpb247CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLmNvbHVtbnMgPSB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnM7CiAgICB9LAoKICAgIGV4dHJhY3RGaWVsZE5hbWVzRm9yU2VhcmNoUXVlcnkoY29uZmlnKXsKICAgICAgICBjb25maWcuY29sdW1ucy5tYXAoZWxlbWVudCA9PiB7CiAgICAgICAgICB0aGlzLmZpZWxkTmFtZXMucHVzaChlbGVtZW50LmZpZWxkTmFtZSkKICAgICAgICB9KTsKICAgIH0sCgogICAgY2F0Y2hEZXBhcnR1cmU6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdGhpcy5zZHREYXRhID0gZGF0YTsKICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgIH0sCgogICAgbG9hZFRhYmxlKHNkdERhdGEpIHsKICAgICAgbGV0IGZpbHRlcnMgPSBbXTsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgZm9yIChsZXQgc2R0X2RhdGEgb2Ygc2R0RGF0YS5tZXNzYWdlKSB7CiAgICAgICAgaWYoc2R0X2RhdGEuZmllbGROYW1lICE9PSAiYWN0aW9ucyIgKXsKICAgICAgICAgIGxldCBuZXdEYXRlID0gIiI7CiAgICAgICAgICBpZihzZHRfZGF0YS5maWVsZFR5cGUgPT09ICJkYXRlIiAmJiBzZHRfZGF0YS5maWx0ZXJWYWx1ZSAhPT0gIiIpewogICAgICAgICAgICBsZXQgZGF0ZSA9IHNkdF9kYXRhLmZpbHRlclZhbHVlLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGRhdGUgPSBkYXRlLnNwbGl0KCIvIik7CiAgICAgICAgICAgIG5ld0RhdGUgPSBuZXcgRGF0ZShgJHtkYXRlWzFdfS8ke2RhdGVbMF19LyR7ZGF0ZVsyXX1gKQogICAgICAgICAgfQogICAgICAgICAgaWYoc2R0X2RhdGEuZmlsdGVyVmFsdWUgPT09IG51bGwpewogICAgICAgICAgICBzZHRfZGF0YS5maWx0ZXJWYWx1ZSA9ICIiCiAgICAgICAgICB9CiAgICAgICAgICBmaWx0ZXJzLnB1c2goewogICAgICAgICAgICBmaWVsZE5hbWU6IHNkdF9kYXRhLmZpZWxkTmFtZSwKICAgICAgICAgICAgZmllbGRUeXBlOiBzZHRfZGF0YS5maWVsZFR5cGUsCiAgICAgICAgICAgIGZpbHRlclZhbHVlOm5ld0RhdGUgPT09IG51bGwgfHwgbmV3RGF0ZSA9PT0gIiIgPyBzZHRfZGF0YS5maWx0ZXJWYWx1ZTogbmV3RGF0ZS5nZXRUaW1lKCksCiAgICAgICAgICAgIHNlY29uZFZhbHVlOiBzZHRfZGF0YS5zZWNvbmRWYWx1ZSwKICAgICAgICAgICAgY29tcGFyaXNvblR5cGU6IHNkdF9kYXRhLmNvbXBhcmlzb25UeXBlLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmdldFBhZ2luYXRlZFNlcnZpY2VSZXF1ZXN0cygKICAgICAgICBmaWx0ZXJzLAogICAgICAgIHNkdERhdGEuZGF0YS5zb3J0RmllbGQsCiAgICAgICAgc2R0RGF0YS5kYXRhLnNvcnREaXJlY3Rpb24sCiAgICAgICAgc2R0RGF0YS5kYXRhLm9mZnNldCwKICAgICAgICBzZHREYXRhLmRhdGEubGltaXQsCiAgICAgICAgc2R0RGF0YS5kYXRhLnNlYXJjaFF1ZXJ5CiAgICAgICk7CiAgICB9LAoKICAgIGxvYWRTRFQocmVzcG9uc2UsIGRhdGEpIHsKICAgICAgdGhpcy5wYXJlbnREYXRhID0gZGF0YTsKICAgICAgbGV0IGV2ZW50RGF0YSA9IHsKICAgICAgICBkYXRhOiB0aGlzLnBhcmVudERhdGEsCiAgICAgICAgdG90YWxFbGVtZW50czogcmVzcG9uc2UuZGF0YS5pc3N1ZVJlcG9ydGluZ3MudG90YWxFbGVtZW50cywKICAgICAgICB0b3RhbFBhZ2VzOiByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy50b3RhbFBhZ2VzLAogICAgICAgIHBhZ2VOdW1iZXI6IHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmdzLm9mZnNldCwKICAgICAgfTsKICAgICAgdGhpcy4kcmVmcy50ZXN0LmRhdGFMb2FkRXZlbnQoZXZlbnREYXRhKTsKICAgIH0sCgogICAgZ2V0UGFnaW5hdGVkU2VydmljZVJlcXVlc3RzKAogICAgICBmaWx0ZXJzLAogICAgICBzb3J0RmllbGQsCiAgICAgIHNvcnREaXJlY3Rpb24sCiAgICAgIG9mZnNldCwKICAgICAgbGltaXQsCiAgICAgIHNlYXJjaFF1ZXJ5CiAgICApIHsKICAgICAgbGV0IGN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UoCiAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpCiAgICAgICk7CgogICAgICBsZXQgcmVxdWVzdE9iaiA9IHsKICAgICAgICBzZWFyY2hRdWVyeTogc2VhcmNoUXVlcnksCiAgICAgICAgLy8gc2VhcmNoQ29sdW1uczogc2VhcmNoQ29sdW1ucywKICAgICAgICBmaWx0ZXJzOiBmaWx0ZXJzLAogICAgICAgIHNvcnRGaWVsZDogc29ydEZpZWxkLAogICAgICAgIHNvcnREaXJlY3Rpb246IHNvcnREaXJlY3Rpb24sCiAgICAgICAgb2Zmc2V0OiBvZmZzZXQsCiAgICAgICAgbGltaXQ6IGxpbWl0LAogICAgICAgIHRlbmFudFVVSUQ6IGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgICAgIGZpZWxkTmFtZXM6dGhpcy5maWVsZE5hbWVzLAogICAgICAgIGFyY2hpdmVkOmZhbHNlCiAgICAgIH07CgogICAgICBpbnNwZWN0aW9uU2VydmljZS5nZXRQYWdpbmF0ZWRTZXJ2aWNlUmVxdWVzdHMocmVxdWVzdE9iaikKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy5vZmZzZXQgPSBvZmZzZXQ7CiAgICAgICAgICAgIGxldCBzZXJ2aWNlUmVxdWVzdHMgPSByZXNwb25zZS5kYXRhLmlzc3VlUmVwb3J0aW5ncy5jb250ZW50OwogICAgICAgICAgICBpZiAoc2VydmljZVJlcXVlc3RzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMubG9hZFNEVChyZXNwb25zZSxzZXJ2aWNlUmVxdWVzdHMpCiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQgc2VydmljZV9yZXF1ZXN0IG9mIHNlcnZpY2VSZXF1ZXN0cykgewogICAgICAgICAgICAgIHNlcnZpY2VfcmVxdWVzdC5yZXBvcnRlZEF0ID0gbW9tZW50CiAgICAgICAgICAgICAgICAudXRjKHNlcnZpY2VfcmVxdWVzdC5yZXBvcnRlZEF0KQogICAgICAgICAgICAgICAgLmxvY2FsKCkKICAgICAgICAgICAgICAgIC5mb3JtYXQoJ0REL01NL1lZWVkgaGg6bW0gYScpOwogICAgICAgICAgICAgIHNlcnZpY2VfcmVxdWVzdC50aXRsZSA9IHNlcnZpY2VfcmVxdWVzdC50aXRsZQogICAgICAgICAgICAgICAgPyBzZXJ2aWNlX3JlcXVlc3QudGl0bGUKICAgICAgICAgICAgICAgIDogc2VydmljZV9yZXF1ZXN0Lmlzc3VlTmFtZTsKICAgICAgICAgICAgICBpZiAoIXNlcnZpY2VfcmVxdWVzdC50aXRsZSkgewogICAgICAgICAgICAgICAgc2VydmljZV9yZXF1ZXN0LnRpdGxlID0gc2VydmljZV9yZXF1ZXN0Lmlzc3VlRGVzY3JpcHRpb247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuaXNzdWVSZXBvcnRpbmdzLm9mZnNldCA9IG9mZnNldCArIDE7CiAgICAgICAgICAgIHRoaXMubG9hZFNEVChyZXNwb25zZSwgc2VydmljZVJlcXVlc3RzKTsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICJPcHBzIGl0cyBsb29rIGxpa2Ugb3VyIHNlcnZlciBpcyBvZmZsaW5lIiwKICAgICAgICAgICAgICBjb2xvcjogIm5lZ2F0aXZlIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgIT09IHVuZGVmaW5lZCAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNikgewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5yZXNwb25zZS5kYXRhLmRlc2NyaXB0aW9uLCAiZXJyb3IiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJPb3BzIGl0IGxvb2tzIGxpa2Ugb3VyIHNlcnZlciBpcyBvZmZsaW5lIiwgImVycm9yIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAoKICAgIHNldFN0YXRpY0NvbHVtbigpIHsKICAgICAgLy8gbGV0IHN0YXRpY0NvbCA9IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5maWx0ZXIoCiAgICAgIC8vICAgKGNvbCkgPT4gY29sLmxhYmVsTmFtZSA9PSAiQXNzZXQgTmFtZSIKICAgICAgLy8gKVswXTsKCiAgICAgIC8vIHRoaXMucGFyZW50U3lzdGVtU2V0dGluZ3Muc3RhdGljQ29sdW1ucy5wdXNoKHN0YXRpY0NvbCk7CgogICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAvLyAgIGlmICh0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnNbaV0ubGFiZWxOYW1lID09IHN0YXRpY0NvbC5sYWJlbE5hbWUpIHsKICAgICAgLy8gICAgIHRoaXMudGFibGVDb25maWcuY29sdW1ucy5zcGxpY2UoaSwgMSk7CiAgICAgIC8vICAgfQogICAgICAvLyB9CgogICAgICBsZXQgc3RhdGljQ29sID0gdGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zLmZpbHRlcigKICAgICAgICAoY29sKSA9PiBjb2wubGFiZWxOYW1lID09ICJTUiBOdW1iZXIiCiAgICAgIClbMF07CiAgICAgIHRoaXMucGFyZW50U3lzdGVtU2V0dGluZ3Muc3RhdGljQ29sdW1ucy5wdXNoKHN0YXRpY0NvbCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnNbaV0ubGFiZWxOYW1lID09IHN0YXRpY0NvbC5sYWJlbE5hbWUpIHsKICAgICAgICAgIHRoaXMudGFibGVDb25maWcuY29sdW1ucy5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKCiAgICAvLyAtLS0tLS0tLS0tLS0gU0RUIEZ1bmN0aW9ucyBFTkQgLS0tLS0tLS0tLS0tLS0sCiAgICBkZWxldGVPckFyY2hpdmVTZXJ2aWNlUmVxdWVzdHMoKSB7CiAgICAgIHRoaXMuZGVsZXRlSW5zcGVjdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmFyY2hpdmVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmRlbGV0ZU9yQXJjaGl2ZVNlcnZpY2VSZXF1ZXN0KAogICAgICAgIHRoaXMudXVpZCwKICAgICAgICB0aGlzLnByb2Nlc3NUeXBlCiAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzVHlwZSA9PT0gImFyY2hpdmUiKSB7CiAgICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgICAgICAgICAiU2VydmljZSBSZXF1ZXN0IEFyY2hpdmVkIFN1Y2Nlc3NmdWxseS4iLAogICAgICAgICAgICAgICAgInN1Y2Nlc3MiCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KAogICAgICAgICAgICAgICAgIlNlcnZpY2UgUmVxdWVzdCBEZWxldGVkIFN1Y2Nlc3NmdWxseS4iLAogICAgICAgICAgICAgICAgInN1Y2Nlc3MiCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvci5kYXRhLmRlc2NyaXB0aW9uLCAiZXJyb3IiKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgc2hvd1RvYXN0KG1lc3NhZ2UsIHR5cGUpIHsKICAgICAgdGhpcy50b2FzdE1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICB0aGlzLnRvYXN0VHlwZSA9IHR5cGU7CiAgICAgIHRoaXMudG9hc3RGbGFnKys7CiAgICB9LAogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC50aXRsZSA9IHRoaXMuJHJvdXRlLm1ldGEudGl0bGU7CiAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLnRvYXN0RmxhZyA9PT0gdHJ1ZSkgewogICAgICB0aGlzLnNob3dUb2FzdCgKICAgICAgICB0aGlzLiRyb3V0ZS5wYXJhbXMubWVzc2FnZSwKICAgICAgICB0aGlzLiRyb3V0ZS5wYXJhbXMudG9hc3RTdWNjZXNzCiAgICAgICk7CiAgICB9CiAgICBsZXQgY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZSgKICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpCiAgICApOwogICAgdGhpcy5jdXJyZW50VXNlckRldGFpbHMgPSBjdXJyZW50VXNlckRldGFpbHM7CiAgICBpZiAoY3VycmVudFVzZXJEZXRhaWxzID09PSBudWxsKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJmb3JjZVNpZ25vdXQiLCAieWVzIik7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBmZXRjaGluZyBjb25maWdzCiAgICBsZXQgdXVpZCA9IGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkOwoKICAgIGFzc2V0UGVyc29ubmVsU2VydmljZQogICAgICAuZ2V0T3JnQ29uZmlncyh1dWlkLCAidGFibGVDb25maWdzIikKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5vcmdDb25maWdzUmVzcG9uc2UgPSByZXNwb25zZTsKICAgICAgICBsZXQgYWxsQ29uZmlncyA9IEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YS50YWJsZUNvbmZpZ3MpOwogICAgICAgIHRoaXMudGFibGVDb25maWcgPSBhbGxDb25maWdzLmZpbHRlcigKICAgICAgICAgIChkYXRhKSA9PiBkYXRhLnBhZ2VOYW1lID09PSAiU2VydmljZVJlcXVlc3QiCiAgICAgICAgKVswXTsKICAgICAgICB0aGlzLmV4dHJhY3RGaWVsZE5hbWVzRm9yU2VhcmNoUXVlcnkodGhpcy50YWJsZUNvbmZpZyk7CiAgICAgICAgdGhpcy5zZXRTdGF0aWNDb2x1bW4oKTsKICAgICAgICB0aGlzLnNldFRhYmxlQ29uZmlncygpOwogICAgICB9KQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIGZldGNoaW5nIGNvbmZpZ3MiLCAiZXJyb3IiKTsKICAgICAgfSk7CiAgfSwKCiAgdmFsaWRhdGlvbnM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHt9OwogIH0sCgogIHdhdGNoOiB7CiAgICBzZXJ2aWNlUmVxdWVzdFR5cGU6IGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAobmV3VmFsID09PSAiYXJjaGl2ZWQiKSB7CiAgICAgICAgbGV0IGFsbENvbmZpZ3MgPSBKU09OLnBhcnNlKHRoaXMub3JnQ29uZmlnc1Jlc3BvbnNlLmRhdGEudGFibGVDb25maWdzKTsKICAgICAgICBhbGxDb25maWdzID0gYWxsQ29uZmlncy5maWx0ZXIoCiAgICAgICAgICAoZGF0YSkgPT4gZGF0YS5wYWdlTmFtZSA9PT0gImFyY2hpdmVkU2VydmljZVJlcXVlc3QiCiAgICAgICAgKVswXTsKICAgICAgICB0aGlzLmFyY2hpdmVkQ29uZmlncyA9IGFsbENvbmZpZ3M7CiAgICAgIH0KICAgIH0sCiAgfSwKICBjb21wdXRlZDoge30sCn07Cg=="},null]}