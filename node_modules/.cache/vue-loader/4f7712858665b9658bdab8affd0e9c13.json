{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/components/G_InspectionTemplate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/components/G_InspectionTemplate.vue","mtime":1661968702404},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":1662622637719},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1662622639723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBc3NldFBlcnNvbm5lbFNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvQXNzZXRQZXJzb25uZWxTZXJ2aWNlIjsKaW1wb3J0IEluc3BlY3Rpb25TZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0luc3BlY3Rpb25TZXJ2aWNlIjsKaW1wb3J0IHsgRnVuY3Rpb25zIH0gZnJvbSAiQC9zaGFyZWQvRnVuY3Rpb25zIjsKaW1wb3J0IHsgcmVxdWlyZWQsIG1pblZhbHVlIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsKaW1wb3J0IFRlbXBsYXRlSXRlbXMgZnJvbSAiLi4vdmlld3MvY2FsZW5kYXIvY29tcG9uZW50cy90ZW1wbGF0ZUl0ZW1zLnZ1ZSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKCmltcG9ydCBsb2FkZXIgZnJvbSAiQC9jb21wb25lbnRzL0xvYWRlci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRlbXBsYXRlQXNzaWdubWVudCIsCiAgY29tcG9uZW50czogeyBsb2FkZXIsIFRlbXBsYXRlSXRlbXMgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hlY2tPbmU6ICIiLAogICAgICBjaGVja1R3bzogIiIsCiAgICAgIG9uQ2hlY2tPbmU6ICJmYWxzZSIsCiAgICAgIG9uQ2hlY2tUd286ICJmYWxzZSIsCiAgICAgIGFzc2V0U2VsZWN0TmFtZTogIiIsCiAgICAgIHNlbGVjdGVkVGVtcGxhdGU6ICIiLAogICAgICB0ZW1wbGF0ZU5hbWU6ICIiLAogICAgICB0ZW1wbGF0ZU9wdGlvbnM6IFtdLAogICAgICBzZWxlY3RlZFRlbXBJdGVtczogW10sCiAgICAgIGxvYWRlckZsYWc6IGZhbHNlLAogICAgICBuYW1lOiAiIiwKICAgICAgY2hlY2tib3g6IHRydWUsCiAgICAgIHNob3dUZW1wUG9wVXA6IGZhbHNlLAogICAgICByZW1pbmRlckluZGV4OiAwLAogICAgICB1c2VySWQ6IDAsCiAgICAgIHVzZXJHcm91cElkOiAwLAogICAgICBhc3NldElkOiAwLAogICAgICBhc3NldEdyb3VwSWQ6IDAsCiAgICAgIGR1cmF0aW9uVHlwZUlEOiAwLAogICAgICBhc3NpZ25Bc3NldElkOiAwLAogICAgICBzZWxlY3RlZFR5cGU6ICJzY2hlZHVsZSIsCiAgICAgIGRlYWRsaW5lOiAiIiwKICAgICAgdGVtcGxhdGVVVUlEOiAiIiwKICAgICAgYWRob2NkYXRlOiAiIiwKICAgICAgYWRob2N0aW1lOiAiIiwKICAgICAgc3RhcnREYXRlOiAiIiwKICAgICAgc3RhcnRUaW1lOiAiIiwKICAgICAgZW5kRGF0ZTogIiIsCiAgICAgIGVuZFRpbWU6ICIiLAogICAgICB3ZWVrRGF5OiAiIiwKICAgICAgbW9udGhseURhdGU6ICIiLAogICAgICBkYWlseURlYWRMaW5lVGltZTogIiIsCiAgICAgIGN1c3RvbVZhbHVlOiAiMSIsCiAgICAgIG9jY3VyYW5jZXNWYWx1ZTogIiIsCiAgICAgIGN1c3RvbVdlZWs6ICJ3ZWVrIiwKICAgICAgY3VzdG9tRGF0ZTogdHJ1ZSwKICAgICAgb2NjdXJhbmNlc0FjdGl2ZTogdHJ1ZSwKICAgICAgY3VzdG9tV2Vla0RheTogW10sCiAgICAgIGN1c3RvbVllYXJNb250aDogW10sCiAgICAgIGN1c3RvbU1vbnRobHk6ICIiLAogICAgICB3ZWVrRGF5c1ZhbDogIiIsCiAgICAgIEN1c3RvbU1vbnRobHlEYXRlOiAiIiwKICAgICAgYXNzaWduZWRBc3NldFV1aWQ6ICIiLAogICAgICBhc3NpZ25lZEFzc2V0c09wdGlvbnM6IFtdLAogICAgICBhc3NpZ25lZEFzc2V0OiAiIiwKICAgICAgbmV2ZXI6ICIiLAogICAgICBvbjogIiIsCiAgICAgIGFmdGVyOiAiIiwKICAgICAgY3VycmVudFVzZXJEZXRhaWxzOiAiIiwKICAgICAgaW5kZXhSZW1pbmRlcjogMCwKICAgICAgRnJlcXVlbmN5U3RyaW5nOiAiIiwKICAgICAgY3VzdG9tT3B0aW9uczogWwogICAgICAgIHsgbmFtZTogIkRhaWx5IiwgdmFsdWU6ICJkYXkiIH0sCiAgICAgICAgeyBuYW1lOiAiV2Vla2x5IiwgdmFsdWU6ICJ3ZWVrIiB9LAogICAgICAgIHsgbmFtZTogIk1vbnRobHkiLCB2YWx1ZTogIm1vbnRoIiB9LAogICAgICAgIHsgbmFtZTogIlllYXJseSIsIHZhbHVlOiAieWVhciIgfSwKICAgICAgXSwKICAgICAgY3VzdG9tT3B0aW9uc01vbnRobHk6IFsKICAgICAgICB7IG5hbWU6ICIxIiwgdmFsdWU6ICIxIiB9LAogICAgICAgIHsgbmFtZTogIjIiLCB2YWx1ZTogIjIiIH0sCiAgICAgICAgeyBuYW1lOiAiMyIsIHZhbHVlOiAiMyIgfSwKICAgICAgICB7IG5hbWU6ICI0IiwgdmFsdWU6ICI0IiB9LAogICAgICAgIHsgbmFtZTogIjUiLCB2YWx1ZTogIjUiIH0sCiAgICAgICAgeyBuYW1lOiAiNiIsIHZhbHVlOiAiNiIgfSwKICAgICAgICB7IG5hbWU6ICI3IiwgdmFsdWU6ICI3IiB9LAogICAgICAgIHsgbmFtZTogIjgiLCB2YWx1ZTogIjgiIH0sCiAgICAgICAgeyBuYW1lOiAiOSIsIHZhbHVlOiAiOSIgfSwKICAgICAgICB7IG5hbWU6ICIxMCIsIHZhbHVlOiAiMTAiIH0sCiAgICAgICAgeyBuYW1lOiAiMTEiLCB2YWx1ZTogIjExIiB9LAogICAgICAgIHsgbmFtZTogIjEyIiwgdmFsdWU6ICIxMiIgfSwKICAgICAgICB7IG5hbWU6ICIxMyIsIHZhbHVlOiAiMTMiIH0sCiAgICAgICAgeyBuYW1lOiAiMTQiLCB2YWx1ZTogIjE0IiB9LAogICAgICAgIHsgbmFtZTogIjE1IiwgdmFsdWU6ICIxNSIgfSwKICAgICAgICB7IG5hbWU6ICIxNiIsIHZhbHVlOiAiMTYiIH0sCiAgICAgICAgeyBuYW1lOiAiMTciLCB2YWx1ZTogIjE3IiB9LAogICAgICAgIHsgbmFtZTogIjE4IiwgdmFsdWU6ICIxOCIgfSwKICAgICAgICB7IG5hbWU6ICIxOSIsIHZhbHVlOiAiMTkiIH0sCiAgICAgICAgeyBuYW1lOiAiMjAiLCB2YWx1ZTogIjIwIiB9LAogICAgICAgIHsgbmFtZTogIjIxIiwgdmFsdWU6ICIyMSIgfSwKICAgICAgICB7IG5hbWU6ICIyMiIsIHZhbHVlOiAiMjIiIH0sCiAgICAgICAgeyBuYW1lOiAiMjMiLCB2YWx1ZTogIjIzIiB9LAogICAgICAgIHsgbmFtZTogIjI0IiwgdmFsdWU6ICIyNCIgfSwKICAgICAgICB7IG5hbWU6ICIyNSIsIHZhbHVlOiAiMjUiIH0sCiAgICAgICAgeyBuYW1lOiAiMjYiLCB2YWx1ZTogIjI2IiB9LAogICAgICAgIHsgbmFtZTogIjI3IiwgdmFsdWU6ICIyNyIgfSwKICAgICAgICB7IG5hbWU6ICIyOCIsIHZhbHVlOiAiMjgiIH0sCiAgICAgICAgeyBuYW1lOiAiMjkiLCB2YWx1ZTogIjI5IiB9LAogICAgICAgIHsgbmFtZTogIjMwIiwgdmFsdWU6ICIzMCIgfSwKICAgICAgICB7IG5hbWU6ICIzMSIsIHZhbHVlOiAiMzEiIH0sCiAgICAgIF0sCiAgICAgIGN1c3RvbU9wdGlvbnNEYXlzTW9udGhseTogWwogICAgICAgIHsgbmFtZTogIk9ORSIsIHZhbHVlOiAib25lIiB9LAogICAgICAgIHsgbmFtZTogIlRXTyIsIHZhbHVlOiAidHdvIiB9LAogICAgICAgIHsgbmFtZTogIlRIUkVFIiwgdmFsdWU6ICJ0aHJlZSIgfSwKICAgICAgICB7IG5hbWU6ICJGT1VSIiwgdmFsdWU6ICJmb3VyIiB9LAogICAgICAgIHsgbmFtZTogIkZJVkUiLCB2YWx1ZTogImZpdmUiIH0sCiAgICAgIF0sCgogICAgICBzY2hlZHVsZTogWwogICAgICAgIHsgbmFtZTogIkFkLWhvYyIsIHZhbHVlOiAiYWQtaG9jIiB9LAogICAgICAgIHsgbmFtZTogIkRhaWx5IiwgdmFsdWU6ICJkYWlseSIgfSwKICAgICAgICB7IG5hbWU6ICJXZWVrbHkiLCB2YWx1ZTogIndlZWtseSIgfSwKICAgICAgICB7IG5hbWU6ICJNb250aGx5IiwgdmFsdWU6ICJtb250aGx5IiB9LAogICAgICAgIC8vIHsgbmFtZTogIkN1c3RvbSIsIHZhbHVlOiAiY3VzdG9tIiB9LAogICAgICAgIHsgbmFtZTogIlllYXJseSIsIHZhbHVlOiAieWVhcmx5IiB9LAogICAgICBdLAogICAgICB3ZWVrbHlEYXlzOiBbCiAgICAgICAgeyBuYW1lOiAiU3VuZGF5IiwgdmFsdWU6ICJTVU5EQVkiIH0sCiAgICAgICAgeyBuYW1lOiAiTW9uZGF5IiwgdmFsdWU6ICJNT05EQVkiIH0sCiAgICAgICAgeyBuYW1lOiAiVHVlc2RheSIsIHZhbHVlOiAiVFVFU0RBWSIgfSwKICAgICAgICB7IG5hbWU6ICJXZWRuZXNkYXkiLCB2YWx1ZTogIldFRE5FU0RBWSIgfSwKICAgICAgICB7IG5hbWU6ICJUaHVyc2RheSIsIHZhbHVlOiAiVEhVUlNEQVkiIH0sCiAgICAgICAgeyBuYW1lOiAiRnJpZGF5IiwgdmFsdWU6ICJGUklEQVkiIH0sCiAgICAgICAgeyBuYW1lOiAiU2F0dXJkYXkiLCB2YWx1ZTogIlNBVFVSREFZIiB9LAogICAgICBdLAogICAgICB5ZWFybHlNb250aHM6IFsKICAgICAgICB7IG5hbWU6ICJKYW51YXJ5IiwgdmFsdWU6ICIxIiB9LAogICAgICAgIHsgbmFtZTogIkZlYnJ1YXJ5IiwgdmFsdWU6ICIyIiB9LAogICAgICAgIHsgbmFtZTogIk1hcmNoIiwgdmFsdWU6ICIzIiB9LAogICAgICAgIHsgbmFtZTogIkFwcmlsIiwgdmFsdWU6ICI0IiB9LAogICAgICAgIHsgbmFtZTogIk1heSIsIHZhbHVlOiAiNSIgfSwKICAgICAgICB7IG5hbWU6ICJKdW5lIiwgdmFsdWU6ICI2IiB9LAogICAgICAgIHsgbmFtZTogIkp1bHkiLCB2YWx1ZTogIjciIH0sCiAgICAgICAgeyBuYW1lOiAiQXVndXN0IiwgdmFsdWU6ICI4IiB9LAogICAgICAgIHsgbmFtZTogIlNlcHRlbWJlciIsIHZhbHVlOiAiOSIgfSwKICAgICAgICB7IG5hbWU6ICJPY3RvYmVyIiwgdmFsdWU6ICIxMCIgfSwKICAgICAgICB7IG5hbWU6ICJOb3ZlbWJlciIsIHZhbHVlOiAiMTEiIH0sCiAgICAgICAgeyBuYW1lOiAiRGVjZW1iZXIiLCB2YWx1ZTogIjEyIiB9LAogICAgICBdLAogICAgICBzZWxlY3RlZFNjaGVkdWxlOiAiIiwKICAgICAgdGVtcGxhdGVRYXNpbTogIiIsCiAgICAgIHJlbWluZGVyQXJyYXk6IFsKICAgICAgICB7CiAgICAgICAgICByZW1pbmRlcjogW10sCiAgICAgICAgICByZW1pbmRlck9wdGlvbnM6IFsKICAgICAgICAgICAgeyBuYW1lOiAiRW1haWwiLCB2YWx1ZTogImVtYWlsIiB9LAogICAgICAgICAgICB7IG5hbWU6ICJTTVMiLCB2YWx1ZTogInNtcyIgfSwKICAgICAgICAgICAgeyBuYW1lOiAiTm90aWZpY2F0aW9uIiwgdmFsdWU6ICJub3RpZmljYXRpb24iIH0sCiAgICAgICAgICBdLAogICAgICAgICAgZHVyYXRpb25WYWx1ZTogIiIsCiAgICAgICAgICBkdXJhdGlvblR5cGU6ICIiLAogICAgICAgICAgZHVyYXRpb25UeXBlT3B0aW9uczogWwogICAgICAgICAgICB7IG5hbWU6ICJNaW51dGVzIiwgdmFsdWU6ICJtaW51dGVzIiB9LAogICAgICAgICAgICB7IG5hbWU6ICJIb3VycyIsIHZhbHVlOiAiaG91cnMiIH0sCiAgICAgICAgICAgIHsgbmFtZTogIkRheXMiLCB2YWx1ZTogImRheXMiIH0sCiAgICAgICAgICAgIHsgbmFtZTogIldlZWtzIiwgdmFsdWU6ICJ3ZWVrcyIgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgYXNzaWduZWU6ICIiLAogICAgICBhc3NpZ25lZXM6IFsKICAgICAgICB7IG5hbWU6ICJVc2VycyIsIHZhbHVlOiAidXNlciIgfSwKICAgICAgICB7IG5hbWU6ICJBc3NldHMiLCB2YWx1ZTogImFzc2V0IiB9LAogICAgICBdLAogICAgICBhbGxVc2VyczogW10sCiAgICAgIHVzZXJHcm91cHM6IFtdLAogICAgICBhc3NpZ25lZFVzZXJHcm91cDogIiIsCiAgICAgIGFzc2lnblVzZXJzOiBbXSwKICAgICAgYXNzaWduZWRVc2VyOiAiIiwKICAgICAgYXNzZXRHcm91cE9wdGlvbnM6IFtdLAogICAgICBncm91cEFzc2V0T3B0aW9uczogW10sCiAgICAgIGFzc2V0R3JvdXBzOiAiIiwKICAgICAgYXNzZXROYW1lOiAiIiwKICAgICAgZWRpdFZhbHVlZmxhZzogZmFsc2UsCiAgICAgIGFzc2V0TmFtZVVVSUQ6ICIiLAogICAgICBhc3NldEdyb3Vwc1VVSUQ6ICIiLAogICAgICBhc3NpZ25lZFVzZXJVVUlEOiAiIiwKICAgICAgYXNzaWduZWRVc2VyR3JvdXBVVUlEOiAiIiwKICAgICAgYXNzZXRBc3NpZ25GbGFnOiB0cnVlLAogICAgICBhc3NpZ25lZEFzc2V0TmFtZTogIiIsCiAgICAgIGFzc2V0QXNzaWduZWRVc2VyczogW10sCiAgICAgIFNlbGVjdGVkVGVtcGxhdGVPYmo6ICIiLAogICAgICBrZXlJbmRleDogMCwKICAgICAgZ2xvYmFsU2NoZWR1bGVyZGF0ZTogIiIsCiAgICAgIGluc3BlY3Rpb25JdGVtQ2F0ZWdvcmllczogIiIsCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIEVkaXRTY2hlVGVuYW50VVVJZDogU3RyaW5nLAogICAgRWRpdFNjaGVJZDogU3RyaW5nLAogICAgdGVtcE9iajoge30sCiAgICBhc3NpZ25lZFRlbXBsYXRlT2JqOiB7fSwKICAgIGNhbGVuZGVyRGF0ZU9iajoge30sCiAgfSwKICBtZXRob2RzOiB7CiAgICB2YWxpZGF0ZUR1cmF0aW9uKGluZGV4LCBpdGVtKSB7CiAgICAgIHRoaXMuJHYucmVtaW5kZXJBcnJheS4kZWFjaFtpbmRleF1baXRlbV0uJHRvdWNoKCk7CiAgICB9LAogICAgdmFsaWRhdGVEYXRlKGRhdGUsIGZpZWxkKSB7CiAgICAgIGxldCBjdXJyZW50RGF0ZSA9IG1vbWVudCgpLmZvcm1hdCgpLnNwbGl0KCJUIik7CiAgICAgIGN1cnJlbnREYXRlID0gY3VycmVudERhdGVbMF07CiAgICAgIGlmIChtb21lbnQoZGF0ZSkuaXNCZWZvcmUoY3VycmVudERhdGUpKSB7CiAgICAgICAgdGhpc1tmaWVsZF0gPSAiIjsKICAgICAgICByZXR1cm4gdGhpcy4kZW1pdCgKICAgICAgICAgICJzaG93VG9hc3QiLAogICAgICAgICAgIlBsZWFzZSBTZWxlY3QgQ3VycmVudCBEYXRlIG9yIEZ1dHVyZSBEYXRlLiIsCiAgICAgICAgICAiZXJyb3IiCiAgICAgICAgKTsKICAgICAgfQogICAgfSwKICAgIHNob3dDYXRhZ29yaWVzKCkgewogICAgICB0aGlzLnNob3dUZW1wUG9wVXAgPSB0cnVlOwogICAgICB0aGlzLnRlbXBPYmouZWRpdEZsYWc7CiAgICB9LAogICAgb25TZWxlY3RlZFRlbXBsYXRlKHZhbHVlKSB7CiAgICAgIHRoaXMudGVtcGxhdGVOYW1lID0gdmFsdWUuZGlzcGxheTsKICAgICAgdGhpcy5TZWxlY3RlZFRlbXBsYXRlT2JqID0gdmFsdWU7CiAgICAgIHRoaXMudGVtcGxhdGVVVUlEID0gdmFsdWUudmFsdWU7CiAgICAgIHRoaXMuc2hvd1RlbXBQb3BVcCA9IHRydWU7CiAgICB9LAogICAgZ2V0QWxsVGVtcGxhdGUoKSB7CiAgICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKAogICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKQogICAgICApOwogICAgICBJbnNwZWN0aW9uU2VydmljZS5nZXRBbGxJbnNwZWN0aW9uVGVtcGxhdGVzKAogICAgICAgIGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkCiAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLnRlbXBsYXRlT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblRlbXBsYXRlRFRPUzsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0Rm9ybUVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pIHsKICAgICAgaWYgKGZpZWxkVmFsaWRhdGlvbi4kZGlydHkpIHsKICAgICAgICByZXR1cm4gRnVuY3Rpb25zLmdldEZvcm1GaWVsZEVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pOwogICAgICB9CiAgICB9LAogICAgbmV2ZXJmdW5jTmFtZSh2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMub24gPSBmYWxzZTsKICAgICAgICB0aGlzLmFmdGVyID0gZmFsc2U7CiAgICAgICAgKHRoaXMuQ3VzdG9tTW9udGhseURhdGUgPSAiIiksICh0aGlzLm9jY3VyYW5jZXNWYWx1ZSA9ICIiKTsKICAgICAgfQogICAgfSwKICAgIGNoZWNrT25lRnVuYyh2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkgewogICAgICAgICh0aGlzLmN1c3RvbU1vbnRobHkgPSAiIiksCiAgICAgICAgICAodGhpcy53ZWVrRGF5c1ZhbCA9ICIiKSwKICAgICAgICAgICh0aGlzLmNoZWNrVHdvID0gIiIpLAogICAgICAgICAgKHRoaXMub25DaGVja09uZSA9ICJ0cnVlIiksCiAgICAgICAgICAodGhpcy5vbkNoZWNrVHdvID0gImZhbHNlIik7CiAgICAgIH0KICAgIH0sCiAgICBjaGVja1R3b0Z1bmModmFsKSB7CiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmNoZWNrT25lID0gIiI7CiAgICAgICAgKHRoaXMuY3VzdG9tV2Vla0RheSA9ICIiKSwKICAgICAgICAgICh0aGlzLmN1c3RvbU1vbnRobHkgPSAiIiksCiAgICAgICAgICAodGhpcy5vbkNoZWNrVHdvID0gInRydWUiKSwKICAgICAgICAgICh0aGlzLm9uQ2hlY2tPbmUgPSAiZmFsc2UiKTsKICAgICAgfSBlbHNlIHsKICAgICAgfQogICAgfSwKICAgIG9uZnVuY05hbWUodmFsKSB7CiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgICB0aGlzLm5ldmVyID0gZmFsc2U7CiAgICAgICAgdGhpcy5hZnRlciA9IGZhbHNlOwogICAgICAgIHRoaXMuY3VzdG9tRGF0ZSA9IGZhbHNlOwogICAgICAgIHRoaXMub2NjdXJhbmNlc0FjdGl2ZSA9IHRydWU7CiAgICAgICAgdGhpcy5vY2N1cmFuY2VzVmFsdWUgPSAiIjsKICAgICAgfQogICAgfSwKICAgIGFmdGVyZnVuY05hbWUodmFsKSB7CiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgICB0aGlzLm9uID0gZmFsc2U7CiAgICAgICAgdGhpcy5uZXZlciA9IGZhbHNlOwogICAgICAgIHRoaXMub2NjdXJhbmNlc0FjdGl2ZSA9IGZhbHNlOwogICAgICAgIHRoaXMuY3VzdG9tRGF0ZSA9IHRydWU7CiAgICAgICAgdGhpcy5vY2N1cmFuY2VzVmFsdWUgPSAiMSI7CiAgICAgICAgdGhpcy5DdXN0b21Nb250aGx5RGF0ZSA9ICIiOwogICAgICB9CiAgICB9LAogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlIik7CiAgICAgIHRoaXMuc2hvd1RlbXBQb3BVcCA9IGZhbHNlOwogICAgfSwKCiAgICBvblNlbGVjdGVkU2NoZWR1bGUodmFsKSB7CiAgICAgIGlmICh2YWwudmFsdWUgPT09ICJkYWlseSIpIHsKICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSA9ICIiOwogICAgICAgIHRoaXMuYWRob2N0aW1lID0gIiI7CiAgICAgICAgdGhpcy5hZGhvY2RhdGUgPSAiIjsKICAgICAgICB0aGlzLkZyZXF1ZW5jeVN0cmluZyA9ICJEYXkiOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PT0gImFkLWhvYyIpIHsKICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9ICIiOwogICAgICAgIHRoaXMuZW5kVGltZSA9ICIiOwogICAgICAgIHRoaXMuZW5kRGF0ZSA9ICIiOwogICAgICAgIHRoaXMuZW5kVGltZSA9ICIiOwogICAgICAgIHRoaXMuZGFpbHlEZWFkTGluZVRpbWUgPSAiIjsKICAgICAgfSBlbHNlIGlmICh2YWwudmFsdWUgPT09ICJ3ZWVrbHkiKSB7CiAgICAgICAgdGhpcy5kZWFkTGluZURhdGUgPSAiIjsKICAgICAgICB0aGlzLmFkaG9jdGltZSA9ICIiOwogICAgICAgIHRoaXMuYWRob2NkYXRlID0gIiI7CiAgICAgICAgdGhpcy5GcmVxdWVuY3lTdHJpbmcgPSAiV2VlayI7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09PSAibW9udGhseSIpIHsKICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSA9ICIiOwogICAgICAgIHRoaXMuYWRob2N0aW1lID0gIiI7CiAgICAgICAgdGhpcy5hZGhvY2RhdGUgPSAiIjsKICAgICAgICB0aGlzLkZyZXF1ZW5jeVN0cmluZyA9ICJNb250aCI7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09PSAieWVhcmx5IikgewogICAgICAgIHRoaXMuZGVhZExpbmVEYXRlID0gIiI7CiAgICAgICAgdGhpcy5hZGhvY3RpbWUgPSAiIjsKICAgICAgICB0aGlzLmFkaG9jZGF0ZSA9ICIiOwogICAgICAgIHRoaXMuRnJlcXVlbmN5U3RyaW5nID0gIlllYXIiOwogICAgICB9CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRSZW1pbmRlcihpbmRleDEsIHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZS5yZW1pbmRlci5sZW5ndGggPiAwICYmIHRoaXMuJHJvdXRlLm5hbWUgIT09ICJpbnNwZWN0aW9uIikgewogICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJlbWluZGVyQXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXlbaW5kZXgxXS5kdXJhdGlvblR5cGUgPSAiZGF5cyI7CiAgICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXlbaW5kZXgxXS5kdXJhdGlvblZhbHVlID0gIjEiOwogICAgICAgICAgdGhpcy5kdXJhdGlvblR5cGVJRCsrOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBvblNlbGVjdGVkRHVyYXRpb25UaW1lKHZhbCkgewogICAgICAvLyBjb25zb2xlLmxvZyh2YWwpOwogICAgfSwKCiAgICBvblNlbGVjdGVkQXNzaWduZWUodmFsKSB7CiAgICAgIGlmICh2YWwuZGlzcGxheSA9PT0gIkFzc2V0cyIpIHsKICAgICAgICB0aGlzLmFzc2lnbmVkVXNlciA9ICIiOwogICAgICAgIHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgPSAiIjsKICAgICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy51c2VySWQrKzsKICAgICAgICB0aGlzLnVzZXJHcm91cElkKys7CiAgICAgICAgLy90aGlzLmRpc2FibGVVc2VyID0gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAodmFsLmRpc3BsYXkgPT09ICJVc2VycyIpIHsKICAgICAgICB0aGlzLmFzc2V0TmFtZSA9ICIiOwogICAgICAgIHRoaXMuYXNzZXRHcm91cHMgPSAiIjsKICAgICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMgPSBbXTsKICAgICAgICB0aGlzLmFzc2V0R3JvdXBJZCsrOwogICAgICAgIHRoaXMuYXNzZXRJZCsrOwogICAgICAgIHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzID0gW107CiAgICAgICAgLy90aGlzLmRpc2FibGVBc3NldCA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRVc2VyR3JvdXAodmFsKSB7CiAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gIiI7CiAgICAgIHRoaXMuZWRpdFZhbHVlZmxhZyA9IHRydWU7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldCA9ICIiOwogICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IG51bGw7CiAgICAgIHRoaXMuYXNzaWduQXNzZXRJZCsrOwogICAgICB0aGlzLnVzZXJJZCsrOwogICAgfSwKCiAgICBvblNlbGVjdGVkVXNlcih2YWwpIHsKICAgICAgdGhpcy5jcmVhdGVkRm9yVXNlck5hbWUgPSB2YWwuZGlzcGxheTsKICAgICAgdGhpcy5hc3NpZ25lZFVzZXJHcm91cCA9ICIiOwogICAgICB0aGlzLmVkaXRWYWx1ZWZsYWcgPSB0cnVlOwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSAiIjsKICAgICAgdGhpcy5hc3NpZ25Bc3NldElkKys7CiAgICAgIHRoaXMudXNlckdyb3VwSWQrKzsKICAgIH0sCgogICAgb25TZWxlY3RlZEFzc2V0R3JwKHZhbCkgewogICAgICB0aGlzLmFzc2V0TmFtZSA9ICIiOwogICAgICB0aGlzLmVkaXRWYWx1ZWZsYWcgPSB0cnVlOwogICAgICB0aGlzLmFzc2V0QXNzaWduZWRVc2VycyA9IFtdOwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkID0gIiI7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldCA9ICIiOwogICAgICB0aGlzLmFzc2V0SWQrKzsKICAgIH0sCgogICAgb25TZWxlY3RlZEFzc2V0KHZhbCkgewogICAgICB0aGlzLmFzc2V0U2VsZWN0TmFtZSA9IHZhbC5kaXNwbGF5OwogICAgICB0aGlzLmFzc2V0R3JvdXBzID0gIiI7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPSAiIjsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0ID0gIiI7CiAgICAgIHRoaXMuZWRpdFZhbHVlZmxhZyA9IHRydWU7CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIEFzc2V0UGVyc29ubmVsU2VydmljZS5jaGVja0Fzc2lnbm1lbnRPZkFuQXNzZXRCeVVVSUQodmFsLnZhbHVlKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuYXNzZXRBc3NpZ25GbGFnID0gcmVzLmRhdGEuYXNzaWdubWVudDsKICAgICAgICAgIHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzID0KICAgICAgICAgICAgcmVzLmRhdGEudXNlckRUT1MgIT09IG51bGwgPyByZXMuZGF0YS51c2VyRFRPUyA6IFtdOwogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIH0pOwogICAgICB0aGlzLmFzc2V0R3JvdXBJZCsrOwogICAgfSwKCiAgICBvblNlbGVjdGVkQXNzaWduQXNzZXRzKHZhbCkgewogICAgICB0aGlzLmFzc2lnbmVkQXNzZXROYW1lID0gdmFsLmRpc3BsYXk7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldCA9IHZhbC52YWx1ZTsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0VXVpZCA9ICIiOwogICAgfSwKCiAgICBvblNlbGVjdGVkQ3VzdG9tV2Vlayh2YWwpIHsKICAgICAgaWYgKHZhbC5kaXNwbGF5ID09ICJkYXkiKSB7CiAgICAgICAgdGhpcy5mcmVxdWVuY3lEYXlzID0gIiI7CiAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gIiI7CiAgICAgICAgdGhpcy5jdXN0b21Nb250aGx5ID0gIiI7CiAgICAgIH0gZWxzZSBpZiAodmFsLmRpc3BsYXkgPT0gIndlZWsiKSB7CiAgICAgICAgdGhpcy5jdXN0b21Nb250aGx5ID0gIiI7CiAgICAgIH0gZWxzZSBpZiAodmFsLmRpc3BsYXkgPT0gIm1vbnRoIikgewogICAgICAgIHRoaXMuY3VzdG9tV2Vla0RheSA9ICIiOwogICAgICB9IGVsc2UgaWYgKHZhbC5kaXNwbGF5ID09ICJ5ZWFyIikgewogICAgICAgIHRoaXMuZnJlcXVlbmN5RGF5cyA9ICIiOwogICAgICAgIHRoaXMuY3VzdG9tV2Vla0RheSA9ICIiOwogICAgICAgIHRoaXMuY3VzdG9tTW9udGhseSA9ICIiOwogICAgICB9CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRDdXN0b21Nb250aGx5KCkge30sCgogICAgc2VsZWN0VGVtcGxhdGUoKSB7CiAgICAgIHRoaXMuJGVtaXQoInNlbGVjdFRlbXAiKTsKICAgIH0sCgogICAgb25TZWxlY3RlZFdlZWtEYXkodmFsKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJvblNlbGVjdGVkV2Vla0RheSIsIHZhbCk7CiAgICB9LAogICAgb25TZWxlY3RlZFllYXJNb250aCh2YWwpIHsKICAgICAgLy8gY29uc29sZS5sb2coIm9uU2VsZWN0ZWRZZWFyTW9udGgiLCB2YWwpOwogICAgfSwKICAgIGNyZWF0ZUFkZGl0aW9uYWxJbnNwZWN0aW9uKCkgewogICAgICB0aGlzLiRlbWl0KCJjcmVhdGVJbnNwZWN0aW9uIik7CiAgICB9LAoKICAgIGFkZChpbmRleCkgewogICAgICB0aGlzLiRlbWl0KCJhZGRSZW1pbmRlcnMiLCBpbmRleCk7CiAgICB9LAoKICAgIGNsaWNrUmVtb3ZlKGluZGV4KSB7CiAgICAgIHRoaXMuJGVtaXQoInJlbW92ZVJlbWluZGVycyIsIGluZGV4KTsKICAgIH0sCgogICAgYWRkVGVtcGxhdGUoKSB7CiAgICAgIHRoaXMuc2hvd1RlbXBQb3BVcCA9IHRydWU7CiAgICB9LAoKICAgIHRlbXBDbG9zZSgpIHsKICAgICAgdGhpcy5zaG93VGVtcFBvcFVwID0gZmFsc2U7CiAgICAgIHRoaXMudGVtcE9iai5lZGl0RmxhZyA9IGZhbHNlOwogICAgfSwKCiAgICBhZGRSZW1pbmRlcigpIHsKICAgICAgdGhpcy5yZW1pbmRlckFycmF5LnB1c2goewogICAgICAgIHJlbWluZGVyOiBbXSwKICAgICAgICByZW1pbmRlck9wdGlvbnM6IFsKICAgICAgICAgIHsgbmFtZTogIkVtYWlsIiwgdmFsdWU6ICJlbWFpbCIgfSwKICAgICAgICAgIHsgbmFtZTogIlNNUyIsIHZhbHVlOiAic21zIiB9LAogICAgICAgICAgeyBuYW1lOiAiTm90aWZpY2F0aW9uIiwgdmFsdWU6ICJub3RpZmljYXRpb24iIH0sCiAgICAgICAgXSwKICAgICAgICBkdXJhdGlvblZhbHVlOiAiIiwKICAgICAgICBkdXJhdGlvblR5cGU6ICIiLAogICAgICAgIGR1cmF0aW9uVHlwZU9wdGlvbnM6IFsKICAgICAgICAgIHsgbmFtZTogIk1pbnV0ZXMiLCB2YWx1ZTogIm1pbnV0ZXMiIH0sCiAgICAgICAgICB7IG5hbWU6ICJIb3VycyIsIHZhbHVlOiAiaG91cnMiIH0sCiAgICAgICAgICB7IG5hbWU6ICJEYXlzIiwgdmFsdWU6ICJkYXlzIiB9LAogICAgICAgICAgeyBuYW1lOiAiV2Vla3MiLCB2YWx1ZTogIndlZWtzIiB9LAogICAgICAgIF0sCiAgICAgIH0pOwogICAgfSwKCiAgICByZW1vdmVSZW1pbmRlcihpbmRleCkgewogICAgICBpZiAoaW5kZXggIT09IDApIHsKICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXkuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgfSwKCiAgICBUZW1wbGF0ZUFzc2lnbm1lbnQoKSB7CiAgICAgIHRoaXMuJHYuJHRvdWNoKCk7CiAgICAgIGlmICh0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGVtaXQoCiAgICAgICAgICAic2hvd1RvYXN0IiwKICAgICAgICAgICJQbGVhc2UgZmlsbCBhbGwgcmVxdWlyZWQgZmllbGRzLiEiLAogICAgICAgICAgIndhcm5pbmciCiAgICAgICAgKTsKICAgICAgfQogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09PSAiY3VzdG9tIikgewogICAgICAgIGlmICh0aGlzLm5ldmVyID09PSAiIiAmJiB0aGlzLm9uID09PSAiIiAmJiB0aGlzLmFmdGVyID09PSAiIikgewogICAgICAgICAgYWxlcnQoIlBsZWFzZSBTZWxlY3QgRW5kIFNjaGVkdWxlIFRpbWUgaW4gY3VzdG9tIFJlY3VyZW5jZSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5jdXN0b21XZWVrID09ICJ3ZWVrIiAmJiB0aGlzLmN1c3RvbVdlZWtEYXkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBXZWVrIGRheXMiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuY3VzdG9tV2VlayA9PSAibW9udGgiICYmIHRoaXMuY3VzdG9tTW9udGhseSA9PT0gIiIpIHsKICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IE1vbnRobHkgZGF5Iik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NpZ25lZSA9PT0gInVzZXIiKSB7CiAgICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyID09PSAiIiAmJiB0aGlzLmFzc2lnbmVkVXNlckdyb3VwID09PSAiIikgewogICAgICAgICAgYWxlcnQoIlBsZWFzZSBTZWxlY3QgVXNlciBvciBVc2VyIEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFzc2lnbmVlID09PSAiYXNzZXQiKSB7CiAgICAgICAgaWYgKHRoaXMuYXNzZXROYW1lID09ICIiICYmIHRoaXMuYXNzZXRHcm91cHMgPT0gIiIpIHsKICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IEFzc2V0IG9yIEFzc2V0IEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5hc3NpZ25lZFVzZXIgIT09ICIiICYmIHRoaXMuYXNzaWduZWRBc3NldCA9PT0gIiIpIHsKICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBBc3NldCB0byBhc3NpZ24gVGVtcGxhdGUiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgIT09ICIiICYmIHRoaXMuYXNzaWduZWRBc3NldCA9PT0gIiIpIHsKICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBBc3NldCB0byBhc3NpZ24gVGVtcGxhdGUiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXNzZXROYW1lICE9PSAiIiAmJiB0aGlzLmFzc2V0QXNzaWduRmxhZyA9PT0gZmFsc2UpIHsKICAgICAgICBhbGVydCgiUGxlYXNlIEFzc2lnbiBBc3NldCB0byB1c2VyIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zdGFydERhdGUgIT09ICIiKSB7CiAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQodGhpcy5zdGFydERhdGUpLmZvcm1hdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc3RhcnREYXRlID0gIiI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZW5kRGF0ZSAhPT0gIiIpIHsKICAgICAgICB0aGlzLmVuZERhdGUgPSBtb21lbnQodGhpcy5lbmREYXRlKS5mb3JtYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVuZERhdGUgPSAiIjsKICAgICAgfQogICAgICBpZiAodGhpcy5hZGhvY2RhdGUgIT09ICIiICYmIHRoaXMuYWRob2NkYXRlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSA9IG1vbWVudCh0aGlzLmFkaG9jZGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kZWFkTGluZURhdGUgPSAiIjsKICAgICAgfQogICAgICBpZiAodGhpcy5tb250aGx5RGF0ZSAhPT0gIiIgJiYgdGhpcy5tb250aGx5RGF0ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5tb250aGx5RGF0ZSA9IG1vbWVudCh0aGlzLm1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1vbnRobHlEYXRlID0gIiI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFzc2V0TmFtZSAhPT0gIiIgJiYgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gdGhpcy5hc3NldEFzc2lnbmVkVXNlcnNbMF0udXVpZDsKICAgICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLm5hbWU7CiAgICAgIH0KCiAgICAgIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZSgKICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKICAgICAgKTsKICAgICAgdmFyIGN1cnJlbnREYXRlVGltZUZvclRlbXAgPSBtb21lbnQoKS50b0RhdGUoKS5nZXRUaW1lKCk7CgogICAgICB2YXIgZ2V0VG9kYXlEYXRlID0gbW9tZW50KCkudG9EYXRlKCk7CiAgICAgIHZhciBmb3JtYXRlVG9kYXlEYXRlID0gbW9tZW50KGdldFRvZGF5RGF0ZSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgIHZhciBkYWlseVNjaGVkdWxlckRhdGUgPSAiIjsKCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09ICJzY2hlZHVsZXIiICYmIHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiZGFpbHkiKSB7CiAgICAgICAgbGV0IHNlbGVjdGVkRGF0ZSA9IG1vbWVudCh0aGlzLmNhbGVuZGVyRGF0ZU9iai5zdGFydFRpbWUpLmZvcm1hdCgKICAgICAgICAgICJZWVlZLU1NLUREIgogICAgICAgICk7CiAgICAgICAgbGV0IG9iakRhdGUgPSBzZWxlY3RlZERhdGU7CiAgICAgICAgdGhpcy5nbG9iYWxTY2hlZHVsZXJkYXRlID0gb2JqRGF0ZTsKICAgICAgfQoKICAgICAgbGV0IHJlcXVlc3RPYmogPSB7CiAgICAgICAgY3JlYXRlZEJ5VXNlck5hbWU6IHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUuZmlyc3ROYW1lLAogICAgICAgIHRlbXBsYXRlTmFtZTogdGhpcy5uYW1lLAogICAgICAgIHRlbXBsYXRlVVVJRDogdGhpcy50ZW1wbGF0ZVVVSUQsCiAgICAgICAgY3JlYXRlZEZvclVzZXJOYW1lOiB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSwKICAgICAgICBzdGFydERhdGU6IHRoaXMuc3RhcnREYXRlLAogICAgICAgIHN0YXJ0VGltZTogdGhpcy5zdGFydFRpbWUsCiAgICAgICAgY3JlYXRlZEJ5OiBgJHt0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLmZpcnN0TmFtZX0gJHt0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLmxhc3ROYW1lfWAsCiAgICAgICAgLy8gYWRob2MKICAgICAgICBkZWFkTGluZURhdGU6CiAgICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSAhPT0gIiIgJiYgdGhpcy5hZGhvY3RpbWUgIT09ICIiCiAgICAgICAgICAgID8gbW9tZW50KHRoaXMuZGVhZExpbmVEYXRlKS5mb3JtYXQoIllZWVktTU0tREQiKSArCiAgICAgICAgICAgICAgIlQiICsKICAgICAgICAgICAgICB0aGlzLmFkaG9jdGltZSArCiAgICAgICAgICAgICAgIjoiICsKICAgICAgICAgICAgICAiMDArMDU6MDAiCiAgICAgICAgICAgIDogdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09PSAiZGFpbHkiICYmCiAgICAgICAgICAgICAgdGhpcy4kcm91dGUubmFtZSA9PT0gInNjaGVkdWxlciIKICAgICAgICAgICAgPyB0aGlzLmdsb2JhbFNjaGVkdWxlcmRhdGUgKwogICAgICAgICAgICAgICJUIiArCiAgICAgICAgICAgICAgdGhpcy5kYWlseURlYWRMaW5lVGltZSArCiAgICAgICAgICAgICAgIjoiICsKICAgICAgICAgICAgICAiMDArMDU6MDAiCiAgICAgICAgICAgIDogZm9ybWF0ZVRvZGF5RGF0ZSArCiAgICAgICAgICAgICAgIlQiICsKICAgICAgICAgICAgICB0aGlzLmRhaWx5RGVhZExpbmVUaW1lICsKICAgICAgICAgICAgICAiOiIgKwogICAgICAgICAgICAgICIwMCswNTowMCIsCiAgICAgICAgZGVhZExpbmVUaW1lOiB0aGlzLmFkaG9jdGltZSwKICAgICAgICBmcmVxdWVuY3lUeXBlOiB0aGlzLnNlbGVjdGVkU2NoZWR1bGUsCiAgICAgICAgY3JlYXRlZEZvckFzc2V0VVVJRDogdGhpcy5hc3NldE5hbWUsCiAgICAgICAgY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEOiB0aGlzLmFzc2V0R3JvdXBzLAogICAgICAgIGNyZWF0ZWRGb3JVc2VyVVVJRDogdGhpcy5hc3NpZ25lZFVzZXIsCiAgICAgICAgY3JlYXRlZEZvclVzZXJHcm91cFVVSUQ6IHRoaXMuYXNzaWduZWRVc2VyR3JvdXAsCiAgICAgICAgc2VsZWN0ZWRVc2VyQXNzZXRVVUlEOiB0aGlzLmFzc2lnbmVkQXNzZXQsCiAgICAgICAgc2VsZWN0ZWRVc2VyQXNzZXROYW1lOiB0aGlzLmFzc2lnbmVkQXNzZXROYW1lIHx8IHRoaXMuYXNzZXRTZWxlY3ROYW1lLAogICAgICAgIHJlcGVhdEV2ZXJ5OiBwYXJzZUludCh0aGlzLmN1c3RvbVZhbHVlKSwKICAgICAgICByZXBlYXRFdmVyeVRpbWU6IHRoaXMuY3VzdG9tVmFsdWUsCiAgICAgICAgcmVwZWF0RXZlcnlUeXBlOiB0aGlzLmN1c3RvbVdlZWssCiAgICAgICAgcmVwZWF0TW9udGhEYXk6IHRoaXMuY3VzdG9tTW9udGhseSwKICAgICAgfTsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiYWQtaG9jIikgewogICAgICAgIHJlcXVlc3RPYmouaW5zcGVjdGlvblR5cGUgPSAiYWQtaG9jIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXF1ZXN0T2JqLmluc3BlY3Rpb25UeXBlID0gInNjaGVkdWxlZCI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAid2Vla2x5IikgewogICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IHRoaXMud2Vla0RheTsKICAgICAgfQogICAgICBpZiAoCiAgICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJjdXN0b20iICYmCiAgICAgICAgcmVxdWVzdE9iai5yZXBlYXRFdmVyeVR5cGUgPT0gIndlZWsiCiAgICAgICkgewogICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY3VzdG9tWWVhck1vbnRoKTsKICAgICAgfQogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IikgewogICAgICAgIHJlcXVlc3RPYmoubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5tb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0KICAgICAgaWYgKAogICAgICAgIHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiZGFpbHkiIHx8CiAgICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJ3ZWVrbHkiIHx8CiAgICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IiB8fAogICAgICAgIHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAieWVhcmx5IgogICAgICApIHsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09PSAieWVhcmx5IikgewogICAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jdXN0b21ZZWFyTW9udGgpOwogICAgICAgIH0KICAgICAgICAvLwlyZXF1ZXN0T2JqLm1vbnRobHlEYXRlID0gbW9tZW50KHRoaXMuQ3VzdG9tTW9udGhseURhdGUpLmZvcm1hdCgpOwogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gIndlZWtseSIpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY3VzdG9tV2Vla0RheSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm5ldmVyID09IHRydWUpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kVHlwZSA9ICJuZXZlciI7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9uID09IHRydWUpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kVHlwZSA9ICJvbiI7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZERhdGUgPSBtb21lbnQodGhpcy5DdXN0b21Nb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmFmdGVyID09IHRydWUpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kVHlwZSA9ICJhZnRlciI7CiAgICAgICAgICByZXF1ZXN0T2JqLm9jY3VycmVuY2UgPSB0aGlzLm9jY3VyYW5jZXNWYWx1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICgKICAgICAgICB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gIndlZWtseSIgfHwKICAgICAgICB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gIm1vbnRobHkiIHx8CiAgICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJ5ZWFybHkiCiAgICAgICkgewogICAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09ICJzY2hlZHVsZXIiKSB7CiAgICAgICAgICBsZXQgc2VsZWN0ZWREYXRlID0gbW9tZW50KHRoaXMuY2FsZW5kZXJEYXRlT2JqLnN0YXJ0VGltZSkuZm9ybWF0KAogICAgICAgICAgICAiWVlZWS1NTS1ERFRISDpNTTpTU1oiCiAgICAgICAgICApOwogICAgICAgICAgbGV0IGRhdGVTcGxpdCA9IHNlbGVjdGVkRGF0ZS5zcGxpdCgiVCIpOwogICAgICAgICAgbGV0IG9iakRhdGUgPSBkYXRlU3BsaXRbMF07CiAgICAgICAgICBsZXQgdGltZVZhbHVlID0gZGF0ZVNwbGl0WzFdOwogICAgICAgICAgbGV0IHRpbWVTcGxpdCA9IHRpbWVWYWx1ZS5zcGxpdCgiOiIpOwogICAgICAgICAgbGV0IGhvdXIgPSB0aW1lU3BsaXRbMF07CiAgICAgICAgICBsZXQgbWluID0gdGltZVNwbGl0WzFdOwogICAgICAgICAgbGV0IGRhdGVUaW1lVmFsdWUgPQogICAgICAgICAgICBvYmpEYXRlICsgIlQiICsgaG91ciArICI6IiArIG1pbiArICI6IiArICIwMCswNTowMCI7CiAgICAgICAgICAvL2xldCBkYXRlID0gRGF0ZSgpOwogICAgICAgICAgbGV0IGN1cnJlbnREYXRlID0gbW9tZW50KGRhdGVUaW1lVmFsdWUpLmZvcm1hdCgpOwogICAgICAgICAgcmVxdWVzdE9iai5zdGFydERhdGUgPSBjdXJyZW50RGF0ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVxdWVzdE9iai5zdGFydERhdGUgPSBjdXJyZW50RGF0ZVRpbWVGb3JUZW1wOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbGV0IHJlbWluZGVyQXJyYXkgPSBbXTsKICAgICAgZm9yIChsZXQgZmllbGQgb2YgdGhpcy5yZW1pbmRlckFycmF5KSB7CiAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgIHJlbWluZGVyOiBmaWVsZC5yZW1pbmRlciwKICAgICAgICAgIGR1cmF0aW9uVmFsdWU6IGZpZWxkLmR1cmF0aW9uVmFsdWUsCiAgICAgICAgICBkdXJhdGlvblR5cGU6IGZpZWxkLmR1cmF0aW9uVHlwZSwKICAgICAgICB9OwogICAgICAgIHJlbWluZGVyQXJyYXkucHVzaChvYmopOwogICAgICAgIHJlcXVlc3RPYmoucmVtaW5kZXIgPSBKU09OLnN0cmluZ2lmeShyZW1pbmRlckFycmF5KTsKICAgICAgfQogICAgICB0aGlzLiRlbWl0KCJyZXF1ZXN0T2JqIiwgcmVxdWVzdE9iaik7CiAgICAgIHRoaXMuJGVtaXQoInNlbGVjdGVkVGVtcEl0ZW1zIiwgdGhpcy5zZWxlY3RlZFRlbXBJdGVtcyk7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09ICJzY2hlZHVsZXIiKSB7CiAgICAgICAgbGV0IHNjaGVkdWxlT2JqID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlNjaGVkdWxlIikuZWoyX2luc3RhbmNlc1swXTsKICAgICAgICBzY2hlZHVsZU9iai5yZWZyZXNoTGF5b3V0KCk7CiAgICAgICAgdGhpcy5rZXlJbmRleCsrOwogICAgICB9CiAgICB9LAoKICAgIGVkaXRBc3NpZ25lZFRlbXAoKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9IHRoaXMuYXNzaWduZWRUZW1wbGF0ZU9iai5mcmVxdWVuY3lUeXBlOwogICAgfSwKICAgIC8vIG9sZCBlZGl0CiAgICBVcGRhdGVUZW1wbGF0ZUFzc2lnbm1lbnQoKSB7CiAgICAgIHRoaXMuJHYuJHRvdWNoKCk7CiAgICAgIGlmICh0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGVtaXQoCiAgICAgICAgICAic2hvd1RvYXN0IiwKICAgICAgICAgICJQbGVhc2UgZmlsbCBhbGwgcmVxdWlyZWQgZmllbGRzLiEiLAogICAgICAgICAgIndhcm5pbmciCiAgICAgICAgKTsKICAgICAgfQogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09PSAiY3VzdG9tIikgewogICAgICAgIGlmICh0aGlzLm5ldmVyID09PSAiIiAmJiB0aGlzLm9uID09PSAiIiAmJiB0aGlzLmFmdGVyID09PSAiIikgewogICAgICAgICAgYWxlcnQoIlBsZWFzZSBTZWxlY3QgRW5kIFNjaGVkdWxlIFRpbWUgaW4gY3VzdG9tIFJlY3VyZW5jZSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5jdXN0b21XZWVrID09ICJ3ZWVrIiAmJiB0aGlzLmN1c3RvbVdlZWtEYXkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBXZWVrIGRheXMiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuY3VzdG9tV2VlayA9PSAibW9udGgiICYmIHRoaXMuY3VzdG9tTW9udGhseSA9PT0gIiIpIHsKICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IE1vbnRobHkgZGF5Iik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NpZ25lZSA9PT0gInVzZXIiKSB7CiAgICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyID09PSAiIiAmJiB0aGlzLmFzc2lnbmVkVXNlckdyb3VwID09PSAiIikgewogICAgICAgICAgYWxlcnQoIlBsZWFzZSBTZWxlY3QgVXNlciBvciBVc2VyIEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFzc2lnbmVlID09PSAiYXNzZXQiKSB7CiAgICAgICAgaWYgKHRoaXMuYXNzZXROYW1lID09ICIiICYmIHRoaXMuYXNzZXRHcm91cHMgPT0gIiIpIHsKICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgU2VsZWN0IEFzc2V0IG9yIEFzc2V0IEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5hc3NpZ25lZFVzZXIgIT09ICIiICYmIHRoaXMuYXNzaWduZWRBc3NldCA9PT0gIiIpIHsKICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBBc3NldCB0byBhc3NpZ24gVGVtcGxhdGUiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgIT09ICIiICYmIHRoaXMuYXNzaWduZWRBc3NldCA9PT0gIiIpIHsKICAgICAgICBhbGVydCgiUGxlYXNlIFNlbGVjdCBBc3NldCB0byBhc3NpZ24gVGVtcGxhdGUiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXNzZXROYW1lICE9PSAiIiAmJiB0aGlzLmFzc2V0QXNzaWduRmxhZyA9PT0gZmFsc2UpIHsKICAgICAgICBhbGVydCgiUGxlYXNlIEFzc2lnbiBBc3NldCB0byB1c2VyIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zdGFydERhdGUgIT09ICIiKSB7CiAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQodGhpcy5zdGFydERhdGUpLmZvcm1hdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc3RhcnREYXRlID0gIiI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZW5kRGF0ZSAhPT0gIiIpIHsKICAgICAgICB0aGlzLmVuZERhdGUgPSBtb21lbnQodGhpcy5lbmREYXRlKS5mb3JtYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVuZERhdGUgPSAiIjsKICAgICAgfQogICAgICBpZiAodGhpcy5hZGhvY2RhdGUgIT09ICIiICYmIHRoaXMuYWRob2NkYXRlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLmRlYWRMaW5lRGF0ZSA9IG1vbWVudCh0aGlzLmFkaG9jZGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kZWFkTGluZURhdGUgPSAiIjsKICAgICAgfQogICAgICBpZiAodGhpcy5tb250aGx5RGF0ZSAhPT0gIiIgJiYgdGhpcy5tb250aGx5RGF0ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5tb250aGx5RGF0ZSA9IG1vbWVudCh0aGlzLm1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1vbnRobHlEYXRlID0gIiI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFzc2V0TmFtZSAhPT0gIiIgJiYgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gdGhpcy5hc3NldEFzc2lnbmVkVXNlcnNbMF0udXVpZDsKICAgICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLm5hbWU7CiAgICAgIH0KCiAgICAgIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZSgKICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKICAgICAgKTsKCiAgICAgIHZhciBnZXRUb2RheURhdGUgPSBtb21lbnQoKS50b0RhdGUoKTsKICAgICAgdmFyIGZvcm1hdGVUb2RheURhdGUgPSBtb21lbnQoZ2V0VG9kYXlEYXRlKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT0gInNjaGVkdWxlciIgJiYgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJkYWlseSIpIHsKICAgICAgICBsZXQgc2VsZWN0ZWREYXRlID0gbW9tZW50KHRoaXMuY2FsZW5kZXJEYXRlT2JqLnN0YXJ0VGltZSkuZm9ybWF0KAogICAgICAgICAgIllZWVktTU0tREQiCiAgICAgICAgKTsKICAgICAgICBsZXQgb2JqRGF0ZSA9IHNlbGVjdGVkRGF0ZTsKICAgICAgICB0aGlzLmdsb2JhbFNjaGVkdWxlcmRhdGUgPSBvYmpEYXRlOwogICAgICB9CgogICAgICBsZXQgcmVxdWVzdE9iaiA9IHsKICAgICAgICBjcmVhdGVkQnlVc2VyTmFtZTogdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5maXJzdE5hbWUsCiAgICAgICAgdGVtcGxhdGVOYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgdGVtcGxhdGVVVUlEOgogICAgICAgICAgdGhpcy4kcm91dGUubmFtZSA9PSAic2NoZWR1bGVyIiA/IHRoaXMuRWRpdFNjaGVJZCA6IHRoaXMudGVtcGxhdGVVVUlELAogICAgICAgIGNyZWF0ZWRGb3JVc2VyTmFtZTogdGhpcy5jcmVhdGVkRm9yVXNlck5hbWUsCiAgICAgICAgc3RhcnREYXRlOiB0aGlzLnN0YXJ0RGF0ZSwKICAgICAgICBzdGFydFRpbWU6IHRoaXMuc3RhcnRUaW1lLAogICAgICAgIGRlYWRMaW5lRGF0ZToKICAgICAgICAgIHRoaXMuZGVhZExpbmVEYXRlICE9PSAiIiAmJiB0aGlzLmFkaG9jdGltZSAhPT0gIiIKICAgICAgICAgICAgPyBtb21lbnQodGhpcy5kZWFkTGluZURhdGUpLmZvcm1hdCgiWVlZWS1NTS1ERCIpICsKICAgICAgICAgICAgICAiVCIgKwogICAgICAgICAgICAgIHRoaXMuYWRob2N0aW1lICsKICAgICAgICAgICAgICAiOiIgKwogICAgICAgICAgICAgICIwMCswNTowMCIKICAgICAgICAgICAgOiB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImRhaWx5IgogICAgICAgICAgICA/IGZvcm1hdGVUb2RheURhdGUgKyAiVCIgKyB0aGlzLmRhaWx5RGVhZExpbmVUaW1lICsgIjoiICsgIjAwKzA1OjAwIgogICAgICAgICAgICA6IHRoaXMuZ2xvYmFsU2NoZWR1bGVyZGF0ZSArCiAgICAgICAgICAgICAgIlQiICsKICAgICAgICAgICAgICB0aGlzLmRhaWx5RGVhZExpbmVUaW1lICsKICAgICAgICAgICAgICAiOiIgKwogICAgICAgICAgICAgICIwMCswNTowMCIsCiAgICAgICAgZGVhZExpbmVUaW1lOiB0aGlzLmFkaG9jdGltZSwKICAgICAgICBmcmVxdWVuY3lUeXBlOiB0aGlzLnNlbGVjdGVkU2NoZWR1bGUsCiAgICAgICAgcmVwZWF0RXZlcnk6IHBhcnNlSW50KHRoaXMuY3VzdG9tVmFsdWUpLAogICAgICAgIHJlcGVhdEV2ZXJ5VGltZTogdGhpcy5jdXN0b21WYWx1ZSwKICAgICAgICByZXBlYXRFdmVyeVR5cGU6IHRoaXMuY3VzdG9tV2VlaywKICAgICAgICByZXBlYXRNb250aERheTogdGhpcy5jdXN0b21Nb250aGx5LAogICAgICB9OwoKICAgICAgaWYgKHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPT09ICIiIHx8IHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPT09IG51bGwpIHsKICAgICAgICByZXF1ZXN0T2JqLnNlbGVjdGVkVXNlckFzc2V0VVVJRCA9IHRoaXMuYXNzaWduZWRBc3NldDsKICAgICAgICByZXF1ZXN0T2JqLnNlbGVjdGVkVXNlckFzc2V0TmFtZSA9IHRoaXMuYXNzaWduZWRBc3NldE5hbWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVxdWVzdE9iai5zZWxlY3RlZFVzZXJBc3NldFVVSUQgPSB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkOwogICAgICAgIHJlcXVlc3RPYmouc2VsZWN0ZWRVc2VyQXNzZXROYW1lID0gdGhpcy5hc3NpZ25lZEFzc2V0OwogICAgICB9CiAgICAgIGlmICh0aGlzLmFzc2lnbmVlID09PSAiYXNzZXQiICYmIHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICBpZiAodGhpcy5lZGl0VmFsdWVmbGFnID09PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlciA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLnV1aWQ7CiAgICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLm5hbWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyVVVJRCA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLnV1aWQ7CiAgICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmVkaXRWYWx1ZWZsYWcgPT09IHRydWUpIHsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JBc3NldFVVSUQgPSB0aGlzLmFzc2V0TmFtZTsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JBc3NldEdyb3VwVVVJRCA9IHRoaXMuYXNzZXRHcm91cHM7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlclVVSUQgPSB0aGlzLmFzc2lnbmVkVXNlcjsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEID0gdGhpcy5hc3NpZ25lZFVzZXJHcm91cDsKICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRWYWx1ZWZsYWcgPT09IGZhbHNlKSB7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yQXNzZXRVVUlEID0gdGhpcy5hc3NldE5hbWVVVUlEOwogICAgICAgIHJlcXVlc3RPYmouY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEID0gdGhpcy5hc3NldEdyb3Vwc1VVSUQ7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlclVVSUQgPSB0aGlzLmFzc2lnbmVkVXNlclVVSUQ7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlckdyb3VwVVVJRCA9IHRoaXMuYXNzaWduZWRVc2VyR3JvdXBVVUlEOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJhZC1ob2MiKSB7CiAgICAgICAgcmVxdWVzdE9iai5pbnNwZWN0aW9uVHlwZSA9ICJhZC1ob2MiOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcXVlc3RPYmouaW5zcGVjdGlvblR5cGUgPSAic2NoZWR1bGVkIjsKICAgICAgfQogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJ3ZWVrbHkiKSB7CiAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gdGhpcy53ZWVrRGF5OwogICAgICB9CiAgICAgIGlmICgKICAgICAgICB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImN1c3RvbSIgJiYKICAgICAgICByZXF1ZXN0T2JqLnJlcGVhdEV2ZXJ5VHlwZSA9PSAid2VlayIKICAgICAgKSB7CiAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jdXN0b21XZWVrRGF5KTsKICAgICAgfQogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IikgewogICAgICAgIHJlcXVlc3RPYmoubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5tb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0KICAgICAgaWYgKAogICAgICAgIHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiZGFpbHkiIHx8CiAgICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJ3ZWVrbHkiIHx8CiAgICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IiB8fAogICAgICAgIHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAieWVhcmx5IgogICAgICApIHsKICAgICAgICBpZiAocmVxdWVzdE9iai5zZWxlY3RlZFNjaGVkdWxlID09PSAieWVhcmx5IikgewogICAgICAgICAgZGVidWdnZXI7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygidGhpcy5jdXN0b21ZZWFyTW9udGgiLCB0aGlzLmN1c3RvbVllYXJNb250aCk7CiAgICAgICAgICAvLyBkZWJ1Z2dlcjsKICAgICAgICAgIC8vIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY3VzdG9tWWVhck1vbnRoKTsKICAgICAgICAgIC8vIGRlYnVnZ2VyOwogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlcXVlc3RPYmouY3VzdG9tWWVhck1vbnRoJyxyZXF1ZXN0T2JqLmN1c3RvbVllYXJNb250aCkKICAgICAgICB9CiAgICAgICAgLy8JcmVxdWVzdE9iai5tb250aGx5RGF0ZSA9IG1vbWVudCh0aGlzLkN1c3RvbU1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgICAgICBpZiAocmVxdWVzdE9iai5yZXBlYXRFdmVyeVR5cGUgPT09ICJ3ZWVrIikgewogICAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jdXN0b21XZWVrRGF5KTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMubmV2ZXIgPT0gdHJ1ZSkgewogICAgICAgICAgcmVxdWVzdE9iai5lbmRUeXBlID0gIm5ldmVyIjsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMub24gPT0gdHJ1ZSkgewogICAgICAgICAgcmVxdWVzdE9iai5lbmRUeXBlID0gIm9uIjsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kRGF0ZSA9IG1vbWVudCh0aGlzLkN1c3RvbU1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuYWZ0ZXIgPT0gdHJ1ZSkgewogICAgICAgICAgcmVxdWVzdE9iai5lbmRUeXBlID0gImFmdGVyIjsKICAgICAgICAgIHJlcXVlc3RPYmoub2NjdXJyZW5jZSA9IHRoaXMub2NjdXJhbmNlc1ZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgICBsZXQgcmVtaW5kZXJBcnJheSA9IFtdOwogICAgICBmb3IgKGxldCBmaWVsZCBvZiB0aGlzLnJlbWluZGVyQXJyYXkpIHsKICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgcmVtaW5kZXI6IGZpZWxkLnJlbWluZGVyLAogICAgICAgICAgZHVyYXRpb25WYWx1ZTogZmllbGQuZHVyYXRpb25WYWx1ZSwKICAgICAgICAgIGR1cmF0aW9uVHlwZTogZmllbGQuZHVyYXRpb25UeXBlLAogICAgICAgIH07CiAgICAgICAgcmVtaW5kZXJBcnJheS5wdXNoKG9iaik7CiAgICAgICAgcmVxdWVzdE9iai5yZW1pbmRlciA9IEpTT04uc3RyaW5naWZ5KHJlbWluZGVyQXJyYXkpOwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZUFzc2lnbmVkVGVtcGxhdGUiLCByZXF1ZXN0T2JqKTsKICAgICAgdGhpcy50ZW1wT2JqLmVkaXRGbGFnID0gZmFsc2U7CiAgICB9LAogICAgZ2V0RXhpc3RpbmdJbnNwZWN0aW9uVGVtcGxhdGUodXVpZCwgdGVuYW50VVVJRCkgewogICAgICBsZXQgaW5zcGVjdGlvbkl0ZW0gPSBudWxsOwogICAgICBJbnNwZWN0aW9uU2VydmljZS5nZXRJbnNwZWN0aW9uVGVtcGxhdGVCeVVVSUQodXVpZCwgdGVuYW50VVVJRCkudGhlbigKICAgICAgICAocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAvLyBpZih0aGlzLkVkaXRTY2hlVGVuYW50VVVJZCAhPT0gIiIgJiYgdGhpcy5FZGl0U2NoZUlkICE9PSAiIil7CiAgICAgICAgICAgIC8vICAgdGhpcy5pbnNwZWN0aW9uSXRlbUNhdGVnb3JpZXMgPQogICAgICAgICAgICAvLyAgICAgcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uVGVtcGxhdGUuaW5zcGVjdGlvbkl0ZW1DYXRlZ29yaWVzOwogICAgICAgICAgICAvLyAgICAgLy8gY29uc29sZS5sb2coJ2VkaXQnLHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblRlbXBsYXRlKQogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIHRoaXMuZ3JvdXBBc3NldE9wdGlvbnMgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuYXNzZXRBbmRHcm91cHNOYW1lUmVzcG9uc2UuYXNzZXREVE9TOwogICAgICAgICAgICB0aGlzLmFzc2V0R3JvdXBPcHRpb25zID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmFzc2V0QW5kR3JvdXBzTmFtZVJlc3BvbnNlLmFzc2V0R3JvdXBEVE9TOwogICAgICAgICAgICB0aGlzLnVzZXJHcm91cHMgPSByZXNwb25zZS5kYXRhLnVzZXJBbmRHcm91cFJlc3BvbnNlLnVzZXJHcm91cERUT1M7CiAgICAgICAgICAgIHRoaXMuYXNzaWduVXNlcnMgPSByZXNwb25zZS5kYXRhLnVzZXJBbmRHcm91cFJlc3BvbnNlLnVzZXJEVE9TOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uVGVtcGxhdGUgIT0gbnVsbCkgewogICAgICAgICAgICAgIGluc3BlY3Rpb25JdGVtID0gcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uVGVtcGxhdGU7CiAgICAgICAgICAgICAgdGhpcy5pbnNwZWN0aW9uVGVtcGxhdGUgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25UZW1wbGF0ZTsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPSBpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlOwogICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRBc3NldCA9IGluc3BlY3Rpb25JdGVtLnNlbGVjdGVkVXNlckFzc2V0TmFtZTsKICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkID0gaW5zcGVjdGlvbkl0ZW0uc2VsZWN0ZWRVc2VyQXNzZXRVVUlEOwogICAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09PSAic2NoZWR1bGVyIikgewogICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gaW5zcGVjdGlvbkl0ZW0ubmFtZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmVuZFR5cGUgPT0gIm9uIikgewogICAgICAgICAgICAgICAgdGhpcy5DdXN0b21Nb250aGx5RGF0ZSA9IG1vbWVudChpbnNwZWN0aW9uSXRlbS5lbmREYXRlKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJERCBNTU0gWVlZWSIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB0aGlzLm9uID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluc3BlY3Rpb25JdGVtLmVuZFR5cGUgPT0gIm5ldmVyIikgewogICAgICAgICAgICAgICAgdGhpcy5uZXZlciA9IHRydWU7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuYWZ0ZXIgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5vY2N1cmFuY2VzVmFsdWUgPSBpbnNwZWN0aW9uSXRlbS5vY2N1cnJlbmNlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeVR5cGUgPT09ICJhZC1ob2MiKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPSBpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlOwogICAgICAgICAgICAgICAgdGhpcy5hZGhvY2RhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uZGVhZExpbmVEYXRlKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJERCBNTU0gWVlZWSIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB2YXIgcmVhbFRpbWUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uZGVhZExpbmVEYXRlKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJISDptbSIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBtb21lbnQuZHVyYXRpb24oeyBob3VyczogNSB9KTsKICAgICAgICAgICAgICAgIHRoaXMuYWRob2N0aW1lID0gcmVhbFRpbWU7CiAgICAgICAgICAgICAgICB0aGlzLmluZGV4UmVtaW5kZXIrKzsKICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhSZW1pbmRlcisrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5VHlwZSA9PT0gImRhaWx5IikgewogICAgICAgICAgICAgICAgdmFyIHJlYWxUaW1lRGFpbHkgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uZGVhZExpbmVEYXRlKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJISDptbSIKICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgdGhpcy5kYWlseURlYWRMaW5lVGltZSA9IHJlYWxUaW1lRGFpbHk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlID09PSAid2Vla2x5IikgewogICAgICAgICAgICAgICAgdGhpcy53ZWVrRGF5ID0gaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5RGF5czsKICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tV2Vla0RheSA9IEpTT04ucGFyc2UoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5RGF5cyk7CiAgICAgICAgICAgICAgICB0aGlzLmluZGV4UmVtaW5kZXIrKzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeVR5cGUgPT09ICJ5ZWFybHkiKSB7CiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbU1vbnRobHkgPSBpbnNwZWN0aW9uSXRlbS5yZXBlYXRNb250aERheTsKICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tV2Vla0RheSA9IEpTT04ucGFyc2UoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5RGF5cyk7CiAgICAgICAgICAgICAgICB0aGlzLmluZGV4UmVtaW5kZXIrKzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeVR5cGUgPT09ICJtb250aGx5IikgewogICAgICAgICAgICAgICAgdGhpcy5jdXN0b21Nb250aGx5ID0gaW5zcGVjdGlvbkl0ZW0ucmVwZWF0TW9udGhEYXk7CiAgICAgICAgICAgICAgICB0aGlzLmluZGV4UmVtaW5kZXIrKzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeVR5cGUgPT09ICJjdXN0b20iKSB7CiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbVdlZWsgPSBpbnNwZWN0aW9uSXRlbS5yZXBlYXRFdmVyeVR5cGU7CiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbVZhbHVlID0gaW5zcGVjdGlvbkl0ZW0ucmVwZWF0RXZlcnlUaW1lOwogICAgICAgICAgICAgICAgdGhpcy5jdXN0b21Nb250aGx5ID0gaW5zcGVjdGlvbkl0ZW0ucmVwZWF0TW9udGhEYXk7CiAgICAgICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5RGF5cyAhPSAiIikgewogICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbVdlZWtEYXkgPSBKU09OLnBhcnNlKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeURheXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmVuZFR5cGUgPT09ICJuZXZlciIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5uZXZlciA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluc3BlY3Rpb25JdGVtLmVuZFR5cGUgPT09ICJvbiIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5vbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgIHRoaXMuQ3VzdG9tTW9udGhseURhdGUgPSBtb21lbnQoCiAgICAgICAgICAgICAgICAgICAgaW5zcGVjdGlvbkl0ZW0uZW5kRGF0ZQogICAgICAgICAgICAgICAgICApLmZvcm1hdCgiREQgTU1NIFlZWVkiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5zcGVjdGlvbkl0ZW0uZW5kVHlwZSA9PT0gImFmdGVyIikgewogICAgICAgICAgICAgICAgICB0aGlzLmFmdGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgdGhpcy5vY2N1cmFuY2VzVmFsdWUgPSBpbnNwZWN0aW9uSXRlbS5vY2N1cnJlbmNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvclVzZXJVVUlEICE9PSAiIiAmJgogICAgICAgICAgICAgICAgaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvclVzZXJVVUlEICE9PSBudWxsCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVlID0gInVzZXIiOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuYXNzaWduVXNlcnMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgIGxldCB1c2VyID0gdGhpcy5hc3NpZ25Vc2Vycy5maW5kKAogICAgICAgICAgICAgICAgICAgICh1KSA9PiB1LnV1aWQgPT09IGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyVVVJRAogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBpZiAodXNlciAhPT0gdW5kZWZpbmVkICYmIHVzZXIgIT09IG51bGwgJiYgdXNlciAhPT0ge30pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlciA9IHVzZXIubmFtZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlclVVSUQgPSB1c2VyLnV1aWQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMudXNlcklkKys7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEICE9PSAiIiAmJgogICAgICAgICAgICAgICAgaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvclVzZXJHcm91cFVVSUQgIT09IG51bGwKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZXJHcm91cHMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgIGxldCBncm91cCA9IHRoaXMudXNlckdyb3Vwcy5maW5kKAogICAgICAgICAgICAgICAgICAgIChnKSA9PiBnLnV1aWQgPT09IGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlECiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIGlmIChncm91cCAhPT0gdW5kZWZpbmVkICYmIGdyb3VwICE9PSBudWxsICYmIGdyb3VwICE9PSB7fSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgPSBncm91cC5uYW1lOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyR3JvdXBVVUlEID0gZ3JvdXAudXVpZDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWUgPSAidXNlciI7CiAgICAgICAgICAgICAgICB0aGlzLnVzZXJHcm91cElkKys7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGluc3BlY3Rpb25JdGVtLmFzc2V0VVVJRCAhPT0gIiIgJiYKICAgICAgICAgICAgICAgIGluc3BlY3Rpb25JdGVtLmFzc2V0VVVJRCAhPT0gbnVsbAogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBBc3NldE9wdGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBsZXQgYXNzZXQgPSB0aGlzLmdyb3VwQXNzZXRPcHRpb25zLmZpbmQoCiAgICAgICAgICAgICAgICAgICAgKGEpID0+IGEudXVpZCA9PT0gaW5zcGVjdGlvbkl0ZW0uYXNzZXRVVUlECiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIGlmIChhc3NldCAhPT0gdW5kZWZpbmVkICYmIGFzc2V0ICE9PSBudWxsICYmIGFzc2V0ICE9PSB7fSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXROYW1lID0gYXNzZXQubmFtZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2V0TmFtZVVVSUQgPSBhc3NldC51dWlkOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVlID0gImFzc2V0IjsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmFzc2lnblVzZXJzLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICAgICAgICBsZXQgdXNlciA9IHRoaXMuYXNzaWduVXNlcnMuZmluZCgKICAgICAgICAgICAgICAgICAgICAodSkgPT4gdS51dWlkID09PSBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yVXNlclVVSUQKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgaWYgKHVzZXIgIT09IHVuZGVmaW5lZCAmJiB1c2VyICE9PSBudWxsICYmIHVzZXIgIT09IHt9KSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXIgPSB1c2VyLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXJVVUlEID0gdXNlci51dWlkOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmFzc2V0SWQrKzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEICE9PSAiIiAmJgogICAgICAgICAgICAgICAgaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEICE9PSBudWxsCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5hc3NldEdyb3VwT3B0aW9ucy5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgICAgICAgbGV0IGFzc2V0R3JvdXAgPSB0aGlzLmFzc2V0R3JvdXBPcHRpb25zLmZpbmQoCiAgICAgICAgICAgICAgICAgICAgKGFnKSA9PiBhZy51dWlkID09PSBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yQXNzZXRHcm91cFVVSUQKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIGFzc2V0R3JvdXAgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICAgIGFzc2V0R3JvdXAgIT09IG51bGwgJiYKICAgICAgICAgICAgICAgICAgICBhc3NldEdyb3VwICE9PSB7fQogICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2V0R3JvdXBzID0gYXNzZXRHcm91cC5ncm91cE5hbWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NldEdyb3Vwc1VVSUQgPSBhc3NldEdyb3VwLnV1aWQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZSA9ICJhc3NldCI7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRHcm91cElkKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCByZW1pbmQgPSBKU09OLnBhcnNlKGluc3BlY3Rpb25JdGVtLnJlbWluZGVyKTsKICAgICAgICAgICAgICBpZiAocmVtaW5kICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXkgPSBbXTsKICAgICAgICAgICAgICAgIGZvciAobGV0IGZpZWxkIG9mIHJlbWluZCkgewogICAgICAgICAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICAgICAgICAgIHJlbWluZGVyOiBmaWVsZC5yZW1pbmRlciwKICAgICAgICAgICAgICAgICAgICBkdXJhdGlvblZhbHVlOiBmaWVsZC5kdXJhdGlvblZhbHVlLAogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uVHlwZTogZmllbGQuZHVyYXRpb25UeXBlLAogICAgICAgICAgICAgICAgICAgIHJlbWluZGVyT3B0aW9uczogWwogICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAiRW1haWwiLCB2YWx1ZTogImVtYWlsIiB9LAogICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAiU01TIiwgdmFsdWU6ICJzbXMiIH0sCiAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJOb3RpZmljYXRpb24iLCB2YWx1ZTogIm5vdGlmaWNhdGlvbiIgfSwKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uVHlwZU9wdGlvbnM6IFsKICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogIk1pbnV0ZXMiLCB2YWx1ZTogIm1pbnV0ZXMiIH0sCiAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJIb3VycyIsIHZhbHVlOiAiaG91cnMiIH0sCiAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJEYXlzIiwgdmFsdWU6ICJkYXlzIiB9LAogICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAiV2Vla3MiLCB2YWx1ZTogIndlZWtzIiB9LAogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXkucHVzaChvYmopOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLmluZGV4UmVtaW5kZXIrKzsKICAgICAgICAgICAgICB0aGlzLmR1cmF0aW9uVHlwZUlEKys7CiAgICAgICAgICAgICAgdGhpcy5yZW1pbmRlckluZGV4Kys7CiAgICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICk7CiAgICB9LAogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UoCiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKQogICAgKTsKICAgIHRoaXMuZ2V0QWxsVGVtcGxhdGUoKTsKICAgIHRoaXMubmFtZSA9IHRoaXMudGVtcE9iai5uYW1lOwogICAgdGhpcy50ZW1wbGF0ZVVVSUQgPSB0aGlzLnRlbXBPYmoudXVpZDsKCiAgICBpZiAodGhpcy5jYWxlbmRlckRhdGVPYmogPT0gdW5kZWZpbmVkIHx8IHRoaXMuY2FsZW5kZXJEYXRlT2JqID09ICIiKSB7CiAgICAgIGxldCBDdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBzdWJPbmVIb3VyID0gbW9tZW50KEN1cnJlbnREYXRlKS5zdWJ0cmFjdCgxLCAiaCIpLmZvcm1hdCgpOwogICAgICBsZXQgc3RhcnRUaW1lID0gbmV3IERhdGUoQ3VycmVudERhdGUpOwogICAgICBsZXQgZW5kVGltZSA9IG5ldyBEYXRlKHN1Yk9uZUhvdXIpOwogICAgICBsZXQgdGVtcE9iaiA9IHsKICAgICAgICBjYW5jZWw6IGZhbHNlLAogICAgICAgIGVsZW1lbnQ6ICIiLAogICAgICAgIGVuZFRpbWU6IGVuZFRpbWUsCiAgICAgICAgaXNBbGxEYXk6IGZhbHNlLAogICAgICAgIG5hbWU6ICJjZWxsQ2xpY2siLAogICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLAogICAgICB9OwogICAgICAvLwl0aGlzLmNhbGVuZGVyRGF0ZU9iaiA9IHRlbXBPYmo7CiAgICB9CiAgICB0aGlzLmdldEV4aXN0aW5nSW5zcGVjdGlvblRlbXBsYXRlKAogICAgICAibm9uZSIsCiAgICAgIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQKICAgICk7CgogICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgIT09ICJzY2hlZHVsZXIiKSB7CiAgICAgIGlmICh0aGlzLnRlbXBPYmouZWRpdEZsYWcgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICAgIHRoaXMuZ2V0RXhpc3RpbmdJbnNwZWN0aW9uVGVtcGxhdGUoCiAgICAgICAgICB0aGlzLnRlbXBsYXRlVVVJRCwKICAgICAgICAgIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQKICAgICAgICApOwogICAgICB9CiAgICB9CiAgfSwKCiAgd2F0Y2g6IHsKICAgIEVkaXRTY2hlVGVuYW50VVVJZDogZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmICh0aGlzLkVkaXRTY2hlVGVuYW50VVVJZCAhPT0gIiIgJiYgdGhpcy5FZGl0U2NoZUlkICE9PSAiIikgewogICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgICAgdGhpcy5nZXRFeGlzdGluZ0luc3BlY3Rpb25UZW1wbGF0ZSgKICAgICAgICAgIHRoaXMuRWRpdFNjaGVJZCwKICAgICAgICAgIHRoaXMuRWRpdFNjaGVUZW5hbnRVVUlkCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmluc3BlY3Rpb25JdGVtQ2F0ZWdvcmllcyA9ICIiOwogICAgICB9CiAgICB9LAogIH0sCgogIHZhbGlkYXRpb25zOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiB7IHJlcXVpcmVkIH0sCiAgICAgIHNlbGVjdGVkU2NoZWR1bGU6IHsgcmVxdWlyZWQgfSwKICAgICAgc2VsZWN0ZWRUZW1wbGF0ZTogeyByZXF1aXJlZCB9LAogICAgICByZW1pbmRlckFycmF5OiB7CiAgICAgICAgJGVhY2g6IHsKICAgICAgICAgIHJlbWluZGVyOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBkdXJhdGlvblZhbHVlOiB7IHJlcXVpcmVkLCBtaW5WYWx1ZTogbWluVmFsdWUoMCkgfSwKICAgICAgICAgIGR1cmF0aW9uVHlwZTogeyByZXF1aXJlZCB9LAogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIC4uLnRoaXMuZ2V0QWRob2NWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmdldERhaWx5VmFsaWRhdGlvbiwKICAgICAgLi4udGhpcy5nZXRXZWVrbHlWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmdldE1vbnRobHlWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmN1c3RvbVZhbGlkYXRpb25zLAogICAgICAuLi50aGlzLmFzc2lnblZhbGlkYXRpb25zLAogICAgICAuLi50aGlzLmN1c3RvbU9uLAogICAgICAuLi50aGlzLnNlbGVjdGVkVGVtcGxhdGVGdW5jLAogICAgICAuLi50aGlzLmdldFllYXJseVZhbGlkYXRpb24sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGdldFllYXJseVZhbGlkYXRpb24oKSB7CiAgICAgIGxldCB2YWxpZGF0aW9ucyA9IHt9OwogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJ5ZWFybHkiKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICAvLyBjdXN0b21WYWx1ZToge30sCiAgICAgICAgICAvLyBjdXN0b21XZWVrRGF5OiB7fSwKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgLy8gY3VzdG9tVmFsdWU6IHsgcmVxdWlyZWQgfSwKICAgICAgICAgIC8vIGN1c3RvbVdlZWtEYXk6IHsgcmVxdWlyZWQgfSwKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0sCiAgICBzZWxlY3RlZFRlbXBsYXRlRnVuYygpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lICE9ICJzY2hlZHVsZXIiKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBzZWxlY3RlZFRlbXBsYXRlOiB7fSwKICAgICAgICB9OwogICAgICB9IGVsc2UgaWYgKCF0aGlzLnRlbXBPYmouZWRpdEZsYWcpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIHNlbGVjdGVkVGVtcGxhdGU6IHt9LAogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBzZWxlY3RlZFRlbXBsYXRlOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAogICAgZ2V0QWRob2NWYWxpZGF0aW9uKCkgewogICAgICBsZXQgdmFsaWRhdGlvbnMgPSB7fTsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSAhPSAiYWQtaG9jIikgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgYWRob2NkYXRlOiB7fSwKICAgICAgICAgIGFkaG9jdGltZToge30sCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGFkaG9jZGF0ZTogeyByZXF1aXJlZCB9LAogICAgICAgICAgYWRob2N0aW1lOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAogICAgZ2V0RGFpbHlWYWxpZGF0aW9uKCkgewogICAgICBsZXQgdmFsaWRhdGlvbnMgPSB7fTsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSAhPSAiZGFpbHkiKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBkYWlseURlYWRMaW5lVGltZToge30sCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGRhaWx5RGVhZExpbmVUaW1lOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAogICAgZ2V0V2Vla2x5VmFsaWRhdGlvbigpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgIT0gIndlZWtseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGN1c3RvbVdlZWtEYXk6IHt9LAogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBjdXN0b21XZWVrRGF5OiB7IHJlcXVpcmVkIH0sCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAogICAgZ2V0TW9udGhseVZhbGlkYXRpb24oKSB7CiAgICAgIGxldCB2YWxpZGF0aW9ucyA9IHt9OwogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJtb250aGx5IikgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgY3VzdG9tTW9udGhseToge30sCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGN1c3RvbU1vbnRobHk6IHsgcmVxdWlyZWQgfSwKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0sCiAgICBjdXN0b21WYWxpZGF0aW9ucygpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgIT0gImN1c3RvbSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGN1c3RvbVdlZWs6IHt9LAogICAgICAgICAgY3VzdG9tVmFsdWU6IHt9LAogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBjdXN0b21XZWVrOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBjdXN0b21WYWx1ZTogeyByZXF1aXJlZCB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfSwKICAgIGFzc2lnblZhbGlkYXRpb25zKCkgewogICAgICBsZXQgdmFsaWRhdGlvbnMgPSB7fTsKICAgICAgaWYgKHRoaXMuYXNzaWduZWUgIT0gIiIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGFzc2lnbmVlOiB7fSwKICAgICAgICAgIGFzc2lnbmVkVXNlckdyb3VwOiB7fSwKICAgICAgICAgIGFzc2lnbmVkVXNlcjoge30sCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGFzc2lnbmVlOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBhc3NpZ25lZFVzZXJHcm91cDogeyByZXF1aXJlZCB9LAogICAgICAgICAgYXNzaWduZWRVc2VyOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAogICAgY3VzdG9tT24oKSB7CiAgICAgIGxldCB2YWxpZGF0aW9ucyA9IHt9OwogICAgICBpZiAodGhpcy5vbiAhPSB0cnVlKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBvbjoge30sCiAgICAgICAgICBDdXN0b21Nb250aGx5RGF0ZToge30sCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIG9uOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBDdXN0b21Nb250aGx5RGF0ZTogeyByZXF1aXJlZCB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfSwKICB9LAp9Owo="},null]}