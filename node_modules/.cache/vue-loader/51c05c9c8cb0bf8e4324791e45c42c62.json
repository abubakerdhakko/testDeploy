{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/inspection/InspectionDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/inspection/InspectionDetails.vue","mtime":1661968702436},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":1662622637719},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1662622639723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBTaWRlYmFyIGZyb20gIi4uL2luc3BlY3Rpb24vY29tcG9uZW50cy9TaWRlYmFyIjsKaW1wb3J0IEluc3BlY3Rpb25TZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL0luc3BlY3Rpb25TZXJ2aWNlIjsKaW1wb3J0IFJlcXVlc3RJbnNwZWN0aW9uIGZyb20gIi4uLy4uL3ZpZXdzL2luc3BlY3Rpb24vY29tcG9uZW50cy9SZXF1ZXN0SW5zcGVjdGlvbiI7CmltcG9ydCBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL0Fzc2V0TWFuYWdlbWVudFNlcnZpY2UiOwppbXBvcnQgQXNzZXRQZXJzb25uZWxTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2VzL0Fzc2V0UGVyc29ubmVsU2VydmljZSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IEluc3BlY3Rpb25JdGVtcyBmcm9tICIuLi8uLi9jb21wb25lbnRzL0luc3BlY3Rpb25JdGVtcyI7CgppbXBvcnQgbG9hZGVyIGZyb20gIkAvY29tcG9uZW50cy9Mb2FkZXIudnVlIjsKCnZhciBzdHJpbmdPcHRpb25zQXNzaWduVXNlcnMgPSBbXTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJJbnNwZWN0aW9uRGV0YWlscyIsCgogIGNvbXBvbmVudHM6IHsKICAgIFNpZGViYXIsCiAgICBSZXF1ZXN0SW5zcGVjdGlvbiwKICAgIEluc3BlY3Rpb25JdGVtcywKICAgIGxvYWRlciwKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXBkYXRlQ29tcDogMCwKICAgICAgLyogVG9hc3QgUHJvcGVydGllcyAqLwogICAgICB0b2FzdFRpbWVPdXQ6IDMwMDAsCiAgICAgIHRvYXN0TWVzc2FnZTogIiIsCiAgICAgIHRvYXN0VHlwZTogIiIsCiAgICAgIHRvYXN0RmxhZzogMCwKICAgICAgLyogVG9hc3QgUHJvcGVydGllcyAqLwogICAgICBsb2FkZXJGbGFnOiBmYWxzZSwKICAgICAgYXNzZXRDYXRlZ29yeU9wdGlvbnM6IFtdLAogICAgICBhbGxBc3NldERhdGE6IFtdLAogICAgICBpbnNwZWN0aW9uRGV0YWlsOiB7fSwKICAgICAgcGFyZW50SW5zcGVjdGlvbkRldGFpbDoge30sCiAgICAgIGFzc2V0OiB7fSwKICAgICAgYWRkaXRpb25hbEluc3BlY3Rpb25zQWNjb3JkaW9uOiBmYWxzZSwKICAgICAgaW5zcGVjdGlvblJlcXVlc3Q6IGZhbHNlLAogICAgICBzZWxlY3RlZEluc3BlY3Rpb25JdGVtczogW10sCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBudW1iZXJPZlBhZ2VzOiAiIiwKICAgICAgZGF0YVBlbmRpbmc6IFtdLAogICAgICBpbnNwZWN0aW9uUmVwb3J0VVVJRDogIiIsCiAgICAgIGFsbFVzZXJzOiBbXSwKICAgICAgc3VibWl0dGVkSW5wZWN0aW9uOiBbXSwKICAgICAgaW1hZ2VWb2ljZXM6ICIiLAogICAgICBpbnNwZWN0aW9uUmVwb3J0SXRlbXM6ICIiLAogICAgICBhc3NldFVVSUQ6ICIiLAogICAgICB0ZW1wbGF0ZU5hbWU6ICIiLAogICAgICBpbnNwZWN0aW9uSXRlbXNsb2NhdGlvbnM6IFtdLAogICAgICBpbnNwZWN0aW9udXVpZDogIiIsCiAgICAgIFNlbGVjdGVkSXRlbXM6IHt9LAogICAgICB0eXBlOiAiQWQtaG9jIiwKICAgICAgcGFyZW50SW5zcGVjdGlvbjogIiIsCiAgICAgIFBhcmVudFVVSUQ6ICIiLAogICAgICBzZXJ2aWNlUmV1cWVzdERldGFpbDogIiIsCiAgICB9OwogIH0sCgogIHByb3BzOiB7CiAgICBpbnNwZWN0aW9uVVVJRDoge30sCiAgfSwKICBtZXRob2RzOiB7CiAgICBjcmVhdGVBZGRpdG9uYWxJbnNwZWN0aW9uKHZhbHVlKSB7CiAgICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKAogICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKQogICAgICApOwogICAgICBpZiAodmFsdWUuYXNzaWduZWRUbyA9PT0gIlVzZXJzIikgewogICAgICAgIHRoaXMuJHYuYXNzaWduZWRVc2VyLiR0b3VjaCgpOwogICAgICAgIGlmICh0aGlzLiR2LmFzc2lnbmVkVXNlci4kZXJyb3IpIHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJQbGVhc2UgU2VsZWN0IFVzZXJzIiwgImVycm9yIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh2YWx1ZS5zZWxlY3RlZFRlbXBsYXRlID09PSAiIikgewogICAgICAgIHRoaXMuc2hvd1RvYXN0KCJQbGVhc2UgU2VsZWN0IFRlbXBsYXRlIiwgImVycm9yIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBsZXQgYWRkSW5zcGVjdGlvblRlbXBsYXRlUmVxdWVzdCA9IHt9OwogICAgICBsZXQgaW5zcGVjdGlvblRlbXBsYXRlID0ge307CiAgICAgIGxldCBpbnNwZWN0aW9uSXRlbUNhdGVnb3JpZXMgPSBbXTsKICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLm5hbWUgPSB2YWx1ZS5uYW1lOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuZGVhZExpbmVEYXRlID0gbW9tZW50KHZhbHVlLmRlYWRsaW5lKS50b0lTT1N0cmluZygpOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuZGVhZExpbmVUaW1lID0gdmFsdWUuYWRob2NUaW1lOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuZGVzY3JpcHRpb24gPSBudWxsOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUudHlwZSA9IHRoaXMudHlwZSArICIgSW5zcGVjdGlvbiBSZXBvcnQiOwogICAgICBpZiAodmFsdWUuYXNzaWduZWRVc2VyID09PSAiIikgewogICAgICAgIGluc3BlY3Rpb25UZW1wbGF0ZS5jcmVhdGVkRm9yVXNlclVVSUQgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIGluc3BlY3Rpb25UZW1wbGF0ZS5jcmVhdGVkRm9yVXNlclVVSUQgPSB2YWx1ZS5hc3NpZ25lZFVzZXI7CiAgICAgIH0KICAgICAgaWYgKHZhbHVlLmFzc2lnbmVkVXNlckdyb3VwID09PSAiIikgewogICAgICAgIGluc3BlY3Rpb25UZW1wbGF0ZS5jcmVhdGVkRm9yVXNlckdyb3VwVVVJRCA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEID0gdmFsdWUuYXNzaWduZWRVc2VyR3JvdXA7CiAgICAgIH0KICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLm5ld0FkZGl0aW9uYWwgPSB0cnVlOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuc2VydmljZVJlcXVlc3RVVUlEID0gbnVsbDsKICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLnBhcmVudEluc3BlY3Rpb25VVUlEID0gdGhpcy4kcm91dGUucGFyYW1zLmluc3BlY3Rpb25VVUlEOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuY29tcGFueVVVSUQgPQogICAgICAgIGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuYXNzZXRDYXRlZ29yeVVVSUQgPSB0aGlzLmFzc2V0LmNhdGVnb3J5VVVJRDsKICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLmFzc2V0VVVJRCA9IHRoaXMuYXNzZXQudXVpZDsKICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLmZyZXF1ZW5jeVR5cGUgPSAiYWQtaG9jIjsKICAgICAgaW5zcGVjdGlvblRlbXBsYXRlLmNyZWF0ZWRCeVVzZXJVVUlEID0gY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUudXNlcmlkOwogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuY3JlYXRlZEJ5VXNlck5hbWUgPQogICAgICAgIGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLmZpcnN0TmFtZSArCiAgICAgICAgIiAiICsKICAgICAgICBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5sYXN0TmFtZTsKCiAgICAgIGxldCByZW1pbmRlcmFycmF5ID0gW107CiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB2YWx1ZS5yZW1pbmRlckFycmF5Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICByZW1pbmRlcjogdmFsdWUucmVtaW5kZXJBcnJheVtpbmRleF0ucmVtaW5kZXIsCiAgICAgICAgICBkdXJhdGlvblZhbHVlOiB2YWx1ZS5yZW1pbmRlckFycmF5W2luZGV4XS5kdXJhdGlvblZhbHVlLAogICAgICAgICAgZHVyYXRpb25UeXBlOiB2YWx1ZS5yZW1pbmRlckFycmF5W2luZGV4XS5kdXJhdGlvblR5cGUsCiAgICAgICAgfTsKICAgICAgICByZW1pbmRlcmFycmF5LnB1c2gob2JqKTsKICAgICAgICBpbnNwZWN0aW9uVGVtcGxhdGUucmVtaW5kZXIgPSBKU09OLnN0cmluZ2lmeShyZW1pbmRlcmFycmF5KTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHZhbHVlLnNlbGVjdGVkVGVtcGxhdGUubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgbGV0IGluc3BlY3Rpb25JdGVtQ2F0ZWdvcnkgPSB7fTsKICAgICAgICBsZXQgaW5zcGVjdGlvbkl0ZW1zID0gW107CiAgICAgICAgaW5zcGVjdGlvbkl0ZW1DYXRlZ29yeS5uYW1lID0KICAgICAgICAgIHZhbHVlLnNlbGVjdGVkVGVtcGxhdGVbaW5kZXhdLml0ZW1OYW1lLnZhbHVlOwogICAgICAgIGxldCBhbnN3ZXJzID0gdmFsdWUuc2VsZWN0ZWRUZW1wbGF0ZVtpbmRleF0uYW5zd2Vycy52YWx1ZTsKICAgICAgICBsZXQgYW5zd2VyID0gW107CiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGFuc3dlcnMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICBhbnN3ZXIucHVzaChhbnN3ZXJzW2luZGV4XS52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICBuYW1lOiB2YWx1ZS5zZWxlY3RlZFRlbXBsYXRlW2luZGV4XS5pdGVtTmFtZS52YWx1ZSwKICAgICAgICAgIC8vCWFuc3dlcnM6IHZhbHVlLnNlbGVjdGVkVGVtcGxhdGVbaW5kZXhdLmFuc3dlcnMudmFsdWUsCiAgICAgICAgICB0eXBlOiB2YWx1ZS5zZWxlY3RlZFRlbXBsYXRlW2luZGV4XS50eXBlLnZhbHVlLAogICAgICAgICAgbWFuZGF0b3J5OiB2YWx1ZS5zZWxlY3RlZFRlbXBsYXRlW2luZGV4XS5tYW5kYXRvcnkudmFsdWUsCiAgICAgICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgICAgfTsKICAgICAgICBvYmouYW5zd2VycyA9IGFuc3dlcjsKICAgICAgICBpbnNwZWN0aW9uSXRlbUNhdGVnb3JpZXMucHVzaChpbnNwZWN0aW9uSXRlbUNhdGVnb3J5KTsKICAgICAgICBpbnNwZWN0aW9uSXRlbXMucHVzaChvYmopOwogICAgICAgIGluc3BlY3Rpb25JdGVtQ2F0ZWdvcnkuaW5zcGVjdGlvbkl0ZW1zID0gaW5zcGVjdGlvbkl0ZW1zOwogICAgICB9CgogICAgICBpbnNwZWN0aW9uVGVtcGxhdGUuaW5zcGVjdGlvbkl0ZW1DYXRlZ29yaWVzID0gaW5zcGVjdGlvbkl0ZW1DYXRlZ29yaWVzOwogICAgICBhZGRJbnNwZWN0aW9uVGVtcGxhdGVSZXF1ZXN0Lmluc3BlY3Rpb25UZW1wbGF0ZSA9IGluc3BlY3Rpb25UZW1wbGF0ZTsKICAgICAgLy9yZXR1cm47CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmFkZEluc3BlY3Rpb25UZW1wbGF0ZU9mSW5zcGVjdGlvblJlcXVlc3QoCiAgICAgICAgYWRkSW5zcGVjdGlvblRlbXBsYXRlUmVxdWVzdAogICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJBZGRpdG9uYWwgU2NoZWR1bGUgQ3JlYXRlZCBTdWNjZXNzZnVseSIsICJzdWNjZXNzIik7CiAgICAgICAgICAgIHRoaXMuaW5zcGVjdGlvblJlcXVlc3QgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5zdWJtaXR0ZWRBbmRQZW5kaW5nSW5zcGVjdGlvbigpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA2KSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJSZXF1ZXN0IEVycm9yIiwgImVycm9yIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiQW4gdW5leHBlY3RlZCBFcnJvciBPY2N1cnJlZCIsICJlcnJvciIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdGVkVGVtcGxhdGVzKHZhbHVlKSB7CiAgICAgIHRoaXMuU2VsZWN0ZWRJdGVtcyA9IHZhbHVlOwogICAgfSwKCiAgICByZXF1ZXN0QWRkaXRpb25hbCgpIHsKICAgICAgdGhpcy5pbnNwZWN0aW9uUmVxdWVzdCA9IHRydWU7CiAgICB9LAogICAgb3BlblBvcFVwKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0uc3RhdHVzID09PSAiUGVuZGluZyIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAidmlldy1hc3NpZ25lZC10ZW1wbGF0ZSIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgdGVtcGxhdGVVVUlEOiBpdGVtLnV1aWQsCiAgICAgICAgICAgIGFzc2V0VVVJRDogdGhpcy5hc3NldFVVSUQsCiAgICAgICAgICAgIFRlbXBsYXRlVHlwZTogIlZpZXciLAogICAgICAgICAgICBmbGFnOiB0cnVlLAogICAgICAgICAgfSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICBuYW1lOiAiaW5zcGVjdGlvbi1kZXRhaWxzIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBpbnNwZWN0aW9uVVVJRDogaXRlbS51dWlkLAogICAgICAgICAgICBpbnNwZWN0aW9uQ2hpbGQ6IHRydWUsCiAgICAgICAgICAgIHBhcmVudFVVSUQ6IHRoaXMuaW5zcGVjdGlvbnV1aWQsCiAgICAgICAgICAgIHNlcnZpY2VSZXF1ZXN0Q2hpbGQ6IGZhbHNlLAogICAgICAgICAgfSwKICAgICAgICB9KTsKICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgIH0KICAgIH0sCiAgICBvcGVuUGFyZW50SW5zcGVjdGlvbih1dWlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBuYW1lOiAiaW5zcGVjdGlvbi1kZXRhaWxzIiwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGluc3BlY3Rpb25VVUlEOiB1dWlkLAogICAgICAgICAgaW5zcGVjdGlvbkNoaWxkOiBmYWxzZSwKICAgICAgICAgIHBhcmVudFVVSUQ6IHRoaXMuaW5zcGVjdGlvbnV1aWQsCiAgICAgICAgICBzZXJ2aWNlUmVxdWVzdENoaWxkOiBmYWxzZSwKICAgICAgICB9LAogICAgICB9KTsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSwKICAgIG9wZW5QYXJlbnRTZXJ2aWNlUmVxdWVzdCh2YWwpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJzZXJ2aWNlLXJlcXVlc3RzLWRldGFpbHMiLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgc2VydmljZVJlcXVlc3RVVUlEOiB2YWwudXVpZCwKICAgICAgICAgIHNlcnZpY2VSZXF1ZXN0Q2hpbGQ6IGZhbHNlLAogICAgICAgICAgaXNzdWV1dWlkOiB2YWwudXVpZCwKICAgICAgICAgIGFzc2V0VVVJRDogdmFsLmFzc2V0VVVJRCwKICAgICAgICAgIGlzc3VlbnVtYmVyOiB2YWwuaXNzdWVOdW1iZXIsCiAgICAgICAgICB0ZW1wbGF0ZVR5cGU6ICJ2aWV3SXNzdWUiLAogICAgICAgICAgZmxhZzogdHJ1ZSwKICAgICAgICAgIHdvcmtPcmRlclR5cGU6IHZhbC53b3JrT3JkZXJOdW1iZXIsCiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9LAogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuaW5zcGVjdGlvblJlcXVlc3QgPSBmYWxzZTsKICAgIH0sCgogICAgZ2V0QWxsVXNlcnMoKSB7CiAgICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKAogICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKQogICAgICApOwogICAgICBBc3NldFBlcnNvbm5lbFNlcnZpY2UuZ2V0QWxsVXNlcnMoCiAgICAgICAgY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQKICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgc3RyaW5nT3B0aW9uc0Fzc2lnblVzZXJzID0gW107CiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcmVzcG9uc2UuZGF0YS51c2Vycy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgdGhpcy5hbGxVc2Vycy5wdXNoKHsKICAgICAgICAgICAgICBsYWJlbDoKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudXNlcnNbaW5kZXhdLmZpcnN0TmFtZSArCiAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS51c2Vyc1tpbmRleF0ubGFzdE5hbWUsCiAgICAgICAgICAgICAgZmlyc3ROYW1lOiByZXNwb25zZS5kYXRhLnVzZXJzW2luZGV4XS5maXJzdE5hbWUsCiAgICAgICAgICAgICAgbGFzdE5hbWU6IHJlc3BvbnNlLmRhdGEudXNlcnNbaW5kZXhdLmxhc3ROYW1lLAogICAgICAgICAgICAgIHByb2ZpbGVJbWFnZTogcmVzcG9uc2UuZGF0YS51c2Vyc1tpbmRleF0uaW1hZ2VVcmwsCiAgICAgICAgICAgICAgdXVpZDogcmVzcG9uc2UuZGF0YS51c2Vyc1tpbmRleF0udXVpZCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHN0cmluZ09wdGlvbnNBc3NpZ25Vc2Vycy5wdXNoKHJlc3BvbnNlLmRhdGEudXNlcnNbaW5kZXhdLm5hbWUpOwogICAgICAgICAgfQogICAgICAgICAgc3RyaW5nT3B0aW9uc0Fzc2lnblVzZXJzLnNvcnQoKTsKICAgICAgICAgIHRoaXMudXNlcnMgPSBbXTsKICAgICAgICAgIHRoaXMudXNlcnMgPSB0aGlzLmFsbFVzZXJzOwogICAgICAgICAgdGhpcy5hc3NpZ25Vc2VycyA9IHN0cmluZ09wdGlvbnNBc3NpZ25Vc2VyczsKICAgICAgICAgIHRoaXMuYXNzaWduTm9Vc2Vyc0dyb3VwID0gdGhpcy5hc3NpZ25Vc2VyczsKICAgICAgICAgIC8vdGhpcy5nZXRJbnNwZWN0aW9uVGVtcGxhdGVzKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KGUuZGF0YS5yZXNwb25zZSwgImVycm9yIik7CiAgICAgICAgfSk7CiAgICB9LAogICAgYWxsSXRlbXNBY2NvcmRpb25GdW5jdGlvbigpIHsKICAgICAgaWYgKAogICAgICAgIHRoaXMuJHJvdXRlLnBhcmFtcy5pbnNwZWN0aW9uQ2hpbGQgPT09ICJ0cnVlIiB8fAogICAgICAgIHRoaXMuJHJvdXRlLnBhcmFtcy5zZXJ2aWNlUmVxdWVzdENoaWxkID09PSAidHJ1ZSIKICAgICAgKSB7CiAgICAgICAgdGhpcy4kcmVmcy5hZGRpdGlvbmFsSW5zcGVjdGlvbnNTb3VyY2VBY2NvcmRpb24ub3BlbkZsYWcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGFkZGl0aW9uYWxJbnNwZWN0aW9uc0FjY29yZGlvbkZ1bmN0aW9uKCkgewogICAgICB0aGlzLiRyZWZzLmFsbEl0ZW1zQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgIGlmICgKICAgICAgICB0aGlzLiRyb3V0ZS5wYXJhbXMuaW5zcGVjdGlvbkNoaWxkID09PSAidHJ1ZSIgfHwKICAgICAgICB0aGlzLiRyb3V0ZS5wYXJhbXMuc2VydmljZVJlcXVlc3RDaGlsZCA9PT0gInRydWUiCiAgICAgICkgewogICAgICAgIHRoaXMuJHJlZnMuYWRkaXRpb25hbEluc3BlY3Rpb25zU291cmNlQWNjb3JkaW9uLm9wZW5GbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBhZGRpdGlvbmFsSW5zcGVjdGlvbnNTb3VyY2VBY2NvcmRpb25GdW5jdGlvbigpIHsKICAgICAgdGhpcy4kcmVmcy5hbGxJdGVtc0FjY29yZGlvbi5vcGVuRmxhZyA9IGZhbHNlOwogICAgfSwKICAgIGdldEluc3BlY3Rpb25SZXBvcnQoKSB7CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmdldEluc3BlY3Rpb25SZXBvcnRCeVVVSUQoCiAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLmluc3BlY3Rpb25VVUlECiAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgcmVzcG9uc2UgJiYKICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgJiYKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uUmVwb3J0CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy5hc3NldFVVSUQgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25SZXBvcnQuYXNzZXRVVUlEOwogICAgICAgICAgICB0aGlzLmluc3BlY3Rpb25SZXBvcnRJdGVtcyA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblJlcG9ydDsKCiAgICAgICAgICAgIC8qIFJlbW92ZSBFbGVtZW50IHdpdGggMCBpbnNwZWN0aW9uUmVwb3J0RmllbGRzICovCiAgICAgICAgICAgIGxldCBpbnNwZWN0aW9uX3JlcG9ydCA9IHRoaXMuaW5zcGVjdGlvblJlcG9ydEl0ZW1zLmluc3BlY3Rpb25SZXBvcnRDYXRlZ29yaWVzLmZpbHRlcigKICAgICAgICAgICAgICAoZWxlbWVudCkgPT4gewogICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuaW5zcGVjdGlvblJlcG9ydEZpZWxkcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhpcy5pbnNwZWN0aW9uUmVwb3J0SXRlbXMuaW5zcGVjdGlvblJlcG9ydENhdGVnb3JpZXMgPSBbXTsKICAgICAgICAgICAgdGhpcy5pbnNwZWN0aW9uUmVwb3J0SXRlbXMuaW5zcGVjdGlvblJlcG9ydENhdGVnb3JpZXMgPSBpbnNwZWN0aW9uX3JlcG9ydDsKICAgICAgICAgICAgLyogUmVtb3ZlIEVsZW1lbnQgd2l0aCAwIGluc3BlY3Rpb25SZXBvcnRGaWVsZHMgKi8KCiAgICAgICAgICAgIHRoaXMuaW1hZ2VWb2ljZXMgPSByZXNwb25zZS5kYXRhLmltYWdlVm9pY2VzSGFzaG1hcDsKICAgICAgICAgICAgdGhpcy5pbnNwZWN0aW9uRGV0YWlsID0gcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uUmVwb3J0OwogICAgICAgICAgICB0aGlzLnBhcmVudEluc3BlY3Rpb24gPSByZXNwb25zZS5kYXRhLnBhcmVudEluc3BlY3Rpb247CiAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0KICAgICAgICAgICAgICB0aGlzLmluc3BlY3Rpb25EZXRhaWwuaW5zcGVjdGlvbk51bWJlciArICIgfCAiICsgIkVyb2hhbCI7CiAgICAgICAgICAgIGxldCBpbnNwZWN0aW9uUmVwb3J0ID0gcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uUmVwb3J0OwogICAgICAgICAgICBsZXQgbG9jYXRpb25zID0gW107CiAgICAgICAgICAgIGxldCB0b3RhbEZpZWxkcyA9IDA7CiAgICAgICAgICAgIGxldCBpc3N1ZUZpZWxkcyA9IDA7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgbGV0IGNhdGVnb3J5SW5kZXggPSAwOwogICAgICAgICAgICAgIGNhdGVnb3J5SW5kZXggPAogICAgICAgICAgICAgIGluc3BlY3Rpb25SZXBvcnQuaW5zcGVjdGlvblJlcG9ydENhdGVnb3JpZXMubGVuZ3RoOwogICAgICAgICAgICAgIGNhdGVnb3J5SW5kZXgrKwogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgbGV0IGZpZWxkSW5kZXggPSAwOwogICAgICAgICAgICAgICAgZmllbGRJbmRleCA8CiAgICAgICAgICAgICAgICBpbnNwZWN0aW9uUmVwb3J0Lmluc3BlY3Rpb25SZXBvcnRDYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdCiAgICAgICAgICAgICAgICAgIC5pbnNwZWN0aW9uUmVwb3J0RmllbGRzLmxlbmd0aDsKICAgICAgICAgICAgICAgIGZpZWxkSW5kZXgrKwogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdG90YWxGaWVsZHMrKzsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgaW5zcGVjdGlvblJlcG9ydC5pbnNwZWN0aW9uUmVwb3J0Q2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XQogICAgICAgICAgICAgICAgICAgIC5pbnNwZWN0aW9uUmVwb3J0RmllbGRzW2ZpZWxkSW5kZXhdLmxhdCAhPSBudWxsICYmCiAgICAgICAgICAgICAgICAgIGluc3BlY3Rpb25SZXBvcnQuaW5zcGVjdGlvblJlcG9ydENhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF0KICAgICAgICAgICAgICAgICAgICAuaW5zcGVjdGlvblJlcG9ydEZpZWxkc1tmaWVsZEluZGV4XS5sbmcgIT0gbnVsbAogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIGxldCBsb2NhdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICBsYXQ6CiAgICAgICAgICAgICAgICAgICAgICBpbnNwZWN0aW9uUmVwb3J0Lmluc3BlY3Rpb25SZXBvcnRDYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdCiAgICAgICAgICAgICAgICAgICAgICAgIC5pbnNwZWN0aW9uUmVwb3J0RmllbGRzW2ZpZWxkSW5kZXhdLmxhdCwKICAgICAgICAgICAgICAgICAgICBsbmc6CiAgICAgICAgICAgICAgICAgICAgICBpbnNwZWN0aW9uUmVwb3J0Lmluc3BlY3Rpb25SZXBvcnRDYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdCiAgICAgICAgICAgICAgICAgICAgICAgIC5pbnNwZWN0aW9uUmVwb3J0RmllbGRzW2ZpZWxkSW5kZXhdLmxuZywKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgbG9jYXRpb25zLnB1c2gobG9jYXRpb24pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICBpbnNwZWN0aW9uUmVwb3J0Lmluc3BlY3Rpb25SZXBvcnRDYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdCiAgICAgICAgICAgICAgICAgICAgLmluc3BlY3Rpb25SZXBvcnRGaWVsZHNbZmllbGRJbmRleF0uaXNzdWVSZXBvcnRpbmcgIT0gbnVsbAogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIGlzc3VlRmllbGRzKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGluc3BlY3Rpb25SZXBvcnQuY3JlYXRlZEF0ID0gbW9tZW50KAogICAgICAgICAgICAgIGluc3BlY3Rpb25SZXBvcnQuY3JlYXRlZEF0CiAgICAgICAgICAgICkuZm9ybWF0KCJERCBNTU0gWVlZWSBoaDptbSBhIik7CiAgICAgICAgICAgIGluc3BlY3Rpb25SZXBvcnQubG9jYXRpb25zID0gbG9jYXRpb25zOwogICAgICAgICAgICBpbnNwZWN0aW9uUmVwb3J0Lmlzc3VlQ291bnQgPSBpc3N1ZUZpZWxkcyArICIvIiArIHRvdGFsRmllbGRzOwogICAgICAgICAgICBpbnNwZWN0aW9uUmVwb3J0LnBhc3NGaWVsZHMgPSB0b3RhbEZpZWxkcyAtIGlzc3VlRmllbGRzOwogICAgICAgICAgICBpbnNwZWN0aW9uUmVwb3J0LnRvdGFsRmllbGRzID0gdG90YWxGaWVsZHM7CiAgICAgICAgICAgICh0aGlzLmluc3BlY3Rpb25SZXBvcnQgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25SZXBvcnQpLAogICAgICAgICAgICAgICh0aGlzLmluc3BlY3Rpb25JdGVtc2xvY2F0aW9ucyA9IGxvY2F0aW9ucyk7CiAgICAgICAgICAgICh0aGlzLmlzTG9hZGluZyA9IGZhbHNlKSwKICAgICAgICAgICAgICAodGhpcy5wYXNzRmllbGRQZXJjZW50YWdlID0KICAgICAgICAgICAgICAgIHRoaXMuaW5zcGVjdGlvblJlcG9ydC5wYXNzRmllbGRzIC8KICAgICAgICAgICAgICAgIHRoaXMuaW5zcGVjdGlvblJlcG9ydC50b3RhbEZpZWxkcyk7CiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVOYW1lID0gaW5zcGVjdGlvblJlcG9ydC5uYW1lOwogICAgICAgICAgICAvL3RoaXMuZ2V0QWN0aXZpdHlXYWxsKCk7CgogICAgICAgICAgICBpZiAoaW5zcGVjdGlvblJlcG9ydC5hc3NldFVVSUQgIT0gbnVsbCkgewogICAgICAgICAgICAgIHRoaXMuZ2V0QXNzZXQoaW5zcGVjdGlvblJlcG9ydC5hc3NldFVVSUQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbXArKzsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkZhaWxlZCB0byBsb2FkIEluc3BlY3Rpb24gUmVwb3J0ISIsICJlcnJvciIpOwogICAgICAgIH0pOwogICAgfSwKCiAgICBnZXRBc3NldCh1dWlkKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0QXNzZXROYW1lQW5kTnVtYmVyQW5kQ2F0ZWdvcnlCeUFzc2V0VVVJRCh1dWlkKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5hc3NldCA9IHJlc3BvbnNlLmRhdGEuYXNzZXRJbmZvRFRPOwogICAgICAgICAgdGhpcy5hc3NldEluZGV4Kys7CiAgICAgICAgICB0aGlzLnNob3cgPSB0cnVlOwogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmFzc2V0RXJyb3IgPSB0cnVlOwogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkZhaWxlZCB0byBsb2FkIGFzc2V0IGluZm9ybWF0aW9uIS4iLCAiZXJyb3IiKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBhZGRUZW1wbGF0ZUl0ZW1zKCkgewogICAgICB0aGlzLnNlbGVjdGVkSW5zcGVjdGlvbkl0ZW1zID0gW107CiAgICAgIGxldCBhcnJheSA9IFtdOwogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5pbnNwZWN0aW9uSXRlbUZvcm0ubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgaWYgKHRoaXMuaW5zcGVjdGlvbkl0ZW1Gb3JtW2luZGV4XS52YWx1ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgICAgYW5zd2VyczogdGhpcy5pbnNwZWN0aW9uSXRlbUZvcm1baW5kZXhdLmFuc3dlcnMsCiAgICAgICAgICAgIGFza1F1ZXN0aW9uOiB0aGlzLmluc3BlY3Rpb25JdGVtRm9ybVtpbmRleF0uYXNrUXVlc3Rpb24sCiAgICAgICAgICAgIGl0ZW1OYW1lOiB0aGlzLmluc3BlY3Rpb25JdGVtRm9ybVtpbmRleF0uaXRlbU5hbWUsCiAgICAgICAgICAgIG1hbmRhdG9yeTogdGhpcy5pbnNwZWN0aW9uSXRlbUZvcm1baW5kZXhdLm1hbmRhdG9yeSwKICAgICAgICAgICAgdHlwZTogdGhpcy5pbnNwZWN0aW9uSXRlbUZvcm1baW5kZXhdLnR5cGUsCiAgICAgICAgICB9OwogICAgICAgICAgYXJyYXkucHVzaChvYmopOwogICAgICAgIH0KICAgICAgICB0aGlzLnNlbGVjdGVkSW5zcGVjdGlvbkl0ZW1zID0gYXJyYXk7CiAgICAgICAgdGhpcy5tb2RlbEluc3BlY3Rpb24gPSBhcnJheTsKICAgICAgICB0aGlzLmJ0bkxhYmVsID0gIkNIQU5HRSBJTlNQRUNUSU9OIFRFTVBMQVRFIjsKICAgICAgfQogICAgICB0aGlzLmluc3BlY3Rpb25UZW1wRGlhbG9nID0gZmFsc2U7CiAgICB9LAogICAgLy8gZ2V0SW5zcGVjdGlvblRlbXBsYXRlcygpIHsKICAgIC8vIAlsZXQgY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZSgKICAgIC8vIAkJbG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpCiAgICAvLyAJKTsKICAgIC8vIAlJbnNwZWN0aW9uU2VydmljZS5nZXRQYWdpbmF0ZWRJbnNwZWN0aW9uVGVtcGxhdGVzRm9ySW5zcGVjdGlvbigKICAgIC8vIAkJMCwKICAgIC8vIAkJNSwKICAgIC8vIAkJY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQsCiAgICAvLyAJCXRoaXMuaW5zcGVjdGlvblJlcG9ydFVVSUQKICAgIC8vIAkpCiAgICAvLyAJCS50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gCQkJdGhpcy5jdXJyZW50UGFnZSA9IDA7CiAgICAvLyAJCQl0aGlzLm51bWJlck9mUGFnZXMgPSAgcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uVGVtcGxhdGUudG90YWxQYWdlcwogICAgLy8gCQkJcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uVGVtcGxhdGUuY29udGVudC5tYXAoKHJlcG9ydCkgPT4gewogICAgLy8gCQkJCXJlcG9ydC5jcmVhdGVkQXQgPSBtb21lbnQocmVwb3J0LmNyZWF0ZWRBdCkuZm9ybWF0KAogICAgLy8gCQkJCQkiREQgTU1NIFlZWVkgaGg6bW0gYSIKICAgIC8vIAkJCQkpOwogICAgLy8gCQkJfSk7CiAgICAvLyAJCQl0aGlzLmRhdGFQZW5kaW5nID0gcmVzcG9uc2UuZGF0YS5pbnNwZWN0aW9uVGVtcGxhdGUuY29udGVudDsKCiAgICAvLyAJCQlmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5hbGxVc2Vycy5sZW5ndGg7IGluZGV4KyspIHsKICAgIC8vIAkJCQlmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZGF0YVBlbmRpbmcubGVuZ3RoOyBqKyspIHsKICAgIC8vIAkJCQkJaWYgKAogICAgLy8gCQkJCQkJdGhpcy5hbGxVc2Vyc1tpbmRleF0udXVpZCA9PT0KICAgIC8vIAkJCQkJCXRoaXMuZGF0YVBlbmRpbmdbal0uY3JlYXRlZEZvclVzZXJVVUlECiAgICAvLyAJCQkJCSkgewogICAgLy8gCQkJCQkJdGhpcy5kYXRhUGVuZGluZ1tqXS5hc3NpZ25lZFRvID0gdGhpcy5hbGxVc2Vyc1tpbmRleF0ubGFiZWw7CiAgICAvLyAJCQkJCX0KICAgIC8vIAkJCQl9CiAgICAvLyAJCQl9CiAgICAvLyAJCX0pCiAgICAvLyAJCS5jYXRjaCgoZXJyb3IpID0+IHsKICAgIC8vIAkJCWNvbnNvbGUubG9nKCJGZXRjaCBQZW5kaW5nIEluc3BlY3Rpb25zIEVycm9yIiwgZXJyb3IpOwogICAgLy8gCQkJYWxlcnQoIkFuIEVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIFBlbmRpbmcgSW5zcGVjdGlvbnMiKTsKICAgIC8vIAkJfSk7CiAgICAvLyB9LAogICAgLy8gZ2V0QWRkaXRvbmFsSW5zcGVjdGlvbihjdXJyZW50VXNlckRldGFpbHMpIHsKICAgIC8vIAlJbnNwZWN0aW9uU2VydmljZS5nZXRQYWdpbmF0ZWRBZGRpdG9uYWxJbnNwZWN0aW9ucygKICAgIC8vIAkJMCwKICAgIC8vIAkJNTAsCiAgICAvLyAJCWN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgLy8gCQl0aGlzLmluc3BlY3Rpb25SZXBvcnRVVUlECiAgICAvLyAJKQogICAgLy8gCQkudGhlbigocmVzcG9uc2UpID0+IHsKICAgIC8vIAkJCXJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblJlcG9ydHMuY29udGVudC5tYXAoKHJlcG9ydCkgPT4gewogICAgLy8gCQkJCXJlcG9ydC5jcmVhdGVkQXQgPSBtb21lbnQocmVwb3J0LmNyZWF0ZWRBdCkuZm9ybWF0KAogICAgLy8gCQkJCQkiREQgTU1NIFlZWVkgaGg6bW0gYSIKICAgIC8vIAkJCQkpOwogICAgLy8gCQkJfSk7CiAgICAvLyAJCQl0aGlzLnN1Ym1pdHRlZElucGVjdGlvbiA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblJlcG9ydHMuY29udGVudDsKICAgIC8vIAkJfSkKICAgIC8vIAkJLmNhdGNoKChlcnJvcikgPT4gewogICAgLy8gCQkJY29uc29sZS5sb2coIkZldGNoIEFkZGl0aW9uYWwgSW5zcGVjdGlvbnMgRXJyb3IiLCBlcnJvcik7CiAgICAvLyAJCQlhbGVydCgiQW4gRXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgQWRkaXRpb25hbCBJbnNwZWN0aW9ucyIpOwoKICAgIC8vIAkJfSk7CiAgICAvLyB9LAogICAgcGFnaW5hdGlvbih2YWx1ZSkgewogICAgICBsZXQgY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZSgKICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKICAgICAgKTsKICAgICAgbGV0IG9iaiA9IHsKICAgICAgICBsaW1pdDogNSwKICAgICAgICBvZmZzZXQ6IHZhbHVlLAogICAgICAgIHRlbmFudFVVSUQ6IGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgICAgIHBhcmVudEluc3BlY3Rpb25VVUlEOiB0aGlzLmluc3BlY3Rpb25SZXBvcnRVVUlELAogICAgICAgIG5ld0FkZGl0aW9uYWw6IHRydWUsCiAgICAgIH07CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmdldEluc3BlY3Rpb25UZW1wbGF0ZXNQZW5kaW5nYW5kU3VibWl0dGVkKG9iaikKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB2YWx1ZTsKICAgICAgICAgIHRoaXMubnVtYmVyT2ZQYWdlcyA9IHJlc3BvbnNlLmRhdGEuY29udGVudC50b3RhbFBhZ2VzOwogICAgICAgICAgcmVzcG9uc2UuZGF0YS5jb250ZW50LmFkZGl0aW9uYWxJbnNwZWN0aW9uLm1hcCgocmVwb3J0KSA9PiB7CiAgICAgICAgICAgIHJlcG9ydC5jcmVhdGVkQXQgPSBtb21lbnQocmVwb3J0LmNyZWF0ZWRBdCkuZm9ybWF0KAogICAgICAgICAgICAgICJERCBNTU0gWVlZWSBoaDptbSBhIgogICAgICAgICAgICApOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmRhdGFQZW5kaW5nID0gcmVzcG9uc2UuZGF0YS5jb250ZW50LmFkZGl0aW9uYWxJbnNwZWN0aW9uOwoKICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmFsbFVzZXJzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZGF0YVBlbmRpbmcubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICB0aGlzLmFsbFVzZXJzW2luZGV4XS51dWlkID09PQogICAgICAgICAgICAgICAgdGhpcy5kYXRhUGVuZGluZ1tqXS5jcmVhdGVkRm9yVXNlclVVSUQKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHRoaXMuZGF0YVBlbmRpbmdbal0uYXNzaWduZWRUbyA9IHRoaXMuYWxsVXNlcnNbaW5kZXhdLmxhYmVsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgICAgICJBbiBFcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBQZW5kaW5nIEluc3BlY3Rpb25zIiwKICAgICAgICAgICAgImVycm9yIgogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBzdWJtaXR0ZWRBbmRQZW5kaW5nSW5zcGVjdGlvbigpIHsKICAgICAgbGV0IGN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UoCiAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpCiAgICAgICk7CiAgICAgIGxldCBvYmogPSB7CiAgICAgICAgbGltaXQ6IDUsCiAgICAgICAgb2Zmc2V0OiAwLAogICAgICAgIHRlbmFudFVVSUQ6IGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkLAogICAgICAgIHBhcmVudEluc3BlY3Rpb25VVUlEOiB0aGlzLmluc3BlY3Rpb25SZXBvcnRVVUlELAogICAgICAgIG5ld0FkZGl0aW9uYWw6IHRydWUsCiAgICAgIH07CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmdldEluc3BlY3Rpb25UZW1wbGF0ZXNQZW5kaW5nYW5kU3VibWl0dGVkKG9iaikKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICByZXMuZGF0YS5jb250ZW50LmFkZGl0aW9uYWxJbnNwZWN0aW9uLm1hcCgocmVwb3J0KSA9PiB7CiAgICAgICAgICAgIHJlcG9ydC5jcmVhdGVkQXQgPSBtb21lbnQocmVwb3J0LmNyZWF0ZWRBdCkuZm9ybWF0KAogICAgICAgICAgICAgICJERCBNTU0gWVlZWSBoaDptbSBhIgogICAgICAgICAgICApOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmRhdGFQZW5kaW5nID0gcmVzLmRhdGEuY29udGVudC5hZGRpdGlvbmFsSW5zcGVjdGlvbjsKICAgICAgICAgIHRoaXMubnVtYmVyT2ZQYWdlcyA9IHJlcy5kYXRhLmNvbnRlbnQudG90YWxQYWdlczsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoZS5kYXRhLnJlc3BvbnNlLCAiZXJyb3IiKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBzZXRTaWRlYmFyUG9zaXRpb24oKSB7CiAgICAgIGxldCBzQiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwb3NpdGlvbi1zaWRlYmFyLWNvbnRhaW5lciIpOwogICAgICBsZXQgc2lkZWJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwb3NpdGlvbi1zaWRlYmFyIik7CiAgICAgIHNCLnN0eWxlLndpZHRoID0gc2lkZWJhci5vZmZzZXRXaWR0aCArICJweCI7CiAgICAgIHNCLnN0eWxlLnBvc2l0aW9uID0gImZpeGVkIjsKICAgICAgc0Iuc3R5bGUudG9wID0gc2lkZWJhci5vZmZzZXRMZWZ0OwogICAgICBzQi5zdHlsZS5sZWZ0ID0gc2lkZWJhci5vZmZzZXRMZWZ0OwogICAgfSwKICAgIGdldEFsbEFzc2V0KGN1cnJlbnRVc2VyRGV0YWlscykgewogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldEFsbEFzc2V0cygKICAgICAgICBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZAogICAgICApLnRoZW4oKHJlcykgPT4gewogICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCByZXMuZGF0YS5hc3NldHMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICB1dWlkOiByZXMuZGF0YS5hc3NldHNbaW5kZXhdLnV1aWQsCiAgICAgICAgICAgIGNhdGVnb3J5VVVJRDogcmVzLmRhdGEuYXNzZXRzW2luZGV4XS5jYXRlZ29yeVVVSUQsCiAgICAgICAgICAgIGxhYmVsOiByZXMuZGF0YS5hc3NldHNbaW5kZXhdLm5hbWUsCiAgICAgICAgICAgIHR5cGU6IHJlcy5kYXRhLmFzc2V0c1tpbmRleF0udHlwZSwKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmFsbEFzc2V0RGF0YS5wdXNoKG9iaik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRBbGxDYXRlZ29yaWVzKGN1cnJlbnRVc2VyRGV0YWlscykgewogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldEFsbEFzc2V0Q2F0ZWdvcmllcygKICAgICAgICBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZAogICAgICApCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJlcy5kYXRhLmNhdGVnb3JpZXMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICAgICAgaWQ6IHJlcy5kYXRhLmNhdGVnb3JpZXNbaW5kZXhdLmlkLAogICAgICAgICAgICAgIGNhdGVnb3J5VVVJRDogcmVzLmRhdGEuY2F0ZWdvcmllc1tpbmRleF0udXVpZCwKICAgICAgICAgICAgICBsYWJlbDogcmVzLmRhdGEuY2F0ZWdvcmllc1tpbmRleF0ubmFtZSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5hc3NldENhdGVnb3J5T3B0aW9ucy5wdXNoKG9iaik7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmdldEFsbEFzc2V0KGN1cnJlbnRVc2VyRGV0YWlscyk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoZXJyLmRhdGEucmVzcG9uc2UsICJlcnJvciIpOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldFBhcmVudEluc3BlY3Rpb25SZXBvcnQoKSB7CiAgICAgIEluc3BlY3Rpb25TZXJ2aWNlLmdldEluc3BlY3Rpb25SZXBvcnRCeVVVSUQodGhpcy4kcm91dGUucGFyYW1zLnBhcmVudFVVSUQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHJlc3BvbnNlICYmCiAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwICYmCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblJlcG9ydAogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMucGFyZW50SW5zcGVjdGlvbkRldGFpbCA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblJlcG9ydDsKICAgICAgICAgICAgbGV0IGluc3BlY3Rpb25SZXBvcnQgPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25SZXBvcnQ7CiAgICAgICAgICAgIHRoaXMuUGFyZW50VVVJRCA9IGluc3BlY3Rpb25SZXBvcnQudXVpZDsKICAgICAgICAgICAgaW5zcGVjdGlvblJlcG9ydC5jcmVhdGVkQXQgPSBtb21lbnQoCiAgICAgICAgICAgICAgaW5zcGVjdGlvblJlcG9ydC5jcmVhdGVkQXQKICAgICAgICAgICAgKS5mb3JtYXQoIkREIE1NTSBZWVlZIGhoOm1tIGEiKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoZS5kYXRhLnJlc3BvbnNlLCAiZXJyb3IiKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRQYXJlbnRTZXJ2aWNlUmVxdWVzdEJ5VVVJRCgpIHsKICAgICAgSW5zcGVjdGlvblNlcnZpY2UuZ2V0U2VydmljZVJlcXVlc3RCeVVVSUQodGhpcy4kcm91dGUucGFyYW1zLnBhcmVudFVVSUQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5zZXJ2aWNlUmV1cWVzdERldGFpbCA9IHJlc3BvbnNlLmRhdGEuc2VydmljZVJlcXVlc3Q7CiAgICAgICAgICAgIHRoaXMuc2VydmljZVJldXFlc3REZXRhaWwucmVwb3J0ZWRBdCA9IG1vbWVudCgKICAgICAgICAgICAgICB0aGlzLnNlcnZpY2VSZXVxZXN0RGV0YWlsLnJlcG9ydGVkQXQKICAgICAgICAgICAgKS5mb3JtYXQoIkREIE1NTSBZWVlZIGhoOm1tIGEiKTsKICAgICAgICAgICAgaWYgKHRoaXMuc2VydmljZVJldXFlc3REZXRhaWwucmVzb2x2ZWRBdCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHRoaXMuc2VydmljZVJldXFlc3REZXRhaWwucmVzb2x2ZWRBdCA9IG1vbWVudCgKICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZVJldXFlc3REZXRhaWwucmVzb2x2ZWRBdAogICAgICAgICAgICAgICkuZm9ybWF0KCJERCBNTU0gWVlZWSBoaDptbSBhIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoZS5kYXRhLnJlc3BvbnNlLCAiZXJyb3IiKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgc2hvd1RvYXN0KG1lc3NhZ2UsIHR5cGUpIHsKICAgICAgdGhpcy50b2FzdE1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICB0aGlzLnRvYXN0VHlwZSA9IHR5cGU7CiAgICAgIHRoaXMudG9hc3RGbGFnKys7CiAgICB9LAoKICAgIHJlZnJlc2hJbnNwZWN0aW9uUmVwb3J0KCkgewogICAgICB0aGlzLmdldEluc3BlY3Rpb25SZXBvcnQoKTsKICAgIH0sCgogICAgc2V0TG9hZGluZyh2YWx1ZSkgewogICAgICB0aGlzLmxvYWRlckZsYWcgPSB2YWx1ZTsKICAgIH0sCiAgfSwKCiAgdXBkYXRlZCgpIHsKICAgIHRoaXMuc2V0U2lkZWJhclBvc2l0aW9uKCk7CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuc2V0U2lkZWJhclBvc2l0aW9uKCk7CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5zcGVjdGlvbnV1aWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaW5zcGVjdGlvblVVSUQ7CiAgICB0aGlzLmluc3BlY3Rpb25SZXBvcnRVVUlEID0gdGhpcy4kcm91dGUucGFyYW1zLmluc3BlY3Rpb25VVUlEOwoKICAgIGxldCBjdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKAogICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKICAgICk7CiAgICBpZiAoY3VycmVudFVzZXJEZXRhaWxzID09PSBudWxsKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJmb3JjZVNpZ25vdXQiLCAieWVzIik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICB0aGlzLmdldEFsbFVzZXJzKCk7CiAgICB0aGlzLmdldEluc3BlY3Rpb25SZXBvcnQoKTsKICAgIHRoaXMuZ2V0QWxsQ2F0ZWdvcmllcyhjdXJyZW50VXNlckRldGFpbHMpOwogICAgdGhpcy5zdWJtaXR0ZWRBbmRQZW5kaW5nSW5zcGVjdGlvbigpOwogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pbnNwZWN0aW9uQ2hpbGQpIHsKICAgICAgdGhpcy5nZXRQYXJlbnRJbnNwZWN0aW9uUmVwb3J0KCk7CiAgICB9CiAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLnNlcnZpY2VSZXF1ZXN0Q2hpbGQpIHsKICAgICAgdGhpcy5nZXRQYXJlbnRTZXJ2aWNlUmVxdWVzdEJ5VVVJRCgpOwogICAgfQogIH0sCiAgdmFsaWRhdGlvbnM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHt9OwogIH0sCgogIGNvbXB1dGVkOiB7fSwKfTsK"},null]}