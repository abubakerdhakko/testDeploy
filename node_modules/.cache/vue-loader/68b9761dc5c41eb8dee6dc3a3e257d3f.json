{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/manage-inspection-templates/components/TemplateAssignment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/manage-inspection-templates/components/TemplateAssignment.vue","mtime":1661968702444},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":1662622637719},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1662622639723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBc3NldFBlcnNvbm5lbFNlcnZpY2UgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvQXNzZXRQZXJzb25uZWxTZXJ2aWNlIjsKaW1wb3J0IEluc3BlY3Rpb25TZXJ2aWNlIGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL0luc3BlY3Rpb25TZXJ2aWNlIjsKaW1wb3J0IHsgRnVuY3Rpb25zIH0gZnJvbSAiQC9zaGFyZWQvRnVuY3Rpb25zIjsKaW1wb3J0IHsgcmVxdWlyZWQsIG1pblZhbHVlLCByZXF1aXJlZElmIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwoKaW1wb3J0IGxvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvTG9hZGVyLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVGVtcGxhdGVBc3NpZ25tZW50IiwKICBjb21wb25lbnRzOiB7IGxvYWRlciB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkZXJGbGFnOiBmYWxzZSwKICAgICAgbmFtZTogIiIsCiAgICAgIGNoZWNrYm94OiB0cnVlLAogICAgICBzaG93VGVtcFBvcFVwOiBmYWxzZSwKICAgICAgcmVtaW5kZXJJbmRleDogMCwKICAgICAgdXNlcklkOiAwLAogICAgICB1c2VyR3JvdXBJZDogMCwKICAgICAgYXNzZXRJZDogMCwKICAgICAgYXNzZXRHcm91cElkOiAwLAogICAgICBkdXJhdGlvblR5cGVJRDogMCwKICAgICAgYXNzaWduQXNzZXRJZDogMCwKICAgICAgc2VsZWN0ZWRUeXBlOiAic2NoZWR1bGUiLAogICAgICBkZWFkbGluZTogIiIsCiAgICAgIHRlbXBsYXRlVVVJRDogIiIsCiAgICAgIGFkaG9jZGF0ZTogIiIsCiAgICAgIGFkaG9jdGltZTogIiIsCiAgICAgIHN0YXJ0RGF0ZTogIiIsCiAgICAgIHN0YXJ0VGltZTogIiIsCiAgICAgIGVuZERhdGU6ICIiLAogICAgICBlbmRUaW1lOiAiIiwKICAgICAgd2Vla0RheTogIiIsCiAgICAgIG1vbnRobHlEYXRlOiAiIiwKICAgICAgZGFpbHlEZWFkTGluZVRpbWU6ICIiLAogICAgICBjdXN0b21WYWx1ZTogIjEiLAogICAgICBvY2N1cmFuY2VzVmFsdWU6ICIiLAogICAgICBjdXN0b21XZWVrOiAid2VlayIsCiAgICAgIGN1c3RvbURhdGU6IHRydWUsCiAgICAgIG9jY3VyYW5jZXNBY3RpdmU6IHRydWUsCiAgICAgIGN1c3RvbVdlZWtEYXk6IFtdLAogICAgICBjdXN0b21Nb250aGx5OiAiIiwKICAgICAgQ3VzdG9tTW9udGhseURhdGU6ICIiLAogICAgICBhc3NpZ25lZEFzc2V0VXVpZDogIiIsCiAgICAgIGFzc2lnbmVkQXNzZXRzT3B0aW9uczogW10sCiAgICAgIGFzc2lnbmVkQXNzZXQ6ICIiLAogICAgICBuZXZlcjogIiIsCiAgICAgIG9uOiAiIiwKICAgICAgYWZ0ZXI6ICIiLAogICAgICBjdXJyZW50VXNlckRldGFpbHM6ICIiLAogICAgICBpbmRleFJlbWluZGVyOiAwLAogICAgICBjdXN0b21PcHRpb25zOiBbCiAgICAgICAgeyBuYW1lOiAiRGF5IiwgdmFsdWU6ICJkYXkiIH0sCiAgICAgICAgeyBuYW1lOiAiV2VlayIsIHZhbHVlOiAid2VlayIgfSwKICAgICAgICB7IG5hbWU6ICJNb250aCIsIHZhbHVlOiAibW9udGgiIH0sCiAgICAgICAgeyBuYW1lOiAiWWVhciIsIHZhbHVlOiAieWVhciIgfSwKICAgICAgXSwKICAgICAgY3VzdG9tT3B0aW9uc01vbnRobHk6IFsKICAgICAgICB7IG5hbWU6ICIxIiwgdmFsdWU6ICIxIiB9LAogICAgICAgIHsgbmFtZTogIjIiLCB2YWx1ZTogIjIiIH0sCiAgICAgICAgeyBuYW1lOiAiMyIsIHZhbHVlOiAiMyIgfSwKICAgICAgICB7IG5hbWU6ICI0IiwgdmFsdWU6ICI0IiB9LAogICAgICAgIHsgbmFtZTogIjUiLCB2YWx1ZTogIjUiIH0sCiAgICAgICAgeyBuYW1lOiAiNiIsIHZhbHVlOiAiNiIgfSwKICAgICAgICB7IG5hbWU6ICI3IiwgdmFsdWU6ICI3IiB9LAogICAgICAgIHsgbmFtZTogIjgiLCB2YWx1ZTogIjgiIH0sCiAgICAgICAgeyBuYW1lOiAiOSIsIHZhbHVlOiAiOSIgfSwKICAgICAgICB7IG5hbWU6ICIxMCIsIHZhbHVlOiAiMTAiIH0sCiAgICAgICAgeyBuYW1lOiAiMTEiLCB2YWx1ZTogIjExIiB9LAogICAgICAgIHsgbmFtZTogIjEyIiwgdmFsdWU6ICIxMiIgfSwKICAgICAgICB7IG5hbWU6ICIxMyIsIHZhbHVlOiAiMTMiIH0sCiAgICAgICAgeyBuYW1lOiAiMTQiLCB2YWx1ZTogIjE0IiB9LAogICAgICAgIHsgbmFtZTogIjE1IiwgdmFsdWU6ICIxNSIgfSwKICAgICAgICB7IG5hbWU6ICIxNiIsIHZhbHVlOiAiMTYiIH0sCiAgICAgICAgeyBuYW1lOiAiMTciLCB2YWx1ZTogIjE3IiB9LAogICAgICAgIHsgbmFtZTogIjE4IiwgdmFsdWU6ICIxOCIgfSwKICAgICAgICB7IG5hbWU6ICIxOSIsIHZhbHVlOiAiMTkiIH0sCiAgICAgICAgeyBuYW1lOiAiMjAiLCB2YWx1ZTogIjIwIiB9LAogICAgICAgIHsgbmFtZTogIjIxIiwgdmFsdWU6ICIyMSIgfSwKICAgICAgICB7IG5hbWU6ICIyMiIsIHZhbHVlOiAiMjIiIH0sCiAgICAgICAgeyBuYW1lOiAiMjMiLCB2YWx1ZTogIjIzIiB9LAogICAgICAgIHsgbmFtZTogIjI0IiwgdmFsdWU6ICIyNCIgfSwKICAgICAgICB7IG5hbWU6ICIyNSIsIHZhbHVlOiAiMjUiIH0sCiAgICAgICAgeyBuYW1lOiAiMjYiLCB2YWx1ZTogIjI2IiB9LAogICAgICAgIHsgbmFtZTogIjI3IiwgdmFsdWU6ICIyNyIgfSwKICAgICAgICB7IG5hbWU6ICIyOCIsIHZhbHVlOiAiMjgiIH0sCiAgICAgICAgeyBuYW1lOiAiMjkiLCB2YWx1ZTogIjI5IiB9LAogICAgICAgIHsgbmFtZTogIjMwIiwgdmFsdWU6ICIzMCIgfSwKICAgICAgICB7IG5hbWU6ICIzMSIsIHZhbHVlOiAiMzEiIH0sCiAgICAgIF0sCgogICAgICBzY2hlZHVsZTogWwogICAgICAgIHsgbmFtZTogIkFkLWhvYyIsIHZhbHVlOiAiYWQtaG9jIiB9LAogICAgICAgIHsgbmFtZTogIkRhaWx5IiwgdmFsdWU6ICJkYWlseSIgfSwKICAgICAgICB7IG5hbWU6ICJXZWVrbHkiLCB2YWx1ZTogIndlZWtseSIgfSwKICAgICAgICB7IG5hbWU6ICJNb250aGx5IiwgdmFsdWU6ICJtb250aGx5IiB9LAogICAgICAgIHsgbmFtZTogIkN1c3RvbSIsIHZhbHVlOiAiY3VzdG9tIiB9LAogICAgICBdLAogICAgICB3ZWVrbHlEYXlzOiBbCiAgICAgICAgeyBuYW1lOiAiU3VuZGF5IiwgdmFsdWU6ICJTVU5EQVkiIH0sCiAgICAgICAgeyBuYW1lOiAiTW9uZGF5IiwgdmFsdWU6ICJNT05EQVkiIH0sCiAgICAgICAgeyBuYW1lOiAiVHVlc2RheSIsIHZhbHVlOiAiVFVFU0RBWSIgfSwKICAgICAgICB7IG5hbWU6ICJXZWRuZXNkYXkiLCB2YWx1ZTogIldFRE5FU0RBWSIgfSwKICAgICAgICB7IG5hbWU6ICJUaHVyc2RheSIsIHZhbHVlOiAiVEhVUlNEQVkiIH0sCiAgICAgICAgeyBuYW1lOiAiRnJpZGF5IiwgdmFsdWU6ICJGUklEQVkiIH0sCiAgICAgICAgeyBuYW1lOiAiU2F0dXJkYXkiLCB2YWx1ZTogIlNBVFVSREFZIiB9LAogICAgICBdLAogICAgICBzZWxlY3RlZFNjaGVkdWxlOiAiIiwKICAgICAgcmVtaW5kZXJBcnJheTogWwogICAgICAgIHsKICAgICAgICAgIHJlbWluZGVyOiBbXSwKICAgICAgICAgIHJlbWluZGVyT3B0aW9uczogWwogICAgICAgICAgICB7IG5hbWU6ICJFbWFpbCIsIHZhbHVlOiAiZW1haWwiIH0sCiAgICAgICAgICAgIHsgbmFtZTogIlNNUyIsIHZhbHVlOiAic21zIiB9LAogICAgICAgICAgICB7IG5hbWU6ICJOb3RpZmljYXRpb24iLCB2YWx1ZTogIm5vdGlmaWNhdGlvbiIgfSwKICAgICAgICAgIF0sCiAgICAgICAgICBkdXJhdGlvblZhbHVlOiAiIiwKICAgICAgICAgIGR1cmF0aW9uVHlwZTogIiIsCiAgICAgICAgICBkdXJhdGlvblR5cGVPcHRpb25zOiBbCiAgICAgICAgICAgIHsgbmFtZTogIk1pbnV0ZXMiLCB2YWx1ZTogIm1pbnV0ZXMiIH0sCiAgICAgICAgICAgIHsgbmFtZTogIkhvdXJzIiwgdmFsdWU6ICJob3VycyIgfSwKICAgICAgICAgICAgeyBuYW1lOiAiRGF5cyIsIHZhbHVlOiAiZGF5cyIgfSwKICAgICAgICAgICAgeyBuYW1lOiAiV2Vla3MiLCB2YWx1ZTogIndlZWtzIiB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICBdLAogICAgICBhc3NpZ25lZTogIiIsCiAgICAgIGFzc2lnbmVlczogWwogICAgICAgIHsgbmFtZTogIlVzZXJzIiwgdmFsdWU6ICJ1c2VyIiB9LAogICAgICAgIHsgbmFtZTogIkFzc2V0cyIsIHZhbHVlOiAiYXNzZXQiIH0sCiAgICAgIF0sCiAgICAgIGFsbFVzZXJzOiBbXSwKICAgICAgdXNlckdyb3VwczogW10sCiAgICAgIGFzc2lnbmVkVXNlckdyb3VwOiAiIiwKICAgICAgYXNzaWduVXNlcnM6IFtdLAogICAgICBhc3NpZ25lZFVzZXI6ICIiLAogICAgICBhc3NldEdyb3VwT3B0aW9uczogW10sCiAgICAgIGdyb3VwQXNzZXRPcHRpb25zOiBbXSwKICAgICAgYXNzZXRHcm91cHM6ICIiLAogICAgICBhc3NldE5hbWU6ICIiLAogICAgICBlZGl0VmFsdWVmbGFnOiBmYWxzZSwKICAgICAgYXNzZXROYW1lVVVJRDogIiIsCiAgICAgIGFzc2V0R3JvdXBzVVVJRDogIiIsCiAgICAgIGFzc2lnbmVkVXNlclVVSUQ6ICIiLAogICAgICBhc3NpZ25lZFVzZXJHcm91cFVVSUQ6ICIiLAogICAgICBhc3NldEFzc2lnbkZsYWc6IHRydWUsCiAgICAgIGFzc2lnbmVkQXNzZXROYW1lOiAiIiwKICAgICAgYXNzZXRBc3NpZ25lZFVzZXJzOiBbXSwKICAgIH07CiAgfSwKICBwcm9wczogewogICAgdGVtcE9iajoge30sCiAgICBhc3NpZ25lZFRlbXBsYXRlT2JqOiB7fSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEZvcm1FcnJvck1lc3NhZ2UoZmllbGRWYWxpZGF0aW9uKSB7CiAgICAgIGlmIChmaWVsZFZhbGlkYXRpb24uJGRpcnR5KSB7CiAgICAgICAgcmV0dXJuIEZ1bmN0aW9ucy5nZXRGb3JtRmllbGRFcnJvck1lc3NhZ2UoZmllbGRWYWxpZGF0aW9uKTsKICAgICAgfQogICAgfSwKCiAgICBjbGVhclNlbGVjdGVkRHVyYXRpb25UeXBlKGluZGV4KSB7CiAgICAgIHRoaXMucmVtaW5kZXJBcnJheVtpbmRleF0uZHVyYXRpb25UeXBlID0gIiI7CiAgICAgIHRoaXMuZHVyYXRpb25UeXBlSUQrKzsKICAgIH0sCgogICAgZ2V0VmFsaWREYXRlKCkgewogICAgICBsZXQgY3VycmVudERhdGUgPSBtb21lbnQoKS5mb3JtYXQoKS5zcGxpdCgiVCIpOwogICAgICBjdXJyZW50RGF0ZSA9IGN1cnJlbnREYXRlWzBdOwogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJhZC1ob2MiKSB7CiAgICAgICAgaWYgKG1vbWVudCh0aGlzLmFkaG9jZGF0ZSkuaXNCZWZvcmUoY3VycmVudERhdGUpKSB7CiAgICAgICAgICB0aGlzLmFkaG9jZGF0ZSA9ICIiOwogICAgICAgICAgcmV0dXJuIHRoaXMuJGVtaXQoCiAgICAgICAgICAgICJzaG93VG9hc3QiLAogICAgICAgICAgICAiUGxlYXNlIHNlbGVjdCBjdXJyZW50IG9yIGZ1dHVyZSBkYXRlIiwKICAgICAgICAgICAgImVycm9yIgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKAogICAgICAgIHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSAhPSAiYWQtaG9jIiAmJgogICAgICAgIHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSAhPSAiY3VzdG9tIgogICAgICApIHsKICAgICAgICBpZiAoCiAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSAmJgogICAgICAgICAgdGhpcy5lbmREYXRlICYmCiAgICAgICAgICAobW9tZW50KHRoaXMuZW5kRGF0ZSkuaXNCZWZvcmUoY3VycmVudERhdGUpIHx8CiAgICAgICAgICAgIG1vbWVudCh0aGlzLmVuZERhdGUpLmlzQmVmb3JlKHRoaXMuc3RhcnREYXRlKSkKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9ICIiOwogICAgICAgICAgcmV0dXJuIHRoaXMuJGVtaXQoCiAgICAgICAgICAgICJzaG93VG9hc3QiLAogICAgICAgICAgICAiVGhlIEVuZCBEYXRlIG11c3QgYmUgYWZ0ZXIgU3RhcnQgJiBDdXJyZW50IERhdGUiLAogICAgICAgICAgICAiZXJyb3IiCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBuZXZlcmZ1bmNOYW1lKHZhbCkgewogICAgICBpZiAodmFsID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5vbiA9IGZhbHNlOwogICAgICAgIHRoaXMuYWZ0ZXIgPSBmYWxzZTsKICAgICAgICB0aGlzLkN1c3RvbU1vbnRobHlEYXRlID0gIiI7CiAgICAgICAgdGhpcy5vY2N1cmFuY2VzVmFsdWUgPSAiIjsKICAgICAgfQogICAgfSwKCiAgICBvbmZ1bmNOYW1lKHZhbCkgewogICAgICBpZiAodmFsID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5uZXZlciA9IGZhbHNlOwogICAgICAgIHRoaXMuYWZ0ZXIgPSBmYWxzZTsKICAgICAgICB0aGlzLmN1c3RvbURhdGUgPSBmYWxzZTsKICAgICAgICB0aGlzLm9jY3VyYW5jZXNBY3RpdmUgPSB0cnVlOwogICAgICAgIHRoaXMub2NjdXJhbmNlc1ZhbHVlID0gIiI7CiAgICAgIH0KICAgIH0sCgogICAgYWZ0ZXJmdW5jTmFtZSh2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMub24gPSBmYWxzZTsKICAgICAgICB0aGlzLm5ldmVyID0gZmFsc2U7CiAgICAgICAgdGhpcy5vY2N1cmFuY2VzQWN0aXZlID0gZmFsc2U7CiAgICAgICAgdGhpcy5jdXN0b21EYXRlID0gdHJ1ZTsKICAgICAgICB0aGlzLm9jY3VyYW5jZXNWYWx1ZSA9ICIxIjsKICAgICAgICB0aGlzLkN1c3RvbU1vbnRobHlEYXRlID0gIiI7CiAgICAgIH0KICAgIH0sCgogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlIik7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRTY2hlZHVsZSh2YWwpIHsKICAgICAgaWYgKHZhbC52YWx1ZSA9PT0gImRhaWx5IikgewogICAgICAgIHRoaXMuZGVhZExpbmVEYXRlID0gIiI7CiAgICAgICAgdGhpcy5hZGhvY3RpbWUgPSAiIjsKICAgICAgICB0aGlzLmFkaG9jZGF0ZSA9ICIiOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PT0gImFkLWhvYyIpIHsKICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9ICIiOwogICAgICAgIHRoaXMuZW5kVGltZSA9ICIiOwogICAgICAgIHRoaXMuZW5kRGF0ZSA9ICIiOwogICAgICAgIHRoaXMuZW5kVGltZSA9ICIiOwogICAgICAgIHRoaXMuZGFpbHlEZWFkTGluZVRpbWUgPSAiIjsKICAgICAgfSBlbHNlIGlmICh2YWwudmFsdWUgPT09ICJ3ZWVrbHkiIHx8IHZhbC52YWx1ZSA9PT0gIm1vbnRobHkiKSB7CiAgICAgICAgdGhpcy5kZWFkTGluZURhdGUgPSAiIjsKICAgICAgICB0aGlzLmFkaG9jdGltZSA9ICIiOwogICAgICAgIHRoaXMuYWRob2NkYXRlID0gIiI7CiAgICAgIH0KICAgIH0sCgogICAgb25TZWxlY3RlZFJlbWluZGVyKGluZGV4MSwgdmFsdWUpIHsKICAgICAgaWYgKHZhbHVlLnJlbWluZGVyLmxlbmd0aCA+IDAgJiYgdGhpcy4kcm91dGUubmFtZSAhPT0gImluc3BlY3Rpb24iKSB7CiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucmVtaW5kZXJBcnJheS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgIHRoaXMucmVtaW5kZXJBcnJheVtpbmRleDFdLmR1cmF0aW9uVHlwZSA9ICJkYXlzIjsKICAgICAgICAgIHRoaXMucmVtaW5kZXJBcnJheVtpbmRleDFdLmR1cmF0aW9uVmFsdWUgPSAiMSI7CiAgICAgICAgICB0aGlzLmR1cmF0aW9uVHlwZUlEKys7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGNoZWNrTWluVmFsdWUoaW5kZXgpIHsKICAgICAgdGhpcy4kdi5yZW1pbmRlckFycmF5LiRlYWNoW2luZGV4XS5kdXJhdGlvblZhbHVlLiR0b3VjaCgpOwogICAgfSwKCiAgICBvblNlbGVjdGVkRHVyYXRpb25UaW1lKHZhbCkgewogICAgICBjb25zb2xlLmxvZyh2YWwpOwogICAgfSwKCiAgICBvblNlbGVjdGVkQXNzaWduZWUodmFsKSB7CiAgICAgIGlmICh2YWwuZGlzcGxheSA9PT0gIkFzc2V0cyIpIHsKICAgICAgICB0aGlzLmFzc2lnbmVkVXNlciA9ICIiOwogICAgICAgIHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgPSAiIjsKICAgICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy51c2VySWQrKzsKICAgICAgICB0aGlzLnVzZXJHcm91cElkKys7CiAgICAgICAgLy90aGlzLmRpc2FibGVVc2VyID0gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAodmFsLmRpc3BsYXkgPT09ICJVc2VycyIpIHsKICAgICAgICB0aGlzLmFzc2V0TmFtZSA9ICIiOwogICAgICAgIHRoaXMuYXNzZXRHcm91cHMgPSAiIjsKICAgICAgICB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMgPSBbXTsKICAgICAgICB0aGlzLmFzc2V0R3JvdXBJZCsrOwogICAgICAgIHRoaXMuYXNzZXRJZCsrOwogICAgICAgIHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzID0gW107CiAgICAgICAgLy90aGlzLmRpc2FibGVBc3NldCA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIGNsZWFyU2VsZWN0ZWRBc3NpZ25lZSgpIHsKICAgICAgdGhpcy5hc3NpZ25lZSA9ICIiOwogICAgICB0aGlzLmluZGV4UmVtaW5kZXIrKzsKICAgIH0sCgogICAgb25TZWxlY3RlZFVzZXJHcm91cCh2YWwpIHsKICAgICAgdGhpcy5hc3NpZ25lZFVzZXIgPSAiIjsKICAgICAgdGhpcy5lZGl0VmFsdWVmbGFnID0gdHJ1ZTsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0ID0gIiI7CiAgICAgIHRoaXMuY3JlYXRlZEZvclVzZXJOYW1lID0gbnVsbDsKICAgICAgdGhpcy5hc3NpZ25Bc3NldElkKys7CiAgICAgIHRoaXMudXNlcklkKys7CiAgICB9LAoKICAgIGNsZWFyU2VsZWN0ZWRVc2VyR3JvdXAoKSB7CiAgICAgIHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgPSAiIjsKICAgICAgdGhpcy51c2VyR3JvdXBJZCsrOwogICAgfSwKCiAgICBvblNlbGVjdGVkVXNlcih2YWwpIHsKICAgICAgdGhpcy5jcmVhdGVkRm9yVXNlck5hbWUgPSB2YWwuZGlzcGxheTsKICAgICAgdGhpcy5hc3NpZ25lZFVzZXJHcm91cCA9ICIiOwogICAgICB0aGlzLmVkaXRWYWx1ZWZsYWcgPSB0cnVlOwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSAiIjsKICAgICAgdGhpcy5hc3NpZ25Bc3NldElkKys7CiAgICAgIHRoaXMudXNlckdyb3VwSWQrKzsKICAgIH0sCgogICAgY2xlYXJTZWxlY3RlZFVzZXIoKSB7CiAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gIiI7CiAgICAgIHRoaXMudXNlcklkKys7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRBc3NldEdycCh2YWwpIHsKICAgICAgdGhpcy5hc3NldE5hbWUgPSAiIjsKICAgICAgdGhpcy5lZGl0VmFsdWVmbGFnID0gdHJ1ZTsKICAgICAgdGhpcy5hc3NldEFzc2lnbmVkVXNlcnMgPSBbXTsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0VXVpZCA9ICIiOwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSAiIjsKICAgICAgdGhpcy5hc3NldElkKys7CiAgICB9LAoKICAgIGNsZWFyU2VsZWN0ZWRBc3NldEdyb3VwKCkgewogICAgICB0aGlzLmFzc2V0R3JvdXBzID0gIiI7CiAgICAgIHRoaXMuYXNzZXRHcm91cElkKys7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRBc3NldCh2YWwpIHsKICAgICAgdGhpcy5hc3NldEdyb3VwcyA9ICIiOwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkID0gIiI7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldCA9ICIiOwogICAgICB0aGlzLmVkaXRWYWx1ZWZsYWcgPSB0cnVlOwogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBBc3NldFBlcnNvbm5lbFNlcnZpY2UuY2hlY2tBc3NpZ25tZW50T2ZBbkFzc2V0QnlVVUlEKHZhbC52YWx1ZSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmFzc2V0QXNzaWduRmxhZyA9IHJlcy5kYXRhLmFzc2lnbm1lbnQ7CiAgICAgICAgICB0aGlzLmFzc2V0QXNzaWduZWRVc2VycyA9CiAgICAgICAgICAgIHJlcy5kYXRhLnVzZXJEVE9TICE9PSBudWxsID8gcmVzLmRhdGEudXNlckRUT1MgOiBbXTsKICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICB9KTsKICAgICAgdGhpcy5hc3NldEdyb3VwSWQrKzsKICAgIH0sCgogICAgY2xlYXJTZWxlY3RlZEFzc2V0KCkgewogICAgICB0aGlzLmFzc2V0TmFtZSA9ICIiOwogICAgICB0aGlzLmFzc2V0QXNzaWduRmxhZyA9ICIiOwogICAgICB0aGlzLmFzc2V0QXNzaWduZWRVc2VycyA9ICIiOwogICAgICB0aGlzLmFzc2V0SWQrKzsKICAgIH0sCgogICAgb25TZWxlY3RlZEFzc2lnbkFzc2V0cyh2YWwpIHsKICAgICAgdGhpcy5hc3NpZ25lZEFzc2V0TmFtZSA9IHZhbC5kaXNwbGF5OwogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSB2YWwudmFsdWU7CiAgICAgIHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPSAiIjsKICAgIH0sCgogICAgY2xlYXJTZWxlY3RlZEFzc2lnbkFzc2V0KCkgewogICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPSAiIjsKICAgICAgdGhpcy5hc3NpZ25Bc3NldElkKys7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRDdXN0b21XZWVrKHZhbCkgewogICAgICBpZiAodmFsLmRpc3BsYXkgPT0gImRheSIpIHsKICAgICAgICB0aGlzLmZyZXF1ZW5jeURheXMgPSAiIjsKICAgICAgICB0aGlzLmN1c3RvbVdlZWtEYXkgPSAiIjsKICAgICAgICB0aGlzLmN1c3RvbU1vbnRobHkgPSAiIjsKICAgICAgfSBlbHNlIGlmICh2YWwuZGlzcGxheSA9PSAid2VlayIpIHsKICAgICAgICB0aGlzLmN1c3RvbU1vbnRobHkgPSAiIjsKICAgICAgfSBlbHNlIGlmICh2YWwuZGlzcGxheSA9PSAibW9udGgiKSB7CiAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gIiI7CiAgICAgIH0gZWxzZSBpZiAodmFsLmRpc3BsYXkgPT0gInllYXIiKSB7CiAgICAgICAgdGhpcy5mcmVxdWVuY3lEYXlzID0gIiI7CiAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gIiI7CiAgICAgICAgdGhpcy5jdXN0b21Nb250aGx5ID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBvblNlbGVjdGVkQ3VzdG9tTW9udGhseSgpIHt9LAoKICAgIHNlbGVjdFRlbXBsYXRlKCkgewogICAgICB0aGlzLiRlbWl0KCJzZWxlY3RUZW1wIik7CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRXZWVrRGF5KHZhbCkgewogICAgICBjb25zb2xlLmxvZyh2YWwpOwogICAgfSwKCiAgICBjcmVhdGVBZGRpdGlvbmFsSW5zcGVjdGlvbigpIHsKICAgICAgdGhpcy4kZW1pdCgiY3JlYXRlSW5zcGVjdGlvbiIpOwogICAgfSwKCiAgICBhZGQoaW5kZXgpIHsKICAgICAgdGhpcy4kZW1pdCgiYWRkUmVtaW5kZXJzIiwgaW5kZXgpOwogICAgfSwKCiAgICBjbGlja1JlbW92ZShpbmRleCkgewogICAgICB0aGlzLiRlbWl0KCJyZW1vdmVSZW1pbmRlcnMiLCBpbmRleCk7CiAgICB9LAoKICAgIGFkZFRlbXBsYXRlKCkgewogICAgICB0aGlzLnNob3dUZW1wUG9wVXAgPSB0cnVlOwogICAgfSwKCiAgICB0ZW1wQ2xvc2UoKSB7CiAgICAgIHRoaXMuc2hvd1RlbXBQb3BVcCA9IGZhbHNlOwogICAgfSwKCiAgICBhZGRSZW1pbmRlcigpIHsKICAgICAgdGhpcy5yZW1pbmRlckFycmF5LnB1c2goewogICAgICAgIHJlbWluZGVyOiBbXSwKICAgICAgICByZW1pbmRlck9wdGlvbnM6IFsKICAgICAgICAgIHsgbmFtZTogIkVtYWlsIiwgdmFsdWU6ICJlbWFpbCIgfSwKICAgICAgICAgIHsgbmFtZTogIlNNUyIsIHZhbHVlOiAic21zIiB9LAogICAgICAgICAgeyBuYW1lOiAiTm90aWZpY2F0aW9uIiwgdmFsdWU6ICJub3RpZmljYXRpb24iIH0sCiAgICAgICAgXSwKICAgICAgICBkdXJhdGlvblZhbHVlOiAiIiwKICAgICAgICBkdXJhdGlvblR5cGU6ICIiLAogICAgICAgIGR1cmF0aW9uVHlwZU9wdGlvbnM6IFsKICAgICAgICAgIHsgbmFtZTogIk1pbnV0ZXMiLCB2YWx1ZTogIm1pbnV0ZXMiIH0sCiAgICAgICAgICB7IG5hbWU6ICJIb3VycyIsIHZhbHVlOiAiaG91cnMiIH0sCiAgICAgICAgICB7IG5hbWU6ICJEYXlzIiwgdmFsdWU6ICJkYXlzIiB9LAogICAgICAgICAgeyBuYW1lOiAiV2Vla3MiLCB2YWx1ZTogIndlZWtzIiB9LAogICAgICAgIF0sCiAgICAgIH0pOwogICAgfSwKCiAgICByZW1vdmVSZW1pbmRlcihpbmRleCkgewogICAgICBpZiAoaW5kZXggIT09IDApIHsKICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXkuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgfSwKCiAgICBUZW1wbGF0ZUFzc2lnbm1lbnQoKSB7CiAgICAgIHRoaXMuJHYuJHRvdWNoKCk7CiAgICAgIGlmICh0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGVtaXQoCiAgICAgICAgICAic2hvd1RvYXN0IiwKICAgICAgICAgICJQbGVhc2UgZmlsbCBhbGwgcmVxdWlyZWQgZmllbGRzLiEiLAogICAgICAgICAgIndhcm5pbmciCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PT0gImN1c3RvbSIpIHsKICAgICAgICBpZiAodGhpcy5uZXZlciA9PT0gIiIgJiYgdGhpcy5vbiA9PT0gIiIgJiYgdGhpcy5hZnRlciA9PT0gIiIpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoCiAgICAgICAgICAgICJzaG93VG9hc3QiLAogICAgICAgICAgICAiUGxlYXNlIFNlbGVjdCBFbmQgU2NoZWR1bGUgVGltZSBpbiBjdXN0b20gUmVjdXJyZW5jZSIsCiAgICAgICAgICAgICJlcnJvciIKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmN1c3RvbVdlZWsgPT0gIndlZWsiICYmIHRoaXMuY3VzdG9tV2Vla0RheS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHRoaXMuJGVtaXQoInNob3dUb2FzdCIsICJQbGVhc2UgU2VsZWN0IFdlZWsgZGF5cyIsICJlcnJvciIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5jdXN0b21XZWVrID09ICJtb250aCIgJiYgdGhpcy5jdXN0b21Nb250aGx5ID09PSAiIikgewogICAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBTZWxlY3QgTW9udGhseSBkYXkiLCAiZXJyb3IiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFzc2lnbmVlID09PSAidXNlciIpIHsKICAgICAgICBpZiAodGhpcy5hc3NpZ25lZFVzZXIgPT09ICIiICYmIHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgPT09ICIiKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KAogICAgICAgICAgICAic2hvd1RvYXN0IiwKICAgICAgICAgICAgIlBsZWFzZSBTZWxlY3QgVXNlciBvciBVc2VyIEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIsCiAgICAgICAgICAgICJlcnJvciIKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRoaXMuYXNzaWduZWUgPT09ICJhc3NldCIpIHsKICAgICAgICBpZiAodGhpcy5hc3NldE5hbWUgPT0gIiIgJiYgdGhpcy5hc3NldEdyb3VwcyA9PSAiIikgewogICAgICAgICAgdGhpcy4kZW1pdCgKICAgICAgICAgICAgInNob3dUb2FzdCIsCiAgICAgICAgICAgICJQbGVhc2UgU2VsZWN0IEFzc2V0IG9yIEFzc2V0IEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIsCiAgICAgICAgICAgICJlcnJvciIKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmFzc2lnbmVkVXNlciAhPT0gIiIgJiYgdGhpcy5hc3NpZ25lZEFzc2V0ID09PSAiIikgewogICAgICAgIHRoaXMuJGVtaXQoCiAgICAgICAgICAic2hvd1RvYXN0IiwKICAgICAgICAgICJQbGVhc2UgU2VsZWN0IEFzc2V0IHRvIGFzc2lnbiBUZW1wbGF0ZSIsCiAgICAgICAgICAiZXJyb3IiCiAgICAgICAgKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgIT09ICIiICYmIHRoaXMuYXNzaWduZWRBc3NldCA9PT0gIiIpIHsKICAgICAgICB0aGlzLiRlbWl0KAogICAgICAgICAgInNob3dUb2FzdCIsCiAgICAgICAgICAiUGxlYXNlIFNlbGVjdCBBc3NldCB0byBhc3NpZ24gVGVtcGxhdGUiLAogICAgICAgICAgImVycm9yIgogICAgICAgICk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmFzc2V0TmFtZSAhPT0gIiIgJiYgdGhpcy5hc3NldEFzc2lnbkZsYWcgPT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBBc3NpZ24gQXNzZXQgdG8gdXNlciIsICJlcnJvciIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc3RhcnREYXRlICE9PSAiIikgewogICAgICAgIHRoaXMuc3RhcnREYXRlID0gbW9tZW50KHRoaXMuc3RhcnREYXRlKS5mb3JtYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9ICIiOwogICAgICB9CiAgICAgIGlmICh0aGlzLmVuZERhdGUgIT09ICIiKSB7CiAgICAgICAgdGhpcy5lbmREYXRlID0gbW9tZW50KHRoaXMuZW5kRGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lbmREYXRlID0gIiI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYWRob2NkYXRlICE9PSAiIiAmJiB0aGlzLmFkaG9jZGF0ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5kZWFkTGluZURhdGUgPSBtb21lbnQodGhpcy5hZGhvY2RhdGUpLmZvcm1hdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGVhZExpbmVEYXRlID0gIiI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubW9udGhseURhdGUgIT09ICIiICYmIHRoaXMubW9udGhseURhdGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5tb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tb250aGx5RGF0ZSA9ICIiOwogICAgICB9CgogICAgICBpZiAodGhpcy5hc3NldE5hbWUgIT09ICIiICYmIHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLmFzc2lnbmVkVXNlciA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLnV1aWQ7CiAgICAgICAgdGhpcy5jcmVhdGVkRm9yVXNlck5hbWUgPSB0aGlzLmFzc2V0QXNzaWduZWRVc2Vyc1swXS5uYW1lOwogICAgICB9CgogICAgICAvLyh0aGlzLmVuZERhdGUgPSBtb21lbnQodGhpcy5lbmREYXRlKS5mb3JtYXQoKSksCiAgICAgIC8vCSh0aGlzLmRlYWRMaW5lRGF0ZSA9IG1vbWVudCh0aGlzLmFkaG9jZGF0ZSkuZm9ybWF0KCkpLAogICAgICAvLyh0aGlzLm1vbnRobHlEYXRlID0gbW9tZW50KHRoaXMubW9udGhseURhdGUpLmZvcm1hdCgpKTsKCiAgICAgIGxldCByZXF1ZXN0T2JqID0gewogICAgICAgIHRlbXBsYXRlTmFtZTogdGhpcy5uYW1lLAogICAgICAgIHRlbXBsYXRlVVVJRDogdGhpcy50ZW1wbGF0ZVVVSUQsCiAgICAgICAgY3JlYXRlZEZvclVzZXJOYW1lOiB0aGlzLmNyZWF0ZWRGb3JVc2VyTmFtZSwKICAgICAgICBzdGFydERhdGU6IHRoaXMuc3RhcnREYXRlLAogICAgICAgIHN0YXJ0VGltZTogdGhpcy5zdGFydFRpbWUsCiAgICAgICAgZW5kRGF0ZTogdGhpcy5lbmREYXRlLAogICAgICAgIGVuZFRpbWU6IHRoaXMuZW5kVGltZSwKICAgICAgICBkZWFkTGluZURhdGU6IHRoaXMuZGVhZExpbmVEYXRlLAogICAgICAgIGRlYWRMaW5lVGltZTogdGhpcy5hZGhvY3RpbWUsCiAgICAgICAgLy8JbW9udGhseURhdGU6IHRoaXMubW9udGhseURhdGUsCiAgICAgICAgZnJlcXVlbmN5VHlwZTogdGhpcy5zZWxlY3RlZFNjaGVkdWxlLAogICAgICAgIGNyZWF0ZWRGb3JBc3NldFVVSUQ6IHRoaXMuYXNzZXROYW1lLAogICAgICAgIGNyZWF0ZWRGb3JBc3NldEdyb3VwVVVJRDogdGhpcy5hc3NldEdyb3VwcywKICAgICAgICBkYWlseURlYWRMaW5lVGltZTogdGhpcy5kYWlseURlYWRMaW5lVGltZSwKICAgICAgICBjcmVhdGVkRm9yVXNlclVVSUQ6IHRoaXMuYXNzaWduZWRVc2VyLAogICAgICAgIGNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEOiB0aGlzLmFzc2lnbmVkVXNlckdyb3VwLAogICAgICAgIHNlbGVjdGVkVXNlckFzc2V0VVVJRDogdGhpcy5hc3NpZ25lZEFzc2V0LAogICAgICAgIHNlbGVjdGVkVXNlckFzc2V0TmFtZTogdGhpcy5hc3NpZ25lZEFzc2V0TmFtZSwKICAgICAgICByZXBlYXRFdmVyeVRpbWU6IHRoaXMuY3VzdG9tVmFsdWUsCiAgICAgICAgcmVwZWF0RXZlcnlUeXBlOiB0aGlzLmN1c3RvbVdlZWssCiAgICAgICAgcmVwZWF0TW9udGhEYXk6IHRoaXMuY3VzdG9tTW9udGhseSwKICAgICAgfTsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiYWQtaG9jIikgewogICAgICAgIHJlcXVlc3RPYmouaW5zcGVjdGlvblR5cGUgPSAiYWQtaG9jIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXF1ZXN0T2JqLmluc3BlY3Rpb25UeXBlID0gInNjaGVkdWxlZCI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAid2Vla2x5IikgewogICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IHRoaXMud2Vla0RheTsKICAgICAgfQogICAgICBpZiAoCiAgICAgICAgdGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJjdXN0b20iICYmCiAgICAgICAgcmVxdWVzdE9iai5yZXBlYXRFdmVyeVR5cGUgPT0gIndlZWsiCiAgICAgICkgewogICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY3VzdG9tV2Vla0RheSk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAibW9udGhseSIpIHsKICAgICAgICByZXF1ZXN0T2JqLm1vbnRobHlEYXRlID0gbW9tZW50KHRoaXMubW9udGhseURhdGUpLmZvcm1hdCgpOwogICAgICB9CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImN1c3RvbSIpIHsKICAgICAgICAvLwlyZXF1ZXN0T2JqLm1vbnRobHlEYXRlID0gbW9tZW50KHRoaXMuQ3VzdG9tTW9udGhseURhdGUpLmZvcm1hdCgpOwogICAgICAgIGlmIChyZXF1ZXN0T2JqLnJlcGVhdEV2ZXJ5VHlwZSA9PT0gIndlZWsiKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmN1c3RvbVdlZWtEYXkpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5uZXZlciA9PSB0cnVlKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZFR5cGUgPSAibmV2ZXIiOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5vbiA9PSB0cnVlKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZFR5cGUgPSAib24iOwogICAgICAgICAgcmVxdWVzdE9iai5lbmREYXRlID0gbW9tZW50KHRoaXMuQ3VzdG9tTW9udGhseURhdGUpLmZvcm1hdCgpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5hZnRlciA9PSB0cnVlKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZFR5cGUgPSAiYWZ0ZXIiOwogICAgICAgICAgcmVxdWVzdE9iai5vY2N1cnJlbmNlID0gdGhpcy5vY2N1cmFuY2VzVmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImN1c3RvbSIpIHsKICAgICAgLy8gfQogICAgICBsZXQgcmVtaW5kZXJBcnJheSA9IFtdOwogICAgICAgZm9yIChsZXQgcmVtIG9mIHJlbWluZGVyQXJyYXkgKSB7CiAgICAgICAgLy9kZWJ1Z2dlcgogICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICByZW1pbmRlcjogcmVtLnJlbWluZGVyLAogICAgICAgICAgZHVyYXRpb25WYWx1ZTogcmVtLmR1cmF0aW9uVmFsdWUsCiAgICAgICAgICBkdXJhdGlvblR5cGU6IHJlbS5kdXJhdGlvblR5cGUsCiAgICAgICAgfTsKICAgICAgICByZW1pbmRlckFycmF5LnB1c2gob2JqKTsKICAgICAgICByZXF1ZXN0T2JqLnJlbWluZGVyID0gSlNPTi5zdHJpbmdpZnkocmVtaW5kZXJBcnJheSk7CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coJ3JlcXVlc3RPYmotb2xkJyxyZXF1ZXN0T2JqKQogICAgICB0aGlzLiRlbWl0KCJyZXF1ZXN0T2JqIiwgcmVxdWVzdE9iaik7CgogICAgfSwKCiAgICBlZGl0QXNzaWduZWRUZW1wKCkgewogICAgICB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPSB0aGlzLmFzc2lnbmVkVGVtcGxhdGVPYmouZnJlcXVlbmN5VHlwZTsKICAgIH0sCgogICAgVXBkYXRlVGVtcGxhdGVBc3NpZ25tZW50KCkgewogICAgICB0aGlzLiR2LiR0b3VjaCgpOwogICAgICBpZiAodGhpcy4kdi4kaW52YWxpZCkgewogICAgICAgIHJldHVybiB0aGlzLiRlbWl0KAogICAgICAgICAgInNob3dUb2FzdCIsCiAgICAgICAgICAiUGxlYXNlIGZpbGwgYWxsIHJlcXVpcmVkIGZpZWxkcy4hIiwKICAgICAgICAgICJ3YXJuaW5nIgogICAgICAgICk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT09ICJjdXN0b20iKSB7CiAgICAgICAgaWYgKHRoaXMubmV2ZXIgPT09ICIiICYmIHRoaXMub24gPT09ICIiICYmIHRoaXMuYWZ0ZXIgPT09ICIiKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KAogICAgICAgICAgICAic2hvd1RvYXN0IiwKICAgICAgICAgICAgIlBsZWFzZSBTZWxlY3QgRW5kIFNjaGVkdWxlIFRpbWUgaW4gY3VzdG9tIFJlY3VyZW5jZSIsCiAgICAgICAgICAgICJlcnJvciIKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmN1c3RvbVdlZWsgPT0gIndlZWsiICYmIHRoaXMuY3VzdG9tV2Vla0RheS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHRoaXMuJGVtaXQoInNob3dUb2FzdCIsICJQbGVhc2UgU2VsZWN0IFdlZWsgZGF5cyIsICJlcnJvciIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5jdXN0b21XZWVrID09ICJtb250aCIgJiYgdGhpcy5jdXN0b21Nb250aGx5ID09PSAiIikgewogICAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBTZWxlY3QgTW9udGhseSBkYXkiLCAiZXJyb3IiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFzc2lnbmVlID09PSAidXNlciIpIHsKICAgICAgICBpZiAodGhpcy5hc3NpZ25lZFVzZXIgPT09ICIiICYmIHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgPT09ICIiKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KAogICAgICAgICAgICAic2hvd1RvYXN0IiwKICAgICAgICAgICAgIlBsZWFzZSBTZWxlY3QgVXNlciBvciBVc2VyIEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIsCiAgICAgICAgICAgICJlcnJvciIKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRoaXMuYXNzaWduZWUgPT09ICJhc3NldCIpIHsKICAgICAgICBpZiAodGhpcy5hc3NldE5hbWUgPT0gIiIgJiYgdGhpcy5hc3NldEdyb3VwcyA9PSAiIikgewogICAgICAgICAgdGhpcy4kZW1pdCgKICAgICAgICAgICAgInNob3dUb2FzdCIsCiAgICAgICAgICAgICJQbGVhc2UgU2VsZWN0IEFzc2V0IG9yIEFzc2V0IEdyb3VwIHRvIGFzc2lnbiBUZW1wbGF0ZSIsCiAgICAgICAgICAgICJlcnJvciIKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICgKICAgICAgICB0aGlzLmFzc2lnbmVkVXNlciAhPT0gIiIgJiYKICAgICAgICB0aGlzLmFzc2lnbmVkQXNzZXQgPT09ICIiICYmCiAgICAgICAgdGhpcy5hc3NpZ25lZSA9PT0gInVzZXIiCiAgICAgICkgewogICAgICAgIHRoaXMuJGVtaXQoCiAgICAgICAgICAic2hvd1RvYXN0IiwKICAgICAgICAgICJQbGVhc2UgU2VsZWN0IEFzc2V0IHRvIGFzc2lnbiBUZW1wbGF0ZSIsCiAgICAgICAgICAiZXJyb3IiCiAgICAgICAgKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXNzaWduZWRVc2VyR3JvdXAgIT09ICIiICYmIHRoaXMuYXNzaWduZWRBc3NldCA9PT0gIiIpIHsKICAgICAgICB0aGlzLiRlbWl0KAogICAgICAgICAgInNob3dUb2FzdCIsCiAgICAgICAgICAiUGxlYXNlIFNlbGVjdCBBc3NldCB0byBhc3NpZ24gVGVtcGxhdGUiLAogICAgICAgICAgImVycm9yIgogICAgICAgICk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmFzc2V0TmFtZSAhPT0gIiIgJiYgdGhpcy5hc3NldEFzc2lnbkZsYWcgPT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy4kZW1pdCgic2hvd1RvYXN0IiwgIlBsZWFzZSBBc3NpZ24gQXNzZXQgdG8gdXNlciIsICJlcnJvciIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8JdGhpcy5zdGFydERhdGUgPSBtb21lbnQodGhpcy5zdGFydERhdGUpLnRvSVNPU3RyaW5nKCksCiAgICAgIC8vCXRoaXMuZW5kRGF0ZSA9IG1vbWVudCh0aGlzLmVuZERhdGUpLmZvcm1hdCgpLAogICAgICAvLwl0aGlzLmRlYWRMaW5lRGF0ZSA9IG1vbWVudCh0aGlzLmFkaG9jZGF0ZSkuZm9ybWF0KCksCiAgICAgIC8vCXRoaXMubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5tb250aGx5RGF0ZSkuZm9ybWF0KCk7CgogICAgICBsZXQgcmVxdWVzdE9iaiA9IHsKICAgICAgICB0ZW1wbGF0ZU5hbWU6IHRoaXMubmFtZSwKICAgICAgICB0ZW1wbGF0ZVVVSUQ6IHRoaXMudGVtcGxhdGVVVUlELAogICAgICAgIGNyZWF0ZWRGb3JVc2VyTmFtZTogdGhpcy5jcmVhdGVkRm9yVXNlck5hbWUsCiAgICAgICAgZGVhZExpbmVUaW1lOiB0aGlzLmFkaG9jdGltZSwKICAgICAgICBmcmVxdWVuY3lUeXBlOiB0aGlzLnNlbGVjdGVkU2NoZWR1bGUsCiAgICAgICAgbGFzdFVwZGF0ZWRCeU5hbWU6CiAgICAgICAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLmZpcnN0TmFtZSArCiAgICAgICAgICAiICIgKwogICAgICAgICAgdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5sYXN0TmFtZSwKICAgICAgICBsYXN0VXBkYXRlZEJ5VVVJRDogdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS51c2VyaWQsCiAgICAgICAgLy8Jc2VsZWN0ZWRVc2VyQXNzZXRVVUlEOiB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkICE9PSAnJyA/ICB0aGlzLmFzc2lnbmVkQXNzZXQ6IHRoaXMuYXNzaWduZWRBc3NldFV1aWQsCiAgICAgICAgLy8Jc2VsZWN0ZWRVc2VyQXNzZXROYW1lOiB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkICE9PSAnJyA/IHRoaXMuYXNzaWduZWRBc3NldE5hbWU6IHRoaXMuYXNzaWduZWRBc3NldCwKICAgICAgICAvLyBjcmVhdGVkRm9yQXNzZXRVVUlEOiB0aGlzLmFzc2V0TmFtZSwKICAgICAgICAvLyBjcmVhdGVkRm9yQXNzZXRHcm91cFVVSUQ6IHRoaXMuYXNzZXRHcm91cHMsCiAgICAgICAgLy8gY3JlYXRlZEZvclVzZXJVVUlEOiB0aGlzLmFzc2lnbmVkVXNlciwKICAgICAgICAvLyBjcmVhdGVkRm9yVXNlckdyb3VwVVVJRDogdGhpcy5hc3NpZ25lZFVzZXJHcm91cCwKICAgICAgfTsKICAgICAgaWYgKHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPT09ICIiIHx8IHRoaXMuYXNzaWduZWRBc3NldFV1aWQgPT09IG51bGwpIHsKICAgICAgICByZXF1ZXN0T2JqLnNlbGVjdGVkVXNlckFzc2V0VVVJRCA9IHRoaXMuYXNzaWduZWRBc3NldDsKICAgICAgICByZXF1ZXN0T2JqLnNlbGVjdGVkVXNlckFzc2V0TmFtZSA9IHRoaXMuYXNzaWduZWRBc3NldE5hbWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVxdWVzdE9iai5zZWxlY3RlZFVzZXJBc3NldFVVSUQgPSB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkOwogICAgICAgIHJlcXVlc3RPYmouc2VsZWN0ZWRVc2VyQXNzZXROYW1lID0gdGhpcy5hc3NpZ25lZEFzc2V0OwogICAgICB9CiAgICAgIGlmICh0aGlzLmFzc2lnbmVlID09PSAiYXNzZXQiICYmIHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICBpZiAodGhpcy5lZGl0VmFsdWVmbGFnID09PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlciA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLnV1aWQ7CiAgICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLm5hbWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyVVVJRCA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLnV1aWQ7CiAgICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyTmFtZSA9IHRoaXMuYXNzZXRBc3NpZ25lZFVzZXJzWzBdLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmVkaXRWYWx1ZWZsYWcgPT09IHRydWUpIHsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JBc3NldFVVSUQgPSB0aGlzLmFzc2V0TmFtZTsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JBc3NldEdyb3VwVVVJRCA9IHRoaXMuYXNzZXRHcm91cHM7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlclVVSUQgPSB0aGlzLmFzc2lnbmVkVXNlcjsKICAgICAgICByZXF1ZXN0T2JqLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEID0gdGhpcy5hc3NpZ25lZFVzZXJHcm91cDsKICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRWYWx1ZWZsYWcgPT09IGZhbHNlKSB7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yQXNzZXRVVUlEID0gdGhpcy5hc3NldE5hbWVVVUlEOwogICAgICAgIHJlcXVlc3RPYmouY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlEID0gdGhpcy5hc3NldEdyb3Vwc1VVSUQ7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlclVVSUQgPSB0aGlzLmFzc2lnbmVkVXNlclVVSUQ7CiAgICAgICAgcmVxdWVzdE9iai5jcmVhdGVkRm9yVXNlckdyb3VwVVVJRCA9IHRoaXMuYXNzaWduZWRVc2VyR3JvdXBVVUlEOwogICAgICB9CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImFkLWhvYyIpIHsKICAgICAgICByZXF1ZXN0T2JqLmluc3BlY3Rpb25UeXBlID0gImFkLWhvYyI7CiAgICAgICAgKHJlcXVlc3RPYmouZGVhZExpbmVEYXRlID0gbW9tZW50KHRoaXMuYWRob2NkYXRlKS5mb3JtYXQoKSksCiAgICAgICAgICAocmVxdWVzdE9iai5kZWFkTGluZVRpbWUgPSB0aGlzLmFkaG9jdGltZSk7CiAgICAgICAgcmVxdWVzdE9iai5kYWlseURlYWRMaW5lVGltZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLm1vbnRobHlEYXRlID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLnN0YXJ0RGF0ZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5zdGFydFRpbWUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZW5kRGF0ZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5lbmRUaW1lID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXF1ZXN0T2JqLmluc3BlY3Rpb25UeXBlID0gInNjaGVkdWxlZCI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSA9PSAiZGFpbHkiKSB7CiAgICAgICAgcmVxdWVzdE9iai5kZWFkTGluZURhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZGVhZExpbmVUaW1lID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmoubW9udGhseURhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZGFpbHlEZWFkTGluZVRpbWUgPSB0aGlzLmRhaWx5RGVhZExpbmVUaW1lOwogICAgICAgIChyZXF1ZXN0T2JqLnN0YXJ0RGF0ZSA9IG1vbWVudCh0aGlzLnN0YXJ0RGF0ZSkuZm9ybWF0KCkpLAogICAgICAgICAgKHJlcXVlc3RPYmouc3RhcnRUaW1lID0gdGhpcy5zdGFydFRpbWUpOwogICAgICAgIChyZXF1ZXN0T2JqLmVuZERhdGUgPSBtb21lbnQodGhpcy5lbmREYXRlKS5mb3JtYXQoKSksCiAgICAgICAgICAocmVxdWVzdE9iai5lbmRUaW1lID0gdGhpcy5lbmRUaW1lKTsKICAgICAgfQogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJ3ZWVrbHkiKSB7CiAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gdGhpcy53ZWVrRGF5OwogICAgICAgIHJlcXVlc3RPYmouZGVhZExpbmVEYXRlID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmRlYWRMaW5lVGltZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5kYWlseURlYWRMaW5lVGltZSA9IG51bGw7CiAgICAgICAgKHJlcXVlc3RPYmouc3RhcnREYXRlID0gbW9tZW50KHRoaXMuc3RhcnREYXRlKS5mb3JtYXQoKSksCiAgICAgICAgICAocmVxdWVzdE9iai5zdGFydFRpbWUgPSB0aGlzLnN0YXJ0VGltZSk7CiAgICAgICAgKHJlcXVlc3RPYmouZW5kRGF0ZSA9IG1vbWVudCh0aGlzLmVuZERhdGUpLmZvcm1hdCgpKSwKICAgICAgICAgIChyZXF1ZXN0T2JqLmVuZFRpbWUgPSB0aGlzLmVuZFRpbWUpOwogICAgICB9CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPT0gImN1c3RvbSIpIHsKICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSB0aGlzLmN1c3RvbVdlZWtEYXk7CiAgICAgICAgcmVxdWVzdE9iai5kZWFkTGluZURhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZGVhZExpbmVUaW1lID0gbnVsbDsKICAgICAgfQogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJtb250aGx5IikgewogICAgICAgIHJlcXVlc3RPYmoubW9udGhseURhdGUgPSBtb21lbnQodGhpcy5tb250aGx5RGF0ZSkuZm9ybWF0KCk7CiAgICAgICAgcmVxdWVzdE9iai5kZWFkTGluZURhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZGVhZExpbmVUaW1lID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmRhaWx5RGVhZExpbmVUaW1lID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSBudWxsOwogICAgICAgIChyZXF1ZXN0T2JqLnN0YXJ0RGF0ZSA9IG1vbWVudCh0aGlzLnN0YXJ0RGF0ZSkuZm9ybWF0KCkpLAogICAgICAgICAgKHJlcXVlc3RPYmouc3RhcnRUaW1lID0gdGhpcy5zdGFydFRpbWUpOwogICAgICAgIChyZXF1ZXN0T2JqLmVuZERhdGUgPSBtb21lbnQodGhpcy5lbmREYXRlKS5mb3JtYXQoKSksCiAgICAgICAgICAocmVxdWVzdE9iai5lbmRUaW1lID0gdGhpcy5lbmRUaW1lKTsKICAgICAgfQogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlID09ICJjdXN0b20iKSB7CiAgICAgICAgcmVxdWVzdE9iai5tb250aGx5RGF0ZSA9IG1vbWVudCh0aGlzLkN1c3RvbU1vbnRobHlEYXRlKS5mb3JtYXQoKTsKICAgICAgICByZXF1ZXN0T2JqLmRlYWRMaW5lRGF0ZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5kZWFkTGluZVRpbWUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZGFpbHlEZWFkTGluZVRpbWUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZnJlcXVlbmN5RGF5cyA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5tb250aGx5RGF0ZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5zdGFydERhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouc3RhcnRUaW1lID0gbnVsbDsKICAgICAgICByZXF1ZXN0T2JqLmVuZERhdGUgPSBudWxsOwogICAgICAgIHJlcXVlc3RPYmouZW5kVGltZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdE9iai5yZXBlYXRFdmVyeVRpbWUgPSB0aGlzLmN1c3RvbVZhbHVlOwogICAgICAgIHJlcXVlc3RPYmoucmVwZWF0RXZlcnlUeXBlID0gdGhpcy5jdXN0b21XZWVrOwogICAgICAgIGlmICh0aGlzLm5ldmVyID09IHRydWUpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kVHlwZSA9ICJuZXZlciI7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZERhdGUgPSAiIjsKICAgICAgICAgIHJlcXVlc3RPYmoub2NjdXJyZW5jZSA9ICIiOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5vbiA9PSB0cnVlKSB7CiAgICAgICAgICByZXF1ZXN0T2JqLmVuZFR5cGUgPSAib24iOwogICAgICAgICAgcmVxdWVzdE9iai5lbmREYXRlID0gbW9tZW50KHRoaXMuQ3VzdG9tTW9udGhseURhdGUpLmZvcm1hdCgpOwogICAgICAgICAgcmVxdWVzdE9iai5vY2N1cnJlbmNlID0gIiI7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmFmdGVyID09IHRydWUpIHsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kVHlwZSA9ICJhZnRlciI7CiAgICAgICAgICByZXF1ZXN0T2JqLm9jY3VycmVuY2UgPSB0aGlzLm9jY3VyYW5jZXNWYWx1ZTsKICAgICAgICAgIHJlcXVlc3RPYmouZW5kRGF0ZSA9ICIiOwogICAgICAgIH0KICAgICAgICBpZiAocmVxdWVzdE9iai5yZXBlYXRFdmVyeVR5cGUgPT09ICJ3ZWVrIikgewogICAgICAgICAgcmVxdWVzdE9iai5mcmVxdWVuY3lEYXlzID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jdXN0b21XZWVrRGF5KTsKICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3RPYmoucmVwZWF0RXZlcnlUeXBlID09PSAibW9udGgiKSB7CiAgICAgICAgICAocmVxdWVzdE9iai5yZXBlYXRNb250aERheSA9IHRoaXMuY3VzdG9tTW9udGhseSksCiAgICAgICAgICAgIChyZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSAiIik7CiAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgIHJlcXVlc3RPYmoucmVwZWF0RXZlcnlUeXBlID09PSAiZGF5IiB8fAogICAgICAgICAgcmVxdWVzdE9iai5yZXBlYXRFdmVyeVR5cGUgPT09ICJ5ZWFyIgogICAgICAgICkgewogICAgICAgICAgKHJlcXVlc3RPYmoucmVwZWF0TW9udGhEYXkgPSAiIiksIChyZXF1ZXN0T2JqLmZyZXF1ZW5jeURheXMgPSAiIik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGxldCByZW1pbmRlckFycmF5ID0gW107CiAgICAgIGZvciAobGV0IHJlbSBvZiByZW1pbmRlckFycmF5ICkgewogICAgICAgIC8vZGVidWdnZXIKICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgcmVtaW5kZXI6IHJlbS5yZW1pbmRlciwKICAgICAgICAgIGR1cmF0aW9uVmFsdWU6IHJlbS5kdXJhdGlvblZhbHVlLAogICAgICAgICAgZHVyYXRpb25UeXBlOiByZW0uZHVyYXRpb25UeXBlLAogICAgICAgIH07CiAgICAgICAgcmVtaW5kZXJBcnJheS5wdXNoKG9iaik7CiAgICAgICAgcmVxdWVzdE9iai5yZW1pbmRlciA9IEpTT04uc3RyaW5naWZ5KHJlbWluZGVyQXJyYXkpOwogICAgICB9CiAgICAgIC8vCXJldHVybgogICAgICB0aGlzLiRlbWl0KCJ1cGRhdGVBc3NpZ25lZFRlbXBsYXRlIiwgcmVxdWVzdE9iaik7CiAgICB9LAoKICAgIGdldEV4aXN0aW5nSW5zcGVjdGlvblRlbXBsYXRlKHV1aWQsIHRlbmFudFVVSUQpIHsKICAgICAgbGV0IGluc3BlY3Rpb25JdGVtID0gbnVsbDsKICAgICAgSW5zcGVjdGlvblNlcnZpY2UuZ2V0SW5zcGVjdGlvblRlbXBsYXRlQnlVVUlEKHV1aWQsIHRlbmFudFVVSUQpLnRoZW4oCiAgICAgICAgKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5ncm91cEFzc2V0T3B0aW9ucyA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5hc3NldEFuZEdyb3Vwc05hbWVSZXNwb25zZS5hc3NldERUT1M7CiAgICAgICAgICAgIHRoaXMuYXNzZXRHcm91cE9wdGlvbnMgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuYXNzZXRBbmRHcm91cHNOYW1lUmVzcG9uc2UuYXNzZXRHcm91cERUT1M7CiAgICAgICAgICAgIHRoaXMudXNlckdyb3VwcyA9IHJlc3BvbnNlLmRhdGEudXNlckFuZEdyb3VwUmVzcG9uc2UudXNlckdyb3VwRFRPUzsKICAgICAgICAgICAgdGhpcy5hc3NpZ25Vc2VycyA9IHJlc3BvbnNlLmRhdGEudXNlckFuZEdyb3VwUmVzcG9uc2UudXNlckRUT1M7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmluc3BlY3Rpb25UZW1wbGF0ZSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgaW5zcGVjdGlvbkl0ZW0gPSByZXNwb25zZS5kYXRhLmluc3BlY3Rpb25UZW1wbGF0ZTsKICAgICAgICAgICAgICB0aGlzLmluc3BlY3Rpb25UZW1wbGF0ZSA9IHJlc3BvbnNlLmRhdGEuaW5zcGVjdGlvblRlbXBsYXRlOwogICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVOYW1lID0gaW5zcGVjdGlvbkl0ZW0ubmFtZTsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2NoZWR1bGUgPSBpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlOwogICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRBc3NldCA9IGluc3BlY3Rpb25JdGVtLnNlbGVjdGVkVXNlckFzc2V0TmFtZTsKICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkQXNzZXRVdWlkID0gaW5zcGVjdGlvbkl0ZW0uc2VsZWN0ZWRVc2VyQXNzZXRVVUlEOwogICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlID09PSAiYWQtaG9jIikgewogICAgICAgICAgICAgICAgdGhpcy5hZGhvY2RhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uZGVhZExpbmVEYXRlKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJERCBNTU0gWVlZWSIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB0aGlzLmFkaG9jdGltZSA9IGluc3BlY3Rpb25JdGVtLmRlYWRMaW5lVGltZTsKICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhSZW1pbmRlcisrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5VHlwZSA9PT0gImRhaWx5IikgewogICAgICAgICAgICAgICAgdGhpcy5kYWlseURlYWRMaW5lVGltZSA9IGluc3BlY3Rpb25JdGVtLmRhaWx5RGVhZExpbmVUaW1lOwogICAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0uc3RhckRhdGUpLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgIkREIE1NTSBZWVlZIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gaW5zcGVjdGlvbkl0ZW0uc3RhcnRUaW1lOwogICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gbW9tZW50KGluc3BlY3Rpb25JdGVtLmVuZERhdGUpLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgIkREIE1NTSBZWVlZIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IGluc3BlY3Rpb25JdGVtLmVuZFRpbWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlID09PSAid2Vla2x5IikgewogICAgICAgICAgICAgICAgdGhpcy53ZWVrRGF5ID0gaW5zcGVjdGlvbkl0ZW0uZnJlcXVlbmN5RGF5czsKICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gbW9tZW50KGluc3BlY3Rpb25JdGVtLnN0YXJEYXRlKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJERCBNTU0gWVlZWSIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IGluc3BlY3Rpb25JdGVtLnN0YXJ0VGltZTsKICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9IG1vbWVudChpbnNwZWN0aW9uSXRlbS5lbmREYXRlKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJERCBNTU0gWVlZWSIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSBpbnNwZWN0aW9uSXRlbS5lbmRUaW1lOwogICAgICAgICAgICAgICAgdGhpcy5pbmRleFJlbWluZGVyKys7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlID09PSAibW9udGhseSIpIHsKICAgICAgICAgICAgICAgIHRoaXMubW9udGhseURhdGUgPSBtb21lbnQoaW5zcGVjdGlvbkl0ZW0ubW9udGhseURhdGUpLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgIkREIE1NTSBZWVlZIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gbW9tZW50KGluc3BlY3Rpb25JdGVtLnN0YXJEYXRlKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJERCBNTU0gWVlZWSIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IGluc3BlY3Rpb25JdGVtLnN0YXJ0VGltZTsKICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9IG1vbWVudChpbnNwZWN0aW9uSXRlbS5lbmREYXRlKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJERCBNTU0gWVlZWSIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSBpbnNwZWN0aW9uSXRlbS5lbmRUaW1lOwogICAgICAgICAgICAgICAgdGhpcy5pbmRleFJlbWluZGVyKys7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lUeXBlID09PSAiY3VzdG9tIikgewogICAgICAgICAgICAgICAgdGhpcy5jdXN0b21XZWVrID0gaW5zcGVjdGlvbkl0ZW0ucmVwZWF0RXZlcnlUeXBlOwogICAgICAgICAgICAgICAgdGhpcy5jdXN0b21WYWx1ZSA9IGluc3BlY3Rpb25JdGVtLnJlcGVhdEV2ZXJ5VGltZTsKICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tTW9udGhseSA9IGluc3BlY3Rpb25JdGVtLnJlcGVhdE1vbnRoRGF5OwogICAgICAgICAgICAgICAgaWYgKGluc3BlY3Rpb25JdGVtLmZyZXF1ZW5jeURheXMgIT0gIiIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21XZWVrRGF5ID0gSlNPTi5wYXJzZShpbnNwZWN0aW9uSXRlbS5mcmVxdWVuY3lEYXlzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uSXRlbS5lbmRUeXBlID09PSAibmV2ZXIiKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMubmV2ZXIgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnNwZWN0aW9uSXRlbS5lbmRUeXBlID09PSAib24iKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMub24gPSB0cnVlOwogICAgICAgICAgICAgICAgICB0aGlzLkN1c3RvbU1vbnRobHlEYXRlID0gbW9tZW50KAogICAgICAgICAgICAgICAgICAgIGluc3BlY3Rpb25JdGVtLmVuZERhdGUKICAgICAgICAgICAgICAgICAgKS5mb3JtYXQoIkREIE1NTSBZWVlZIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluc3BlY3Rpb25JdGVtLmVuZFR5cGUgPT09ICJhZnRlciIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5hZnRlciA9IHRydWU7CiAgICAgICAgICAgICAgICAgIHRoaXMub2NjdXJhbmNlc1ZhbHVlID0gaW5zcGVjdGlvbkl0ZW0ub2NjdXJyZW5jZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyVVVJRCAhPT0gIiIgJiYKICAgICAgICAgICAgICAgIGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyVVVJRCAhPT0gbnVsbAogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZSA9ICJ1c2VyIjsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmFzc2lnblVzZXJzLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICAgICAgICBsZXQgdXNlciA9IHRoaXMuYXNzaWduVXNlcnMuZmluZCgKICAgICAgICAgICAgICAgICAgICAodSkgPT4gdS51dWlkID09PSBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yVXNlclVVSUQKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgaWYgKHVzZXIgIT09IHVuZGVmaW5lZCAmJiB1c2VyICE9PSBudWxsICYmIHVzZXIgIT09IHt9KSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXIgPSB1c2VyLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZFVzZXJVVUlEID0gdXNlci51dWlkOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLnVzZXJJZCsrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yVXNlckdyb3VwVVVJRCAhPT0gIiIgJiYKICAgICAgICAgICAgICAgIGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JVc2VyR3JvdXBVVUlEICE9PSBudWxsCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VyR3JvdXBzLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICAgICAgICBsZXQgZ3JvdXAgPSB0aGlzLnVzZXJHcm91cHMuZmluZCgKICAgICAgICAgICAgICAgICAgICAoZykgPT4gZy51dWlkID09PSBpbnNwZWN0aW9uSXRlbS5jcmVhdGVkRm9yVXNlckdyb3VwVVVJRAogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBpZiAoZ3JvdXAgIT09IHVuZGVmaW5lZCAmJiBncm91cCAhPT0gbnVsbCAmJiBncm91cCAhPT0ge30pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlckdyb3VwID0gZ3JvdXAubmFtZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVkVXNlckdyb3VwVVVJRCA9IGdyb3VwLnV1aWQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbmVlID0gInVzZXIiOwogICAgICAgICAgICAgICAgdGhpcy51c2VyR3JvdXBJZCsrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBpbnNwZWN0aW9uSXRlbS5hc3NldFVVSUQgIT09ICIiICYmCiAgICAgICAgICAgICAgICBpbnNwZWN0aW9uSXRlbS5hc3NldFVVSUQgIT09IG51bGwKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwQXNzZXRPcHRpb25zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgbGV0IGFzc2V0ID0gdGhpcy5ncm91cEFzc2V0T3B0aW9ucy5maW5kKAogICAgICAgICAgICAgICAgICAgIChhKSA9PiBhLnV1aWQgPT09IGluc3BlY3Rpb25JdGVtLmFzc2V0VVVJRAogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBpZiAoYXNzZXQgIT09IHVuZGVmaW5lZCAmJiBhc3NldCAhPT0gbnVsbCAmJiBhc3NldCAhPT0ge30pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2V0TmFtZSA9IGFzc2V0Lm5hbWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NldE5hbWVVVUlEID0gYXNzZXQudXVpZDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5hc3NpZ25lZSA9ICJhc3NldCI7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5hc3NpZ25Vc2Vycy5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgICAgICAgbGV0IHVzZXIgPSB0aGlzLmFzc2lnblVzZXJzLmZpbmQoCiAgICAgICAgICAgICAgICAgICAgKHUpID0+IHUudXVpZCA9PT0gaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvclVzZXJVVUlECiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIGlmICh1c2VyICE9PSB1bmRlZmluZWQgJiYgdXNlciAhPT0gbnVsbCAmJiB1c2VyICE9PSB7fSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyID0gdXNlci5uYW1lOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRVc2VyVVVJRCA9IHVzZXIudXVpZDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5hc3NldElkKys7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JBc3NldEdyb3VwVVVJRCAhPT0gIiIgJiYKICAgICAgICAgICAgICAgIGluc3BlY3Rpb25JdGVtLmNyZWF0ZWRGb3JBc3NldEdyb3VwVVVJRCAhPT0gbnVsbAogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuYXNzZXRHcm91cE9wdGlvbnMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgIGxldCBhc3NldEdyb3VwID0gdGhpcy5hc3NldEdyb3VwT3B0aW9ucy5maW5kKAogICAgICAgICAgICAgICAgICAgIChhZykgPT4gYWcudXVpZCA9PT0gaW5zcGVjdGlvbkl0ZW0uY3JlYXRlZEZvckFzc2V0R3JvdXBVVUlECiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICBhc3NldEdyb3VwICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICAgICAgICBhc3NldEdyb3VwICE9PSBudWxsICYmCiAgICAgICAgICAgICAgICAgICAgYXNzZXRHcm91cCAhPT0ge30KICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NldEdyb3VwcyA9IGFzc2V0R3JvdXAuZ3JvdXBOYW1lOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRHcm91cHNVVUlEID0gYXNzZXRHcm91cC51dWlkOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWUgPSAiYXNzZXQiOwogICAgICAgICAgICAgICAgICB0aGlzLmFzc2V0R3JvdXBJZCsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBsZXQgcmVtaW5kID0gSlNPTi5wYXJzZShpbnNwZWN0aW9uSXRlbS5yZW1pbmRlcik7CiAgICAgICAgICAgICAgaWYgKHJlbWluZCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhpcy5yZW1pbmRlckFycmF5ID0gW107CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcmVtaW5kLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICAgICAgICAgIHJlbWluZGVyOiByZW1pbmRbaW5kZXhdLnJlbWluZGVyLAogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uVmFsdWU6IHJlbWluZFtpbmRleF0uZHVyYXRpb25WYWx1ZSwKICAgICAgICAgICAgICAgICAgICBkdXJhdGlvblR5cGU6IHJlbWluZFtpbmRleF0uZHVyYXRpb25UeXBlLAogICAgICAgICAgICAgICAgICAgIHJlbWluZGVyT3B0aW9uczogWwogICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAiRW1haWwiLCB2YWx1ZTogImVtYWlsIiB9LAogICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAiU01TIiwgdmFsdWU6ICJzbXMiIH0sCiAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJOb3RpZmljYXRpb24iLCB2YWx1ZTogIm5vdGlmaWNhdGlvbiIgfSwKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uVHlwZU9wdGlvbnM6IFsKICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogIk1pbnV0ZXMiLCB2YWx1ZTogIm1pbnV0ZXMiIH0sCiAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJIb3VycyIsIHZhbHVlOiAiaG91cnMiIH0sCiAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJEYXlzIiwgdmFsdWU6ICJkYXlzIiB9LAogICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAiV2Vla3MiLCB2YWx1ZTogIndlZWtzIiB9LAogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICB0aGlzLnJlbWluZGVyQXJyYXkucHVzaChvYmopOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLmluZGV4UmVtaW5kZXIrKzsKICAgICAgICAgICAgICB0aGlzLmR1cmF0aW9uVHlwZUlEKys7CiAgICAgICAgICAgICAgdGhpcy5yZW1pbmRlckluZGV4Kys7CiAgICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICk7CiAgICB9LAogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyA9IEpTT04ucGFyc2UoCiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlckRldGFpbHMiKQogICAgKTsKICAgIC8vIHRoaXMuZ2V0VXNlckdyb3Vwcyh0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkKTsKICAgIHRoaXMubmFtZSA9IHRoaXMudGVtcE9iai5uYW1lOwogICAgdGhpcy50ZW1wbGF0ZVVVSUQgPSB0aGlzLnRlbXBPYmoudXVpZDsKICAgIGlmICh0aGlzLnRlbXBPYmouZWRpdEZsYWcgPT09IHRydWUpIHsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgdGhpcy5nZXRFeGlzdGluZ0luc3BlY3Rpb25UZW1wbGF0ZSgKICAgICAgICB0aGlzLnRlbXBsYXRlVVVJRCwKICAgICAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkCiAgICAgICk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmdldEV4aXN0aW5nSW5zcGVjdGlvblRlbXBsYXRlKAogICAgICAgICJub25lIiwKICAgICAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkCiAgICAgICk7CiAgICB9CiAgfSwKCiAgdmFsaWRhdGlvbnM6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IHsgcmVxdWlyZWQgfSwKICAgICAgc2VsZWN0ZWRTY2hlZHVsZTogeyByZXF1aXJlZCB9LAogICAgICByZW1pbmRlckFycmF5OiB7CiAgICAgICAgJGVhY2g6IHsKICAgICAgICAgIHJlbWluZGVyOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBkdXJhdGlvblZhbHVlOiB7IHJlcXVpcmVkLCBtaW5WYWx1ZTogbWluVmFsdWUoMSkgfSwKICAgICAgICAgIGR1cmF0aW9uVHlwZTogeyByZXF1aXJlZCB9LAogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIC4uLnRoaXMuZ2V0QWRob2NWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmdldERhaWx5VmFsaWRhdGlvbiwKICAgICAgLi4udGhpcy5nZXRXZWVrbHlWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmdldE1vbnRobHlWYWxpZGF0aW9uLAogICAgICAuLi50aGlzLmN1c3RvbVZhbGlkYXRpb25zLAogICAgICAuLi50aGlzLmFzc2lnblZhbGlkYXRpb25zLAogICAgICAuLi50aGlzLmN1c3RvbU9uLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBnZXRBZGhvY1ZhbGlkYXRpb24oKSB7CiAgICAgIGxldCB2YWxpZGF0aW9ucyA9IHt9OwogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJhZC1ob2MiKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBhZGhvY2RhdGU6IHt9LAogICAgICAgICAgYWRob2N0aW1lOiB7fSwKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgYWRob2NkYXRlOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBhZGhvY3RpbWU6IHsgcmVxdWlyZWQgfSwKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0sCiAgICBnZXREYWlseVZhbGlkYXRpb24oKSB7CiAgICAgIGxldCB2YWxpZGF0aW9ucyA9IHt9OwogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJkYWlseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIGRhaWx5RGVhZExpbmVUaW1lOiB7fSwKICAgICAgICAgIHN0YXJ0RGF0ZToge30sCiAgICAgICAgICBzdGFydFRpbWU6IHt9LAogICAgICAgICAgZW5kRGF0ZToge30sCiAgICAgICAgICBlbmRUaW1lOiB7fSwKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgZGFpbHlEZWFkTGluZVRpbWU6IHsgcmVxdWlyZWQgfSwKICAgICAgICAgIHN0YXJ0RGF0ZTogeyByZXF1aXJlZCB9LAogICAgICAgICAgc3RhcnRUaW1lOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBlbmREYXRlOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBlbmRUaW1lOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAogICAgZ2V0V2Vla2x5VmFsaWRhdGlvbigpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2NoZWR1bGUgIT0gIndlZWtseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIHdlZWtEYXk6IHt9LAogICAgICAgICAgc3RhcnREYXRlOiB7fSwKICAgICAgICAgIHN0YXJ0VGltZToge30sCiAgICAgICAgICBlbmREYXRlOiB7fSwKICAgICAgICAgIGVuZFRpbWU6IHt9LAogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICB3ZWVrRGF5OiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBzdGFydERhdGU6IHsgcmVxdWlyZWQgfSwKICAgICAgICAgIHN0YXJ0VGltZTogeyByZXF1aXJlZCB9LAogICAgICAgICAgZW5kRGF0ZTogeyByZXF1aXJlZCB9LAogICAgICAgICAgZW5kVGltZTogeyByZXF1aXJlZCB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbGlkYXRpb25zOwogICAgfSwKICAgIGdldE1vbnRobHlWYWxpZGF0aW9uKCkgewogICAgICBsZXQgdmFsaWRhdGlvbnMgPSB7fTsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTY2hlZHVsZSAhPSAibW9udGhseSIpIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIG1vbnRobHlEYXRlOiB7fSwKICAgICAgICAgIHN0YXJ0RGF0ZToge30sCiAgICAgICAgICBzdGFydFRpbWU6IHt9LAogICAgICAgICAgZW5kRGF0ZToge30sCiAgICAgICAgICBlbmRUaW1lOiB7fSwKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgbW9udGhseURhdGU6IHsgcmVxdWlyZWQgfSwKICAgICAgICAgIHN0YXJ0RGF0ZTogeyByZXF1aXJlZCB9LAogICAgICAgICAgc3RhcnRUaW1lOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBlbmREYXRlOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBlbmRUaW1lOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAogICAgY3VzdG9tVmFsaWRhdGlvbnMoKSB7CiAgICAgIGxldCB2YWxpZGF0aW9ucyA9IHt9OwogICAgICBpZiAodGhpcy5zZWxlY3RlZFNjaGVkdWxlICE9ICJjdXN0b20iKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBjdXN0b21XZWVrOiB7fSwKICAgICAgICAgIGN1c3RvbVZhbHVlOiB7fSwKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgY3VzdG9tV2VlazogeyByZXF1aXJlZCB9LAogICAgICAgICAgY3VzdG9tVmFsdWU6IHsgcmVxdWlyZWQgfSwKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0sCiAgICBhc3NpZ25WYWxpZGF0aW9ucygpIHsKICAgICAgbGV0IHZhbGlkYXRpb25zID0ge307CiAgICAgIGlmICh0aGlzLmFzc2lnbmVlID09ICJ1c2VyIikgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgYXNzaWduZWU6IHt9LAogICAgICAgICAgYXNzZXRHcm91cHM6IHt9LAogICAgICAgICAgYXNzZXROYW1lOiB7fSwKICAgICAgICAgIGFzc2lnbmVkQXNzZXQ6IHsgcmVxdWlyZWQgfSwKICAgICAgICAgIGFzc2lnbmVkVXNlckdyb3VwOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZElmKCgpID0+IHsKICAgICAgICAgICAgICBpZiAodGhpcy5hc3NpZ25lZFVzZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwKICAgICAgICAgIH0sCiAgICAgICAgICBhc3NpZ25lZFVzZXI6IHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkSWYoKCkgPT4gewogICAgICAgICAgICAgIGlmICh0aGlzLmFzc2lnbmVkVXNlckdyb3VwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hc3NpZ25lZSA9PSAiYXNzZXQiKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBhc3NpZ25lZToge30sCiAgICAgICAgICBhc3NpZ25lZFVzZXI6IHt9LAogICAgICAgICAgYXNzaWduZWRVc2VyR3JvdXA6IHt9LAogICAgICAgICAgYXNzaWduZWRBc3NldDoge30sCiAgICAgICAgICBhc3NldEdyb3VwczogewogICAgICAgICAgICByZXF1aXJlZDogcmVxdWlyZWRJZigoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuYXNzZXROYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICB9LAogICAgICAgICAgYXNzZXROYW1lOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZElmKCgpID0+IHsKICAgICAgICAgICAgICBpZiAodGhpcy5hc3NldEdyb3VwcykgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgfSwKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRpb25zID0gewogICAgICAgICAgYXNzaWduZWU6IHsgcmVxdWlyZWQgfSwKICAgICAgICAgIGFzc2lnbmVkVXNlckdyb3VwOiB7fSwKICAgICAgICAgIGFzc2lnbmVkVXNlcjoge30sCiAgICAgICAgICBhc3NpZ25lZEFzc2V0OiB7fSwKICAgICAgICAgIGFzc2V0TmFtZToge30sCiAgICAgICAgICBhc3NldEdyb3Vwczoge30sCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gdmFsaWRhdGlvbnM7CiAgICB9LAogICAgY3VzdG9tT24oKSB7CiAgICAgIGxldCB2YWxpZGF0aW9ucyA9IHt9OwogICAgICBpZiAodGhpcy5vbiAhPSB0cnVlKSB7CiAgICAgICAgdmFsaWRhdGlvbnMgPSB7CiAgICAgICAgICBvbjoge30sCiAgICAgICAgICBDdXN0b21Nb250aGx5RGF0ZToge30sCiAgICAgICAgICBvY2N1cmFuY2VzVmFsdWU6IHsgbWluVmFsdWU6IG1pblZhbHVlKDEpIH0sCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWxpZGF0aW9ucyA9IHsKICAgICAgICAgIG9uOiB7IHJlcXVpcmVkIH0sCiAgICAgICAgICBDdXN0b21Nb250aGx5RGF0ZTogeyByZXF1aXJlZCB9LAogICAgICAgICAgb2NjdXJhbmNlc1ZhbHVlOiB7fSwKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiB2YWxpZGF0aW9uczsKICAgIH0sCiAgfSwKfTsK"},null]}