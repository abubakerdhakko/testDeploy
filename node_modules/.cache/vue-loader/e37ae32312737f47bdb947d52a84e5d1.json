{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/components/CreateIssue.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/components/CreateIssue.vue","mtime":1661968702408},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":1662622637719},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":1662622637759},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1662622639723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBJbnNwZWN0aW9uU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9JbnNwZWN0aW9uU2VydmljZSI7CmltcG9ydCBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0Fzc2V0TWFuYWdlbWVudFNlcnZpY2UiOwppbXBvcnQgeyByZXF1aXJlZCwgbWF4TGVuZ3RoIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsKaW1wb3J0IHsgRnVuY3Rpb25zIH0gZnJvbSAiQC9zaGFyZWQvRnVuY3Rpb25zIjsKCmltcG9ydCBsb2FkZXIgZnJvbSAiLi9Mb2FkZXIudnVlIjsKLy8gaW1wb3J0IGZ1bmMgZnJvbSAidnVlLWVkaXRvci1icmlkZ2UiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDcmVhdGVJc3N1ZSIsCiAgY29tcG9uZW50czogeyBsb2FkZXIgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNzdWVVVUlEUGFyYW06ICIiLAogICAgICBsb2FkZXJGbGFnOiBmYWxzZSwKICAgICAgaW5zdHJ1Y3Rpb25DaGVja2xpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogIiIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgdG9hc3RGbGFnOiAwLAogICAgICB0b2FzdE1lc3NhZ2U6ICIiLAogICAgICB0b2FzdFR5cGU6ICIiLAogICAgICBpc3N1ZU5hbWU6ICIiLAogICAgICBpc3N1ZVR5cGU6ICIiLAogICAgICBjYXRlZ29yeTogIiIsCiAgICAgIGFzc2V0TmFtZTogIiIsCiAgICAgIGFzc2V0VXVpZDogIiIsCiAgICAgIGZpbGVSZWNvcmQ6IG51bGwsCiAgICAgIGFzc2V0Q2F0ZWdvcnlPcHRpb25zOiBbXSwKICAgICAgYWxsQXNzZXREYXRhOiBbXSwKICAgICAgYXNzZXROYW1lczogW10sCiAgICAgIGlzc3VlQ2F0ZWdvcnk6ICIiLAogICAgICBpc3N1ZVByaW9yaXR5OiAiIiwKICAgICAgdXNlckNvbW1lbnRzOiAiIiwKICAgICAgcmVwYWlySW5zdHJ1Y3Rpb246ICIiLAogICAgICBjdXJyZW50VXNlckRldGFpbHM6ICIiLAogICAgICBwcmlvcml0eU9wdGlvbnM6IFsKICAgICAgICB7IGxhYmVsOiAiTG93IiwgdmFsdWU6ICJMb3ciIH0sCiAgICAgICAgeyBsYWJlbDogIk1lZGl1bSIsIHZhbHVlOiAiTWVkaXVtIiB9LAogICAgICAgIHsgbGFiZWw6ICJIaWdoIiwgdmFsdWU6ICJIaWdoIiB9LAogICAgICBdLAogICAgICBjYXRlZ29yeU9wdGlvbnM6IFtdLAogICAgICB0eXBlT3B0aW9uczogW10sCiAgICAgIGRyb3BEb3duQ29uZmlnczoge30sCiAgICAgIGNhdGVnb3J5SW5kZXg6IDAsCiAgICAgIGFzc2V0SW5kZXg6IDAsCiAgICAgIGNvbW1lbnRzS2V5OiAwLAogICAgICB2YWx1ZTogIiIsCiAgICAgIGZsYWc6IGZhbHNlLAogICAgICBpbWFnZVZvaWNlczogW10sCiAgICAgIGlzc3VlQ2F0ZWdvcnlJbmRleDogIiIsCiAgICAgIGFzc2V0OiB7fSwKICAgICAgY3JlYXRlSXNzdWVJbWc6IFtdLAogICAgICBjYXRlZ29yeUxpc3Q6ICIiLAogICAgICBjYXRlT3B0aW9uczogW10sCiAgICAgIGltZ0F0dGFjaG1lbnRTaG93OiAiIiwKICAgICAgc2VjdGlvbkxvYWRlcjpmYWxzZSwKICAgICAgY2F0ZU5hbWU6IiIKCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Rm9ybUVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pIHsKICAgICAgaWYgKGZpZWxkVmFsaWRhdGlvbi4kZXJyb3IpIHsKICAgICAgICByZXR1cm4gRnVuY3Rpb25zLmdldEZvcm1GaWVsZEVycm9yTWVzc2FnZShmaWVsZFZhbGlkYXRpb24pOwogICAgICB9CiAgICB9LAoKICAgIGNsZWFyU2VsZWN0ZWRQcmlvcml0eSgpIHsKICAgICAgdGhpcy5pc3N1ZVByaW9yaXR5ID0gIiI7CiAgICAgIHRoaXMuaXNzdWVDYXRlZ29yeUluZGV4Kys7CiAgICB9LAoKICAgIGNsZWFyU2VsZWN0ZWRDYXRlZ29yeSgpIHsKICAgICAgdGhpcy5pc3N1ZUNhdGVnb3J5ID0gIiI7CiAgICAgIHRoaXMudHlwZU9wdGlvbnMgPSBbXTsKICAgICAgdGhpcy5pc3N1ZVR5cGUgPSAiIjsKICAgICAgdGhpcy5pc3N1ZUNhdGVnb3J5SW5kZXgrKzsKICAgIH0sCgogICAgY2xlYXJTZWxlY3RlZENhdGVnb3J0VHlwZSgpIHsKICAgICAgdGhpcy5pc3N1ZVR5cGUgPSAiIjsKICAgICAgdGhpcy5pc3N1ZUNhdGVnb3J5SW5kZXgrKzsKICAgIH0sCgogICAgYWRkSW5zdHJ1Y3Rpb24oKSB7CiAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25DaGVja2xpc3QucHVzaCh7CiAgICAgICAgdmFsdWU6ICIiLAogICAgICB9KTsKICAgIH0sCgogICAgc3ViSW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb25JbmRleCkgewogICAgICB0aGlzLmluc3RydWN0aW9uQ2hlY2tsaXN0LnNwbGljZShpbnN0cnVjdGlvbkluZGV4LCAxKTsKICAgIH0sCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2xvc2UiKTsKICAgIH0sCiAgICBzYXZlKCkgewogICAgICB0aGlzLiRlbWl0KCJzYXZlIik7CiAgICB9LAogICAgdXBkYXRlU0RUKCkgewogICAgICB0aGlzLiRlbWl0KCJ1cGRhdGVTRFQiKTsKICAgIH0sCiAgICByZWNlaXZlRG9jdW1lbnQoZmlsZSkgewogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLnVwbG9hZEZpbGVUb3MzKHRoaXMuZmlsZVJlY29yZCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEucmVzcG9uc2VJZGVudGlmaWVyID09PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgbGV0IGltYWdlVm9pY2UgPSB7CiAgICAgICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZVVVSUQoKSwKICAgICAgICAgICAgICBjb250ZW50VXJsOiByZXMuZGF0YS5maWxlVXJsLAogICAgICAgICAgICAgIGltYWdlRmxhZzogdHJ1ZSwgLy8gdGhpcyBuZWVkIHRvIGJlIGNoZWNrZWQKICAgICAgICAgICAgICB2b2ljZUZsYWc6IGZhbHNlLCAvLyB0aGlzIG5lZWQgdG8gYmUgY2hlY2tlZAogICAgICAgICAgICAgIG1lc3NhZ2VGbGFnOiBmYWxzZSwKICAgICAgICAgICAgICBpc3N1ZVVVSUQ6IHRoaXMuZ2VuZXJhdGVVVUlEKCksCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIC8vIHRoaXMuaW1hZ2VWb2ljZXMgPSBbXTsKICAgICAgICAgICAgdGhpcy5pbWFnZVZvaWNlcy5wdXNoKGltYWdlVm9pY2UpOwoKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkltYWdlIGFkZGVkIHN1Y2Nlc3NmdWxseSIsICJzdWNjZXNzIik7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdChgJHtlfS4gUGxlYXNlIHVwbG9hZCBpbWFnZSBhZ2FpbmAsICJlcnJvciIpOwogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgY3JlYXRlSXNzdWUoKSB7CiAgICAgIHRoaXMuJHYuJHRvdWNoKCk7CiAgICAgIGlmICh0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIlBsZWFzZSBmaWxsIGFyZSB0aGUgcmVxdWlyZWQgZmllbGRzIiwgIndhcm5pbmciKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxldCBpc3N1ZVJlcXVlc3QgPSB7CiAgICAgICAgaXNzdWVSZXBvcnRpbmc6IHsKICAgICAgICAgIGlzc3VlTmFtZTogdGhpcy5pc3N1ZU5hbWUsCiAgICAgICAgICBzdGF0dXM6ICJyZXBvcnRlZCIsCiAgICAgICAgICBpbnN0cnVjdGlvbkNoZWNrbGlzdDogSlNPTi5zdHJpbmdpZnkodGhpcy5pbnN0cnVjdGlvbkNoZWNrbGlzdCksCiAgICAgICAgICBhc3NldFVVSUQ6IHRoaXMuYXNzZXRVVUlELAogICAgICAgICAgc3VibWl0dGVkQnlVc2VyVVVJRDogdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS51c2VyaWQsCiAgICAgICAgICByZXBvcnRlZEJ5OgogICAgICAgICAgICB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLmZpcnN0TmFtZSArCiAgICAgICAgICAgICIgIiArCiAgICAgICAgICAgIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUubGFzdE5hbWUsCiAgICAgICAgICBpc3N1ZVR5cGU6IHRoaXMuaXNzdWVUeXBlLAogICAgICAgICAgaXNzdWVDYXRlZ29yeTogdGhpcy5pc3N1ZUNhdGVnb3J5LAogICAgICAgICAgcHJpb3JpdHk6IHRoaXMuaXNzdWVQcmlvcml0eSwKICAgICAgICAgIHRlbmFudFVVSUQ6IHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQsCiAgICAgICAgICBpc3N1ZUZsYWc6IHRydWUsCiAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5yZXBhaXJJbnN0cnVjdGlvbiwKICAgICAgICAgIGlzc3VlRGVzY3JpcHRpb246IHRoaXMudXNlckNvbW1lbnRzLAogICAgICAgIH0sCiAgICAgIH07CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkSW5zcGVjdGlvbkl0bSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGV0IGluc3BlY3Rpb25JdGVtT2JqID0gewogICAgICAgICAgaW5zcGVjdGlvblVVSUQ6IHRoaXMuc2VsZWN0ZWRJbnNwZWN0aW9uSXRtLmluc3BlY3Rpb25VVUlELAogICAgICAgICAgaW5zcGVjdGlvblJlcG9ydHNGaWVsZHM6IFtdLAogICAgICAgIH07CiAgICAgICAgZm9yIChsZXQgc2VsZWN0ZWRfaW5zcGVjdGlvbl9pdGVtIG9mIHRoaXMuc2VsZWN0ZWRJbnNwZWN0aW9uSXRtKSB7CiAgICAgICAgICBjb25zdCBlbGVtZW50ID0KICAgICAgICAgICAgc2VsZWN0ZWRfaW5zcGVjdGlvbl9pdGVtLmluc3BlY3Rpb25SZXBvcnRGaWVsZHNbMF0udXVpZDsKCiAgICAgICAgICBpbnNwZWN0aW9uSXRlbU9iai5pbnNwZWN0aW9uUmVwb3J0c0ZpZWxkcy5wdXNoKGVsZW1lbnQpOwogICAgICAgIH0KCiAgICAgICAgaXNzdWVSZXF1ZXN0Lmlzc3VlUmVwb3J0aW5nLmlucGVjdGlvbkl0ZW1zVVVJRCA9CiAgICAgICAgICBKU09OLnN0cmluZ2lmeShpbnNwZWN0aW9uSXRlbU9iaik7CiAgICAgICAgaXNzdWVSZXF1ZXN0Lmlzc3VlUmVwb3J0aW5nLmFzc2V0VVVJRCA9IHRoaXMuaW5zcGVjdGlvbkFzc2V0VVVJRDsKICAgICAgICBpc3N1ZVJlcXVlc3QuaXNzdWVSZXBvcnRpbmcuYXNzZXROYW1lID0gdGhpcy5hc3NldC5uYW1lOwogICAgICAgIGlzc3VlUmVxdWVzdC5pc3N1ZVJlcG9ydGluZy5hc3NldENhdGVnb3J5ID0gdGhpcy5hc3NldC5jYXRlZ29yeTsKICAgICAgICBpc3N1ZVJlcXVlc3QuaXNzdWVSZXBvcnRpbmcuYXNzZXROdW1iZXIgPSB0aGlzLmFzc2V0LmFzc2V0TnVtYmVyOwogICAgICB9IGVsc2UgewogICAgICAgIGlzc3VlUmVxdWVzdC5pc3N1ZVJlcG9ydGluZy5hc3NldFVVSUQgPSB0aGlzLmFzc2V0VVVJRDsKICAgICAgICBpZiAodGhpcy5hc3NldFVVSUQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmFzc2V0VVVJRCAhPT0gbnVsbCkgewogICAgICAgICAgbGV0IGFzc2V0RGF0YSA9IHRoaXMuZ2V0QXNzZXREYXRhKHRoaXMuYXNzZXRVVUlEKTsKICAgICAgICAgIGlzc3VlUmVxdWVzdC5pc3N1ZVJlcG9ydGluZy5hc3NldE5hbWUgPSBhc3NldERhdGEubGFiZWw7CiAgICAgICAgICBpc3N1ZVJlcXVlc3QuaXNzdWVSZXBvcnRpbmcuYXNzZXRDYXRlZ29yeSA9IGFzc2V0RGF0YS50eXBlOwogICAgICAgICAgaXNzdWVSZXF1ZXN0Lmlzc3VlUmVwb3J0aW5nLmFzc2V0TnVtYmVyID0gYXNzZXREYXRhLmFzc2V0TnVtYmVyOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoCiAgICAgICAgdGhpcy4kcm91dGUubmFtZSA9PT0gInNlcnZpY2UtcmVxdWVzdHMiIHx8CiAgICAgICAgdGhpcy4kcm91dGUubmFtZSA9PT0gInNlcnZpY2UtcmVxdWVzdHMtZGV0YWlscyIgfHwKICAgICAgICB0aGlzLiRyb3V0ZS5uYW1lID09PSAic2VydmljZS1yZXF1ZXN0cy1lZGl0IgogICAgICApIHsKICAgICAgICBpc3N1ZVJlcXVlc3QuaXNzdWVSZXBvcnRpbmcudXVpZCA9IHRoaXMuc2VydmljZVJlcXVlc3REZXRhaWwudXVpZDsKICAgICAgICBpc3N1ZVJlcXVlc3QuaXNzdWVSZXBvcnRpbmcuc2VydmljZVJlcXVlc3RGbGFnID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpc3N1ZVJlcXVlc3QuaXNzdWVSZXBvcnRpbmcuc2VydmljZVJlcXVlc3RGbGFnID0gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZmlsZVJlY29yZCAhPT0gbnVsbCB8fCB0aGlzLmltYWdlVm9pY2VzICE9ICIiKSB7CiAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgICBpZiAodGhpcy5JbnNwZWN0aW9uSXRlbUltYWdlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHZhciBwcm9wX0luc3BlY3Rpb25JdGVtSW1hZ2UgPSB0aGlzLkluc3BlY3Rpb25JdGVtSW1hZ2U7CiAgICAgICAgICB2YXIgY2xlYW5BcnJheSA9IHByb3BfSW5zcGVjdGlvbkl0ZW1JbWFnZS5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgZGVsZXRlIGl0ZW0uY29udGVudCwgZGVsZXRlIGl0ZW0uZmllbGRVVUlELCBkZWxldGUgaXRlbS5tZXNzYWdlOwogICAgICAgICAgICAoaXRlbS51dWlkID0gdGhpcy5nZW5lcmF0ZVVVSUQoKSksCiAgICAgICAgICAgICAgaXRlbS5jb250ZW50VXJsLAogICAgICAgICAgICAgIChpdGVtLmltYWdlRmxhZyA9IHRydWUpLAogICAgICAgICAgICAgIChpdGVtLm1lc3NhZ2VGbGFnID0gdHJ1ZSksCiAgICAgICAgICAgICAgKGl0ZW0uaXNzdWVVVUlEID0gdGhpcy5nZW5lcmF0ZVVVSUQoKSk7CiAgICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgICAgfSk7CiAgICAgICAgICBwcm9wX0luc3BlY3Rpb25JdGVtSW1hZ2UgPSBjbGVhbkFycmF5OwogICAgICAgICAgdGhpcy5pbWFnZVZvaWNlcy5wdXNoKC4uLnByb3BfSW5zcGVjdGlvbkl0ZW1JbWFnZSk7CiAgICAgICAgfQogICAgICAgIGlzc3VlUmVxdWVzdC5pbWFnZVZvaWNlcyA9IHRoaXMuaW1hZ2VWb2ljZXM7CiAgICAgICAgSW5zcGVjdGlvblNlcnZpY2UuYWRkSXNzdWUoaXNzdWVSZXF1ZXN0KQogICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5zYXZlKCk7CiAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICAgICAgICAgIHRoaXMuJGVtaXQoInRvYXN0RmxhZyIpOwogICAgICAgICAgICAgIC8vIHRoaXMuc2hvd1RvYXN0KCJJc3N1ZSBDcmVhdGVkIFN1Y2Nlc3NmdWxseSIsICJzdWNjZXNzIik7CiAgICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZXIubmFtZSA9PT0gImluc3BlY3Rpb24tZGV0YWlscyIpIHsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2luc3BlY3Rpb24tZGV0YWlscy86aW5zcGVjdGlvblVVSUQiKTsKICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuaGlzdG9yeS5jdXJyZW50Lm5hbWUgPT09ICJzZXJ2aWNlLXJlcXVlc3RzIgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNEVCgpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuJHJvdXRlci5oaXN0b3J5LmN1cnJlbnQubmFtZSA9PT0gInZpZXctYXNzZXQiKSB7CiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgiZ2V0SXNzdWVzIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoZXJyLnJlc3BvbnNlLmRhdGEuZGVzY3JpcHRpb24sICJlcnJvciIpOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIlBsZWFzZSBzZWxlY3QgdGhlIGltYWdlIiwgImVycm9yIik7CiAgICAgIH0KICAgIH0sCgogICAgZ2V0QXNzZXREYXRhKHV1aWQpIHsKICAgICAgbGV0IGluZGV4ID0gdW5kZWZpbmVkOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYWxsQXNzZXREYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuYWxsQXNzZXREYXRhW2ldLnV1aWQgPT09IHV1aWQpIHsKICAgICAgICAgIGluZGV4ID0gaTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gaW5kZXggIT09IHVuZGVmaW5lZCA/IHRoaXMuYWxsQXNzZXREYXRhW2luZGV4XSA6IGluZGV4OwogICAgfSwKCiAgICBnZW5lcmF0ZVVVSUQoKSB7CiAgICAgIGxldCBkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgIGlmIChEYXRlLm5vdygpKSB7CiAgICAgICAgZCA9IERhdGUubm93KCk7CiAgICAgIH0KCiAgICAgIGxldCB1dWlkID0gInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCIucmVwbGFjZSgKICAgICAgICAvW3h5XS9nLAogICAgICAgIChjKSA9PiB7CiAgICAgICAgICBsZXQgciA9IChkICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDsKICAgICAgICAgIGQgPSBNYXRoLmZsb29yKGQgLyAxNik7CiAgICAgICAgICByZXR1cm4gKGMgPT09ICJ4IiA/IHIgOiAociAmIDB4MykgfCAweDgpLnRvU3RyaW5nKDE2KTsKICAgICAgICB9CiAgICAgICk7CiAgICAgIHJldHVybiB1dWlkOwogICAgfSwKCiAgICBzZWxlY3RDYXRlKHZhbHVlKSB7CgogICAgICB0aGlzLnR5cGVPcHRpb25zID0gW107CiAgICAgIHRoaXMuaXNzdWVUeXBlID0gIiI7CiAgICAgIGZvciAobGV0IHggaW4gdGhpcy5jYXRlT3B0aW9ucykgewogICAgICAgIGlmICgKICAgICAgICAgIHZhbHVlLnZhbHVlID09PSB0aGlzLmNhdGVPcHRpb25zW3hdLmxhYmVsICYmCiAgICAgICAgICB0aGlzLmNhdGVPcHRpb25zW3hdLm9wdGlvbnMgIT09ICIiCiAgICAgICAgKSB7CiAgICAgICAgICB2YXIgc3BsaXRWYWxzID0gdGhpcy5jYXRlT3B0aW9uc1t4XS5vcHRpb25zLnNwbGl0KCIsIik7CiAgICAgICAgICBmb3IgKGxldCB5IGluIHNwbGl0VmFscykgewogICAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICAgIGxhYmVsOiBzcGxpdFZhbHNbeV0sCiAgICAgICAgICAgICAgdmFsdWU6IHNwbGl0VmFsc1t5XSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy50eXBlT3B0aW9ucy5wdXNoKG9iaik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIG9uU2VsZWN0ZWRBc3NldENhdGVnb3J5KHZhbHVlKSB7CgogICAgICB0aGlzLmFzc2V0TmFtZXMgPSBbXTsKICAgICAgZm9yIChsZXQgYXNzZXRfZGF0YSBvZiB0aGlzLmFsbEFzc2V0RGF0YSkgewogICAgICAgIGlmIChhc3NldF9kYXRhLmNhdGVnb3J5VVVJRCA9PT0gdmFsdWUuc2VsZWN0ZWRPYmplY3QuY2F0ZWdvcnlVVUlEKSB7CiAgICAgICAgICB0aGlzLmFzc2V0TmFtZXMucHVzaChhc3NldF9kYXRhKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5hc3NldEluZGV4Kys7CgogICAgICAvLyBmb3IgaXNzdWUgY2F0ZWdvcnkKCiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmNhdGVnb3J5TGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBpZiAodGhpcy5jYXRlZ29yeUxpc3RbaW5kZXhdLm5hbWUgPT09IHZhbHVlLnZhbHVlKSB7CiAgICAgICAgICBmb3IgKAogICAgICAgICAgICBsZXQgaW5kZXgxID0gMDsKICAgICAgICAgICAgaW5kZXgxIDwgdGhpcy5jYXRlZ29yeUxpc3RbaW5kZXhdLmlzc3Vlc0NhdGVnb3J5LmZpZWxkcy5sZW5ndGg7CiAgICAgICAgICAgIGluZGV4MSsrCiAgICAgICAgICApIHsKICAgICAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgICAgICBsYWJlbDoKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0W2luZGV4XS5pc3N1ZXNDYXRlZ29yeS5maWVsZHNbaW5kZXgxXS5sYWJlbCwKICAgICAgICAgICAgICB2YWx1ZToKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0W2luZGV4XS5pc3N1ZXNDYXRlZ29yeS5maWVsZHNbaW5kZXgxXS5sYWJlbCwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jYXRlT3B0aW9ucy5wdXNoKAogICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0W2luZGV4XS5pc3N1ZXNDYXRlZ29yeS5maWVsZHNbaW5kZXgxXQogICAgICAgICAgICApOwogICAgICAgICAgICB0aGlzLmNhdGVnb3J5T3B0aW9ucy5wdXNoKG9iaik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2xlYXJTZWxlY3RlZEFzc2V0Q2F0ZWdvcnkoKSB7CiAgICAgIHRoaXMuYXNzZXROYW1lcyA9IFtdOwogICAgICB0aGlzLmNhdGVnb3J5ID0gIiI7CiAgICAgIHRoaXMuYXNzZXROYW1lID0gIiI7CiAgICAgIHRoaXMuYXNzZXRJbmRleCsrOwogICAgfSwKCiAgICBvblNlbGVjdGVkQXNzZXROYW1lKHZhbHVlKSB7CiAgICAgIHRoaXMuYXNzZXRVVUlEID0gdmFsdWUuc2VsZWN0ZWRPYmplY3QudXVpZDsKICAgIH0sCiAgICBjbGVhclNlbGVjdGVkQXNzZXROYW1lKCkgewogICAgICB0aGlzLmFzc2V0VVVJRCA9ICIiOwogICAgICB0aGlzLmFzc2V0TmFtZSA9ICIiOwogICAgICB0aGlzLmFzc2V0SW5kZXgrKzsKICAgIH0sCiAgICBnZXRBbGxDYXRlZ29yaWVzKGN1cnJlbnRVc2VyRGV0YWlscykgewogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldEFsbEFzc2V0Q2F0ZWdvcmllcygKICAgICAgICBjdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZAogICAgICApCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3QgPSByZXMuZGF0YS5jYXRlZ29yaWVzOwogICAgICAgICAgZm9yIChsZXQgY2F0ZWdvcnkgb2YgcmVzLmRhdGEuY2F0ZWdvcmllcykgewogICAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICAgIGlkOiBjYXRlZ29yeS5pZCwKICAgICAgICAgICAgICBjYXRlZ29yeVVVSUQ6IGNhdGVnb3J5LnV1aWQsCiAgICAgICAgICAgICAgbGFiZWw6IGNhdGVnb3J5Lm5hbWUsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuYXNzZXRDYXRlZ29yeU9wdGlvbnMucHVzaChvYmopOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5nZXRBbGxBc3NldChjdXJyZW50VXNlckRldGFpbHMpOwogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CgogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT0gImFzc2V0cyIgfHwgdGhpcy4kcm91dGUubmFtZSA9PSAndmlldy1hc3NldCcgfHx0aGlzLiRyb3V0ZS5uYW1lID09ICdpbnNwZWN0aW9uLWRldGFpbHMnKXsKICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT0gImFzc2V0cyIgKXsKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZU5hbWUgPSB0aGlzLmFzc2V0T2JqLmNhdGVnb3J5TmFtZQogICAgICAgICAgICB9IAogICAgICAgICAgICBlbHNlIGlmKHRoaXMuJHJvdXRlLm5hbWUgPT0gJ3ZpZXctYXNzZXQnKXsKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZU5hbWUgPSB0aGlzLmFzc2V0T2JqLmNhdGVnb3J5Lm5hbWUKICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgIHRoaXMuY2F0ZU5hbWUgPSB0aGlzLmNhdGVnb3J5CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmNhdGVnb3J5TGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuY2F0ZWdvcnlMaXN0W2luZGV4XS5uYW1lID09PSB0aGlzLmNhdGVOYW1lICkgewogICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICBsZXQgaW5kZXgxID0gMDsKICAgICAgICAgICAgICAgIGluZGV4MSA8IHRoaXMuY2F0ZWdvcnlMaXN0W2luZGV4XS5pc3N1ZXNDYXRlZ29yeS5maWVsZHMubGVuZ3RoOwogICAgICAgICAgICAgICAgaW5kZXgxKysKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICAgICAgICAgIGxhYmVsOgogICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0W2luZGV4XS5pc3N1ZXNDYXRlZ29yeS5maWVsZHNbaW5kZXgxXS5sYWJlbCwKICAgICAgICAgICAgICAgICAgdmFsdWU6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3RbaW5kZXhdLmlzc3Vlc0NhdGVnb3J5LmZpZWxkc1tpbmRleDFdLmxhYmVsLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZU9wdGlvbnMucHVzaCgKICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3RbaW5kZXhdLmlzc3Vlc0NhdGVnb3J5LmZpZWxkc1tpbmRleDFdCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeU9wdGlvbnMucHVzaChvYmopOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCgoKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldEFsbEFzc2V0KGN1cnJlbnRVc2VyRGV0YWlscykgewogICAgICBsZXQgY2F0ZWdvcnlVVUlEID0gIiI7CiAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuZ2V0QWxsQXNzZXRzKAogICAgICAgIGN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkCiAgICAgICkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZ2V0QWxsQXNzZXRzJyxyZXMpCiAgICAgICAgICBmb3IgKGxldCBhc3NldCBvZiByZXMuZGF0YS5hc3NldHMpIHsKICAgICAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgICAgICB1dWlkOiBhc3NldC51dWlkLAogICAgICAgICAgICAgIGNhdGVnb3J5VVVJRDogYXNzZXQuY2F0ZWdvcnlVVUlELAogICAgICAgICAgICAgIGxhYmVsOiBhc3NldC5uYW1lLAogICAgICAgICAgICAgIHR5cGU6IGFzc2V0LnR5cGUsCiAgICAgICAgICAgICAgYXNzZXROdW1iZXI6IGFzc2V0LmFzc2V0TnVtYmVyLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmFsbEFzc2V0RGF0YS5wdXNoKG9iaik7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5jcmVhdGVXb3JrT3JkZXIgPT09IHRydWUpIHsKICAgICAgICAgICAgZm9yIChsZXQgYXNzZXRfZGF0YSBvZiB0aGlzLmFsbEFzc2V0RGF0YSkgewogICAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuYXNzZXRVVUlEID09PSBhc3NldF9kYXRhLnV1aWQpIHsKICAgICAgICAgICAgICAgIGNhdGVnb3J5VVVJRCA9IGFzc2V0X2RhdGEuY2F0ZWdvcnlVVUlEOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChsZXQgYXNzZXRfY2F0ZWdvcnkgb2YgdGhpcy5hc3NldENhdGVnb3J5T3B0aW9ucykgewogICAgICAgICAgICAgIGlmIChhc3NldF9jYXRlZ29yeS5jYXRlZ29yeVVVSUQgPT09IGNhdGVnb3J5VVVJRCkgewogICAgICAgICAgICAgICAgdGhpcy53b3JrT3JkZXJTdW1hcnkuY2F0ZWdvcnkgPSBhc3NldF9jYXRlZ29yeS5sYWJlbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvciAobGV0IGFzc2V0RGF0YSBvZiB0aGlzLmFsbEFzc2V0RGF0YSkgewogICAgICAgICAgICAgIGlmIChhc3NldERhdGEuY2F0ZWdvcnlVVUlEID09PSBjYXRlZ29yeVVVSUQpIHsKICAgICAgICAgICAgICAgIHRoaXMud29ya09yZGVyU3VtYXJ5Lm5hbWUgPSBhc3NldERhdGEubGFiZWw7CiAgICAgICAgICAgICAgICB0aGlzLmFzc2V0TmFtZXMucHVzaChhc3NldERhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmxvYWRlckZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUluZGV4Kys7CiAgICAgICAgICAgIHRoaXMuYXNzZXRJbmRleCsrOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0QXNzZXQodXVpZCkgewogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldEFzc2V0TmFtZUFuZE51bWJlckFuZENhdGVnb3J5QnlBc3NldFVVSUQodXVpZCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgIGxldCBhc3NldCA9IHJlc3BvbnNlLmRhdGEuYXNzZXRJbmZvRFRPOwogICAgICAgICAgICB0aGlzLmFzc2V0ID0gYXNzZXQ7CiAgICAgICAgICAgIHRoaXMuYXNzZXROYW1lID0gYXNzZXQubmFtZTsKICAgICAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGFzc2V0LmNhdGVnb3J5OwogICAgICAgICAgICB0aGlzLmNhdGVnb3J5SW5kZXgrKzsKICAgICAgICAgICAgdGhpcy5hc3NldEluZGV4Kys7CiAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBkZWJ1Z2dlcgogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkZhaWxlZCB0byBsb2FkIGFzc2V0IGluZm9ybWF0aW9uIS4iLCAiZXJyb3IiKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgc2V0RGF0YSgpIHsKICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT0gImFzc2V0cyIpIHsKCiAgICAgICAgdGhpcy5hc3NldE5hbWUgPSB0aGlzLmFzc2V0T2JqLm5hbWU7CiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IHRoaXMuYXNzZXRPYmouY2F0ZWdvcnlOYW1lOwogICAgICAgIHRoaXMuZmxhZyA9IHRoaXMuYXNzZXRPYmouYXNzZXRGbGFnOwogICAgICAgIHRoaXMuYXNzZXRVVUlEID0gdGhpcy5hc3NldE9iai51dWlkOwoKCgoKCgoKCiAgICAgIH0KICAgICAgaWYgKAogICAgICAgIHRoaXMuJHJvdXRlLm5hbWUgPT0gImluc3BlY3Rpb24tZGV0YWlscyIgfHwKICAgICAgICB0aGlzLiRyb3V0ZS5uYW1lID09PSAid29yay1vcmRlci1kZXRhaWxzIiB8fAogICAgICAgIHRoaXMuJHJvdXRlLm5hbWUgPT09ICJlZGl0LXdvcmstb3JkZXItZGV0YWlscyIKICAgICAgKSB7CiAgICAgICAgdGhpcy5nZXRBc3NldCh0aGlzLmluc3BlY3Rpb25Bc3NldFVVSUQpOwogICAgICB9CiAgICAgIGlmICgKICAgICAgICB0aGlzLiRyb3V0ZS5uYW1lID09ICJzZXJ2aWNlLXJlcXVlc3RzLWRldGFpbHMiIHx8CiAgICAgICAgdGhpcy4kcm91dGUubmFtZSA9PT0gInNlcnZpY2UtcmVxdWVzdHMtZWRpdCIKICAgICAgKSB7CiAgICAgICAgdGhpcy5hc3NldE5hbWUgPSB0aGlzLnNlcnZpY2VSZXF1ZXN0RGV0YWlsLmFzc2V0TmFtZTsKICAgICAgICB0aGlzLmNhdGVnb3J5ID0gdGhpcy5zZXJ2aWNlUmVxdWVzdERldGFpbC5hc3NldENhdGVnb3J5OwogICAgICAgIHRoaXMuYXNzZXRJbmRleCsrOwogICAgICAgIHRoaXMuY2F0ZWdvcnlJbmRleCsrOwogICAgICAgIHRoaXMuZmxhZyA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT0gInNlcnZpY2UtcmVxdWVzdHMiKSB7CiAgICAgICAgdGhpcy5hc3NldE5hbWUgPSB0aGlzLnNlcnZpY2VSZXF1ZXN0RGV0YWlsLmFzc2V0TmFtZTsKICAgICAgICB0aGlzLmNhdGVnb3J5ID0gdGhpcy5zZXJ2aWNlUmVxdWVzdERldGFpbC5hc3NldENhdGVnb3J5OwogICAgICAgIHRoaXMuaXNzdWVDYXRlZ29yeSA9IHRoaXMuc2VydmljZVJlcXVlc3REZXRhaWwuaXNzdWVOYW1lOwogICAgICAgIHRoaXMuaXNzdWVUeXBlID0gdGhpcy5zZXJ2aWNlUmVxdWVzdERldGFpbC5pc3N1ZVR5cGU7CgogICAgICAgIHRoaXMudXNlckNvbW1lbnRzID0gdGhpcy5zZXJ2aWNlUmVxdWVzdERldGFpbC5pc3N1ZURlc2NyaXB0aW9uOwogICAgICAgIHRoaXMuYXNzZXRVVUlEID0gdGhpcy5zZXJ2aWNlUmVxdWVzdERldGFpbC5hc3NldFVVSUQ7CiAgICAgICAgdGhpcy5hc3NldEluZGV4Kys7CiAgICAgICAgdGhpcy5jYXRlZ29yeUluZGV4Kys7CiAgICAgICAgdGhpcy5jb21tZW50c0tleSsrOwogICAgICAgIHRoaXMuZmxhZyA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT0gInZpZXctYXNzZXQiKSB7CiAgICAgICAgdGhpcy5hc3NldE5hbWUgPSB0aGlzLmFzc2V0T2JqLm5hbWU7CiAgICAgICAgdGhpcy5hc3NldFVVSUQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuYXNzZXRJRDsKICAgICAgICB0aGlzLmNhdGVnb3J5ID0gdGhpcy5hc3NldE9iai5jYXRlZ29yeS5uYW1lOwogICAgICAgIHRoaXMuYXNzZXRJbmRleCsrOwogICAgICAgIHRoaXMuY2F0ZWdvcnlJbmRleCsrOwogICAgICAgIHRoaXMuZmxhZyA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBnZXRTZXJ2aWNlUmVxdWVzdEJ5VVVJRCgpIHsKICAgICAgdGhpcy5zZWN0aW9uTG9hZGVyID0gdHJ1ZQogICAgICBJbnNwZWN0aW9uU2VydmljZS5nZXRTZXJ2aWNlUmVxdWVzdEJ5VVVJRCh0aGlzLnNlcnZpY2VSZXF1ZXN0RGV0YWlsLnV1aWQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5pbWdBdHRhY2htZW50U2hvdyA9IHJlc3BvbnNlLmRhdGEuYXR0YWNobWVudHM7CiAgICAgICAgICAgIGxldCBpbWdBdHRhY2htZW50cyA9IHJlc3BvbnNlLmRhdGEuYXR0YWNobWVudHM7CiAgICAgICAgICAgIGZvciAobGV0IHggaW4gaW1nQXR0YWNobWVudHMpIHsKICAgICAgICAgICAgICBsZXQgaW1hZ2VWb2ljZSA9IHsKICAgICAgICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVVVUlEKCksCiAgICAgICAgICAgICAgICBjb250ZW50VXJsOiBpbWdBdHRhY2htZW50c1t4XS5jb250ZW50VXJsLAogICAgICAgICAgICAgICAgaW1hZ2VGbGFnOiB0cnVlLCAvLyB0aGlzIG5lZWQgdG8gYmUgY2hlY2tlZAogICAgICAgICAgICAgICAgdm9pY2VGbGFnOiBmYWxzZSwgLy8gdGhpcyBuZWVkIHRvIGJlIGNoZWNrZWQKICAgICAgICAgICAgICAgIG1lc3NhZ2VGbGFnOiBmYWxzZSwKICAgICAgICAgICAgICAgIGlzc3VlVVVJRDogdGhpcy5nZW5lcmF0ZVVVSUQoKSwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHRoaXMuaW1hZ2VWb2ljZXMucHVzaChpbWFnZVZvaWNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNlY3Rpb25Mb2FkZXI9IGZhbHNlOwoKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KGVycm9yLmRhdGEucmVzcG9uc2UsICJlcnJvciIpOwogICAgICAgIH0pOwogICAgfSwKCiAgICBzaG93VG9hc3QobWVzc2FnZSwgdHlwZSkgewogICAgICB0aGlzLnRvYXN0TWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgIHRoaXMudG9hc3RUeXBlID0gdHlwZTsKICAgICAgdGhpcy50b2FzdEZsYWcrKzsKICAgIH0sCgogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICAgCgoKICAgIHRoaXMuY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZSgKICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpCiAgICApOwoKICAgIHRoaXMuZ2V0QWxsQ2F0ZWdvcmllcyh0aGlzLmN1cnJlbnRVc2VyRGV0YWlscyk7CgogICAgaWYgKHRoaXMuc2VsZWN0ZWRJbnNwZWN0aW9uSXRtICE9PSB1bmRlZmluZWQpIHsKICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLnNlbGVjdGVkSW5zcGVjdGlvbkl0bSkgewogICAgICAgIGxldCBuYW1lID0gaXRlbS5uYW1lOwogICAgICAgIGNvbnN0IGVsZW1lbnQgPSBpdGVtLmltYWdlOwogICAgICAgIGZvciAobGV0IGVsZSBvZiBlbGVtZW50KSB7CiAgICAgICAgICBpZiAoZWxlLm1lc3NhZ2UpIHsKICAgICAgICAgICAgbGV0IGNvbW1lbnRzID0gbmFtZSArICIgOiAiICsgZWxlLm1lc3NhZ2U7CiAgICAgICAgICAgIHRoaXMudXNlckNvbW1lbnRzID0gY29tbWVudHM7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAodGhpcy4kcm91dGUucGF0aCA9PSAiL3NlcnZpY2UtcmVxdWVzdHMvIikgewogICAgICB0aGlzLmdldFNlcnZpY2VSZXF1ZXN0QnlVVUlEKCk7CiAgICB9CgogICAgLy8gdGhpcy5jcmVhdGVJc3N1ZUltZy5wdXNoKHRoaXMuSW5zcGVjdGlvbkl0ZW1JbWFnZSkKICAgIC8vIGNvbnNvbGUubG9nKCdjcmVhdGVJc3N1ZUltZycsdGhpcy5JbnNwZWN0aW9uSXRlbUltYWdlKQogICAgICAgIHRoaXMuc2V0RGF0YSgpOwoKCiAgfSwKCiAgdmFsaWRhdGlvbnM6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzc3VlTmFtZTogeyByZXF1aXJlZCwgbWF4TGVuZ3RoOiBtYXhMZW5ndGgoNjApIH0sCiAgICAgIGlzc3VlVHlwZTogeyByZXF1aXJlZCB9LAogICAgICBjYXRlZ29yeTogeyByZXF1aXJlZCB9LAogICAgICBhc3NldE5hbWU6IHsgcmVxdWlyZWQgfSwKICAgICAgaXNzdWVDYXRlZ29yeTogeyByZXF1aXJlZCB9LAogICAgICBpc3N1ZVByaW9yaXR5OiB7IHJlcXVpcmVkIH0sCiAgICAgIHVzZXJDb21tZW50czogeyByZXF1aXJlZCwgbWF4TGVuZ3RoOiBtYXhMZW5ndGgoNTAwKSB9LAogICAgICBpbnN0cnVjdGlvbkNoZWNrbGlzdDogewogICAgICAgICRlYWNoOiB7CiAgICAgICAgICB2YWx1ZTogewogICAgICAgICAgICByZXF1aXJlZCwKICAgICAgICAgICAgbWF4TGVuZ3RoOiBtYXhMZW5ndGgoMTkwKSwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgfSwKICAgIH07CiAgfSwKICBwcm9wczogewogICAgSW5zcGVjdGlvbkl0ZW1JbWFnZToge30sCiAgICBhc3NldFVVSURzOiB7fSwKICAgIHNlbGVjdGVkSW5zcGVjdGlvbkl0bToge30sCiAgICBpbnNwZWN0aW9uQXNzZXRVVUlEOiB7fSwKICAgIGFzc2V0T2JqOiB7fSwKICAgIGluc3BlY3Rpb25EZXRhaWw6IHt9LAogICAgc2VydmljZVJlcXVlc3REZXRhaWw6IHt9LAogIH0sCn07Cg=="},null]}