{"remainingRequest":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/assets/Assets.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/src/views/assets/Assets.vue","mtime":1661968702424},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alsharqi/Desktop/Deploy Fe-ui/fe-erohal-ui/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBFbmRwb2ludHMgZnJvbSAiLi4vLi4vc2VydmljZXMvRW5kUG9pbnRzIjsKaW1wb3J0IGFzc2V0UGVyc29ubmVsU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlcy9Bc3NldFBlcnNvbm5lbFNlcnZpY2UiOwppbXBvcnQgeyBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlIH0gZnJvbSAiLi4vLi4vc2VydmljZXMvQXNzZXRNYW5hZ2VtZW50U2VydmljZSI7CgppbXBvcnQgQXNzZXRHcm91cCBmcm9tICIuL0Fzc2V0R3JvdXAiOwppbXBvcnQgQ3JlYXRlSXNzdWUgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9DcmVhdGVJc3N1ZSI7CmltcG9ydCBEZWxldGVEaWFsb2cgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9EZWxldGVEaWFsb2ciOwppbXBvcnQgQXJjaGl2ZURpYWxvZyBmcm9tICIuLi8uLi9jb21wb25lbnRzL0FyY2hpdmVEaWFsb2ciOwppbXBvcnQgQWRkU2VydmljZVJlcXVlc3QgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9BZGRTZXJ2aWNlUmVxdWVzdCI7CmltcG9ydCBBc3NldEltcG9ydERpYWxvZyBmcm9tICIuLi9hc3NldHMvY29tcG9uZW50cy9Bc3NldEltcG9ydERpYWxvZy52dWUiOwppbXBvcnQgRXhwb3J0QXNzZXREZXRhaWxEaWFsb2cgZnJvbSAiLi4vYXNzZXRzL2NvbXBvbmVudHMvRXhwb3J0QXNzZXREZXRhaWxEaWFsb2cudnVlIjsKaW1wb3J0IEFyY2hpdmVkQXNzZXRzIGZyb20gIi4vQXJjaGl2ZWRBc3NldHMudnVlIjsKCmltcG9ydCBsb2FkZXIgZnJvbSAiQC9jb21wb25lbnRzL0xvYWRlci52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBc3NldHMiLAoKICBjb21wb25lbnRzOiB7CiAgICBBc3NldEdyb3VwLAogICAgQ3JlYXRlSXNzdWUsCiAgICBBZGRTZXJ2aWNlUmVxdWVzdCwKICAgIERlbGV0ZURpYWxvZywKICAgIEFyY2hpdmVEaWFsb2csCiAgICBBc3NldEltcG9ydERpYWxvZywKICAgIEV4cG9ydEFzc2V0RGV0YWlsRGlhbG9nLAogICAgbG9hZGVyLAogICAgQXJjaGl2ZWRBc3NldHMsCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvYXN0RmxhZzogMCwKICAgICAgdG9hc3RNZXNzYWdlOiAiIiwKICAgICAgdG9hc3RUeXBlOiAiIiwKICAgICAgbG9hZGVyRmxhZzogZmFsc2UsCiAgICAgIGRlbGV0ZUluc3BlY3Rpb25EaWFsb2c6IGZhbHNlLAogICAgICBhcmNoaXZlSW5zcGVjdGlvbkRpYWxvZzogZmFsc2UsCiAgICAgIG5ld0lzc3VlOiBmYWxzZSwKICAgICAgYWRkU2VydmljZURpYWxvZzogZmFsc2UsCiAgICAgIGFzc2V0VVVJRDogIiIsCiAgICAgIHJlc2V0VGFibGU6IDAsCiAgICAgIGFzc2V0T2JqOiAiIiwKICAgICAgLy8gLS0tLS0tLS0tLS0tLSBBc3NldHMgU0RUIERhdGEgU1RBUlQgLS0tLS0tLS0tLS0tLS0tLQogICAgICBzZHRfdG9rZW46IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKQogICAgICAgIC5hY2Nlc3NfdG9rZW4sCiAgICAgIHVzZXI6ICIiLAogICAgICB1c2VybmFtZTogIiIsCiAgICAgIGlzTG9hZGluZ1BhZ2U6IGZhbHNlLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBwcm9tcHQ6IGZhbHNlLAogICAgICBwcm9tcHRWaWV3TmFtZTogIiIsCiAgICAgIHNlcnZlckRhdGE6ICIiLAogICAgICBmaWx0ZXJGaWVsZExpc3Q6IFtdLAogICAgICBldmVudERhdGE6ICIiLAogICAgICBpbmRleEtleTogMCwKICAgICAgcGFyZW50U3lzdGVtU2V0dGluZ3M6IHsKICAgICAgICBzZXJ2aWNlVVJMOiBFbmRwb2ludHMucHJlZmVyZW5jZVNlcnZpY2UucHJlZmVyZW5jZSwKICAgICAgICAvLyBzZXJ2aWNlVVJMOiAiaHR0cDovL2xvY2FsaG9zdDo4MDk5L3ByZWZlcmVuY2VzIiwKICAgICAgICBidXR0b25zOiBbXSwKICAgICAgICBzZWFyY2hWYWx1ZTogIiIsCiAgICAgICAgaGVpZ2h0OiAiOTUwcHgiLAogICAgICAgIHNlbGVjdGlvbkNvbHVtbjogdHJ1ZSwKICAgICAgICBzZWxlY3RUeXBlOiAiY2hlY2tib3giLAogICAgICAgIG1vcmVPcHRpb25zOiBbXSwKICAgICAgICBhY3Rpb25zT3B0aW9uczogWwogICAgICAgICAgIlZpZXciLAogICAgICAgICAgIkVkaXQiLAogICAgICAgICAgIkFyY2hpdmUiLAogICAgICAgICAgIkNyZWF0ZSBJc3N1ZSIsCiAgICAgICAgICAiQ3JlYXRlIFNSIiwKICAgICAgICAgICJDcmVhdGUgV08iLAogICAgICAgICAgLy8gIkRlbGV0ZSIsCiAgICAgICAgXSwKICAgICAgICBjb2x1bW5JY29uczogW10sCiAgICAgICAgcGlsbENvbmZpZzogWwogICAgICAgICAgeyBjb2x1bW46ICIiLCBzdGF0ZTogInN1Y2Nlc3MiLCBkYXRhOiAiIiB9LAogICAgICAgICAgeyBjb2x1bW46ICIiLCBzdGF0ZTogImVycm9yIiwgZGF0YTogIiIgfSwKICAgICAgICAgIHsgY29sdW1uOiAiIiwgc3RhdGU6ICJub3JtYWwiLCBkYXRhOiAiIiB9LAogICAgICAgIF0sCiAgICAgICAgc3RhdGljQ29sdW1uczogW10sCiAgICAgICAgdXNlcjogIiIsCiAgICAgICAgdXBwZXJjYXNlQ29sdW1uczogW10sIC8vIHBhc3MgY29sdW1uIG5hbWUgd2hvc2UgZGF0YSBzaG91bGQgYmUgc2hvd24gaW4gY2FwcwogICAgICAgIGRhdGVGb3JtYXQ6ICJERC9NTS95eXl5IGhoOm1tIGEiLCAvL3Bhc3MgYW55IG1vbWVudCBkYXRlIGZvcm1hdCBoZXJlCiAgICAgIH0sCiAgICAgIHBhcmVudERlZmF1bHRTeXN0ZW1WaWV3OiB7CiAgICAgICAgdmlld05hbWVzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJEZWZhdWx0IFZpZXciLAogICAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgICAgcG9zaXRpb246IDEsCiAgICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJBZGQgQSBWaWV3IFRpbGUiLAogICAgICAgICAgICB0aWxlRmxhZzogdHJ1ZSwKICAgICAgICAgICAgcG9zaXRpb246IDAsCiAgICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKCiAgICAgICAgZGVmYXVsdFRhYmxlOiB7CiAgICAgICAgICBpZDogbnVsbCwKICAgICAgICAgIHZpZXdOYW1lOiAiRGVmYXVsdCBWaWV3IiwKICAgICAgICAgIGRlbnNpdHk6ICJzbSIsCiAgICAgICAgICBwYWdlU2l6ZTogIjUwIiwKICAgICAgICAgIHBhZ2VOYW1lOiAiYXNzZXRzIiwKICAgICAgICAgIHVzZXI6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyRGV0YWlscyIpKS5wcm9maWxlCiAgICAgICAgICAgIC51c2VybmFtZSwKICAgICAgICAgIGRlZmF1bHRWaWV3RmxhZzogdHJ1ZSwKICAgICAgICAgIHNvcnRGaWVsZDogIiIsCiAgICAgICAgICBzb3J0RGlyZWN0aW9uOiAiIiwKICAgICAgICAgIHRpbGVGbGFnOiB0cnVlLAogICAgICAgICAgcG9zaXRpb246IDEsIC8vIGFsd2F5cyBwYXNzIDEKICAgICAgICAgIHByaXZhY3k6ICJwcml2YXRlIiwKICAgICAgICAgIGNvbHVtbnM6IFtdLAogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIHBhcmVudERhdGE6IFtdLAogICAgICBmaWx0ZXJDb3VudDogIiIsCiAgICAgIC8vIC0tLS0tLS0tLS0tLS0gQXNzZXRzIFNEVCBEYXRhIEVORCAtLS0tLS0tLS0tLS0tLS0tCgogICAgICBpbnNwZWN0aW9uczogW10sCiAgICAgIG9yZ0NvbmZpZ3NSZXNwb25zZTogbnVsbCwKICAgICAgYXNzZXRUeXBlOiAiYXNzZXQiLAogICAgICBhc3NldE9wdGlvbnM6IFsKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogIkFzc2V0cyIsCiAgICAgICAgICB2YWx1ZTogImFzc2V0IiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAiQXJjaGl2ZWQiLAogICAgICAgICAgdmFsdWU6ICJhcmNoaXZlZEFzc2V0cyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogIkFzc2V0LUdyb3VwcyIsCiAgICAgICAgICB2YWx1ZTogImFzc2V0LWdyb3VwIiwKICAgICAgICB9LAogICAgICBdLAoKICAgICAgYXNzZXRPcHRpb246ICJhc3NldCIsCiAgICAgIGN1cnJlbnRVc2VyRGV0YWlsczogIiIsCiAgICAgIGFzc2V0Q2F0ZWdvcnlPcHRpb25zOiBbXSwKICAgICAgdmlld0Fzc2V0R3JvdXBEaWFsb2c6IGZhbHNlLAogICAgICBhc3NldEdyb3VwQ29uZmlnczogIiIsCiAgICAgIGFyY2hpdmVkQXNzZXRzQ29uZmlnczogIiIsCiAgICAgIHRhYmxlQ29uZmlnMjogbnVsbCwKICAgICAgY3VycmVuY3k6ICIiLAogICAgICBzZHREYXRhOiAiIiwKICAgICAgb3BlbkFkZFBvcFVwOiBmYWxzZSwKICAgICAgZXhwb3J0RmxhZzogZmFsc2UsCiAgICAgIG9wdDogW10sCiAgICAgIG9wZW5VcGRhdGVQb3BVcDogZmFsc2UsCiAgICAgIGltcG9ydFR5cGU6ICJBZGQiLAogICAgICBmaWVsZE5hbWVzOiBbXSwKICAgICAgY29sdW1uczogW10sCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGltcG9ydE9wdGlvbih2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gImFkZCIpIHsKICAgICAgICB0aGlzLm9wZW5BZGRQb3BVcCA9IHRydWU7CiAgICAgICAgdGhpcy5pbXBvcnRUeXBlID0gIkFkZCI7CiAgICAgIH0gZWxzZSBpZiAodmFsID09PSAidXBkYXRlIikgewogICAgICAgIHRoaXMub3BlbkFkZFBvcFVwID0gdHJ1ZTsKICAgICAgICB0aGlzLmltcG9ydFR5cGUgPSAiVXBkYXRlIjsKICAgICAgfSBlbHNlIGlmICh2YWwgPT09ICJleGlzdGluZyIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJleGlzdGluZy10ZW1wbGF0ZXMiIH0pOwogICAgICB9IGVsc2UgaWYgKHZhbCA9PT0gImhpc3RvcnkiKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAibGFzdC1pbXBvcnQtcmVjb3JkcyIgfSk7CiAgICAgIH0KICAgIH0sCgogICAgY2xvc2VBZGRQb3B1cCgpIHsKICAgICAgdGhpcy5vcGVuQWRkUG9wVXAgPSBmYWxzZTsKICAgIH0sCgogICAgcmVmcmVzaFRhYmxlKCkgewogICAgICB0aGlzLm9wZW5BZGRQb3BVcCA9IGZhbHNlOwogICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgfSwKCiAgICBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy5kZWxldGVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuYXJjaGl2ZUluc3BlY3Rpb25EaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5leHBvcnRGbGFnID0gZmFsc2U7CiAgICB9LAogICAgZGlzcGxheU1lc3NhZ2UoKSB7CiAgICAgIHRoaXMuc2hvd1RvYXN0KCJJc3N1ZSBDcmVhdGVkIFN1Y2Nlc3NmdWxseS4iLCAic3VjY2VzcyIpOwogICAgfSwKICAgIGRlbGV0ZURpYWxvZygpIHsKICAgICAgQXNzZXRNYW5hZ2VtZW50U2VydmljZS5hcmNoaXZlT3JEZWxldGVBc3NldCh0aGlzLmFzc2V0VVVJRCwgImRlbGV0ZSIpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5sb2FkVGFibGUodGhpcy5zZHREYXRhKTsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkFzc2V0IERlbGV0ZWQgU3VjY2Vzc2Z1bGx5IiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgdGhpcy5kZWxldGVJbnNwZWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdChlcnJvciwgImVycm9yIik7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGFyY2hpdmVEaWFsb2coKSB7CiAgICAgIEFzc2V0TWFuYWdlbWVudFNlcnZpY2UuYXJjaGl2ZU9yRGVsZXRlQXNzZXQodGhpcy5hc3NldFVVSUQsICJhcmNoaXZlIikKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLmxvYWRUYWJsZSh0aGlzLnNkdERhdGEpOwogICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgiQXNzZXQgQXJjaGl2ZWQgU3VjY2Vzc2Z1bGx5IiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgdGhpcy5hcmNoaXZlSW5zcGVjdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5zaG93VG9hc3QoZXJyb3IsICJlcnJvciIpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIC0tLS0tLS0tLS0tLSBBc3NldHMgU0RUIEZ1bmN0aW9ucyBTVEFSVCAtLS0tLS0tLS0tLS0tLQoKICAgIGdldEFjdGlvbnNPcHRpb24odmFsKSB7CiAgICAgIGlmICh2YWwudmFsdWUgPT0gIlZpZXciKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogInZpZXctYXNzZXQiLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGFzc2V0SUQ6IHZhbC5yb3cudXVpZCwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09ICJFZGl0IikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJlZGl0LWFzc2V0IiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBhc3NldElEOiB2YWwucm93LnV1aWQsCiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PSAiQ3JlYXRlIElzc3VlIikgewogICAgICAgIHRoaXMubmV3SXNzdWUgPSB0cnVlOwogICAgICAgIHRoaXMuYXNzZXRPYmogPSB2YWwucm93OwogICAgICAgIHRoaXMuYXNzZXRPYmouYXNzZXRGbGFnID0gdHJ1ZTsKICAgICAgICB0aGlzLmluZGV4S2V5Kys7CiAgICAgIH0gZWxzZSBpZiAodmFsLnZhbHVlID09ICJDcmVhdGUgV08iKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogImNyZWF0ZS13b3JrLW9yZGVyIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICB3b3JrdXVpZDogdmFsLnJvdy51dWlkLAogICAgICAgICAgfSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh2YWwudmFsdWUgPT0gIkNyZWF0ZSBTUiIpIHsKICAgICAgICB0aGlzLmFkZFNlcnZpY2VEaWFsb2cgPSB0cnVlOwogICAgICAgIHRoaXMuYXNzZXRPYmogPSB2YWwucm93OwogICAgICAgIHRoaXMuYXNzZXRPYmouYXNzZXROYW1lRGlzYWJsZSA9IHRydWU7CiAgICAgICAgdGhpcy5pbmRleEtleSsrOwogICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZSA9PSAiQXJjaGl2ZSIpIHsKICAgICAgICB0aGlzLmFzc2V0VVVJRCA9IHZhbC5yb3cudXVpZDsKICAgICAgICB0aGlzLmFyY2hpdmVJbnNwZWN0aW9uRGlhbG9nID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmICh2YWwudmFsdWUgPT0gIkRlbGV0ZSIpIHsKICAgICAgICB0aGlzLmFzc2V0VVVJRCA9IHZhbC5yb3cudXVpZDsKICAgICAgICB0aGlzLmRlbGV0ZUluc3BlY3Rpb25EaWFsb2cgPSB0cnVlOwogICAgICB9CiAgICB9LAoKICAgIGNvbnZlcnRUb0NTVihvYmpBcnJheSkgewogICAgICB2YXIgYXJyYXkgPSB0eXBlb2Ygb2JqQXJyYXkgIT0gIm9iamVjdCIgPyBKU09OLnBhcnNlKG9iakFycmF5KSA6IG9iakFycmF5OwogICAgICB2YXIgc3RyID0gIiI7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGxpbmUgPSAiIjsKICAgICAgICBmb3IgKHZhciBpbmRleCBpbiBhcnJheVtpXSkgewogICAgICAgICAgaWYgKGxpbmUgIT0gIiIpIGxpbmUgKz0gIiwiOwoKICAgICAgICAgIGxpbmUgKz0gYXJyYXlbaV1baW5kZXhdOwogICAgICAgIH0KCiAgICAgICAgc3RyICs9IGxpbmUgKyAiXHJcbiI7CiAgICAgIH0KCiAgICAgIHJldHVybiBzdHI7CiAgICB9LAoKICAgIGdldERvd25sb2FkQXNPcHRpb24ob3B0KSB7CiAgICAgIGlmIChvcHQucm93cyA9PSAiIikgewogICAgICAgIHRoaXMuc2hvd1RvYXN0KAogICAgICAgICAgICAiUGxlYXNlIFNlbGVjdCBSZWNvcmQocykiLAogICAgICAgICAgICAid2FybmluZyIKICAgICAgICAgICk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKG9wdC5vcHRpb24gPT0gInBkZiIpIHsKICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IHRydWU7CiAgICAgICAgICAvLyBhZGRpbmcgY3VzdG9tZXIgZGV0YWlscwogICAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgICAgcm93czogb3B0LnJvd3MsCiAgICAgICAgICAgIG9wdGlvbjogb3B0Lm9wdGlvbiwKICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IHRoaXMuY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQsCiAgICAgICAgICAgIG9yZ2FuaXphdGlvbk5hbWU6ICJFcm9oYWwiLAogICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmNvbHVtbnMsCiAgICAgICAgICB9OwoKICAgICAgICAgIGxldCBvYmplY3QgPSBvYmoucm93czsKICAgICAgICAgIG9iai5yb3dzID0gb2JqZWN0OwogICAgICAgICAgQXNzZXRNYW5hZ2VtZW50U2VydmljZS5kb3dubG9hZFNlbGVjdGVkUERGKG9iaikudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgICBsZXQgZmlsZUNvbnRlbnRzID0gbnVsbDsKICAgICAgICAgICAgbGV0IHBvcHVwV2luID0gbnVsbDsKICAgICAgICAgICAgcG9wdXBXaW4gPSB3aW5kb3cub3BlbigKICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAiX2JsYW5rIiwKICAgICAgICAgICAgICAidG9wPTAsbGVmdD0wLGhlaWdodD03MDAsd2lkdGg9MTAwMDsiCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGxldCBkb2N1bWVudCA9IHsKICAgICAgICAgICAgICBkb2N1bWVudE5hbWU6ICJBc3NldHMiLAogICAgICAgICAgICB9OwogICAgICAgICAgICBmaWxlQ29udGVudHMgPSByZXMuZGF0YS50eXBlICsgcmVzLmRhdGEuY29udGVudDsKICAgICAgICAgICAgcG9wdXBXaW4uZG9jdW1lbnQud3JpdGUoYAogICAgICAgICAgICA8aHRtbD4KICAgICAgICAgICAgICAgIDxoZWFkPgogICAgICAgICAgICAgICAgIDwhLS10aXRsZT5QcmludCB0YWI8L3RpdGxlLS0+CiAgICAgICAgICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgICAgICAgICAjYnV0dG9uc3tkaXNwbGF5Om5vbmU7fQogICAgICAgICAgICAgICAgICAgICAgICAgYm9keSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogIk9wZW4gU2FucyIsIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgIlNlZ29lIFVJIiwgRXVjbGlkIENpcmN1bGFyIEIsICJIZWx2ZXRpY2EgTmV1ZSIsIEFyaWFsLCBzYW5zLXNlcmlmLCAiQXBwbGUgQ29sb3IgRW1vamkiLCAiU2Vnb2UgVUkgRW1vamkiLCAiU2Vnb2UgVUkgU3ltYm9sIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMyMTI1Mjk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBidXR0b24sIG1ldGVyLCBwcm9ncmVzcyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXdyaXRpbmctbW9kZTogaG9yaXpvbnRhbC10YiAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0LCBidXR0b24gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1yZW5kZXJpbmc6IGF1dG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogaW5pdGlhbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiBub3JtYWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkLXNwYWNpbmc6IG5vcm1hbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1pbmRlbnQ6IDBweDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogc3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDBlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IDQwMCAxMy4zMzMzcHggQXJpYWw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRbdHlwZT0iYnV0dG9uIiBpXSwgaW5wdXRbdHlwZT0ic3VibWl0IiBpXSwgaW5wdXRbdHlwZT0icmVzZXQiIGldLCBpbnB1dFt0eXBlPSJmaWxlIiBpXTo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b24sIGJ1dHRvbiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogZGVmYXVsdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBidXR0b250ZXh0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogYnV0dG9uZmFjZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4IDNweDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci13aWR0aDogMnB4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXN0eWxlOiBvdXRzZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IGJ1dHRvbmZhY2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItaW1hZ2U6IGluaXRpYWw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsIGJ1dHRvbiwgc2VsZWN0LCBvcHRncm91cCwgdGV4dGFyZWEgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IGluaGVyaXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogaW5oZXJpdDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBidXR0b24sIHNlbGVjdCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAuYnRuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuMzc1cmVtIDAuNzVyZW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJvcmRlci1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm94LXNoYWRvdyAwLjE1cyBlYXNlLWluLW91dDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAuYnRuLW91dGxpbmUtcHJpbWFyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwN2JmZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzAwN2JmZjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAuYnRuLW91dGxpbmUtcHJpbWFyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogI2QwMzIzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkMDMyMzI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlPi5mYSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiBub3JtYWwgbm9ybWFsIG5vcm1hbCAxNHB4LzEgRm9udEF3ZXNvbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IGluaGVyaXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LXJlbmRlcmluZzogYXV0bzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTsKICAgICAgICAgICAgICAgICAgICAgICAgfTwvc3R5bGU+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZT4qLCAqOjpiZWZvcmUsICo6OmFmdGVyIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgU3R5bGUgQXR0cmlidXRlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAuYnRuLCAuZm9ybS1jb250cm9sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuMjVyZW0gMC41cmVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjNyZW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDE1cHg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIzcHg7CiAgICAgICAgICAgICAgICAgICAgICAgIH08L3N0eWxlPgogICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgICAgICA8L2hlYWQ+CiAgICAgICAgICAgICAgICA8Ym9keSBvbmxvYWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiID4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iJHtmaWxlQ29udGVudHN9IiBkb3dubG9hZD0iJHtkb2N1bWVudC5kb2N1bWVudE5hbWV9Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXByaW1hcnkiPkRvd25sb2FkPC9idXR0b24+PC9hPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIHNyYz0nJHtmaWxlQ29udGVudHN9JyAgc3R5bGU9Im1pbi13aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7IiA+PC9pZnJhbWU+CiAgICAgICAgICAgICAgICA8L2JvZHk+CiAgICAgICAgICAgIDwvaHRtbD5gKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAob3B0Lm9wdGlvbiA9PSAiY3N2IikgewogICAgICAgICAgaWYgKHRoaXMub3B0Lmxlbmd0aCA8PSAwKSB7CiAgICAgICAgICAgIHRoaXMudG9hc3RNZXNzYWdlID0gIktpbmRseSBTZWxlY3QgQXNzZXRzIHRvIEV4cG9ydC4iOwogICAgICAgICAgICB0aGlzLnRvYXN0VHlwZSA9ICJ3YXJuaW5nIjsKICAgICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMudG9hc3RGbGFnKys7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZXhwb3J0RmxhZyA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0KSB7CiAgICAgIHZhciBiaW5hcnlTdHJpbmcgPSB3aW5kb3cuYXRvYihiYXNlNjQpOwogICAgICB2YXIgYmluYXJ5TGVuID0gYmluYXJ5U3RyaW5nLmxlbmd0aDsKICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5TGVuKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaW5hcnlMZW47IGkrKykgewogICAgICAgIHZhciBhc2NpaSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpOwogICAgICAgIGJ5dGVzW2ldID0gYXNjaWk7CiAgICAgIH0KICAgICAgcmV0dXJuIGJ5dGVzOwogICAgfSwKCiAgICBleHBvcnREYXRhKHZhbCkgewogICAgICBpZiAodmFsID09PSAidGFibGUiKSB7CiAgICAgICAgdGhpcy5zaW1wbGVFeHBvcnQodGhpcy5vcHQpOwogICAgICAgIHRoaXMuZXhwb3J0RmxhZyA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZG93bkxvYWREZXRhaWxlZENzdih0aGlzLm9wdCk7CiAgICAgICAgdGhpcy5leHBvcnRGbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgZG93bkxvYWREZXRhaWxlZENzdihvcHQpIHsKICAgICAgbGV0IGFzc2V0VVVJRFMgPSBbXTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHQubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBhc3NldCA9IG9wdFtpXTsKICAgICAgICBhc3NldFVVSURTLnB1c2goYXNzZXQudXVpZCk7CiAgICAgIH0KCiAgICAgIGxldCByZXF1ZXN0ID0gewogICAgICAgIGFzc2V0VVVJRFM6IGFzc2V0VVVJRFMsCiAgICAgICAgdGVuYW50VVVJRDogdGhpcy5jdXJyZW50VXNlckRldGFpbHMucHJvZmlsZS5vcmdhbml6YXRpb25JZCwKICAgICAgfTsKICAgICAgdGhpcy5sb2FkZXJGbGFnID0gdHJ1ZTsKICAgICAgQXNzZXRNYW5hZ2VtZW50U2VydmljZS5leHBvcnRBc3NldHNJbkJ1bGsocmVxdWVzdCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhLnJlc3BvbnNlSWRlbnRpZmllciA9PT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgICB2YXIgc2FtcGxlQXJyYXkgPSB0aGlzLmJhc2U2NFRvQXJyYXlCdWZmZXIocmVzLmRhdGEuY29udGVudCk7CiAgICAgICAgICAgIGxldCBmaWxlVXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoCiAgICAgICAgICAgICAgbmV3IEJsb2IoW3NhbXBsZUFycmF5XSwgeyB0eXBlOiAidGV4dC9jc3Y7Y2hhcnNldD11dGYtODsiIH0pCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHZhciBmaWxlTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgZmlsZUxpbmsuaHJlZiA9IGZpbGVVcmw7CiAgICAgICAgICAgIGZpbGVMaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCByZXMuZGF0YS5maWxlTmFtZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZmlsZUxpbmspOwogICAgICAgICAgICBmaWxlTGluay5jbGljaygpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5sb2FkZXJGbGFnID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgKICAgICAgICAgICAgIkFuIFVuZXhwZWN0ZWQgRXJyb3Igb2NjdXJyZWQgd2hpbGUgZG93bmxvYWRpbmcgaW1wb3J0IHRlbXBsYXRlcy4iLAogICAgICAgICAgICAiZXJyb3IiCiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSwKCiAgICBzaW1wbGVFeHBvcnQob3B0KSB7CiAgICAgIGxldCBmaWxlVGl0bGUgPSAiQXNzZXRzIjsKICAgICAgbGV0IGhlYWRlcnMgPSB7CiAgICAgICAgLy8gY3JlYXRlZERhdGU6ICdSZXF1ZXN0ZWQgT24nLnJlcGxhY2UoLywvZywgJycpLCAvLyByZW1vdmUgY29tbWFzIHRvIGF2b2lkIGVycm9ycwogICAgICAgIGFzc2V0TnVtYmVyOiAiQXNzZXQgTnVtYmVyIiwKICAgICAgICBuYW1lOiAiTmFtZSIsCiAgICAgICAgY2F0ZWdvcnk6ICJDYXRlZ29yeSIsCiAgICAgICAgYXNzaWduZWVzOiAiQXNzaWduZWQgVG8iLAogICAgICAgIHN0YXR1czogIlN0YXR1cyIsCiAgICAgICAgY29zdDogIk1haW50YWluZW5jZSBDb3N0IiArICIgKCIgKyB0aGlzLmN1cnJlbmN5ICsgIikiLAogICAgICAgIG9wZW5Jc3N1ZXM6ICJPcGVuIElzc3VlcyIsCiAgICAgICAgYXNzaWduZWRJc3N1ZXM6ICJBc3NpZ25lZCBJc3N1ZXMiLAogICAgICAgIHJlcGFpcnM6ICJSZXBhaXJzIiwKICAgICAgICB3b3JrT3JkZXJzOiAiV29yayBPcmRlcnMiLAogICAgICB9OwogICAgICBsZXQgZGF0YU9iaiA9IFtdOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdC5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGFzc2V0ID0gb3B0W2ldOwogICAgICAgIGRhdGFPYmoucHVzaCh7CiAgICAgICAgICBhc3NldE51bWJlcjoKICAgICAgICAgICAgYXNzZXQuYXNzZXROdW1iZXIgIT09IG51bGwgJiYgYXNzZXQuYXNzZXROdW1iZXIgIT09ICIiCiAgICAgICAgICAgICAgPyBhc3NldC5hc3NldE51bWJlcgogICAgICAgICAgICAgIDogIiIsCiAgICAgICAgICBuYW1lOiBhc3NldC5uYW1lICE9PSBudWxsICYmIGFzc2V0Lm5hbWUgIT09ICIiID8gYXNzZXQubmFtZSA6ICIiLAogICAgICAgICAgY2F0ZWdvcnk6CiAgICAgICAgICAgIGFzc2V0LmNhdGVnb3J5TmFtZSAhPT0gbnVsbCAmJiBhc3NldC5jYXRlZ29yeU5hbWUgIT09ICIiCiAgICAgICAgICAgICAgPyBhc3NldC5jYXRlZ29yeU5hbWUKICAgICAgICAgICAgICA6ICIiLAogICAgICAgICAgYXNzaWduZWVzOgogICAgICAgICAgICBhc3NldC5hc3NpZ25lZFRvICE9PSBudWxsICYmIGFzc2V0LmFzc2lnbmVkVG8gIT09ICIiCiAgICAgICAgICAgICAgPyBhc3NldC5hc3NpZ25lZFRvLnJlcGxhY2UoLywvZywgIiAiKQogICAgICAgICAgICAgIDogIiIsCiAgICAgICAgICBzdGF0dXM6CiAgICAgICAgICAgIGFzc2V0LnN0YXR1cyAhPT0gbnVsbCAmJiBhc3NldC5zdGF0dXMgIT09ICIiID8gYXNzZXQuc3RhdHVzIDogIiIsCiAgICAgICAgICBjb3N0OgogICAgICAgICAgICBhc3NldC5tYWludGVuYW5jZUNvc3QgIT09IG51bGwgJiYgYXNzZXQubWFpbnRlbmFuY2VDb3N0ICE9PSAiIgogICAgICAgICAgICAgID8gYXNzZXQubWFpbnRlbmFuY2VDb3N0CiAgICAgICAgICAgICAgOiAwLAogICAgICAgICAgb3Blbklzc3VlczoKICAgICAgICAgICAgYXNzZXQub3Blbklzc3VlcyAhPT0gbnVsbCAmJiBhc3NldC5vcGVuSXNzdWVzICE9PSAiIgogICAgICAgICAgICAgID8gYXNzZXQub3Blbklzc3VlcwogICAgICAgICAgICAgIDogMCwKICAgICAgICAgIGFzc2lnbmVkSXNzdWVzOgogICAgICAgICAgICBhc3NldC5hc3NpZ25lZElzc3VlcyAhPT0gbnVsbCAmJiBhc3NldC5hc3NpZ25lZElzc3VlcyAhPT0gIiIKICAgICAgICAgICAgICA/IGFzc2V0LmFzc2lnbmVkSXNzdWVzCiAgICAgICAgICAgICAgOiAwLAogICAgICAgICAgcmVwYWlyczoKICAgICAgICAgICAgYXNzZXQucmVwYWlycyAhPT0gbnVsbCAmJiBhc3NldC5yZXBhaXJzICE9PSAiIiA/IGFzc2V0LnJlcGFpcnMgOiAwLAogICAgICAgICAgd29ya09yZGVyczoKICAgICAgICAgICAgYXNzZXQud29ya29yZGVycyAhPT0gbnVsbCAmJiBhc3NldC53b3Jrb3JkZXJzICE9PSAiIgogICAgICAgICAgICAgID8gYXNzZXQud29ya29yZGVycwogICAgICAgICAgICAgIDogMCwKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLmV4cG9ydENTVkZpbGUoaGVhZGVycywgZGF0YU9iaiwgZmlsZVRpdGxlKTsKICAgIH0sCgogICAgZXhwb3J0Q1NWRmlsZShoZWFkZXJzLCBhc3NldERhdGEsIGZpbGVUaXRsZSkgewogICAgICBpZiAoaGVhZGVycykgewogICAgICAgIGFzc2V0RGF0YS51bnNoaWZ0KGhlYWRlcnMpOwogICAgICB9CgogICAgICAvLyBDb252ZXJ0IE9iamVjdCB0byBKU09OCiAgICAgIHZhciBqc29uT2JqZWN0ID0gSlNPTi5zdHJpbmdpZnkoYXNzZXREYXRhKTsKCiAgICAgIHZhciBjc3YgPSB0aGlzLmNvbnZlcnRUb0NTVihqc29uT2JqZWN0KTsKCiAgICAgIHZhciBleHBvcnRlZEZpbGVubWFlID0gZmlsZVRpdGxlICsgIi5jc3YiIHx8ICJleHBvcnQuY3N2IjsKCiAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2Nzdl0sIHsgdHlwZTogInRleHQvY3N2O2NoYXJzZXQ9dXRmLTg7IiB9KTsKICAgICAgaWYgKG5hdmlnYXRvci5tc1NhdmVCbG9iKSB7CiAgICAgICAgLy8gSUUgMTArCiAgICAgICAgbmF2aWdhdG9yLm1zU2F2ZUJsb2IoYmxvYiwgZXhwb3J0ZWRGaWxlbm1hZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgaWYgKGxpbmsuZG93bmxvYWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgLy8gZmVhdHVyZSBkZXRlY3Rpb24KICAgICAgICAgIC8vIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCBIVE1MNSBkb3dubG9hZCBhdHRyaWJ1dGUKICAgICAgICAgIHZhciB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoImhyZWYiLCB1cmwpOwogICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoImRvd25sb2FkIiwgZXhwb3J0ZWRGaWxlbm1hZSk7CiAgICAgICAgICBsaW5rLnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBzZXRUYWJsZUNvbmZpZ3MoKSB7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLmRlbnNpdHkgPQogICAgICAgIHRoaXMudGFibGVDb25maWcuZGVuc2l0eTsKICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3lzdGVtVmlldy5kZWZhdWx0VGFibGUucGFnZVNpemUgPQogICAgICAgIHRoaXMudGFibGVDb25maWcucGFnZVNpemU7CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLnBhZ2VOYW1lID0KICAgICAgICB0aGlzLnRhYmxlQ29uZmlnLnBhZ2VOYW1lOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5zb3J0RmllbGQgPQogICAgICAgIHRoaXMudGFibGVDb25maWcuc29ydEZpZWxkOwogICAgICB0aGlzLnBhcmVudERlZmF1bHRTeXN0ZW1WaWV3LmRlZmF1bHRUYWJsZS5zb3J0RGlyZWN0aW9uID0KICAgICAgICB0aGlzLnRhYmxlQ29uZmlnLnNvcnREaXJlY3Rpb247CiAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN5c3RlbVZpZXcuZGVmYXVsdFRhYmxlLmNvbHVtbnMgPQogICAgICAgIHRoaXMudGFibGVDb25maWcuY29sdW1uczsKICAgIH0sCgogICAgZXh0cmFjdEZpZWxkTmFtZXNGb3JTZWFyY2hRdWVyeShjb25maWcpIHsKICAgICAgZm9yIChsZXQgY29sdW1uIG9mIGNvbmZpZy5jb2x1bW5zKSB7CiAgICAgICAgdGhpcy5maWVsZE5hbWVzLnB1c2goY29sdW1uLmZpZWxkTmFtZSk7CiAgICAgICAgdGhpcy5jb2x1bW5zLnB1c2goY29sdW1uLmxhYmVsTmFtZSk7CiAgICAgIH0KICAgIH0sCgogICAgY2F0Y2hEZXBhcnR1cmU6IGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHRoaXMuc2R0RGF0YSA9IGRhdGE7CiAgICAgIGlmIChkYXRhLnN0YXR1cyA9PSAxIHx8IGRhdGEuc3RhdHVzID09IDMpIHsKICAgICAgICB0aGlzLmxvYWRUYWJsZShkYXRhKTsKICAgICAgfSBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PSA0KSB7CiAgICAgICAgdGhpcy5sb2FkVGFibGUoZGF0YSk7CiAgICAgIH0KICAgICAgIGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDEwKSB7CiAgICAgICAgaWYgKGRhdGEubWVzc2FnZS5jaGVja2JveCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBsZXQgYXNzZXQgPSBkYXRhLm1lc3NhZ2U7CiAgICAgICAgICBpZiAoYXNzZXQuY2hlY2tib3guY2hlY2tlZCkgewogICAgICAgICAgICB0aGlzLm9wdC5wdXNoKGFzc2V0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMub3B0LmZpbmRJbmRleCgoYSkgPT4gYS51dWlkID09PSBhc3NldC51dWlkKTsKICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICAgICAgICB0aGlzLm9wdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxldCBhc3NldHMgPSBkYXRhLm1lc3NhZ2U7CiAgICAgICAgICBhc3NldHMubWFwKChhc3NldCkgPT4gewogICAgICAgICAgICBpZiAoYXNzZXQuY2hlY2tib3guY2hlY2tlZCkgewogICAgICAgICAgICAgIHRoaXMub3B0LnB1c2goYXNzZXQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMub3B0LmZpbmRJbmRleCgoYSkgPT4gYS51dWlkID09PSBhc3NldC51dWlkKTsKICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICAgICAgICAgICAgdGhpcy5vcHQuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBsb2FkVGFibGUoc2R0RGF0YSkgewogICAgICBsZXQgZmlsdGVycyA9IFtdOwogICAgICB0aGlzLmxvYWRlckZsYWcgPSB0cnVlOwogICAgICBmb3IgKGxldCBzZHRfZGF0YSBvZiBzZHREYXRhLm1lc3NhZ2UpIHsKICAgICAgICBpZiAoc2R0X2RhdGEuZmllbGROYW1lICE9PSAiYWN0aW9ucyIpIHsKICAgICAgICAgIGxldCBuZXdEYXRlID0gIiI7CiAgICAgICAgICBpZiAoc2R0X2RhdGEuZmllbGRUeXBlID09PSAiZGF0ZSIgJiYgc2R0X2RhdGEuZmlsdGVyVmFsdWUgIT09ICIiKSB7CiAgICAgICAgICAgIGxldCBkYXRlID0gc2R0X2RhdGEuZmlsdGVyVmFsdWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgZGF0ZSA9IGRhdGUuc3BsaXQoIi8iKTsKICAgICAgICAgICAgbmV3RGF0ZSA9IG5ldyBEYXRlKGAke2RhdGVbMV19LyR7ZGF0ZVswXX0vJHtkYXRlWzJdfWApOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNkdF9kYXRhLmZpbHRlclZhbHVlID09PSBudWxsKSB7CiAgICAgICAgICAgIHNkdF9kYXRhLmZpbHRlclZhbHVlID0gIiI7CiAgICAgICAgICB9CiAgICAgICAgICBmaWx0ZXJzLnB1c2goewogICAgICAgICAgICBmaWVsZE5hbWU6IHNkdF9kYXRhLmZpZWxkTmFtZSwKICAgICAgICAgICAgZmllbGRUeXBlOiBzZHRfZGF0YS5maWVsZFR5cGUsCiAgICAgICAgICAgIGZpbHRlclZhbHVlOgogICAgICAgICAgICAgIG5ld0RhdGUgPT09IG51bGwgfHwgbmV3RGF0ZSA9PT0gIiIKICAgICAgICAgICAgICAgID8gc2R0X2RhdGEuZmlsdGVyVmFsdWUKICAgICAgICAgICAgICAgIDogbmV3RGF0ZS5nZXRUaW1lKCksCiAgICAgICAgICAgIHNlY29uZFZhbHVlOiBzZHRfZGF0YS5zZWNvbmRWYWx1ZSwKICAgICAgICAgICAgY29tcGFyaXNvblR5cGU6IHNkdF9kYXRhLmNvbXBhcmlzb25UeXBlLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuZ2V0UGFnaW5hdGVkQXNzZXRzKAogICAgICAgIGZpbHRlcnMsCiAgICAgICAgc2R0RGF0YS5kYXRhLnNvcnRGaWVsZCwKICAgICAgICBzZHREYXRhLmRhdGEuc29ydERpcmVjdGlvbiwKICAgICAgICBzZHREYXRhLmRhdGEub2Zmc2V0LAogICAgICAgIHNkdERhdGEuZGF0YS5saW1pdCwKICAgICAgICBzZHREYXRhLmRhdGEuc2VhcmNoUXVlcnkKICAgICAgKTsKICAgIH0sCgogICAgbG9hZFNEVChyZXNwb25zZSwgZGF0YSkgewogICAgICB0aGlzLnBhcmVudERhdGEgPSBkYXRhOwogICAgICBsZXQgZXZlbnREYXRhID0gewogICAgICAgIGRhdGE6IHRoaXMucGFyZW50RGF0YSwKICAgICAgICB0b3RhbEVsZW1lbnRzOiByZXNwb25zZS5kYXRhLnRvdGFsRWxlbWVudHMsCiAgICAgICAgdG90YWxQYWdlczogcmVzcG9uc2UuZGF0YS50b3RhbFBhZ2VzLAogICAgICAgIHBhZ2VOdW1iZXI6IHJlc3BvbnNlLmRhdGEub2Zmc2V0LAogICAgICB9OwogICAgICB0aGlzLiRyZWZzLnRlc3QuZGF0YUxvYWRFdmVudChldmVudERhdGEpOwogICAgfSwKCiAgICBnZXRQYWdpbmF0ZWRBc3NldHMoCiAgICAgIGZpbHRlcnMsCiAgICAgIHNvcnRGaWVsZCwKICAgICAgc29ydERpcmVjdGlvbiwKICAgICAgb2Zmc2V0LAogICAgICBsaW1pdCwKICAgICAgc2VhcmNoUXVlcnkKICAgICkgewogICAgICBsZXQgY3VycmVudFVzZXJEZXRhaWxzID0gSlNPTi5wYXJzZSgKICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKICAgICAgKTsKCiAgICAgIGxldCByZXF1ZXN0T2JqID0gewogICAgICAgIGZpbHRlcnM6IGZpbHRlcnMsCiAgICAgICAgc29ydEZpZWxkOiBzb3J0RmllbGQsCiAgICAgICAgc29ydERpcmVjdGlvbjogc29ydERpcmVjdGlvbiwKICAgICAgICBvZmZzZXQ6IG9mZnNldCwKICAgICAgICBsaW1pdDogbGltaXQsCiAgICAgICAgdGVuYW50VVVJRDogY3VycmVudFVzZXJEZXRhaWxzLnByb2ZpbGUub3JnYW5pemF0aW9uSWQsCiAgICAgICAgc2VhcmNoUXVlcnk6IHNlYXJjaFF1ZXJ5LAogICAgICAgIGZpZWxkTmFtZXM6IHRoaXMuZmllbGROYW1lcywKICAgICAgICBhcmNoaXZlZDogZmFsc2UsCiAgICAgIH07CgogICAgICBBc3NldE1hbmFnZW1lbnRTZXJ2aWNlLmdldFBhZ2luYXRlZEFzc2V0c0ZvclNEVChyZXF1ZXN0T2JqKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEub2Zmc2V0ID0gb2Zmc2V0ICsgMTsKICAgICAgICAgICAgdGhpcy5sb2FkU0RUKHJlc3BvbnNlLCByZXNwb25zZS5kYXRhLmFzc2V0TWFwcGVycyk7CiAgICAgICAgICAgIHRoaXMubG9hZGVyRmxhZyA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgICAgICAgIkVycm9yIHdoaWxlIGdldHRpbmcgYXNzZXRzLiBQbGVhc2UgdHJ5IGFnYWluIiwKICAgICAgICAgICAgICAiZXJyb3IiCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDYpIHsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXNjcmlwdGlvbiwgImVycm9yIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyB0aGlzLnNob3dUb2FzdCgiT29wcyBpdHMgbG9vayBsaWtlIG91ciBzZXJ2ZXIgaXMgb2ZmbGluZSIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlICE9PSB1bmRlZmluZWQgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDYpIHsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXNjcmlwdGlvbiwgImVycm9yIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAoKICAgIHNldFN0YXRpY0NvbHVtbigpIHsKICAgICAgbGV0IHN0YXRpY0NvbCA9IHRoaXMudGFibGVDb25maWcuY29sdW1ucy5maWx0ZXIoCiAgICAgICAgKGNvbCkgPT4gY29sLmxhYmVsTmFtZSA9PSAiQXNzZXQgTnVtYmVyIgogICAgICApWzBdOwogICAgICB0aGlzLnBhcmVudFN5c3RlbVNldHRpbmdzLnN0YXRpY0NvbHVtbnMucHVzaChzdGF0aWNDb2wpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zW2ldLmxhYmVsTmFtZSA9PSBzdGF0aWNDb2wubGFiZWxOYW1lKSB7CiAgICAgICAgICB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnMuc3BsaWNlKGksIDEpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy50YWJsZUNvbmZpZy5jb2x1bW5zW2ldLmxhYmVsTmFtZSA9PSAiTWFpbnRlbmFuY2UgQ29zdCIpIHsKICAgICAgICAgIHRoaXMudGFibGVDb25maWcuY29sdW1uc1tpXS5sYWJlbE5hbWUgPQogICAgICAgICAgICB0aGlzLnRhYmxlQ29uZmlnLmNvbHVtbnNbaV0ubGFiZWxOYW1lICsgIiAoIiArIHRoaXMuY3VycmVuY3kgKyAiKSI7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIC0tLS0tLS0tLS0tLUFzc2V0cyBTRFQgRnVuY3Rpb25zIEVORCAtLS0tLS0tLS0tLS0tLQoKICAgIGFzc2V0RGlhbG9nKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJjcmVhdGUtYXNzZXQiIH0pOwogICAgfSwKCiAgICBhc3NldEdyb3VwRGlhbG9nKCkgewogICAgICB0aGlzLnZpZXdBc3NldEdyb3VwRGlhbG9nID0gdHJ1ZTsKICAgIH0sCgogICAgc2VsZWN0QXNzZXRUeXBlKG9iaikgewogICAgICB0aGlzLmFzc2V0T3B0aW9uID0gb2JqLnZhbHVlOwogICAgfSwKCiAgICBjbG9zZUFzc2V0R3JvdXBEaWFsb2coKSB7CiAgICAgIHRoaXMudmlld0Fzc2V0R3JvdXBEaWFsb2cgPSBmYWxzZTsKICAgIH0sCgogICAgc2F2ZVNlcnZpY2VSZXF1ZXN0RGlhbG9nKCkgewogICAgICB0aGlzLmFkZFNlcnZpY2VEaWFsb2cgPSBmYWxzZTsKICAgIH0sCgogICAgY2xvc2VTZXJ2aWNlRGlhbG9nKCkgewogICAgICB0aGlzLmFkZFNlcnZpY2VEaWFsb2cgPSBmYWxzZTsKICAgIH0sCgogICAgY2xvc2VJc3N1ZURpYWxvZygpIHsKICAgICAgdGhpcy5uZXdJc3N1ZSA9IGZhbHNlOwogICAgfSwKCiAgICBzaG93VG9hc3QobWVzc2FnZSwgdHlwZSkgewogICAgICB0aGlzLnRvYXN0TWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgIHRoaXMudG9hc3RUeXBlID0gdHlwZTsKICAgICAgdGhpcy50b2FzdEZsYWcrKzsKICAgICAgdGhpcy5jbG9zZUlzc3VlRGlhbG9nKCk7CiAgICB9LAogIH0sCgogIHdhdGNoOiB7CiAgICBhc3NldE9wdGlvbjogZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChuZXdWYWwgPT0gImFzc2V0LWdyb3VwIikgewogICAgICAgIGxldCBhbGxDb25maWdzID0gSlNPTi5wYXJzZSh0aGlzLm9yZ0NvbmZpZ3NSZXNwb25zZS5kYXRhLnRhYmxlQ29uZmlncyk7CiAgICAgICAgYWxsQ29uZmlncyA9IGFsbENvbmZpZ3MuZmlsdGVyKAogICAgICAgICAgKGRhdGEpID0+IGRhdGEucGFnZU5hbWUgPT09ICJhc3NldGdyb3VwcyIKICAgICAgICApWzBdOwogICAgICAgIHRoaXMuYXNzZXRHcm91cENvbmZpZ3MgPSBhbGxDb25maWdzOwogICAgICB9IGVsc2UgaWYgKG5ld1ZhbCA9PT0gImFyY2hpdmVkQXNzZXRzIikgewogICAgICAgIGxldCBhbGxDb25maWdzID0gSlNPTi5wYXJzZSh0aGlzLm9yZ0NvbmZpZ3NSZXNwb25zZS5kYXRhLnRhYmxlQ29uZmlncyk7CiAgICAgICAgYWxsQ29uZmlncyA9IGFsbENvbmZpZ3MuZmlsdGVyKAogICAgICAgICAgKGRhdGEpID0+IGRhdGEucGFnZU5hbWUgPT09ICJhcmNoaXZlZEFzc2V0cyIKICAgICAgICApWzBdOwogICAgICAgIHRoaXMuYXJjaGl2ZWRBc3NldHNDb25maWdzID0gYWxsQ29uZmlnczsKICAgICAgfQogICAgfSwKICB9LAoKICBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy50b2FzdEZsYWcgPT09IHRydWUpIHsKICAgICAgdGhpcy5zaG93VG9hc3QoCiAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLnRvYXNzdE1lc3NhZ2UsCiAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLnRvYXN0VHlwZQogICAgICApOwogICAgfQogICAgZG9jdW1lbnQudGl0bGUgPSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlOwogICAgdGhpcy5jdXJyZW50VXNlckRldGFpbHMgPSBKU09OLnBhcnNlKAogICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXJEZXRhaWxzIikKICAgICk7CgogICAgLy8gc2VuZGluZyBvbmx5IGZpcnN0IGFuZCBsYXN0IG5hbWUgZm9yIFNEVAogICAgbGV0IG5hbWUgPSB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLnVzZXJuYW1lOwogICAgaWYgKG5hbWUuaW5jbHVkZXMoIkAiKSkgewogICAgICBuYW1lID0gbmFtZS5zcGxpdCgiQCIpOwogICAgICBuYW1lID0gbmFtZVswXTsKICAgIH0KICAgIHRoaXMucGFyZW50U3lzdGVtU2V0dGluZ3MudXNlciA9IG5hbWU7CgogICAgbGV0IHV1aWQgPSB0aGlzLmN1cnJlbnRVc2VyRGV0YWlscy5wcm9maWxlLm9yZ2FuaXphdGlvbklkOwogICAgYXNzZXRQZXJzb25uZWxTZXJ2aWNlCiAgICAgIC5nZXRDb21wYW55Q3VycmVuY3kodXVpZCkKICAgICAgLnRoZW4oKGN1cnJlbmN5UmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmN1cnJlbmN5ID0gY3VycmVuY3lSZXNwb25zZS5kYXRhLmN1cnJlbmN5OwogICAgICAgIGFzc2V0UGVyc29ubmVsU2VydmljZQogICAgICAgICAgLmdldE9yZ0NvbmZpZ3ModXVpZCwgInRhYmxlQ29uZmlncyIpCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgdGhpcy5vcmdDb25maWdzUmVzcG9uc2UgPSByZXNwb25zZTsKICAgICAgICAgICAgbGV0IGFsbENvbmZpZ3MgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEudGFibGVDb25maWdzKTsKICAgICAgICAgICAgYWxsQ29uZmlncyA9IGFsbENvbmZpZ3MuZmlsdGVyKAogICAgICAgICAgICAgIChkYXRhKSA9PiBkYXRhLnBhZ2VOYW1lID09PSAiQXNzZXRzIgogICAgICAgICAgICApWzBdOwogICAgICAgICAgICB0aGlzLnRhYmxlQ29uZmlnID0gYWxsQ29uZmlnczsKICAgICAgICAgICAgdGhpcy5leHRyYWN0RmllbGROYW1lc0ZvclNlYXJjaFF1ZXJ5KHRoaXMudGFibGVDb25maWcpOwogICAgICAgICAgICB0aGlzLnNldFN0YXRpY0NvbHVtbigpOwogICAgICAgICAgICB0aGlzLnNldFRhYmxlQ29uZmlncygpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIGZldGNoaW5nIGNvbmZpZ3MiLCAiZXJyb3IiKTsKICAgICAgICAgIH0pOwogICAgICB9KQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgdGhpcy5zaG93VG9hc3QoIkVycm9yIGZldGNoaW5nIGNvbXBhbnkgY3VycmVuY3kiLCAiZXJyb3IiKTsKICAgICAgfSk7CiAgfSwKCiAgdmFsaWRhdGlvbnM6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7fTsKICB9LAoKICBjb21wdXRlZDoge30sCn07Cg=="},null]}